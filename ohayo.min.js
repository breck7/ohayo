var $jscomp$templatelit$26=["Delete row"];$jscomp$templatelit$26.raw=["Delete row"];var $jscomp$templatelit$25=["Ok"];$jscomp$templatelit$25.raw=["Ok"];var $jscomp$templatelit$24=["Cancel"];$jscomp$templatelit$24.raw=["Cancel"];var $jscomp$templatelit$23=["Adding..."];$jscomp$templatelit$23.raw=["Adding..."];var $jscomp$templatelit$22=["Keyboard Shortcuts"];$jscomp$templatelit$22.raw=["Keyboard Shortcuts"];var $jscomp$templatelit$21=["ohayo"];$jscomp$templatelit$21.raw=["ohayo"];
var $jscomp$templatelit$20=["Copied old version to clipboard"];$jscomp$templatelit$20.raw=["Copied old version to clipboard"];var $jscomp$templatelit$19=["",""];$jscomp$templatelit$19.raw=["",""];var $jscomp$templatelit$18=["ohayo"];$jscomp$templatelit$18.raw=["ohayo"];var $jscomp$templatelit$17=["ohayo"];$jscomp$templatelit$17.raw=["ohayo"];var $jscomp$templatelit$16=["",""];$jscomp$templatelit$16.raw=["",""];var $jscomp$templatelit$15=["Click to sort."];$jscomp$templatelit$15.raw=["Click to sort."];
var $jscomp$templatelit$14=["",""];$jscomp$templatelit$14.raw=["",""];var $jscomp$templatelit$13=["",""];$jscomp$templatelit$13.raw=["",""];var $jscomp$templatelit$12=["My programs"];$jscomp$templatelit$12.raw=["My programs"];var $jscomp$templatelit$11=["Layout set to '","'"];$jscomp$templatelit$11.raw=["Layout set to '","'"];var $jscomp$templatelit$10=["Items cut"];$jscomp$templatelit$10.raw=["Items cut"];var $jscomp$templatelit$9=["Items copied"];$jscomp$templatelit$9.raw=["Items copied"];
var $jscomp$templatelit$8=["dragOverHelp"];$jscomp$templatelit$8.raw=["dragOverHelp"];var $jscomp$templatelit$7=["dragOverHelp"];$jscomp$templatelit$7.raw=["dragOverHelp"];var $jscomp$templatelit$6=["Drop to create a new program. Hold shift key to insert rows into current program."];$jscomp$templatelit$6.raw=["Drop to create a new program. Hold shift key to insert rows into current program."];var $jscomp$templatelit$5=["Are you sure you want to delete ","?"];
$jscomp$templatelit$5.raw=["Are you sure you want to delete ","?"];var $jscomp$templatelit$4=["Switched to "," theme"];$jscomp$templatelit$4.raw=["Switched to "," theme"];var $jscomp$templatelit$3=["Autosave is ",""];$jscomp$templatelit$3.raw=["Autosave is ",""];var $jscomp$templatelit$2=["Enter a url to open"];$jscomp$templatelit$2.raw=["Enter a url to open"];var $jscomp$templatelit$1=["Created '","'"];$jscomp$templatelit$1.raw=["Created '","'"];var $jscomp=$jscomp||{};$jscomp.scope={};
$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof e?a:new e(function(b,c){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){d(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];delete a[b];try{c()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(k){b.reject(k)}};e.prototype.createResolveAndReject_=
function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(k){this.reject_(k);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var f=new b;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(l){c.reject(l)}};e.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{d(a(b))}catch(r){f(r)}}:b}var d,f,g=new e(function(a,
b){d=a;f=b});this.callWhenSettled_(c(a,d),c(b,f));return g};e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(function(){f.asyncExecute(c)})};e.resolve=c;e.reject=function(a){return new e(function(b,c){c(a)})};e.race=function(a){return new e(function(b,
d){for(var e=$jscomp.makeIterator(a),f=e.next();!f.done;f=e.next())c(f.value).callWhenSettled_(b,d)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?c([]):new e(function(a,e){function f(b){return function(c){g[b]=c;h--;0==h&&a(g)}}var g=[],h=0;do g.push(void 0),h++,c(d.value).callWhenSettled_(f(g.length-1),e),d=b.next();while(!d.done)})};return e},"es6-impl","es3");
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=b.length,f=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var g=0;g<f&&c<e;)if(b[c++]!=a[g++])return!1;return g>=f}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");
$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;for(c=c||0;c<e;c++)if(b[c]==a||Object.is(b[c],a))return!0;return!1}},"es7","es3");
$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6-impl","es3");$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill("WeakMap",function(a){function b(a){$jscomp.owns(a,d)||$jscomp.defineProperty(a,d,{value:{}})}function c(a){var c=Object[a];c&&(Object[a]=function(a){b(a);return c(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(l){return!1}}())return a;var d="$jscomp_hidden_"+Math.random().toString().substring(2);c("freeze");c("preventExtensions");
c("seal");var e=0,f=function(a){this.id_=(e+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};f.prototype.set=function(a,c){b(a);if(!$jscomp.owns(a,d))throw Error("WeakMap key fail: "+a);a[d][this.id_]=c;return this};f.prototype.get=function(a){return $jscomp.owns(a,d)?a[d][this.id_]:void 0};f.prototype.has=function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)};f.prototype.delete=
function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)?delete a[d][this.id_]:!1};return f},"es6-impl","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(q){return!1}}())return a;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var b=new WeakMap,c=function(a){this.data_={};this.head_=f();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};c.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};c.prototype.delete=
function(a){a=d(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};c.prototype.has=function(a){return!!d(this,a).entry};c.prototype.get=function(a){return(a=d(this,a).entry)&&a.value};c.prototype.entries=function(){return e(this,function(a){return[a.key,
a.value]})};c.prototype.keys=function(){return e(this,function(a){return a.key})};c.prototype.values=function(){return e(this,function(a){return a.value})};c.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var d=function(a,c){var d=c&&typeof c;"object"==d||"function"==d?b.has(c)?d=b.get(c):(d=""+ ++g,b.set(c,d)):d="p_"+c;var e=a.data_[d];if(e&&$jscomp.owns(a.data_,d))for(a=0;a<e.length;a++){var f=
e[a];if(c!==c&&f.key!==f.key||c===f.key)return{id:d,list:e,index:a,entry:f}}return{id:d,list:e,index:-1,entry:void 0}},e=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},f=function(){var a={};return a.previous=a.next=a.head=a},g=0;return c},"es6-impl","es3");
$jscomp.polyfill("Object.values",function(a){return a?a:function(a){var b=[],d;for(d in a)$jscomp.owns(a,d)&&b.push(a[d]);return b}},"es8","es3");$jscomp.polyfill("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e)for(var f in e)$jscomp.owns(e,f)&&(a[f]=e[f])}return a}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var e=a.length;0<e&&0<c;)if(b[--c]!=a[--e])return!1;return 0>=e}},"es6-impl","es3");var AC=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(AC,TreeNotation);AC.prototype.getApp=function(){return this.getRootNode()};AC.prototype.getStump=function(){return this._htmlStump};
AC.prototype._stopPropagationCommand=function(){};AC.prototype.getHakon=function(){return""};AC.prototype.getTheme=function(){return this.getApp().getTheme()};AC.prototype.unmount=function(){this.isMounted()&&(this._getChildContainers().forEach(function(a){return a.unmount()}),this.componentWillUnmount(),this._cssStump.remove(),this._htmlStump.remove(),delete this._htmlStump,delete this._cssStump,delete this._rtime,this.componentDidUnmount())};AC.prototype.getBaseHtml=function(a){return a};
AC.prototype._confirmAndUnmountCommand=function(){var a=this;return(this.hasChanges()?this.getApp().confirm("Discard changes?"):Promise.resolve(!0)).then(function(b){if(!b)return!1;a.unmountAndDestroy();a.getApp().renderApp()})};AC.prototype.getBray=function(){return""};AC.prototype._getInnerHtml=function(){var a=this.getBray(),a=a?(new Bray(a)).toHtml():this.getHtml();return{css:this.getTheme().hakonToCss(this.getHakon()),html:this.getBaseHtml(a)}};AC.prototype.componentWillMount=function(){};
AC.prototype.componentDidMount=function(){void 0===AC._mountedComponents&&(AC._mountedComponents=0);AC._mountedComponents++};AC.prototype.componentDidUnmount=function(){AC._mountedComponents--};AC.prototype.componentWillUnmount=function(){};AC.prototype.forceUpdate=function(){};AC.prototype.getNewestTimeToRender=function(){return this._lastTimeToRender};AC.prototype._setRTime=function(a){this._rtime=a;return this};
AC.prototype._update=function(){if(!this.shouldComponentUpdate())return this;this._setRTime(this._getNow());var a=this._getInnerHtml();this._cssStump.html(a.css);if(!this.hasChildren())return this._htmlStump.html(a.html),this.componentDidUpdate(),this._lastTimeToRender=this._getNow()-this.getRTime(),this};AC.prototype.getAttributes=function(){return""};AC.prototype.getClasses=function(){return"AC "+this.constructor.name};AC.prototype.componentDidUpdate=function(){};
AC.prototype._getChildContainers=function(){return this.getChildren().filter(function(a){return a instanceof AC})};AC.prototype.makeAllDirty=function(){this.makeDirty();this._getChildContainers().forEach(function(a){return a.makeAllDirty()})};AC.prototype.hasChildren=function(){return 0<this._getChildContainers().length};AC.prototype.getStumpForChildren=function(){return this.getStump()};
AC.prototype._renderChildren=function(){var a=this.getStumpForChildren();this._getChildContainers().filter(function(a){return a.isMounted()||a.shouldComponentMount()}).forEach(function(b,c){return b.render(a,c)})};AC.prototype.getRTime=function(){return this._rtime};AC.prototype.makeDirty=function(){this._setRTime(0)};
AC.prototype._mount=function(a,b){if(!this.shouldComponentMount())return this;this._setRTime(this._getNow());this.componentWillMount();var c=this._getInnerHtml(),d=this.getApp().getFakeDom();this._cssStump=d.makeStumpFromString("<style>"+c.css+"</style>");this._htmlStump=d.makeStumpFromString("<div "+this.getAttributes()+' class="'+this.getClasses()+'">'+c.html+"</div>");a.append(this._cssStump);void 0===b?a.append(this._htmlStump):0===b?a.prepend(this._htmlStump):this._htmlStump.insertAfter(a.children().get(b));
this._htmlStump.data("container",this);this._lastTimeToRender=this._getNow()-this.getRTime();this.componentDidMount();return this};AC.prototype.unmountAndDestroy=function(){this.unmount();return this.destroy()};AC.prototype.toggle=function(a,b){var c=this.getNode(a);if(!b)return c?c.unmountAndDestroy():this.append(a);c=void 0===c?void 0:c.getTail();c=b.indexOf(c);b=-1===c||c+1===b.length?b[0]:b[c+1];this.delete(a);b&&this.touchNode(a).setTail(b);return b};AC.prototype.isMounted=function(){return!!this._htmlStump};
AC.prototype.getNextOrPrevious=function(a){var b=a.length,c=a.indexOf(this);if(1!==b)return c===b-1?a[c-1]:a[c+1]};AC.prototype.toggleAndRender=function(a,b){this.toggle(a,b);this.getApp().renderApp();return Promise.resolve()};AC.prototype.appendAndRender=function(a,b){this.append(a,b);this.getApp().renderApp();return Promise.resolve()};AC.prototype.shouldComponentUpdate=function(){return!this.getRTime()||this.getRTime()<(this.getMTime()||0)};AC.prototype.shouldComponentMount=function(){return!0};
AC.prototype.render=function(a,b){this.isMounted()?this._update():this._mount(a,b);this.isMounted()&&this._renderChildren();return this};window.AC=AC;var AbstractRow=function(a,b){this._puid=this._getUniqueId();this._sourceObject=a?a:{};this._plane=b};AbstractRow.prototype._getUniqueId=function(){void 0===AbstractRow._uniqueId&&(AbstractRow._uniqueId=0);AbstractRow._uniqueId++;return AbstractRow._uniqueId};AbstractRow.prototype.destroy=function(){};AbstractRow.prototype._getRowPlane=function(){return this._plane};
AbstractRow.prototype.getRowApp=function(){return this.getRowBlock().getApp()};AbstractRow.prototype.getRowBlock=function(){return this._getRowPlane().getPlaneBlock()};AbstractRow.prototype.destroyRowCommand=function(){return Promise.resolve()};AbstractRow.prototype.getRowSourceAsObject=function(){return this.getRowSource()};AbstractRow.prototype.getAsArray=function(a){var b=this.getRowNumeric();return a.map(function(a){return b[a]})};AbstractRow.prototype.getRowSource=function(){return this._sourceObject};
AbstractRow.prototype._parseNumeric=function(){var a=this,b=this._getRowPlane().getColumnsMap(),c={};Object.keys(b).forEach(function(d){var e=b[d],f=a.getRowValue(d);void 0===f&&(f="");c[d]=""===f?"":e.getType().fromStringToNumeric(f)});return c};AbstractRow.prototype.getRowNumeric=function(){this._numeric||(this._numeric=this._parseNumeric());return this._numeric};AbstractRow.prototype.getRowKeys=function(){return Object.keys(this.getRowSource())};
AbstractRow.prototype.getRowValue=function(a){a=this.getRowSource()[a];return null===a?"":a};AbstractRow.prototype.setRowValue=function(a,b){this.getRowSource()[a]=b;return this};AbstractRow.prototype.reloadFromStr=function(a){var b=this.getRowSource();Object.keys(b).forEach(function(a){return delete b[a]});var c=JSON.parse(a);Object.keys(c).forEach(function(a){return b[a]=c[a]})};AbstractRow.prototype.deleteFromRow=function(a){delete this.getRowSource()[a];return this};
AbstractRow.prototype.getPuid=function(){return this._puid};AbstractRow.prototype.renameRow=function(a,b){var c=this.getRowSource();c[b]=c[a];delete c[a];return this};AbstractRow.prototype.rowToString=function(){return JSON.stringify(this.getRowSource(),null,2)};window.AbstractRow=AbstractRow;var BrayContentNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(BrayContentNode,TreeNotation);BrayContentNode.prototype._toHtml=function(){return this.getTailWithChildren()};
var BrayAttributeNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(BrayAttributeNode,TreeNotation);BrayAttributeNode.prototype._toHtml=function(){return""};BrayAttributeNode.prototype.getAttribute=function(){return" "+this.getHead()+'="'+this.getTail()+'"'};var Bray=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(Bray,TreeNotation);Bray.prototype.getTag=function(){return this.getWord(1)};
Bray.prototype.parseNodeType=function(a){return a.startsWith("@")?Bray:a.startsWith("content")?BrayContentNode:BrayAttributeNode};Bray.prototype.getId=function(){return this.getWord(2)};Bray.prototype.getClasses=function(){return this.getWords(3).join(" ")};Bray.prototype.getChildInstances=function(a){return this.getChildren().filter(function(b){return b instanceof a})};
Bray.prototype._toHtml=function(a){var b=this.getTag(),c=this.getChildren().map(function(b){return b._toHtml(a+1)}).join(""),d=this.getChildInstances(BrayAttributeNode).map(function(a){return a.getAttribute()}).join(""),e=this.getId(),f=this.getClasses(),e=e?' id="'+e+'"':"",f=f?' class="'+f+'"':"";return" ".repeat(a)+"<"+b+e+f+d+">"+c+"</"+b+">\n"};window.Bray=Bray;var Column=function(a,b){this._obj=a;this._plane=b};Column.prototype.getColumnName=function(){return this._obj.name};
Column.prototype.isInvalidValue=function(a){return this.getType().isInvalidValue(a)};Column.prototype._getSample=function(){if(void 0===this._sample){var a=this._getSampleSet();this._sample=a.length?a[0].getRowValue(this.getColumnName()):""}return this._sample};Column.prototype._getObject=function(){return this._obj};Column.prototype.getType=function(){this._type||(this._type=this._inferType());return this._type};Column.prototype.isNumericMS=function(){return this.getType().isNumericMS()};
Column.prototype.isInt=function(){return this.getType().isInt()};Column.prototype.isTemporal=function(){return this.getType().isTemporal()};Column.prototype.toDisplayString=function(a){return this.getType().toDisplayString(a,this.getFormat())};Column.prototype.isString=function(){return this.getType().isString()};Column.prototype.isHash=function(){return this.isString()&&!1};
Column.prototype.getEntropy=function(){if(void 0!==this._entropy)return this._entropy;var a={},b=1,c=this.getColumnName();this._getSampleSet().forEach(function(d){d=d.getRowValue(c);a[d]||(b++,a[d]=!0)});return this._entropy=b};Column.prototype.isLink=function(){if(void 0!==this._isLink)return this._isLink;var a=this._getSample();this.isString()&&a&&a.match?this._isLink=a.match(/^(http\:|\/)/)?1:0:this._isLink=!1;return this._isLink};Column.prototype._getPlane=function(){return this._plane};
Column.prototype._getSampleSet=function(){return this._getPlane().getSampleSet()};Column.prototype.isUnique=function(){return this.getEntropy()-1===this._getSampleSet().length};Column.prototype.setRank=function(a){this._rank=a};Column.prototype.getRank=function(){return this._rank};
Column.prototype.getTitlePotential=function(){if(this._obj.title)return 1;if(void 0!==this._titlePotential)return this._titlePotential;var a={title:.99,name:.98,label:.97,category:.96},b=this.getColumnName();a[b]?this._titlePotential=a[b]:150<this.getEstimatedTextLength()?this._titlePotential=.01:this.isString()&&!this.isLink()&&this.isUnique()&&!this.isHash()?this._titlePotential=.75:this._titlePotential=0;return this._titlePotential};
Column.prototype.getEstimatedTextLength=function(){if(!this.isString())return 0;if(void 0!==this._estimatedTextLength)return this._estimatedTextLength;var a=this.getColumnName(),b=this._getSampleSet(),c=b.map(function(b){return b.getRowValue(a)&&b.getRowValue(a).length}).reduce(function(a,b){return a+b},0);return this._estimatedTextLength=Math.floor(c/b.length)};Column.prototype.getAlias=function(){return this._obj.alias?this._obj.alias:this.getColumnName()};
Column.prototype.getFormat=function(){return this._obj.format?this._obj.format:this.getType().getDefaultFormat(this.getColumnName(),this._getSample())};Column.prototype.getMissingDataPercentage=function(){var a=0,b=this.getColumnName(),c=this._getSampleSet();c.forEach(function(c){c=c.getRowValue(b);void 0!==c&&""!==c||a++});return a/(c.length||1)};Column.prototype.getMap=function(){var a=this._map;return a?a:this._map=this._getVector().set};
Column.prototype._getVector=function(){this._vector||(this._vector=this._createVector());return this._vector};Column.prototype._createVector=function(){var a=this,b=[],c=this.getColumnName(),d={},e=0,f=0;this._getPlane().getColumnNumericVector(c).forEach(function(c){if(a.isInvalidValue(c))return e++,!0;d[c]?d[c].count++:(d[c]={count:0,index:0},f++);b.push(c)});return{set:d,values:b,incompleteCount:e,uniqueValues:f}};
Column.prototype.getQuintiles=function(){var a=this.getReductions().deciles;return[20,40,60,80,100].map(function(b){return{value:a[b],percent:b/100}})};Column.prototype.getTypeName=function(){return this.getType().getColumnTypeName()};
Column.prototype.toObject=function(){return{name:this.getColumnName(),type:this.getTypeName(),rank:this.getRank(),reduction:this._getObject().reduction,titlePotential:this.getTitlePotential(),isString:this.isString(),isTemporal:this.isTemporal(),isLink:this.isLink(),estimatedTextLength:this.getEstimatedTextLength()}};Column.prototype._getNumericallySortedValuesInIncreasingOrder=function(){var a=this._getVector().values.slice();a.sort(function(a,c){return a>c?1:a<c?-1:0});return a};
Column.prototype.getReductions=function(){this._reductions||(this._reductions=this._getReductionResult(this._getVector(),this));return this._reductions};Column.prototype.getMin=function(){return this.getReductions().min};Column.prototype.getMax=function(){return this.getReductions().max};Column.roundTo=function(a,b){return parseFloat(a.toFixed(b))};
Column.prototype._getReductionResult=function(a,b){var c=a.values,d=c.length,e={};e.incompleteCount=a.incompleteCount;e.uniqueValues=a.uniqueValues;if(!d)return e;a=function(a,b){return a>b?1:a<b?-1:0};var f=c.slice();b.isString()?f.sort():f.sort(a);c=f[0];a=f[0];for(var g=0,h=void 0,k=0,l=void 0,n=0,q=0;q<d;q++){var m=f[q],g=g+m;m>a&&(a=m);m<c&&(c=m);m===l?n++:(l=m,n=1);n>k&&(k=n,h=l)}l=Math.floor(d/2);e.count=d;e.sum=g;e.median=f[l];e.average=g/d;e.min=c;e.max=a;e.range=a-c;e.mode=h;e.modeSize=
k;b.isString()?(e.sum=void 0,e.average=void 0):b.isTemporal()&&(e.sum=void 0);e.deciles={};[10,20,30,40,50,60,70,80,90,99,100].forEach(function(a){var b=Math.floor(a/100*d),b=b===d?b-1:b;e.deciles[a]=f[b]});return e};
Column.prototype._inferType=function(){var a=this._getObject(),b=this.getColumnName(),c=this._getSample();if(a&&a.type&&ColumnTypes[a.type])return ColumnTypes[a.type];var a={number:.5,date:.25,string:.75,feet:.01,object:.1,boolean:.02},d=!isNaN(parseFloat(c))||ColumnTypes.usd.is(c),e=ColumnTypes.date.is(c);"object"===typeof c&&(a.object=.9);if(!0===c||!1===c)a.boolean=.96;b.match(/(team|name|link|image|description|permalink|title|label|status|thumb|ip|useragent)/i)&&(a.string=.95);b.match(/(gender|region|category|group|section|sector|field)/i)&&
(a.string=.95);b.match(/(height|length)/i)&&c.toString().match(/[0-9]+(\'|\-)[0-9\.]+/)&&ColumnTypes.feet.is(c)&&(a.feet=.97);a.number=d?.8:.1;if(ColumnTypes.usd.is(c)||!isNaN(c)&&b.match(/^(price|income|cost|revenue|budget|profit|amount|balance)$/i))a.usd=.99;d&&b.match(/(year|born)/i)&&4===c.length&&(a.year=.99);d&&b.match(/(time|second|created|edited)/i)&&10===c.length&&(a.second=.99);d&&b.match(/(time|second)/i)&&13===c.length&&(a.microsecond=.99);b.match(/(year|date|dob|birthday|day|month|time|birthdate)/i)&&
e&&(a.date=.98);"string"===typeof c&&100<c.length&&(a.string=.98);var b=0,d=null,f;for(f in a)a[f]>b&&(b=a[f],d=f);"number"===d&&"string"===typeof c&&c.match(",")&&(d="numberString");"date"===d&&"string"===typeof c&&ColumnTypes.day.is(c)&&(d="day");return ColumnTypes[d]};window.Column=Column;var ColumnSpecimen=function(){};window.ColumnSpecimen=ColumnSpecimen;moment.createFromInputFallback=function(a){a._d=new Date(a._i)};var AbstractColType=function(){};
AbstractColType.prototype.toDisplayString=function(a){return a};AbstractColType.prototype.fromStringToNumeric=function(a){return a};AbstractColType.prototype.getDefaultFormat=function(){};AbstractColType.prototype.isTemporal=function(){return!1};AbstractColType.prototype.isString=function(){return!1};AbstractColType.prototype.isInt=function(){return!1};AbstractColType.prototype._setName=function(a){this._name=a;return this};AbstractColType.prototype.getColumnTypeName=function(){return this._name};
AbstractColType.prototype.isNumericMS=function(){return!1};AbstractColType.prototype.isInvalidValue=function(a){return void 0===a||""===a?!0:!1};var AbstractNumeric=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractNumeric,AbstractColType);AbstractNumeric.prototype.fromStringToNumeric=function(a){return parseFloat(a)};AbstractNumeric.prototype.isInvalidValue=function(a){return AbstractColType.prototype.isInvalidValue.call(this,a)||isNaN(a)};
var AbstractTemporal=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractTemporal,AbstractColType);AbstractTemporal.prototype.fromStringToMoment=function(a){return moment(parseInt(a))};AbstractTemporal.prototype.isTemporal=function(){return!0};var AbstractCurrency=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractCurrency,AbstractColType);var DateCol=function(a){AbstractTemporal.apply(this,arguments)};$jscomp.inherits(DateCol,AbstractTemporal);
DateCol.prototype.toDisplayString=function(a,b){b||(b="MM/DD/YY");return"fromNow"===b?moment(parseFloat(a)).fromNow():moment(a).format(b)};DateCol.prototype.fromStringToNumeric=function(a){return 1E3*GetDate.getDate(a).unix()};DateCol.prototype.isNumericMS=function(){return!0};DateCol.prototype.fromStringToMoment=function(a){return GetDate.getDate(a)};DateCol.prototype.is=function(a){return GetDate.getDate(a).isValid()};var AbstractInt=function(a){AbstractColType.apply(this,arguments)};
$jscomp.inherits(AbstractInt,AbstractColType);AbstractInt.prototype.isInt=function(){return!0};AbstractInt.prototype.fromStringToNumeric=function(a){return parseInt(a)};var Int=function(a){AbstractInt.apply(this,arguments)};$jscomp.inherits(Int,AbstractInt);var AbstractTemporalInt=function(a){AbstractInt.apply(this,arguments)};$jscomp.inherits(AbstractTemporalInt,AbstractInt);var AbstractMicrosecond=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(AbstractMicrosecond,AbstractTemporalInt);
AbstractMicrosecond.prototype.toDisplayString=function(a,b){return"fromNow"===b?moment(parseFloat(a)).fromNow():a};AbstractMicrosecond.prototype.isNumericMS=function(){return!0};AbstractMicrosecond.prototype.getDefaultFormat=function(){return"fromNow"};var Microsecond=function(a){AbstractMicrosecond.apply(this,arguments)};$jscomp.inherits(Microsecond,AbstractMicrosecond);var Second=function(a){AbstractMicrosecond.apply(this,arguments)};$jscomp.inherits(Second,AbstractMicrosecond);
Second.prototype.fromStringToNumeric=function(a){return 1E3*parseInt(a)};var Day=function(a){AbstractTemporal.apply(this,arguments)};$jscomp.inherits(Day,AbstractTemporal);Day.prototype.toDisplayString=function(a,b){return moment(a).format(b||"MM/DD/YYYY")};Day.prototype.fromStringToNumeric=function(a){return 1E3*GetDate.getDate(a).startOf("day").unix()};Day.prototype.fromStringToMoment=function(a){return GetDate.getDate(a).startOf("day")};
Day.prototype.fromMomentToNumeric=function(a){return 1E3*a.startOf("day").unix()};Day.prototype.is=function(a){a=moment.parseFormat?moment.parseFormat(a):parseFormat;return"MM/DD/YY"===a||"MM/DD/YYYY"===a||"M/D/YYYY"===a};var Week=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(Week,AbstractTemporalInt);Week.prototype.toDisplayString=function(a,b){return moment(a).format("MM/DD/YYYY - WW")};Week.prototype.fromMomentToNumeric=function(a){return 1E3*a.startOf("week").unix()};
Week.prototype.isNumericMS=function(){return!0};var Month=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(Month,AbstractTemporalInt);Month.prototype.toDisplayString=function(a,b){return moment(a).format(b||"MMMM")};Month.prototype.fromMomentToNumeric=function(a){return 1E3*a.startOf("month").unix()};Month.prototype.isNumericMS=function(){return!0};var Hour=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(Hour,AbstractTemporalInt);
Hour.prototype.toDisplayString=function(a,b){return a};Hour.prototype.fromMomentToNumeric=function(a){return parseInt(a.startOf("hour").format("H"))};var HourMinute=function(a){AbstractTemporal.apply(this,arguments)};$jscomp.inherits(HourMinute,AbstractTemporal);HourMinute.prototype.toDisplayString=function(a){return a};HourMinute.prototype.fromStringToNumeric=function(a){return parseFloat(GetDate.getDate(value).format("H.m"))};var Minute=function(a){AbstractTemporal.apply(this,arguments)};
$jscomp.inherits(Minute,AbstractTemporal);Minute.prototype.toDisplayString=function(a,b){return moment(a).format("m")};Minute.prototype.fromStringToNumeric=function(a){return 1E3*GetDate.getDate(a).startOf("minute").unix()};var Year=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(Year,AbstractTemporalInt);Year.prototype.fromMomentToNumeric=function(a){return parseInt(a.format("YYYY"))};var Feet=function(a){AbstractNumeric.apply(this,arguments)};$jscomp.inherits(Feet,AbstractNumeric);
Feet.prototype.is=function(a){return!isNaN(FeetToInches(a))};Feet.prototype.fromStringToNumeric=function(a){return FeetToInches(a)};Feet.prototype.toDisplayString=function(a,b){a=parseFloat(a);return Math.floor(a/12)+"'"+Math.round(a%12)+'"'};var USD=function(a){AbstractCurrency.apply(this,arguments)};$jscomp.inherits(USD,AbstractCurrency);USD.prototype.toDisplayString=function(a,b){return b?numeral(a).format(b):a};
USD.prototype.fromStringToNumeric=function(a){return parseFloat(a.toString().replace(/[\$\, \%]/g,""))};USD.prototype.is=function(a){return a&&a.match&&!!a.match(/^\$[0-9\.\,]+$/)};USD.prototype.getDefaultFormat=function(){return"$(0a)"};var NumberCol=function(a){AbstractNumeric.apply(this,arguments)};$jscomp.inherits(NumberCol,AbstractNumeric);
NumberCol.prototype.toDisplayString=function(a,b){return"percent"===b?numeral(parseFloat(a)).format("0.00")+"%":b&&!isNaN(a)&&Infinity!==a?numeral(a).format(b):a};NumberCol.prototype.getDefaultFormat=function(a,b){if(a.match(/^(mile|pound|inch|feet)s?$/i))return"0.0";if(a.match(/^(calorie|steps)s?$/i)||b&&!b.toString().includes("."))return"0,0"};var NumberString=function(a){AbstractNumeric.apply(this,arguments)};$jscomp.inherits(NumberString,AbstractNumeric);
NumberString.prototype.toDisplayString=function(a,b){return b?numeral(a).format(b):a};NumberString.prototype.getDefaultFormat=function(){return"0,0"};NumberString.prototype.fromStringToNumeric=function(a){return parseFloat(a.toString().replace(/[\$\, \%]/g,""))};var AbstractStringCol=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractStringCol,AbstractColType);AbstractStringCol.prototype.isString=function(){return!0};
var StringCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(StringCol,AbstractStringCol);var UrlCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(UrlCol,AbstractStringCol);var TextCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(TextCol,AbstractStringCol);var AbstractCodeCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(AbstractCodeCol,AbstractStringCol);
var CodeCol=function(a){AbstractCodeCol.apply(this,arguments)};$jscomp.inherits(CodeCol,AbstractCodeCol);var HTMLCol=function(a){AbstractCodeCol.apply(this,arguments)};$jscomp.inherits(HTMLCol,AbstractCodeCol);var AbstractPathCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(AbstractPathCol,AbstractStringCol);var PathCol=function(a){AbstractPathCol.apply(this,arguments)};$jscomp.inherits(PathCol,AbstractPathCol);var DirCol=function(a){AbstractPathCol.apply(this,arguments)};
$jscomp.inherits(DirCol,AbstractPathCol);var ObjectCol=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(ObjectCol,AbstractColType);var BooleanCol=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(BooleanCol,AbstractColType);BooleanCol.prototype.fromStringToNumeric=function(a){return"true"===a.toString()?1:0};
var ColumnTypes={microsecond:Microsecond,second:Second,date:DateCol,day:Day,week:Week,month:Month,hour:Hour,hourMinute:HourMinute,minute:Minute,year:Year,feet:Feet,usd:USD,number:NumberCol,numberString:NumberString,string:StringCol,text:TextCol,path:PathCol,dir:DirCol,code:CodeCol,html:HTMLCol,url:UrlCol,object:ObjectCol,boolean:BooleanCol,int:Int};Object.keys(ColumnTypes).forEach(function(a){ColumnTypes[a]=new ColumnTypes[a];ColumnTypes[a]._setName(a)});window.ColumnTypes=ColumnTypes;
var CompileTimeError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(CompileTimeError,Error);var ProgramFetchError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(ProgramFetchError,Error);var ProgramSaveError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(ProgramSaveError,Error);
var BlockFetchDataError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(BlockFetchDataError,Error);var AbstractRowError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(AbstractRowError,Error);var ProgramLoadError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(ProgramLoadError,Error);
var ProgramCreateError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(ProgramCreateError,Error);var ThisShouldNeverHappenError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(ThisShouldNeverHappenError,Error);var ErrorKinds={};ErrorKinds.BlockFetchData=BlockFetchDataError;ErrorKinds.ProgramFetch=ProgramFetchError;ErrorKinds.ProgramCreateError=ProgramCreateError;
ErrorKinds.ProgramLoadError=ProgramLoadError;ErrorKinds.ThisShouldNeverHappenError=ThisShouldNeverHappenError;window.ErrorKinds=ErrorKinds;var FakeElement=function(){this.location={}};FakeElement.prototype.setAttribute=function(){};FakeElement.prototype.click=function(){};FakeElement.prototype.addEventListener=function(){};FakeElement.prototype.open=function(){};var FakeIpc=function(){};FakeIpc.prototype.on=function(){};FakeIpc.prototype.send=function(){};var FakeHistory=function(){};
FakeHistory.prototype.replaceState=function(){};var FakeStore=function(){this._values={}};FakeStore.prototype.get=function(a){return this._values[a]};FakeStore.prototype.set=function(a,b){this._values[a]=b;return this};FakeStore.prototype.remove=function(a){delete this._values[a]};FakeStore.prototype.each=function(a){var b=this;Object.keys(this._values).forEach(function(c){a(b._values[c],c)})};FakeStore.prototype.clearAll=function(){this._values={}};var FakeMousetrap=function(){this.prototype={}};
FakeMousetrap.prototype.bind=function(){};var FakeStump=function(){};FakeStump.prototype.closest=function(){return this};FakeStump.prototype.remove=function(){return this};FakeStump.prototype.data=function(){return this};FakeStump.prototype.addClass=function(){return this};FakeStump.prototype.removeClass=function(){return this};FakeStump.prototype.append=function(){return this};FakeStump.prototype.children=function(){return new FakeStump};FakeStump.prototype.get=function(){return new FakeStump};
FakeStump.prototype.insertAfter=function(){return this};FakeStump.prototype.each=function(){return this};FakeStump.prototype.hide=function(){return this};FakeStump.prototype.selectable=function(){return this};FakeStump.prototype.css=function(){return this};FakeStump.prototype.width=function(){return 100};FakeStump.prototype.height=function(){return 100};FakeStump.prototype.val=function(){return""};FakeStump.prototype.parent=function(){return new FakeStump};FakeStump.prototype.focus=function(){return this};
FakeStump.prototype.find=function(){return new FakeStump};FakeStump.prototype.typeahead=function(){return this};FakeStump.prototype.bind=function(){return this};FakeStump.prototype.prepend=function(){return this};FakeStump.prototype.html=function(){return this};FakeStump.prototype.on=function(){return this};var AbstractDom=function(a){this._baseUrl=a||""};AbstractDom.prototype._makeStumpFromElement=function(a){return new FakeStump(a)};AbstractDom.prototype.toggleFullScreen=function(){};
AbstractDom.prototype.getMousetrap=function(){return new FakeMousetrap};AbstractDom.prototype.getStore=function(){this._store||(this._store=new FakeStore);return this._store};AbstractDom.prototype.getBodyStump=function(){return new FakeStump};AbstractDom.prototype.someInputHasFocus=function(){return!1};AbstractDom.prototype.isNode=function(){return"undefined"!==typeof exports};AbstractDom.prototype.copyTextToClipboard=function(){};AbstractDom.prototype.getFocusedStump=function(){return new FakeStump};
AbstractDom.prototype.setHeaders=function(a){this._headers=a;return this};AbstractDom.prototype.getWindowNamespace=function(){return{}};AbstractDom.prototype.getBaseUrlNoSlash=function(){return this.getBaseUrl().replace(/\/$/,"")};AbstractDom.prototype.setCopyData=function(a,b){};AbstractDom.prototype.getBaseUrl=function(){return this._baseUrl};AbstractDom.prototype._normalizeUrl=function(a){return a.startsWith("http://")||a.startsWith("https://")?a:this.getBaseUrlNoSlash()+a};
AbstractDom.prototype.get=function(a,b){a=this._normalizeUrl(a);return superagent.get(a).query(b).set(this._headers||{}).then(function(a){return a.body||a.text})};AbstractDom.prototype.post=function(a,b){a=this._normalizeUrl(a);return superagent.post(a).set(this._headers||{}).send(b).then(function(a){return a.body||a.text})};AbstractDom.prototype.getLocationHash=function(){return this.getLocation().hash||""};AbstractDom.prototype.getLocation=function(){return this.getWindowElement().location};
AbstractDom.prototype.createElement=function(){return new FakeElement};AbstractDom.prototype.encodeURIComponent=function(a){return encodeURIComponent(a)};AbstractDom.prototype.getWindowElement=function(){this._windowElement||(this._windowElement=new FakeElement);return this._windowElement};AbstractDom.prototype.getWindowStump=function(){return this._makeStumpFromElement(this.getWindowElement())};AbstractDom.prototype.getDocumentStump=function(){return this._makeStumpFromElement(this.getDocumentElement())};
AbstractDom.prototype.getHtmlStump=function(){return this._makeStumpFromElement(new FakeElement)};AbstractDom.prototype.getHistory=function(){return new FakeHistory};AbstractDom.prototype.getDocumentElement=function(){return new FakeElement};AbstractDom.prototype.setWindowTitle=function(a){this.getDocumentElement().title=a};AbstractDom.prototype.getElementsByTagName=function(){return[]};AbstractDom.prototype.getIpc=function(){return new FakeIpc};AbstractDom.prototype.makeStumpFromString=function(a){return new FakeStump};
AbstractDom.prototype.getStumpById=function(a){return new FakeStump};AbstractDom.prototype.getStumpByClass=function(a){return new FakeStump};AbstractDom.prototype.getStumps=function(a){return new FakeStump};var JQueryDom=function(a){AbstractDom.apply(this,arguments)};$jscomp.inherits(JQueryDom,AbstractDom);JQueryDom.prototype._makeStumpFromElement=function(a){return $(a)};JQueryDom.prototype.getIpc=function(){return require("electron").ipcRenderer};
JQueryDom.prototype.toggleFullScreen=function(){var a=this.getDocumentElement();a.fullScreenElement&&null!==a.fullScreenElement||!a.mozFullScreen&&!a.webkitIsFullScreen?a.documentElement.requestFullScreen?a.documentElement.requestFullScreen():a.documentElement.mozRequestFullScreen?a.documentElement.mozRequestFullScreen():a.documentElement.webkitRequestFullScreen&&a.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):a.cancelFullScreen?a.cancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():
a.webkitCancelFullScreen&&a.webkitCancelFullScreen()};JQueryDom.prototype.setCopyData=function(a,b){a=a.originalEvent;a.preventDefault();a.clipboardData.setData("text/plain",b);a.clipboardData.setData("text/html",b)};JQueryDom.prototype.getStumps=function(a){return $(a)};JQueryDom.prototype.getStumpById=function(a){return $("#"+a)};JQueryDom.prototype.getStumpByClass=function(a){return $("."+a)};JQueryDom.prototype.getMousetrap=function(){return Mousetrap};JQueryDom.prototype.getWindowElement=function(){return window};
JQueryDom.prototype.makeStumpFromString=function(a){return $(a)};JQueryDom.prototype.getHtmlStump=function(){return $("html")};JQueryDom.prototype.getBodyStump=function(){return $("body")};
JQueryDom.prototype.copyTextToClipboard=function(a){var b=document.createElement("textarea");b.style.position="fixed";b.style.top=0;b.style.left=0;b.style.width="2em";b.style.height="2em";b.style.padding=0;b.style.border="none";b.style.outline="none";b.style.boxShadow="none";b.style.background="transparent";b.value=a;document.body.appendChild(b);b.select();try{document.execCommand("copy")}catch(c){}document.body.removeChild(b)};JQueryDom.prototype.getStore=function(){return store};
JQueryDom.prototype.getElementsByTagName=function(a){return document.getElementsByTagName(a)};JQueryDom.prototype.createElement=function(a){return document.createElement(a)};JQueryDom.prototype.getWindowNamespace=function(){return window};JQueryDom.prototype.getHistory=function(){return history};JQueryDom.prototype.getDocumentElement=function(){return document};JQueryDom.prototype.getFocusedStump=function(){return $("input:focus,div:focus,textarea:focus,[contenteditable=true]:focus")};
JQueryDom.prototype.someInputHasFocus=function(){return 0<this.getFocusedStump().length};var FakeDom=function(a){AbstractDom.apply(this,arguments)};$jscomp.inherits(FakeDom,AbstractDom);FakeDom.JQueryDom=JQueryDom;window.FakeDom=FakeDom;
var FeetToInches=function(a){if("number"===typeof a)return a;if(!a)return null;var b=0,c=a.search(/[^0-9\.]/);if(1>c)return b=parseFloat(a.replace(/[^0-9\.]/g,"")),isNaN(b)?null:12*b;var d=parseFloat(a.substr(0,c).replace(/[^0-9\.]/g,""));a=parseFloat(a.substr(c).replace(/[^0-9\.]/g,""));isNaN(d)||(b+=12*d);isNaN(a)||(b+=a);return b};window.FeetToInches=FeetToInches;var FlowBlocks=">block\n & limit int 10000\n  inserts 5\n  description Maximum number of rows to show.\n & orderBy orderByExpression\n  inserts 5\n & pin outputPoint\n  inserts 2\n & visible boolean true\n  insert 1\n require AbstractBlock /aientist/clients/base/program/AbstractBlock.js\n>chart >block\n>mini >chart\n size 1080 600\n require Mini /aientist/clients/alpha/blocks/charts/Mini.js\n>list >chart\n & title plaintext\n & label column\n  auto getTitlePotential\n require ListChart /aientist/clients/browser/blocks/charts/List.js\n>out >chart\n & column column\n  auto isString=true\n require OutChart /aientist/clients/browser/blocks/charts/Out.js\n>kpi >chart\n svg score\n & column column\n  inserts 90\n  auto\n & title plaintext\n & reduction enum count\n  inserts 70\n  options count sum average min max median\n require KpiChart /aientist/clients/browser/blocks/charts/KpiChart.js\n size 140 120\n>html >chart\n & content html\n script /lib/sanitize-html.min.js\n require HTMLChart /aientist/clients/browser/blocks/charts/HTML.js\n & allowedTags string img\n  const\n & allowedAttributes string\n  const\n  default a href name target\n   img src\n>heatcal >chart\n & count column\n  description Column which contains the day's measurement value.\n  auto getTypeName=number\n & day column\n  description Column which contains the day the measurement was taken.\n  auto getTypeName=day\n & title plaintext\n size 750 200\n require HeatCalendarChart /aientist/clients/browser/blocks/charts/HeatCalendar.js\n>table >chart\n size 750 200\n svg table\n & pretty boolean\n  inserts 30\n  description Set to true to show formatted values in cell.\n & showColumns columnNames\n  inserts 20\n  description Column names to show\n & hideColumns columnNames\n  inserts 20\n  description Column names to hide\n & title plaintext\n & limit int 100\n  inserts 10\n & columnOrder enum importance\n  inserts 20\n  options default importance alphabetical\n require TableBlock /aientist/clients/browser/blocks/charts/TableBlock.js\n>element >chart\n & style plaintext\n & editable boolean true\n & content plaintext\n  monad\n require BrayBlock /aientist/clients/browser/blocks/charts/BrayBlock.js\n>title >element\n & element htmlTag h1\n  const\n size 250 90\n>text >element\n size 750 200\n svg text\n & element htmlTag p\n  const\n>output >element\n & editable boolean false\n & content linktext\n  monad\n & element htmlTag div\n & style plaintext white-space: pre;\n  const\n size 750 200\n>header >element\n size 600 60\n>pre >element\n>h1 >header\n>h2 >header\n>labzero >element\n & element htmlTag h1\n  const\n & content plaintext LabZero is a product development firm in San Francisco. LZ hosted the first ever ohayo and ETN demo on 6/16/2017.\n  const\n>h3 >header\n>h4 >header\n>h5 >header\n>h6 >header\n>wordcloud >chart\n & count column\n  auto isString=false\n & count column\n  auto isString=false\n script /lib/wordcloud2.js\n>google >chart\n & limit int 10\n  inserts 10\n & title plaintext\n script https://www.gstatic.com/charts/loader.js\n>googleLabel >google\n & label column\n  description Column to use for the label\n  auto isString=true\n & value column\n  description Column to use for the value\n  auto isString=false\n>google.core >googleLabel\n & legendPosition enum right\n  inserts 5\n  path legend.position\n  options bottom labeled left none right top\n require AbstractGoogleCore /aientist/clients/browser/blocks/charts/AbstractGoogleCore.js\n>square >google.core\n require GoogleSquare /aientist/clients/browser/blocks/charts/google/GoogleSquare.js\n>google.geo >google.core\n & region region\n & resolution enum countries\n  inserts 30\n  options countries provinces metros\n require GoogleGeo /aientist/clients/browser/blocks/charts/google/GoogleGeo.js\n>google.pie >google.core\n & is3D boolean false\n  inserts 10\n & pieHole prob\n & pieStartAngle number\n & sliceVisibilityThreshold prob\n & googleClassName string PieChart\n  const\n>pie >google.pie\n>google.histogram >google.core\n & googleClassName string Histogram\n  const\n>histogram >google.histogram\n>google.column >google.core\n & x column\n & y column\n  auto isString=false\n & series column\n  auto isString=true\n & row column\n  auto isString=false\n & cell column\n  auto isString=false\n & isStacked boolean true\n  inserts 10\n require GoogleColumn  /aientist/clients/browser/blocks/charts/google/GoogleColumn.js\n>line >google.core\n & x column\n & y column\n  auto isString=false\n require GoogleLine /aientist/clients/browser/blocks/charts/google/GoogleLine.js\n>google.area >line\n require GoogleArea /aientist/clients/browser/blocks/charts/google/GoogleArea.js\n>scatter >google.core\n & x column\n  auto isString=false\n & y column\n  auto isString=false\n & trendlines object\n & hMax number\n  path hAxis.maxValue\n & hMin number\n  path hAxis.minValue\n & vMax number\n  path vAxis.maxValue\n & vMin number\n  path vAxis.minValue\n require GoogleScatter /aientist/clients/browser/blocks/charts/google/GoogleScatter.js\n>google.gauge >googleLabel\n & min int 0\n  inserts 10\n & max int 100\n  inserts 10\n & redFrom int 90\n  inserts 10\n & redFrom int 100\n  inserts 10\n & yellowFrom int 75\n  inserts 10\n & yellowTo int 90\n  inserts 10\n & minorTicks int 5\n  inserts 10\n require GoogleGauge /aientist/clients/browser/blocks/charts/google/GoogleGauge.js\n>google.timeline >google\n & label column\n  auto getTitlePotential\n require GoogleTimeline /aientist/clients/browser/blocks/charts/google/GoogleTimeline.js\n>tree >google\n & allowCollapse boolean false\n  inserts 10\n & size enum medium\n  inserts 10\n  options small medium large\n require GoogleOrg /aientist/clients/browser/blocks/charts/google/GoogleOrg.js\n>bar >google\n & limit int 10\n  inserts 10\n & x column\n  auto\n & y column\n  auto isString=false\n require GoogleBar /aientist/clients/browser/blocks/charts/google/GoogleBar.js\n>provider >block\n & columns columnsObject\n  inserts 50\n outputSuggestions >filter >group\n>data >provider\n svg folder\n & content content\n  inserts 90\n  description The actual data.\n & format format\n  inserts 40\n  description CSV, TSV, JSON, etc.\n size 280 220\n require DataBlock /aientist/clients/browser/blocks/providers/DataBlock.js\n>store >data\n require StoreBlock /aientist/clients/browser/blocks/providers/StoreBlock.js\n & key string\n  inserts 30\n  monad\n  description Name of local storage key.\n>programs >provider\n size 140 120\n require ProgramsBlock /aientist/clients/browser/blocks/providers/ProgramsBlock.js\n>url >provider\n svg www\n size 140 120\n & url url\n  inserts 90\n  template\n  monad\n & extract text\n  inserts 5\n  description If the url points to JSON, you can specify a field to extract\n & format format\n  inserts 10\n require AbstractUrlProvider /aientist/clients/browser/blocks/providers/AbstractUrlProvider.js\n>hn >url\n & url url https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty\n  inserts 10\n>reddit >url\n svg reddit\n & subreddit text\n  description Subreddit to download top stories for\n  monad\n & get enum .json\n  inserts 10\n  options\n   .json Homepage\n   reddits.json Top Subreddits\n require RedditBlock /aientist/clients/browser/blocks/providers/RedditBlock.js\n>query >provider\n & query sql\n  inserts 99\n  monad\n require QueryBlock /aientist/clients/browser/blocks/providers/QueryBlock.js\n>presidents >url\n svg whitehouse\n & url url /samples/presidents.csv\n  const\n>top >provider\n & query string\n  monad\n requre TopBlock /aientist/clients/browser/blocks/providers/TopBlock.js\n size 250 90\n>transformer >block\n outputSuggestions >table\n size 160 100\n>date >transformer\n & column column\n  auto isTemporal=true\n requre DateBlock /aientist/clients/browser/blocks/transformers/ExtendDate.js\n>datefilter >transformer\n & column column\n  inserts 90\n  auto isTemporal=true\n & days enum\n  options\n   0.0416 Last hour\n   1 Last 24 hours\n   3 Last 3 days\n   7 Last 7 days\n   30 Last 30 days\n   180 Last 6 months\n   365 Last 12 months\n require DateFilter /aientist/clients/browser/blocks/transformers/DateFilter.js\n>extend >transformer\n require AbstractExtendBlock /aientist/clients/browser/blocks/transformers/AbstractExtendBlock.js\n>filter >transformer\n svg filter\n size 250 90\n & filter text\n  inserts 90\n  description The filter string to search for\n  monad\n require FilterBlock /aientist/clients/browser/blocks/transformers/FilterBlock.js\n>morph >command\n size 420 200\n require MorphBlock /aientist/clients/browser/blocks/commands/MorphBlock.js\n>didyoumean >command\n require DidYouMeanBlock /aientist/clients/browser/blocks/commands/DidYouMeanBlock.js\n>group >transformer\n svg tree\n & by column\n  inserts 90\n  monad\n & advanced columns\n  inserts 10\n  description If you want to group by multiple columns\n require GroupBlock /aientist/clients/browser/blocks/transformers/Group.js\n>interpolate >transformer\n & column column\n require InterpolateBlock /aientist/clients/browser/blocks/transformers/InterpolateBlock.js\n>join >transformer\n & on column\n  monad\n require JoinBlock /aientist/clients/browser/blocks/transformers/JoinBlock.js\n>parse >transformer\n & column column\n  description Name of the column to parse data from.\n  auto getTypeName=text\n & format format\n  inserts 40\n  description CSV, TSV, JSON, etc.\n require ParseBlock /aientist/clients/browser/blocks/transformers/Parse.js\n>wordcount >transformer\n & field column\n  description Name of the column to pull words from.\n require WordCount /aientist/clients/browser/blocks/transformers/WordCount.js\n>command >block\n>console >provider\n platform desktop\n & cwd dir\n  inserts 10\n  description Path to the directory to exec command in.\n & command shell\n  description Shell command to execute\n & format format\n  description Expected result format\n require ConsoleBlock /aientist/clients/desktop/blocks/providers/Console.js\n>csv >provider\n platform desktop\n & path file\n  inserts 90\n require CSVBlock /aientist/clients/desktop/blocks/providers/Csv.js\n>files >provider\n platform desktop\n & path path\n  inserts 90\n  description Path to the file or folder.\n & stats boolean\n  description Set to true to return stats for files.\n & recursive boolean\n  description Set to true to recurse.\n require FilesBlock /aientist/clients/desktop/blocks/providers/Files.js\n>git >provider\n platform desktop\n & repo dir\n  inserts 90\n  required\n & command enum ls-files\n  inserts 50\n  options\n   ls-files List all tracked files\n require GitBlock /aientist/clients/desktop/blocks/providers/Git.js\n>mysql >provider\n platform desktop\n & query sql\n  inserts 90\n & host string\n & database string\n & port int\n & user string\n & password password\n require MySQLBlock /aientist/clients/desktop/blocks/providers/MySql.js\n>sqlite >provider\n platform desktop\n & file path\n  inserts 90\n  description Path to the sqlite database file\n & query sql\n  description SQL query to execute\n require SQLiteBlock /aientist/clients/desktop/blocks/providers/Sqlite.js\n>read >transformer\n platform desktop\n & column column\n  inserts 90\n  description Column which contains the filename\n  auto getTypeName=path\n require ReadBlock /aientist/clients/desktop/blocks/transformers/Read.js\n>typescript >transformer\n platform desktop\n & name column\n  description Column to use for the filepath/name\n  auto getTypeName=path\n & content column\n  description Column to get the code from\n require TypeScriptBlock /aientist/clients/desktop/blocks/transformers/TypeScript.js\n>downloader >command\n platform desktop\n & path dir\n  description Directory to write urls to\n & column column\n  description Column with urls to download\n require DownloaderBlock /aientist/clients/desktop/blocks/commands/Downloader.js\n>mbox >command\n platform desktop\n & mbox filepath 90%\n  description Path to the mbox file\n & db filepath\n  description Path to the sqlite3 database file\n require MboxBlock/aientist/clients/desktop/blocks/commands/Mbox.js\n>sts >provider\n platform hosted alpha\n & url url\n  inserts 75\n & advanced boolean false\n  inserts 10\n require STSBlock /aientist/clients/hosted/blocks/providers/STSBlock.js\n>form >command\n platform hosted alpha\n require FormBlock /aientist/clients/hosted/blocks/commands/FormBlock.js\n>commands >provider\n platform alpha\n & method string getCommandsBuffer\n  const\n require AbstractRunTimeProvider /aientist/clients/alpha/blocks/providers/AbstractRunTimeProvider.js\n>sheet >chart\n platform alpha\n require SheetBlock /aientist/clients/alpha/blocks/charts/Sheet.js\n script /node_modules/handsontable/dist/handsontable.full.js\n css /node_modules/handsontable/dist/handsontable.min.css\n>markdown >chart\n & content markdown\n & column column\n  auto isString=true\n require MarkdownChart /aientist/clients/browser/blocks/charts/MarkdownChart.js\n size 700 600\n>youtube >chart\n & video alphanumeric\n  monad\n require YouTubeBlock /aientist/clients/browser/blocks/charts/YouTubeBlock.js\n size 800 500\n>outline >chart\n platform alpha\n require TreeOutline /aientist/clients/alpha/blocks/charts/TreeOutline.js\n>3d >chart\n & content string\n & column column\n  auto isString=true\n script /node_modules/vis/dist/vis.min.js\n require ThreeDChart /aientist/clients/browser/blocks/charts/ThreeDChart.js\n size 800 500\n>test >command\n platform alpha\n & content string\n require TestBlock /aientist/clients/alpha/blocks/commands/TestBlock.js\n>fhtml >html\n platform alpha\n & allowedTags string img script\n  const\n & allowedAttributes string 0\n  const\n  default a href name target\n   img src\n   script src\n>editor >command\n platform alpha\n & path string\n require EditorChart /aientist/clients/alpha/blocks/commands/Editor.js\n>picker >command\n platform alpha\n & path string\n  description The program path to update when user picks something.\n & column column\n  description The column to use for the values\n require PickerControl /aientist/clients/alpha/blocks/commands/Picker.js\n>eval >transformer\n platform alpha\n & javascript javascript\n require EvalBlock /aientist/clients/alpha/blocks/transformers/Eval.js\n>stats >transformer\n platform alpha\n require StatsTransformer /aientist/clients/alpha/blocks/transformers/Stats.js";
window.FlowBlocks=FlowBlocks;
var Format={toTitleCase:function(a){return a.length?a.replace(/(\s\w)/g,function(a){return a.toUpperCase().trim()}).replace(/_/g," ").replace(/\-/g," "):""},randomString:function(a){a=a||32;for(var b="",c,d=0;d<a;d++)c=Math.floor(61*Math.random()),b+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".substring(c,c+1);return b},removeFileExtension:function(a){return a?a.replace(/\.[^\.]+$/,""):""},stripHtml:function(a){return a&&a.replace?a.replace(/<(?:.|\n)*?>/gm,""):a},_permalink:function(a,
b){return a.length?a.toLowerCase().replace(b,"").replace(/ /g,"-"):""},permalink:function(a){return Format._permalink(a,/[^a-z0-9- _\.]/gi)},roundTo:function(a,b){return parseFloat(a.toFixed(b))},roundToWhole:function(a){return Format.roundTo(a,0)},roundToTenths:function(a){return Format.roundTo(a,1)},roundToHundredths:function(a){return Format.roundTo(a,2)},roundToThousandths:function(a){return Format.roundTo(a,3)},roundToTenThousandths:function(a){return Format.roundTo(a,4)},linkify:function(a){a=
a.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,'<a href="$1" target="_blank">$1</a>');a=a.replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,'$1<a href="http://$2" target="_blank">$2</a>');return a=a.replace(/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,'<a href="mailto:$1">$1</a>')}};window.Format=Format;moment.createFromInputFallback=function(a){a._d=new Date(a._i)};
var GetDate={getDateAsUnix:function(a){return GetDate.getDate(a).unix()},getDate:function(a){var b=moment(a);if(b.isValid())return b;if("string"===typeof a&&a.match(/^[0-9]{8}$/)){var b=parseInt(a.substr(0,2)),c=parseInt(a.substr(2,2)),d=parseInt(a.substr(4,2)),e=parseInt(a.substr(6,2)),f=parseInt(a.substr(0,4)),g=parseInt(a.substr(4,4)),d=13>d,h=32>e,e=13>e,f=1E3<f&&2100>f;return b=13>b&&32>c&&1E3<g&&2100>g?moment(a,"MMDDYYYY"):f&&d&&h?moment(a,"YYYYMMDD"):f&&e?moment(a,"YYYYDDMM"):moment(a,"DDMMYYYY")}return"string"===
typeof a&&a.match(/^[0-9]{2}\/[0-9]{4}$/)?moment(a,"MM/YYYY"):!a.match||a.match(/[^0-9]/)||(c=parseFloat(a),isNaN(c))?b:10===a.length?moment(1E3*c):moment(c)}};window.GetDate=GetDate;var HakonPropertyNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(HakonPropertyNode,TreeNotation);HakonPropertyNode.prototype.toCss=function(a){return""+a+this.getHead()+": "+this.getTail()+";"};var HakonSelectorNode=function(a){return TreeNotation.apply(this,arguments)||this};
$jscomp.inherits(HakonSelectorNode,TreeNotation);HakonSelectorNode.prototype.parseNodeType=function(a){if(a.includes(";")){console.log(this.getStackString());debugger}return a.includes(" ")?HakonPropertyNode:HakonSelectorNode};HakonSelectorNode.prototype.getSelector=function(){var a=this.getParent().getSelector();return this.getHead().split(",").map(function(b){return b.startsWith("&")?a+b.substr(1):a?a+" "+b:b}).join(",")};
HakonSelectorNode.prototype.toCss=function(){var a=this.getChildrenByNodeType(HakonPropertyNode);return a.length?this.getSelector()+" {\n"+a.map(function(a){return a.toCss("  ")}).join("\n")+"\n}\n":""};var Hakon=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(Hakon,TreeNotation);Hakon.prototype.parseNodeType=function(a){return a?HakonSelectorNode:TreeNotation};Hakon.prototype.getSelector=function(){return""};
Hakon.prototype.toCss=function(){return this.getTopDownArray().filter(function(a){return a instanceof HakonSelectorNode}).map(function(a){return a.toCss()}).join("")};window.Hakon=Hakon;$(function(){window.app=bsMain()});var ObjectBackedRow=function(a){AbstractRow.apply(this,arguments)};$jscomp.inherits(ObjectBackedRow,AbstractRow);ObjectBackedRow._uniqueId=AbstractRow._uniqueId;window.ObjectBackedRow=ObjectBackedRow;var BlockPropertyNode=function(a){return TreeNotation.apply(this,arguments)||this};
$jscomp.inherits(BlockPropertyNode,TreeNotation);BlockPropertyNode.prototype.getPropertyName=function(){return this.getWord(1)};BlockPropertyNode.prototype.getProbability=function(){var a=this.findTail("inserts");return a?parseInt(a)/100:.1};BlockPropertyNode.prototype.getPropertyTypeName=function(){return this.getWord(2)};BlockPropertyNode.prototype.getDescription=function(){return this.findTail("description")||""};BlockPropertyNode.prototype.parseNodeType=function(a){return TreeNotation};
BlockPropertyNode.prototype.getDefaultValue=function(){var a=this.getWords(3),a=a.length?a.join(" "):"";return this.has("default")?this.getNode("default").getTailWithChildren():a};BlockPropertyNode.prototype.parseValue=function(a){return a};
BlockPropertyNode.prototype._getUserValue=function(a){var b=this.getDefaultValue();if(this.has("const"))return b;var c=a.getNode(this.getPropertyName()),d=this.has("monad")&&a.getTail(),c=c&&c.getTailWithChildren()||d||void 0;return void 0===c&&void 0!==b?b:c?this.has("template")&&c.includes("{")?a.getProgram().format(c):c:c};BlockPropertyNode.prototype.addValue=function(a,b){b=this.parseValue(this._getUserValue(b),b);var c=this.findTail("path");c?_.set(a,c,b):a[this.getPropertyName()]=b};
var EnumProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(EnumProp,BlockPropertyNode);EnumProp.prototype.getChoices=function(){var a=this.getNode("options"),b={};a.length?a.getChildren().forEach(function(a){b[a.getHead()]=a.getTail()}):a.getTail().split(" ").forEach(function(a){b[a]=a});return b};EnumProp.prototype.parseValue=function(a){return this.getChoices()[a]?a:void 0};var BooleanProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};
$jscomp.inherits(BooleanProp,BlockPropertyNode);BooleanProp.prototype.parseValue=function(a){return"true"===a?!0:!1};var PlainTextProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(PlainTextProp,BlockPropertyNode);PlainTextProp.prototype.parseValue=function(a){return Format.stripHtml(void 0===a?"":a)};var LinkTextProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(LinkTextProp,BlockPropertyNode);
LinkTextProp.prototype.parseValue=function(a){return Format.linkify(Format.stripHtml(void 0===a?"":a))};var AlphaNumericProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(AlphaNumericProp,BlockPropertyNode);AlphaNumericProp.prototype.parseValue=function(a){return(void 0===a?"":a).replace(/[^a-z0-9A-Z]/g,"")};var IntProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(IntProp,BlockPropertyNode);IntProp.prototype.parseValue=function(a){return parseInt(a)};
var ProbProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(ProbProp,BlockPropertyNode);ProbProp.prototype.parseValue=function(a){return parseFloat(a)};var ColumnProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(ColumnProp,BlockPropertyNode);
ColumnProp.prototype.parseValue=function(a,b){var c=b.getInputPlane(),d=c.getColumnsMap(),e=this.getNode("auto");if(d[a])return a;if(e){if(e.getTail())return this._getAutoColumn(b,e.getTail());a=c.getColumnsByImportance();if(a=a.length&&a[0].getColumnName())return a}};
ColumnProp.prototype._getAutoColumn=function(a,b){a=a.getInputPlane();b=b.split(",");var c=b.filter(function(a){return a.includes("=")}).map(function(a){return a.split("=")}),d=function(a){return c.every(function(b){return void 0!==a[b[0]]&&a[b[0]]().toString()===b[1]})};a=a.getColumnsArray().filter(function(a){return d(a)});var e=b.find(function(a){return!a.includes("=")});b=a;e&&(b=_.sortBy(b,function(a){return a[e]()}).reverse());if(b.length)return b[0].getColumnName()};
var ParserBlock=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(ParserBlock,TreeNotation);ParserBlock.prototype.parseNodeType=function(a){if(a.startsWith("&")){var b={boolean:BooleanProp,int:IntProp,prob:ProbProp,alphanumeric:AlphaNumericProp,plaintext:PlainTextProp,linktext:LinkTextProp,column:ColumnProp,enum:EnumProp};a=a.split(" ")[2];return b[a]||BlockPropertyNode}return TreeNotation};ParserBlock.prototype.getDoc=function(){return this.getHead()};
ParserBlock.prototype.getPattern=function(){return this._getExtended().findTail("pattern")};ParserBlock.prototype.getSvg=function(){return this._getExtended().findTail("svg")||"table"};ParserBlock.prototype._getExtended=function(){this._extended||(this._extended=this._makeExtended());return this._extended};ParserBlock.prototype._makeExtended=function(){var a=this.getGraph(),b=new ParserBlock;a.forEach(function(a){b.extend(a)});return b};
ParserBlock.prototype._loadCss=function(a){var b=this._getExtended().findTail("css");if(b){var c=a.getRootPath();a.getBodyStump().append(b.split(" ").map(function(a){return'<link rel="stylesheet" media="screen" href="'+(c+a)+'">'}).join("\n"))}};ParserBlock.prototype.executeLoadBlockOrGetLoadingPromise=function(a){this._loadCss(a);var b=this.getJSClass(a),c=this._getExtended().findTail("script"),d=a.getRootPath(),c=c?c.match(/^https\:/)?c:d+c:void 0;return a.appendScript(c).then(function(){return b.loadCode()})};
ParserBlock.prototype.getSuggestedSize=function(){var a=(this._getExtended().findTail("size")||"280 220").split(" ").map(function(a){return parseInt(a)});return{width:a[0],height:a[1]}};ParserBlock.prototype.getPropertyNodes=function(){var a=[];this.getGraph().forEach(function(b){b.getChildrenByNodeType(BlockPropertyNode).forEach(function(b){a.push(b)})});return a};ParserBlock.prototype.getPropertiesMap=function(){var a={};this.getPropertyNodes().forEach(function(b){a[b.getPropertyName()]=b});return a};
ParserBlock.prototype.computeStruct=function(a){var b={};this.getPropertyNodes().forEach(function(c){c.addValue(b,a)});return b};ParserBlock.prototype.getJSClass=function(a){if(this._class)return this._class;a=a.getFakeDom().getWindowNamespace();var b=this._getExtended().findTail("require").split(" "),c=b[0],b=b[1];"undefined"!==typeof require&&(b=require(b),a[b.name]=b);this._class=a[c];if(!this._class)debugger;return this._class};
var ParserETN=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(ParserETN,TreeNotation);ParserETN.prototype.parseNodeType=function(a){return ParserBlock};ParserETN.prototype.dynamicGetJsClass=function(a,b,c){var d=b.split(" ")[0];return(d=(d=this.getParserBlockMap()[d])&&d.getJSClass(c))?d:a.getProgram().getCatchAllBlockClass(this,a,b,c)};ParserETN.prototype.getCatchAllBlockClass=function(a,b,c,d){return TreeNotation};ParserETN.prototype.getDocs=function(){return this.toString()};
ParserETN.prototype.getParserBlockMap=function(){if(this._blockMap)return this._blockMap;var a={};this.getChildren().forEach(function(b){a[b.getHead()]=b});return this._blockMap=a};ParserETN.prototype.getParserBlockByName=function(a){return this.getParserBlockMap()[a.toLowerCase()]||this.getDidYouMeanBlock()};ParserETN.prototype.getBlockNames=function(){return Object.keys(this.getParserBlockMap())};ParserETN.prototype.getDidYouMeanBlock=function(){return this.getParserBlockMap()[">didyoumean"]};
ParserETN.prototype.loadBlockCode=function(a){this._loadedBlocks||(this._loadedBlocks={});this._loadedBlocks[a]||(this._loadedBlocks[a]=this.getParserBlockByName(a).executeLoadBlockOrGetLoadingPromise(this.getParent()));return this._loadedBlocks[a]};ParserETN.BlockPropertyNode=BlockPropertyNode;window.ParserETN=ParserETN;var PivotTable=function(a,b,c){this._rows=a;var d={};b.forEach(function(a){return d[a.name]=a});c.forEach(function(a){return d[a.name]=a});this._columns=d};
PivotTable.prototype._getGroups=function(a,b){var c=new Map;a.forEach(function(a){var d=b.map(function(b){return a[b].toString().replace(/ /g,"")}).join(" ");d&&(c.has(d)||c.set(d,[]),c.get(d).push(a))});return c};
PivotTable.prototype.getNewRows=function(a){var b=this,c=this._getGroups(this._rows,a),d=[{name:"count",type:"number",min:0}];a.forEach(function(a){return d.push(b._columns[a])});var e=Object.values(this._columns).filter(function(a){return!!a.reduction});e.forEach(function(a){return d.push(a)});for(var f=[],g={},c=$jscomp.makeIterator(c),h=c.next();!h.done;g={newRow:g.newRow,firstRow:g.firstRow,group:g.group},h=c.next())h=$jscomp.makeIterator(h.value),h.next(),g.group=h.next().value,g.firstRow=g.group[0],
g.newRow={},a.forEach(function(a){return function(b){a.newRow[b]=a.firstRow?a.firstRow[b]:0}}(g)),g.newRow.count=g.group.length,e.forEach(function(a){return function(b){var c=b.name,d=a.group.map(function(a){return a[c]}).filter(function(a){return"number"===typeof a&&!isNaN(a)});b=b.reduction;var e=a.firstRow[c];"sum"===b&&(e=d.reduce(function(a,b){return a+b},0));"avg"===b&&(e=d.reduce(function(a,b){return a+b},0)/d.length);a.newRow[c]=e}}(g)),f.push(g.newRow);return{rows:f,columns:d}};
window.PivotTable=PivotTable;var Plane=function(a,b){var c=this;this._block=a;this._columnsMap={};this._ctime=a._getNow();var d=a.getRowClass();this._rows=b.map(function(a){return a instanceof AbstractRow?a:new d(a,c)});this._addColumns(a.getStructColumns());this._addColumns(a.getBlockClassColumns());this._addColumns(this._getDetectedColumns());this._addRanks()};Plane.prototype.getRows=function(){return this._rows};Plane.prototype.getMonadCellContent=function(a){return this.getRows().map(function(b){return b.getRowValue(a)}).join("")};
Plane.prototype.getColumnNumericVector=function(a){return this.getPlaneColumnByName(a)?this.getRows().map(function(b){return b.getRowNumeric()[a]}):[]};Plane.prototype._addColumns=function(a){var b=this,c=this.getColumnsMap();a.forEach(function(a){c[a.name]=new Column(a,b)})};Plane.prototype._getUnionSample=function(){var a={};this.getSampleSet().forEach(function(b){b.getRowKeys().forEach(function(c){if(c){var d=a[c];if(void 0===d||""===d)a[c]=b.getRowValue(c)}})});return a};
Plane.prototype.getColumnsByImportance=function(){var a=this.getColumnsArray();a.sort(Util.sortByAccessor(function(a){return a.getRank()}));return a};Plane.prototype.getSampleSet=function(){this._sampleSet||(this._sampleSet=_.sampleSize(this.getRows(),30));return this._sampleSet};Plane.prototype.getRowCount=function(){return this.getRows().length};Plane.prototype.getRowSources=function(){return this.getRows().map(function(a){return a.getRowSource()})};Plane.prototype.getColumnNames=function(){return Object.keys(this.getColumnsMap())};
Plane.prototype.getColumnsMap=function(){return this._columnsMap};Plane.prototype.getCTime=function(){return this._ctime};Plane.prototype.getColumnsArray=function(){return Object.values(this.getColumnsMap())};Plane.prototype.getColumnsArrayOfObjects=function(){return this.getColumnsArray().map(function(a){return a.toObject()})};Plane.prototype.getNumericValues=function(){return this.getRows().map(function(a){return a.getRowNumeric()})};Plane.prototype.getPlaneColumnByName=function(a){return this.getColumnsMap()[a]};
Plane.prototype._getDetectedColumns=function(){var a=this.getColumnsMap();return Object.keys(this._getUnionSample()).map(function(a){return a.trim()}).filter(function(a){return a}).filter(function(b){return!a[b]}).map(function(a){return{name:a}})};Plane.prototype.getPlaneBlock=function(){return this._block};Plane.prototype.getRowTypeName=function(){return"Row"};
Plane.prototype.toTypeScriptInterface=function(){var a=this.getColumnsArray().map(function(a){return"  "+a.getColumnName()+": "+a.getTypeName()+";"}).join("\n");return"interface "+this.getRowTypeName()+" {\n"+a+"\n}"};Plane.prototype.toBlankFormTemplate=function(){var a=this.getColumnNames().join(" \n");return(new TreeNotation(a?a+" ":a)).toString()};Plane.prototype.getSortedRows=function(a){if(!a)return this.getRows();var b=this.getRows().map(function(a){return a});Util.sortByFast(b,a);return b};
Plane.prototype.getSortedRowsWithLimit=function(a,b){return this.getSortedRows(a).slice(0,b)};Plane.prototype.toDelimited=function(a){return(new TreeNotation(this.getRowSources())).toDelimited(a,this.getColumnNames())};
Plane.prototype._addRanks=function(){var a=this.getColumnsMap(),b=Object.keys(a).map(function(b){return a[b]});b.sort(function(a,b){if(a.getTitlePotential()>b.getTitlePotential())return-1;if(b.getTitlePotential()>a.getTitlePotential())return 1;if(.5<a.getMissingDataPercentage()||.5<b.getMissingDataPercentage()){if(a.getMissingDataPercentage()>b.getMissingDataPercentage())return 1;if(b.getMissingDataPercentage()>a.getMissingDataPercentage())return-1}return a.isTemporal()&&!b.isTemporal()?-1:!a.isTemporal()&&
b.isTemporal()||a.isLink()&&!b.isLink()?1:!a.isLink()&&b.isLink()?-1:a.isString()&&!b.isString()?1:!a.isString()&&b.isString()?-1:a.isString()&&b.isString()?4<a.getEntropy()&&8>a.getEntropy()&&a.getEntropy()>b.getEntropy()?-1:a.getEstimatedTextLength()>b.getEstimatedTextLength()?1:-1:0});b.forEach(function(a,b){a.setRank(b)});return this};window.Plane=Plane;var AbstractBaseRowParser=function(){};AbstractBaseRowParser.prototype.getExample=function(){return""};AbstractBaseRowParser.prototype.is=function(){return 0};
AbstractBaseRowParser.prototype._getFormatName=function(){return""};AbstractBaseRowParser.prototype.parse=function(){return[]};var AbstractTreeBaseRowParser=function(a){AbstractBaseRowParser.apply(this,arguments)};$jscomp.inherits(AbstractTreeBaseRowParser,AbstractBaseRowParser);AbstractTreeBaseRowParser.prototype.parse=function(a){return this.parseTrees(a).getChildren().filter(function(a){return a.length}).map(function(a){return a.toObject()})};
var DelimitedParser=function(a){AbstractTreeBaseRowParser.apply(this,arguments)};$jscomp.inherits(DelimitedParser,AbstractTreeBaseRowParser);DelimitedParser.prototype.getExample=function(){return"john~12~50\nmary~13~43"};DelimitedParser.prototype.parseTrees=function(a,b,c,d){return TreeNotation.fromDelimited(a,b,c,d)};DelimitedParser.prototype.is=function(){return 0};DelimitedParser.prototype._getFormatName=function(){return"delimited"};
var CsvParser=function(a){AbstractTreeBaseRowParser.apply(this,arguments)};$jscomp.inherits(CsvParser,AbstractTreeBaseRowParser);CsvParser.prototype.getExample=function(){return"name,age,height\njohn,12,50"};CsvParser.prototype.parseTrees=function(a){return TreeNotation.fromCsv(a)};CsvParser.prototype.is=function(a){return a.firstLineCommaCount?a.blankLineCount?.05:.49:0};CsvParser.prototype._getFormatName=function(){return"csv"};var TsvParser=function(a){AbstractTreeBaseRowParser.apply(this,arguments)};
$jscomp.inherits(TsvParser,AbstractTreeBaseRowParser);TsvParser.prototype.getExample=function(){return"name\tage\theight\njohn\t12\t50"};TsvParser.prototype.parseTrees=function(a){return TreeNotation.fromTsv(a)};TsvParser.prototype.is=function(a){return a.firstLineTabCount?5<a.tabCount?.9:.25:0};TsvParser.prototype._getFormatName=function(){return"tsv"};var PsvParser=function(a){AbstractTreeBaseRowParser.apply(this,arguments)};$jscomp.inherits(PsvParser,AbstractTreeBaseRowParser);
PsvParser.prototype._getFormatName=function(){return"psv"};PsvParser.prototype.parseTrees=function(a){return TreeNotation.fromDelimited(a,"|")};PsvParser.prototype.is=function(a){return a.firstLineVerticalBarCount?a.verticalBarCount>=a.lineCount?.8:.01:0};var SsvParser=function(a){AbstractTreeBaseRowParser.apply(this,arguments)};$jscomp.inherits(SsvParser,AbstractTreeBaseRowParser);SsvParser.prototype.getExample=function(){return"name age height\njohn 12 50"};SsvParser.prototype._getFormatName=function(){return"ssv"};
SsvParser.prototype.parseTrees=function(a){return TreeNotation.fromSsv(a)};SsvParser.prototype.is=function(a){return a.firstLineSpaceCount?a.blankLineCount?.05:.11:0};var XmlParser=function(a){AbstractTreeBaseRowParser.apply(this,arguments)};$jscomp.inherits(XmlParser,AbstractTreeBaseRowParser);XmlParser.prototype.is=function(a){return a.trimmedStr.match(/^ *\</)?1:0};XmlParser.prototype._getFormatName=function(){return"xml"};
XmlParser.prototype.parseTrees=function(a){return"undefined"===typeof window?new TreeNotation(a):TreeNotation.fromXml(a)};var HtmlParser=function(a){AbstractTreeBaseRowParser.apply(this,arguments)};$jscomp.inherits(HtmlParser,AbstractTreeBaseRowParser);HtmlParser.prototype.is=function(a){return a.trimmedStr.match(/^(\<\!doctype html\>|\<html|\<div)/i)?1:0};HtmlParser.prototype._getFormatName=function(){return"html"};HtmlParser.prototype.parseTrees=function(a){return TreeNotation.fromXml(a)};
var RssParser=function(a){AbstractBaseRowParser.apply(this,arguments)};$jscomp.inherits(RssParser,AbstractBaseRowParser);RssParser.prototype._getFormatName=function(){return"rss"};RssParser.prototype.is=function(a){return"<rss "===a.trimmedStr.substr(0,5)||"<?xml "===a.trimmedStr.substr(0,6)?1:0};
RssParser.prototype.parse=function(a){if("undefined"===typeof $)return TreeNotation.fromXml(a).getChildren().map(function(a){return a.toObject()});var b=[],c=0;$(a).find("item").each(function(){var a={};$(this).children().each(function(){var b=$(this),c=b[0].tagName.toLowerCase();(b=b.text())&&(a[c]=b)});c++;a.index=c;b.push(a)});return b};var SpacedParser=function(a){AbstractBaseRowParser.apply(this,arguments)};$jscomp.inherits(SpacedParser,AbstractBaseRowParser);
SpacedParser.prototype.getExample=function(){return"name john\nage 12\n\nname mary\nage 20"};SpacedParser.prototype._getFormatName=function(){return"spaced"};SpacedParser.prototype.is=function(a){return 10<a.blankLineCount?.95:.05};
SpacedParser.prototype.parse=function(a){var b=a.indexOf("\n\n"),c=a.substr(0,b).split(/\n/g),d=a.substr(b+2).replace(/\n\n/g,"\n").trim().split("\n");a=c.length;for(var b=d.length,e=[],c=c.map(function(a){return a.replace(/ /g,"")}),f={i:0};f.i<b;f={obj:f.obj,i:f.i},f.i+=a)f.obj={},c.forEach(function(a){return function(b,c){a.obj[b]=d[a.i+c].trim()}}(f)),e.push(f.obj);return e};var TreeParser=function(a){AbstractTreeBaseRowParser.apply(this,arguments)};$jscomp.inherits(TreeParser,AbstractTreeBaseRowParser);
TreeParser.prototype.getExample=function(){return"person\n name john\n age 12\n height 50"};TreeParser.prototype.parseTrees=function(a){a=a instanceof TreeNotation?a:new TreeNotation(a);var b=a.getChildren().filter(function(a){return a.getTail()}).length,c=a.getChildren().filter(function(a){return 0===a.length}).length;if(!b&&!c)return a;b=new TreeNotation;b.pushTailAndChildren(void 0,a);return b};TreeParser.prototype.is=function(a){return 1>a.indentedLineCount?0:.1};
TreeParser.prototype._getFormatName=function(){return"tree"};var SectionsParser=function(a){AbstractBaseRowParser.apply(this,arguments)};$jscomp.inherits(SectionsParser,AbstractBaseRowParser);SectionsParser.prototype.getExample=function(){return"name\nage\n\njohn\n12\n\nmary\n20"};SectionsParser.prototype._getFormatName=function(){return"sections"};
SectionsParser.prototype.parse=function(a){var b=a.indexOf("\n\n"),c=[a.slice(0,b),a.slice(b+1)];a=c.shift().split(/\n/g);for(var b=a.length,c=c[0].trim().split(/\n/g),d=c.length/b,e=[],f={},g=0;g<d;f={obj:f.obj,values:f.values},g++){var h=g*b;f.values=c.slice(h,h+b);f.obj={};a.forEach(function(a){return function(b,c){return a.obj[b]=a.values[c]}}(f));e.push(f.obj)}return e};var ListParser=function(a){AbstractBaseRowParser.apply(this,arguments)};$jscomp.inherits(ListParser,AbstractBaseRowParser);
ListParser.prototype.getExample=function(){return"john doe\nfrank jones"};ListParser.prototype._getFormatName=function(){return"list"};ListParser.prototype.parse=function(a){return a.split(/\n/g).map(function(a,c){return{index:c,name:a}})};var TextParser=function(a){AbstractBaseRowParser.apply(this,arguments)};$jscomp.inherits(TextParser,AbstractBaseRowParser);TextParser.prototype._getFormatName=function(){return"text"};TextParser.prototype.is=function(a){return a.blankLineCount?.12:.05};
TextParser.prototype.parse=function(a){return[{text:a}]};var AbstractJsonParser=function(a){AbstractBaseRowParser.apply(this,arguments)};$jscomp.inherits(AbstractJsonParser,AbstractBaseRowParser);AbstractJsonParser.prototype._getFormatName=function(){return"json"};AbstractJsonParser.prototype.getExample=function(){return JSON.stringify([{name:"joe",age:2},{name:"mike",age:4}])};AbstractJsonParser.prototype.parse=function(a){a=JSON.parse(a);return a instanceof Array?a:[a]};
var JsonParser=function(a){AbstractJsonParser.apply(this,arguments)};$jscomp.inherits(JsonParser,AbstractJsonParser);var AbstractJsonArrayParser=function(a){AbstractJsonParser.apply(this,arguments)};$jscomp.inherits(AbstractJsonArrayParser,AbstractJsonParser);AbstractJsonArrayParser.prototype.getExample=function(){return JSON.stringify([{name:"jane",age:33},{name:"bill",age:25}])};AbstractJsonArrayParser.prototype.is=function(a){a=a.trimmedStr;return a.match(/^\s*\[/)&&a.match(/\]\s*$/)?.99:0};
var JsonArrayParser=function(a){AbstractJsonArrayParser.apply(this,arguments)};$jscomp.inherits(JsonArrayParser,AbstractJsonArrayParser);var AbstractJsonObjectParser=function(a){AbstractJsonParser.apply(this,arguments)};$jscomp.inherits(AbstractJsonObjectParser,AbstractJsonParser);AbstractJsonObjectParser.prototype.is=function(a){a=a.trimmedStr;return a.match(/^\s*\{/)&&a.match(/\}\s*$/)?.99:0};var JsonObjectParser=function(a){AbstractJsonObjectParser.apply(this,arguments)};
$jscomp.inherits(JsonObjectParser,AbstractJsonObjectParser);var JsonMapParser=function(a){AbstractJsonObjectParser.apply(this,arguments)};$jscomp.inherits(JsonMapParser,AbstractJsonObjectParser);JsonMapParser.prototype.getExample=function(){return JSON.stringify({person1:{name:"joe",age:2},person2:{name:"mike",age:4}})};JsonMapParser.prototype._getFormatName=function(){return"jsonMap"};JsonMapParser.prototype.parse=function(a){return Object.values(JSON.parse(a))};
var JsonVectorParser=function(a){AbstractJsonArrayParser.apply(this,arguments)};$jscomp.inherits(JsonVectorParser,AbstractJsonArrayParser);JsonVectorParser.prototype.getExample=function(){return JSON.stringify([23,32,41])};JsonVectorParser.prototype._getFormatName=function(){return"jsonVector"};JsonVectorParser.prototype.is=function(a){a=a.trimmedStr;try{var b=JSON.parse(a);return b instanceof Array?0===b.filter(function(a){return a&&"object"===typeof a&&a.hasOwnProperty}).length:0}catch(c){}return 0};
JsonVectorParser.prototype.parse=function(a){return JSON.parse(string).map(function(a){return{value:a}})};var JsonCountMapParser=function(a){AbstractJsonObjectParser.apply(this,arguments)};$jscomp.inherits(JsonCountMapParser,AbstractJsonObjectParser);JsonCountMapParser.prototype._getFormatName=function(){return"jsonCounts"};JsonCountMapParser.prototype.is=function(a){a=a.trimmedStr;try{var b=JSON.parse(a),c=Object.keys(b);return 2>c.length?0:c.some(function(a){return"number"!==typeof b[a]})?0:1}catch(d){}return 0};
JsonCountMapParser.prototype.getExample=function(){return JSON.stringify({h1:10,h2:5,h3:2})};JsonCountMapParser.prototype.parse=function(a){var b=JSON.parse(string);return Object.keys(b).map(function(a){return{name:a,count:b[a]}})};
var RowParser=function(){var a=this;this._parsers=[new CsvParser,new TsvParser,new SsvParser,new PsvParser,new TextParser,new TreeParser,new XmlParser,new RssParser,new HtmlParser,new SectionsParser,new SpacedParser,new ListParser,new JsonParser,new JsonArrayParser,new JsonVectorParser,new JsonMapParser,new JsonCountMapParser];this._parserMap={};this._parsers.forEach(function(b){var c=b._getFormatName();c&&(a._parserMap[c]=b)})};RowParser.prototype.getEncodingNames=function(){return Object.keys(this._getParserMap())};
RowParser.prototype.getExample=function(a){return this._getParser(a).getExample()};RowParser.prototype._getParser=function(a){var b=this._getParserMap();return b[a]||b.text};RowParser.prototype._getParserMap=function(){return this._parserMap};RowParser.prototype._getParsersArray=function(){return this._parsers};
RowParser.prototype.parseFromObject=function(a,b){return a instanceof Array?"object"===typeof a[0]?a:a.map(function(a){return"object"===typeof a?a:{value:a}}):"jsonMap"===b?Object.values(a):[a]};RowParser.prototype.parse=function(a,b){return(a=void 0===a?"":a)?this._getParser(b||this.inferEncoding(a)).parse(a):[]};RowParser.prototype.parseAdvancedDelimited=function(a,b,c,d){return this._getParser("delimited").parse(a,b,c,d)};
RowParser.prototype.getProbabilities=function(a){var b=this._getParsersArray(),c={};a=new RowStringSpecimen(a);for(var d=0;d<b.length;d++){var e=b[d],f=e.is(a),e=e._getFormatName();if(1===f)return b={},b[e]=1,b;c[e]=f}return c};RowParser.prototype.inferEncoding=function(a){a=this.getProbabilities(a);var b=0,c=null,d;for(d in a)a[d]>b&&(b=a[d],c=d);return c};window.RowParser=RowParser;
var RowStringSpecimen=function(a){a=a.trim();var b=a.split(/\n/g),c=b[0],d=function(a,b){return(a.match(b)||[]).length};this.trimmedStr=a;this.lines=b;this.firstLine=c;this.lineCount=b.length;this.indentedLineCount=d(a,/\n /g);this.blankLineCount=d(a,/\n\n/g);this.commaCount=d(a,/\,/g);this.tabCount=d(a,/\t/g);this.verticalBarCount=d(a,/\|/g);this.firstLineCommaCount=d(c,/\,/g);this.firstLineTabCount=d(c,/\t/g);this.firstLineSpaceCount=d(c,/ /g);this.firstLineVerticalBarCount=d(c,/\|/g)};
window.RowStringSpecimen=RowStringSpecimen;function Say(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(var d="",e=a.map(function(a){return a}),c=c.map(function(a){return a});e.length;){var d=d+e.shift(),f=c.shift();void 0!==f&&(d+=f)}return d}window.Say=Say;
function Strip(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(var d="",e=a.map(function(a){return a}),c=c.map(function(a){return a});e.length;){var d=d+e.shift(),f=c.shift();void 0!==f&&(d+=f)}return d&&d.replace?d.replace(/<(?:.|\n)*?>/gm,""):d}window.Strip=Strip;
var TableSpecimen=function(a,b){this.colCount=a.length;this.rowCount=b.length;this.primaryKey=this.timeseries=!1;this.nounType="thing";this.nounClasses="someGeneralThing someMoreSpecificThing";this.hasNominalCol=this.hasDateCol=this.hasNumericCol=!1;this.rowNounType="";this.hasSubNounColumn=!1;this.subNounColumns=[];this.correlationMatrx=[];this.mostImportantColumns=[];this.hasSlice=this.hasFrequencyColumn=this.hasRankColumn=this.isOrderImportant=!1;this.cohesivity=1;this.isTuples=!1};
window.TableSpecimen=TableSpecimen;var TreeBackedRow=function(a){AbstractRow.apply(this,arguments)};$jscomp.inherits(TreeBackedRow,AbstractRow);TreeBackedRow._uniqueId=AbstractRow._uniqueId;TreeBackedRow.prototype.getRowId=function(){return this.getRowSource().getHead()};TreeBackedRow.prototype.destroy=function(){this.getRowSource().destroy();return AbstractRow.prototype.destroy.call(this)};TreeBackedRow.prototype.getRowSourceAsObject=function(){return this.getRowSource().toObject()};
TreeBackedRow.prototype.renameRow=function(a,b){return this.getRowSource().rename(a,b)};TreeBackedRow.prototype.reloadFromStr=function(a){return this.getRowSource().setChildren(a)};TreeBackedRow.prototype.setRowValue=function(a,b){this.getRowSource().touchNode(a).setTail(b);return this};TreeBackedRow.prototype.getRowKeys=function(){return this.getRowSource().getHeads()};TreeBackedRow.prototype.deleteFromRow=function(a){return this.getRowSource().delete(a)};TreeBackedRow.prototype.rowToString=function(){return this.getRowSource().childrenToString()};
TreeBackedRow.prototype.getRowValue=function(a){return this.getRowSource().findTail(a)||""};window.TreeBackedRow=TreeBackedRow;
var Util={_getColumnNamesFromObj:function(a){a=Object.keys(a);a.sort();return a},getFileExtension:function(a){return(a=(void 0===a?"":a).match(/\.([^\.]+)$/))&&a[1]||""},removeFileExtension:function(a){a=void 0===a?"":a;if(!a.includes("."))return a;a=a.split(".");a.pop();return a.join(".")},extractTables:function(a,b){if(!(b instanceof Array)){var c=Util._getColumnNamesFromObj(b).join(" ");a[c]||(a[c]=0);a[c]++}Object.keys(b).forEach(function(c){c=b[c];"object"===typeof c&&Util.extractTables(a,c)})},
parseCookie:function(a){var b={};(void 0===a?"":a).split(/[;,] */).forEach(function(a){var c=a.indexOf("="),e=a.substr(0,c).trim();a=a.substr(++c,a.length).trim();'"'===a[0]&&(a=a.slice(1,-1));if(void 0===b[e])try{b[e]=decodeURIComponent(a)}catch(f){b[e]=a}});return b},pLimit:function(a){var b=[],c=0;return function(d){return new Promise(function(e,f){var g=function(){c++;d().then(function(a){e(a);c--;b.length&&b.shift()()},function(a){f(a);c--;b.length&&b.shift()()})};c<a?g():b.push(g)})}},moveArray:function(a,
b,c){return a.splice(c,0,a.splice(b,1)[0])},dynamicSort:function(a){var b=1;"-"===a[0]&&(b=-1,a=a.substr(1));return function(c,d){c=c[a];d=d[a];var e=c<d?-1:c>d?1:0;void 0===c&&void 0!==d?e=-1:void 0===d&&void 0!==c&&(e=1);return e*b}},sortByAccessor:function(a){return function(b,c){b=a(b);c=a(c);var d=b<c?-1:b>c?1:0;void 0===b&&void 0!==c?d=-1:void 0===c&&void 0!==b&&(d=1);return d}},isExternalLink:function(a,b){if(a&&"/"===a.substr(0,1)||!a.includes(":"))return!1;a=new miuri(a);return a.hostname()&&
b!==a.hostname()},toggle:function(a,b){a=b.indexOf(a);return-1===a||a+1===b.length?b[0]:b[a+1]},getDiskPath:function(a){return a?a.replace("file://",""):""},sortByFast:function(a,b){var c=[],d=b.split(/ /g).map(function(a,b){return"-"===a.substr(0,1)?(c[b]=!0,a.substr(1)):a}),e=function(a,b,h){var f=d[h];if(!f)return 0;var g=a.getRowNumeric()[f],f=b.getRowNumeric()[f];return g===f?e(a,b,h+1):g>f?c[h]?-1:1:c[h]?1:-1};a.sort(function(a,b){return e(a,b,0)})},joinArraysOn:function(a,b,c){var d={},e=0;
c||(c=b.map(function(a){return Object.keys(a[0])}));b.forEach(function(b,g){var f=c[g];b.forEach(function(b){var c=a?b[a]:e++;d[c]||(d[c]={});var g=d[c];f.forEach(function(a){return g[a]=b[a]})})});return Object.values(d)}};window.Util=Util;var Version="1.1.1";"undefined"!==typeof exports&&(module.exports=Version);var UnitTestSection=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(UnitTestSection,TreeNotation);
var Wall=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(Wall,TreeNotation);Wall.prototype.parseNodeType=function(a){return UnitTestSection};Wall.prototype.getSectionsToRun=function(){var a=this.getChildren().filter(function(a){return a.getLine().startsWith("+")});return a.length?a:this.getChildren().filter(function(a){return!a.getLine().startsWith("!")})};
Wall.prototype.execute=function(a){this.getSectionsToRun().map(function(b){Tape(b.getHead(),function(c){var d=a(b);c.equal(d.actual,d.expected,d.message);c.end()})})};window.Wall=Wall;var AbstractApp=function(a){return AC.apply(this,arguments)||this};$jscomp.inherits(AbstractApp,AC);AbstractApp._mountedComponents=AC._mountedComponents;AbstractApp.prototype.getSessionId=function(){this._sessionId||(this._sessionId=Format.randomString(16));return this._sessionId};
AbstractApp.prototype.normalizePath=function(a){return a};AbstractApp.prototype.getTargetNode=function(){return this._targetNode};AbstractApp.prototype.setTargetNode=function(a){this._targetNode=a;return this};AbstractApp.prototype.getFakeDom=function(){this._fakeDom||(this._fakeDom="undefined"===typeof $?new FakeDom("http://localhost:8000/"):new JQueryDom(""));return this._fakeDom};AbstractApp.prototype.appendScript=function(){return Promise.resolve()};
AbstractApp.prototype.getFlowBlocks=function(){var a=this.constructor.name.toLowerCase(),b=new TreeNotation(FlowBlocks);b.getChildren().forEach(function(b){var c=b.findTail("platform");c&&!c.includes(a)&&b.destroy()});return b.toString()};AbstractApp.prototype.getRootPath=function(){return""};AbstractApp.prototype.getVersion=function(){return Version};window.AbstractApp=AbstractApp;var AbstractProgramNode=function(a){return AC.apply(this,arguments)||this};$jscomp.inherits(AbstractProgramNode,AC);
AbstractProgramNode._mountedComponents=AC._mountedComponents;AbstractProgramNode.prototype.parseNodeType=function(a){return this.getParser().dynamicGetJsClass(this,a,this.getApp())};AbstractProgramNode.prototype.toJavascript=function(){return""};AbstractProgramNode.prototype.getProgram=function(){return this.isProgram()?this:this.getParent().getProgram()};AbstractProgramNode.prototype.getRowClass=function(){return ObjectBackedRow};AbstractProgramNode.prototype.getStructColumns=function(){return[]};
AbstractProgramNode.prototype.getBlockClassColumns=function(){return[]};AbstractProgramNode.prototype.getChildBlocks=function(){return this.getChildrenByNodeType(AbstractProgramNode)};AbstractProgramNode.prototype.getChildNonBlocks=function(){return this.getChildren().filter(function(a){return!(a instanceof AbstractProgramNode)})};AbstractProgramNode.prototype.getDescendantBlocks=function(){var a=[];this.getChildBlocks().forEach(function(b){return b._getDescendantBlocks(a)});return a};
AbstractProgramNode.prototype._getDescendantBlocks=function(a){a.push(this);this.getChildBlocks().forEach(function(b){return b._getDescendantBlocks(a)})};AbstractProgramNode.prototype.getHierarchyWithNonTerminals=function(){return{children:this.getChildBlocks().map(function(a){return a._getHierarchyWithNonTerminals()})}};
AbstractProgramNode.prototype._getHierarchyWithNonTerminals=function(){var a=this.getChildBlocks().map(function(a){return a._getHierarchyWithNonTerminals()});a.unshift({block:this});return{children:a}};AbstractProgramNode.prototype.getTTL=function(){return this._ttl||0};AbstractProgramNode.prototype.getHierarchy=function(){return{block:this,children:this.getChildBlocks().map(function(a){return a.getHierarchy()})}};
AbstractProgramNode.prototype.getInputPlane=function(){var a=this.getParent();return a.isProvider()?a.getOutputPlane():a.getInputPlane()};AbstractProgramNode.prototype.getOutputPlane=function(){return this.isProvider()?(this._outputPlane||(this._outputPlane=new Plane(this,[])),this._outputPlane):this.getInputPlane()};window.AbstractProgramNode=AbstractProgramNode;var AbstractBlock=function(a){return AbstractProgramNode.apply(this,arguments)||this};$jscomp.inherits(AbstractBlock,AbstractProgramNode);
AbstractBlock._mountedComponents=AbstractProgramNode._mountedComponents;AbstractBlock.prototype.getStruct=function(){this._blockStruct||(this._blockStruct=this.getBlock().computeStruct(this));return this._blockStruct};AbstractBlock.prototype.getParser=function(){return this.getProgram().getParser()};AbstractBlock.prototype._getInnerHtml=function(){return{html:'<div class="BlockPage" data-contextmenucommand="ac _openBlockContextMenuCommand">\n        '+this.getBlockHtmlPage()+"\n      </div>",css:this._getCssContent()}};
AbstractBlock.prototype.isVisible=function(){return this.getStruct().visible};AbstractBlock.prototype.selectBlock=function(){this._selected=!0;this.isMounted()&&this.getStump().addClass("ui-selected")};AbstractBlock.prototype.unselect=function(){delete this._selected;this.isMounted()&&this.getStump().removeClass("ui-selected")};AbstractBlock.prototype.isSelected=function(){return this._selected};
AbstractBlock.prototype.getBlockHtmlPage=function(){return'<div class="BlockHeader">'+this.getBlockHtmlHeader()+'</div>\n  <div class="BlockBody">'+this.getBlockHtmlBody()+'</div>\n  <div class="BlockFooter">'+this.getBlockHtmlFooter()+"</div>"};AbstractBlock.prototype.getBlockHtmlHeader=function(){return""+this.getHead()};AbstractBlock.prototype.openRowEditorByIndexCommand=function(a){return this._openRowEditor(this.getInputPlane().getRows()[a])};
AbstractBlock.prototype.makeBlockDimension=function(a){a=void 0===a?this.getPin():a;a=a.split(" ").map(function(a){return 20*parseInt(a)});var b={left:a[0],top:a[1]};2<a.length&&(b.width=a[2]);3<a.length&&(b.height=a[3]);return new BlockDimension(this,b)};AbstractBlock.prototype.openRowEditorByPuidCommand=function(a){return this._openRowEditor(this._getRowByPuid(a))};AbstractBlock.prototype._openRowEditor=function(a){var b=this.getApp();b.setTargetNode(a);return b.toggleAndRender("rowEditorModal")};
AbstractBlock.prototype._getRowByPuid=function(a){a=parseInt(a);return this.getInputPlane().getRows().find(function(b){return b.getPuid()===a})};AbstractBlock.prototype.getBlockHtmlBody=function(){return""};AbstractBlock.prototype.openSingleInsertModalCommand=function(){var a=this.getApp();a.setTargetNode(this);return a.toggleAndRender("singleInsertModal")};AbstractBlock.prototype.openBulkInsertModalCommand=function(){return this.getApp().setTargetNode(this).toggleAndRender("bulkInsertModal")};
AbstractBlock.prototype.getPanel=function(){return this.getProgram().getPanel()};AbstractBlock.prototype._getCssContent=function(){var a="#"+this.getId(),b=this.getStyles(),c=this.getTheme(),d=this.isVisible()?"":"display: none",e=this.getBlockDimension(),e=e?e.toCss():"",f=Object.keys(b).map(function(d){return a+" "+d+" {"+c.objToCss(b[d])+"}"}).join("");return a+" { "+d+" "+e+" }\n      "+f+"\n      "+c.hakonToCss(this.getHakon())};AbstractBlock.prototype.isProvider=function(){return!1};
AbstractBlock.prototype.getBlock=function(){return this.getParser().getParserBlockByName(this.getHead())};AbstractBlock.prototype.mapPropertiesToColumnNames=function(a){var b=this.getStruct();return a.map(function(a){return b[a]})};AbstractBlock.prototype.getRequiredTable=function(a){a=this.mapPropertiesToColumnNames(a);var b=this.getOutputPlane();return a.map(function(a){return b.getPlaneColumnByName(a)}).some(function(a){return!a})?[]:this.getRowsAsCsvArray(a)};
AbstractBlock.prototype.getRowsWithStructQuery=function(){if(this.isProgram())return this.getRows();var a=this.getLimit(),b=this.getStruct().orderBy;return this.getOutputPlane().getSortedRowsWithLimit(b,a)};AbstractBlock.prototype.getRowsAsCsvArray=function(a){var b=this.getRowsWithStructQuery().map(function(b){return b.getAsArray(a)});b.unshift(a);return b};AbstractBlock.prototype.getContextMenuHtml=function(){return""};
AbstractBlock.prototype.getRequiredTableWithDates=function(a){var b=this.getOutputPlane(),c=this.mapPropertiesToColumnNames(a).map(function(a){return b.getPlaneColumnByName(a)}),d=this.getRequiredTable(a);if(!d.length)return d;a=c.map(function(a,b){return a.isNumericMS()?b:-1}).filter(function(a){return-1<a});if(!a.length)return d;for(var c=d.length,e={i:1};e.i<c;e={i:e.i},e.i++)a.forEach(function(a){return function(b){d[a.i][b]=new Date(d[a.i][b])}}(e));return d};AbstractBlock.loadCode=function(){return Promise.resolve()};
AbstractBlock.prototype.createRowsFromTNCommand=function(a){return this.createRows((new RowParser).parse(a,"tree"))};AbstractBlock.prototype.createRows=function(a){return Promise.resolve()};AbstractBlock.prototype.fetchRows=function(){return Promise.resolve([])};AbstractBlock.prototype.getStructColumns=function(){var a=this.getNode("columns"),b=a?a.toObject():{};return Object.keys(b).map(function(a){var c=b[a]||{};"object"!==typeof c&&(c={});c.name||(c.name=a);return c})};
AbstractBlock.prototype.getBlockClassColumns=function(){return[]};AbstractBlock.prototype.executeLoadNewPlane=function(){var a=this,b=this._getNow();this._timeLastLoadStarted=b;var c=this.fetchRows();if(!(c instanceof Promise))debugger;return c.then(function(c){if(a._timeLastLoadStarted!==b)return Promise.resolve();a._outputPlane=new Plane(a,c);a._ttl=a._getNow()-b;return Promise.all(a.getChildBlocks().map(function(a){return a.executeLoadNewPlane()})).then(function(b){return a})}).catch(function(b){a.handleBlockError(b)})};
AbstractBlock.prototype.handleBlockError=function(a){this._errorCount||(this._errorCount=0);this._errorCount++;this.getApp().goRed(a)};AbstractBlock.prototype.getErrorCount=function(){return this._errorCount||0};AbstractBlock.prototype.isProgram=function(){return!1};AbstractBlock.prototype.getLimit=function(){return this.getStruct().limit};AbstractBlock.prototype.getChildNodeSuggestions=function(){return[">filter",">group",">table"]};AbstractBlock.prototype.getId=function(){return"block"+this._getUid()};
AbstractBlock.prototype.getAttributes=function(){return' id="'+this.getId()+'" '};AbstractBlock.prototype.getClasses=function(){return"AC BlockContainer "+this.constructor.name};AbstractBlock.prototype.getStyles=function(){this._styles||(this._styles={});return this._styles};AbstractBlock.prototype.getBlockDimension=function(){var a=this.getProgram(),b=a.getProgramDimension();return a.getBlockDimensionMap(b.width,b.height).get(this)};AbstractBlock.prototype.getHeaderHeight=function(){return 30};
AbstractBlock.prototype.getFooterHeight=function(){return 30};AbstractBlock.prototype.getBlockBodyDimension=function(){var a=this.getBlockDimension();a.height=a.height-this.getHeaderHeight()-this.getFooterHeight();return a};AbstractBlock.prototype.openBlockSourceEditorModalCommand=function(){return this.getApp().setTargetNode(this).toggleAndRender("nodeEditorModal")};AbstractBlock.prototype.cloneBlockCommand=function(){var a=this.getProgram();a.cloneBlock(this);return a.autosaveAndRender()};
AbstractBlock.prototype._changeBlockOrderByCommand=function(a){this.toggle("orderBy",[a,"-"+a,""]);this.autosaveBlock();this.makeDirty();return this.render()};AbstractBlock.prototype.shouldComponentUpdate=function(){return AbstractProgramNode.prototype.shouldComponentUpdate.call(this)||this._isDataExpired()};AbstractBlock.prototype._isDataExpired=function(){var a=this.getRTime();return this.getOutputPlane().getCTime()>a||this.getInputPlane().getCTime()>a};
AbstractBlock.prototype.getFirstAncestor=function(){var a=this.getParent();return a instanceof AbstractBlock?a.getFirstAncestor():this};AbstractBlock.prototype.executeLoadNewPlaneAndRender=function(){var a=this;return this.executeLoadNewPlane().then(function(){return a.render()})};AbstractBlock.prototype.changeTypeCommand=function(a){var b=this;this.setHead(a);var c=this.duplicate();this.unmountAndDestroy();return c.getBlock().executeLoadBlockOrGetLoadingPromise(this.getApp()).then(function(){return b.getProgram().autosaveAndRender().then(function(){return c.executeLoadNewPlaneAndRender()})})};
AbstractBlock.prototype.changeParentCommand=function(a){var b=this.getProgram(),b=(a=a?a.split(" ").map(function(a){return parseInt(a)}):"")?this.getApp().nodeAt(a):b;this.copyTo(b);this.unmountAndDestroy();return this.getProgram().autosaveAndRender()};AbstractBlock.prototype._openBlockContextMenuCommand=function(){return this.getApp().setTargetNode(this).toggleAndRender("blockContextMenu")};AbstractBlock.prototype.destroyBlockCommand=function(){this.unmountAndDestroy();return this.getProgram().autosaveAndRender()};
AbstractBlock.prototype.getNewDataCommand=function(){};AbstractBlock.prototype.changePropertyCommand=function(a,b){this.touchNode(b).setTail(a);this.render();return this.autosaveBlock()};AbstractBlock.prototype.changeMonadCommand=function(a){this.setTail(a);this.render();return this.autosaveBlock()};AbstractBlock.prototype.insertSuggestionCommand=function(a){var b=this;this.append(a);this.autosaveBlock();return this.getProgram().executeLoadProgramCode().then(function(){return b.render()})};
AbstractBlock.prototype.copyBlockCommand=function(){this.getApp().getFakeDom().copyTextToClipboard(this.getFirstAncestor().toString());return Promise.resolve()};AbstractBlock.prototype.copyDataCommand=function(a){this.getApp().getFakeDom().copyTextToClipboard(this.getOutputPlane().toDelimited(a));return Promise.resolve()};AbstractBlock.prototype._exportDataCommand=function(){this.getApp().downloadFile(this.getOutputPlane().toDelimited(","),this.getHead()+".csv","text/csv")};
AbstractBlock.prototype.getHakon=function(){return""};AbstractBlock.prototype.getTheme=function(){return this.getApp().getTheme()};AbstractBlock.prototype.getBlockHtmlFooter=function(){return this.getBlockToolbarButton()};AbstractBlock.prototype.getBlockToolbarButton=function(){return MakeSVG("pencil",16,'data-command="ac toggleToolbarCommand"',"BlockPencilButton")};AbstractBlock.prototype.openBlockInspectorCommand=function(){return this.getApp().setTargetNode(this).toggleAndRender("blockInspectorModal")};
AbstractBlock.prototype.getSuggestedSize=function(){return this.getBlock().getSuggestedSize()};AbstractBlock.prototype.getPin=function(){return this.findTail("pin")};AbstractBlock.prototype.getStumpForChildren=function(){return this.getStump().parent()};AbstractBlock.prototype.componentDidMount=function(){AbstractProgramNode.prototype.componentDidMount.call(this);this._blockToolbar&&this._blockToolbar.render()};AbstractBlock.prototype.autosaveBlock=function(){this._clearBlockStruct();return this.getProgram().autosaveProgram()};
AbstractBlock.prototype._clearBlockStruct=function(){delete this._blockStruct};AbstractBlock.prototype.toggleToolbarCommand=function(){this._blockToolbar=this._blockToolbar?this._blockToolbar.unmount():(new BlockToolbarContainer("",void 0,this)).render(this.getStump());return Promise.resolve()};window.AbstractBlock=AbstractBlock;var AbstractFireBlock=function(a){return AbstractBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractFireBlock,AbstractBlock);
AbstractFireBlock._mountedComponents=AbstractBlock._mountedComponents;AbstractFireBlock.loadCode=AbstractBlock.loadCode;AbstractFireBlock.prototype.getHakon=function(){return".FireBlock\n text-align center\n input\n  border 0\n  font-size 14px"};
AbstractFireBlock.prototype.getBlockHtmlPage=function(){var a=this.getBlock(),b=MakeSVG(a.getSvg(),24),a=a.getPattern(),c=this.getTail()||"";return'<div class="BlockBody HeaderLess">\n\t\t'+b+"\n\t\t<br>\n\t\t"+('\n\t\t\t<input placeholder="'+a+'" value="'+c+'" data-command="ac changeMonadCommand" / >')+'\n\t\t</div>\n<div class="BlockFooter">'+this.getBlockHtmlFooter()+"</div>"};
AbstractFireBlock.prototype.toJavascript=function(a){a=void 0===a?0:a;var b=this.getBlock(),c=b._getExtended(),d=c.findTail("toJS"),b=b.getPattern().split(" "),e=this.getTail().split(" "),f={},g=b.length-1,h=c.findTail("joinLastBy")||" ";b.forEach(function(a,b){f[a]=b===g?e.slice(b).join(h):e[b]});var d=(new TreeNotation(f)).format(d),c=c.getNode("hasBlock"),k=" ".repeat(a);return c?k+d+" {\n"+this.getChildren().map(function(b){return k+b.toJavascript(a+2)}).join("\n")+"\n"+k+"}\n":k+d};
window.AbstractFireBlock=AbstractFireBlock;var AbstractBrowserApplication=function(a){return AbstractApp.apply(this,arguments)||this};$jscomp.inherits(AbstractBrowserApplication,AbstractApp);AbstractBrowserApplication._mountedComponents=AbstractApp._mountedComponents;
AbstractBrowserApplication.prototype.componentWillMount=function(){var a=this;this._startVisitCounter();var b=this.getFromStore(StorageKeys.openPrograms),b=(b=b?b.replace("!",""):"")?b.split(" "):[],b=_.uniq(b),c=this.getProgramToOpen();c&&-1===b.indexOf(c)&&b.push(c);b=b.map(function(a){return a===c?"!"+a:a});b=b.slice(0,30);this.concat("theme\nmenu\npanel\n programs "+b+"\n search");b.forEach(function(b){return b.startsWith("!")?a.openUrlInNewSpaceAndFocus(b.substr(1)):a.openUrlInNewSpace(b)});
this._setContainerHandlers();this._makeProgramLinksOpenImmediately();this._makeWindowDroppable(this);this._makeWindowPastable(this);this._makeDocumentCopyableAndCuttable();this._bindKeyboardShortcuts();this._setErrorHandlers()};AbstractBrowserApplication.prototype._startVisitCounter=function(){var a=this._getVisitCount();a++;this.setVisitCount(a)};AbstractBrowserApplication.prototype.setVisitCount=function(a){this.storeValue(StorageKeys.visitCount,a)};
AbstractBrowserApplication.prototype._getVisitCount=function(){var a=this.getFromStore(StorageKeys.visitCount);return a?parseInt(a):0};AbstractBrowserApplication.prototype.getProgramToOpen=function(){var a=this.getWindowPathName();return 1<a.length&&!a.match(/\.html$/)?a:void 0};
AbstractBrowserApplication.prototype.getNodeTypes=function(){return{theme:ThemeContainer,menu:MenuContainer,panel:PanelContainer,nodePickerModal:NodePickerModal,sourceEditorModal:SourceEditorModal,programContextMenu:ProgramContextMenu,blockContextMenu:BlockContextMenu,blockInspectorModal:BlockInspectorModal,rowEditorModal:RowEditorModal,singleInsertModal:SingleInsertModal,bulkInsertModal:BulkInsertModal,promptModal:CustomPromptModal,confirmModal:CustomConfirmModal,nodeEditorModal:NodeEditorModal,
buildProgramModal:BuildProgramModal,helpModal:HelpModal}};AbstractBrowserApplication.prototype.parseNodeType=function(a){return this.getNodeTypes()[a.split(" ")[0]]};AbstractBrowserApplication.prototype.getClasses=function(){return"AC AbstractBrowserApplication "+this.constructor.name};AbstractBrowserApplication.prototype.getHakon=function(){return".AbstractBrowserApplication\n height 100%\n width 100%"};
AbstractBrowserApplication.prototype.getCommandsBuffer=function(){this._commandsBuffer||(this._commandsBuffer=[]);return this._commandsBuffer};AbstractBrowserApplication.prototype.logCommand=function(a){this.getCommandsBuffer().push({command:a,time:Date.now()})};AbstractBrowserApplication.prototype.goRed=function(a){var b=this.getMountedProgram();console.log("error on page: "+this.getWindowPathName());console.log(a);console.log("going red on page: "+(b?b.getUrl():""))};
AbstractBrowserApplication.prototype.reportUncaughtError=function(a){return Promise.resolve()};AbstractBrowserApplication.prototype._setErrorHandlers=function(){var a=this,b=this;this.getWindowElement().addEventListener("error",function(c,d,e){a.reportUncaughtError(c);b.goRed();console.error(c)})};AbstractBrowserApplication.prototype.openNodeEditorModalCommand=function(a){a=this.getMountedProgram().nodeAt(a);this.setTargetNode(a);return this.toggleAndRender("nodeEditorModal")};
AbstractBrowserApplication.prototype.closeModal=function(){this.getChildren().filter(function(a){return a.getHead().includes("Modal")}).forEach(function(a){return a.unmountAndDestroy()})};AbstractBrowserApplication.prototype.closeContextMenu=function(){this.getChildren().filter(function(a){return a.getHead().includes("ContextMenu")}).forEach(function(a){return a.unmountAndDestroy()})};AbstractBrowserApplication.prototype.getHtml=function(){return""};
AbstractBrowserApplication.prototype.renderApp=function(){this.render(this.getBodyStump());return this};AbstractBrowserApplication.prototype.downloadJavascriptCommand=function(){var a=this.getMountedProgram(),b=a.toJavascript();return this.downloadFile(b,a.getFileName()+".js","text/javascript")};AbstractBrowserApplication.prototype.downloadFile=function(a,b,c){var d=this.getFakeDom(),e=d.createElement("a");e.setAttribute("href","data:"+c+","+d.encodeURIComponent(a));e.setAttribute("download",b);e.click()};
AbstractBrowserApplication.prototype.appendBlockCommand=function(a,b){this._appendBlocks(a,b);return this.getMountedProgram().autosaveAndRender()};AbstractBrowserApplication.prototype._getAvailablePermalink=function(a){var b=Util.getFileExtension(a);a=Util.removeFileExtension(a);for(var c=2,d="",e=""+a+d+"."+b;this.doesFileExistSync(e);)e=""+a+d+"."+b,d="-"+c,c++;return e};
AbstractBrowserApplication.prototype._appendBlocks=function(a,b){return this.getNodeCursors().map(function(c){c=c.append(a,b);c.executeLoadNewPlane();return c})};AbstractBrowserApplication.prototype.isPaid=function(){return!!Util.parseCookie(this.getWindowCookie()).paidToken};AbstractBrowserApplication.prototype.appendBlockAndSelectCommand=function(a,b){var c=this._appendBlocks(a,b);a=this.getMountedProgram();a.clearSelection();return a.autosaveAndRender().then(function(){c.forEach(function(a){return a.selectBlock()})})};
AbstractBrowserApplication.prototype.insertMorphBlockCommand=function(){var a=this.getMountedProgram(),b=this.getDblClickEvent();this.getNodeCursors().forEach(function(c){c.append(">morph","pin "+a.makePin(b))});return a.autosaveAndRender()};AbstractBrowserApplication.prototype.getNodeCursors=function(){var a=this.getMountedProgram().getSelectedBlocks();return a.length?a:[this.getMountedProgram()]};
AbstractBrowserApplication.prototype.deleteAllRowsInTargetBlockCommand=function(){var a=this,b=this.getTargetNode().getInputPlane();return Promise.all(b.getRows().map(function(a){return a.destroyRowCommand()})).then(function(){a.renderApp()})};
AbstractBrowserApplication.prototype.appendScript=function(a){if(!a)return Promise.resolve();this._loadingPromises||(this._loadingPromises={});if(this._loadingPromises[a])return this._loadingPromises[a];var b=this.getFakeDom();if(b.isNode())return Promise.resolve();var c=new Promise(function(c,e){var d=!1,g=b.getElementsByTagName("script")[0],h=b.createElement("script");h.type="text/javascript";h.src=a;h.async=!0;h.onload=h.onreadystatechange=function(){d||this.readyState&&"complete"!=this.readyState||
(d=!0,c(this))};h.onerror=h.onabort=e;g.parentNode.insertBefore(h,g)});return this._loadingPromises[a]=c};AbstractBrowserApplication.prototype.getDocumentStump=function(){return this.getFakeDom().getDocumentStump()};AbstractBrowserApplication.prototype.getDocumentElement=function(){return this.getFakeDom().getDocumentElement()};AbstractBrowserApplication.prototype.getWindowCookie=function(){return this.getDocumentElement().cookie};AbstractBrowserApplication.prototype.getWindowStump=function(){return this.getFakeDom().getWindowStump()};
AbstractBrowserApplication.prototype.getWindowElement=function(){return this.getFakeDom().getWindowElement()};AbstractBrowserApplication.prototype.openOhayoProgram=function(a){var b=(new TreeNotation(DemoPrograms)).getNode(a).getTailWithChildren(),c=this.getFocusedPanel(),d=c.getOpenTabByUrl(a);return d?c.setMountedProgram(d):this.createAndOpen(b,a)};AbstractBrowserApplication.prototype.setWindowLocation=function(a){this.getDocumentElement().location=a;return this};
AbstractBrowserApplication.prototype.getWindowPathName=function(){return this.getDocumentElement().location.pathname||""};AbstractBrowserApplication.prototype.makeDataBlock=function(a){var b=(new RowParser).inferEncoding(a),b=new TreeNotation(">data\n format "+b+"\n content");b.getNode(">data content").setTailWithChildren(a);return b.toString()};AbstractBrowserApplication.prototype.onProgramsChange=function(){};AbstractBrowserApplication.prototype.getFocusedPanel=function(){return this.getNode("panel")};
AbstractBrowserApplication.prototype.getMountedProgram=function(){return this.getFocusedPanel().getMountedProgram()};AbstractBrowserApplication.prototype.getMenuContainer=function(){return this.getNode("menu")};AbstractBrowserApplication.prototype.getHtmlStump=function(){return this.getFakeDom().getHtmlStump()};AbstractBrowserApplication.prototype.emitGlobalMessage=function(a){console.log(a)};AbstractBrowserApplication.prototype.emitGlobalMessageAndFade=function(a){console.log(a)};
AbstractBrowserApplication.prototype.handleGlobalError=function(a){console.error(a)};AbstractBrowserApplication.prototype.createNewBlankProgramCommand=function(a){var b=this;return this.createAndOpen("",void 0===a?"untitled.flow":a).then(function(a){return b.emitGlobalMessageAndFade(Say($jscomp$templatelit$1,a.getUrl()))})};AbstractBrowserApplication.prototype.canMakePrograms=function(){return!0};
AbstractBrowserApplication.prototype.openUrlPromptCommand=function(){var a=this;this.prompt(Say($jscomp$templatelit$2),"").then(function(b){b&&a.openUrlInNewSpace(b)})};AbstractBrowserApplication.prototype.openUrlInNewSpace=function(a){return this.getFocusedPanel().openUrlInNewSpace(a)};AbstractBrowserApplication.prototype.openUrlInNewSpaceAndFocus=function(a){var b=this,c=this.getFocusedPanel(),d=c.getOpenTabByUrl(a);return d?c.setMountedProgram(d):this.openUrlInNewSpace(a).then(function(a){return b.getFocusedPanel().setMountedProgram(a)})};
AbstractBrowserApplication.prototype.mountTabByIndexCommand=function(a){return this.getFocusedPanel().mountTabByIndex(a)};AbstractBrowserApplication.prototype.closeTabByIndexCommand=function(a){return this.getFocusedPanel().closeTabByIndex(a)};AbstractBrowserApplication.prototype.getFolder=function(){return""};AbstractBrowserApplication.prototype.tabDidOpen=function(){};AbstractBrowserApplication.prototype.isAutoSaveEnabled=function(){return"false"!==this.getFromStore(StorageKeys.autoSave)};
AbstractBrowserApplication.prototype.toggleAutoSaveCommand=function(){var a=!this.isAutoSaveEnabled();a?this.removeValue(StorageKeys.autoSave):this.storeValue(StorageKeys.autoSave,"false");this.emitGlobalMessageAndFade(Say($jscomp$templatelit$3,a));return Promise.resolve()};AbstractBrowserApplication.prototype.openHtmlCommand=function(){var a=this.getMountedProgram(),b=Format.permalink(a.getFileName()),a=a.getStump().innerHtml();this.downloadFile(a,b,"text/html");return Promise.resolve()};
AbstractBrowserApplication.prototype.toggleThemeCommand=function(){return this._toggleTheme()};AbstractBrowserApplication.prototype._getThemeName=function(){return this.getFromStore(StorageKeys.theme)};AbstractBrowserApplication.prototype.getTheme=function(){return Themes[this._getThemeName()]||Themes.glass};
AbstractBrowserApplication.prototype._toggleTheme=function(){var a=Util.toggle(this._getThemeName(),Object.keys(Themes));this.emitGlobalMessageAndFade(Say($jscomp$templatelit$4,a));this.storeValue(StorageKeys.theme,a);this.getApp().makeAllDirty();this.renderApp();return Promise.resolve()};AbstractBrowserApplication.prototype.confirmAndDeleteFile=function(a){var b=this;return this.confirm(Say($jscomp$templatelit$5,a)).then(function(c){return c?b.deleteFileCommand(a):Promise.resolve(!1)})};
AbstractBrowserApplication.prototype.promptToRenameFile=function(a,b){var c=this;return this.prompt("Enter new name for file",a).then(function(d){return d&&d!==a?(d=Format.permalink(d))?c.renameFileCommand(a,d,b).then(function(a){c.emitGlobalMessageAndFade("Renamed");return a}):Promise.resolve():Promise.resolve()})};AbstractBrowserApplication.prototype.getFolderPath=function(){return""};
AbstractBrowserApplication.prototype.insertStringCommand=function(a){this.getFakeDom().getFocusedStump().val(a);return Promise.resolve()};AbstractBrowserApplication.prototype.showTabRenamePromptCommand=function(){var a=this,b=this.getMountedProgram();this.promptToRenameFile(b.getFullPath()).then(function(c){if(!c)return!1;a.openUrlInNewSpaceAndFocus(""+a.getFolderPath()+c).then(function(c){a.getFocusedPanel().closeProgram(b)});a.refreshLinks()});return Promise.resolve()};
AbstractBrowserApplication.prototype.refreshLinks=function(){};AbstractBrowserApplication.prototype.refreshLinksCommand=function(){return this.refreshLinks()};AbstractBrowserApplication.prototype.toggleHelpCommand=function(){return this.toggleAndRender("helpModal")};AbstractBrowserApplication.prototype.toggleSourceEditorCommand=function(){return this.toggleAndRender("sourceEditorModal")};AbstractBrowserApplication.prototype.toggleNodePickerCommand=function(){return this.toggleAndRender("nodePickerModal")};
AbstractBrowserApplication.prototype.toggleLayoutCommand=function(){return this.getMountedProgram().toggleLayout()};AbstractBrowserApplication.prototype.setRefreshUrl=function(a){this.getFakeDom().getHistory().replaceState({},"",a);return this};AbstractBrowserApplication.prototype.closeMountedProgramCommand=function(){return this.getFocusedPanel().closeProgram(this.getMountedProgram())};AbstractBrowserApplication.prototype.fetchAndReloadFocusedProgramCommand=function(){return this.getFocusedPanel().fetchAndReloadProgram(this.getMountedProgram())};
AbstractBrowserApplication.prototype.selectAllCommand=function(){this.getMountedProgram().selectAll();return Promise.resolve()};AbstractBrowserApplication.prototype.selectBlocksBySelectorCommand=function(a){this.logCommand("app selectBlocksBySelectorCommand");this.getMountedProgram().selectBlocksBySelector(a);return Promise.resolve()};AbstractBrowserApplication.prototype.clearSelectionCommand=function(){this.logCommand("app clearSelectionCommand");this.getMountedProgram().clearSelection();return Promise.resolve()};
AbstractBrowserApplication.prototype.deleteSelectionCommand=function(){return this.getMountedProgram().deleteSelection()};AbstractBrowserApplication.prototype.duplicateSelectionCommand=function(){return this.getMountedProgram().duplicateSelection()};AbstractBrowserApplication.prototype.cancelConfirmCommand=function(){return this._confirmModal._resolveCommand("0")};AbstractBrowserApplication.prototype.acceptConfirmCommand=function(){return this._confirmModal._resolveCommand("1")};
AbstractBrowserApplication.prototype.submitPromptCommand=function(){return this._promptModal._resolveCommand()};AbstractBrowserApplication.prototype.clickElementCommand=function(a){$(a).click();return Promise.resolve()};AbstractBrowserApplication.prototype.showDeleteFileConfirmDialogCommand=function(){var a=this,b=this.getMountedProgram();return this.confirmAndDeleteFile(b.getFullPath()).then(function(c){!1!==c&&a.getFocusedPanel().closeProgram(b)})};
AbstractBrowserApplication.prototype.mountPreviousProgramCommand=function(){return this.getFocusedPanel().mountPreviousProgram()};AbstractBrowserApplication.prototype.mountNextProgramCommand=function(){return this.getFocusedPanel().mountNextProgram()};AbstractBrowserApplication.prototype.closeAllProgramsCommand=function(){return this.getFocusedPanel().closeAllPrograms()};AbstractBrowserApplication.prototype.openFocusedPanelSearchCommand=function(){return this.getFocusedPanel().openSearchCommand()};
AbstractBrowserApplication.prototype.universalSearchCommand=function(a){return Promise.resolve()};AbstractBrowserApplication.prototype.toggleFullScreenCommand=function(){this.getFakeDom().toggleFullScreen();return Promise.resolve()};AbstractBrowserApplication.prototype.toggleFocusedModeCommand=function(){this.toggle("menu");var a=this.getFocusedPanel();a.toggle("programs");a.toggle("search");return this.toggleFullScreenCommand()};
AbstractBrowserApplication.prototype.toggleSourceGutterCommand=function(){this.makeAllDirty();return this.getFocusedPanel().toggleAndRender("sourceGutter")};AbstractBrowserApplication.prototype.getKeyboardShortcuts=function(){this._shortcuts||(this._shortcuts=new KeyboardShortcutNotation(this._getKeyboardShortcuts()));return this._shortcuts};AbstractBrowserApplication.prototype.selectNextCommand=function(){return this.getMountedProgram().selectNext()};
AbstractBrowserApplication.prototype.selectPreviousCommand=function(){return this.getMountedProgram().selectPrevious()};AbstractBrowserApplication.prototype._getKeyboardShortcuts=function(){return"mounted showDeleteFileConfirmDialogCommand shift+backspace Delete Program\npanel createNewBlankProgramCommand ctrl+n New Flow Program\npanel toggleHelpCommand ? Help\nmounted closeMountedProgramCommand ctrl+w Close focused program\npanel closeAllProgramsCommand ctrl+shift+w Close all programs\npanel toggleThemeCommand shift+t Toggle Theme\nmounted selectAllCommand command+a Select All\nmounted openHtmlCommand ctrl+h\npanel openFocusedPanelSearchCommand command+p\nmounted toggleLayoutCommand shift+l Toggle layout\nmounted mountPreviousProgramCommand shift+left Previous program\nmounted mountNextProgramCommand shift+right Next program\nmounted selectNextCommand shift+down Select next\nmounted selectPreviousCommand shift+up Select previous\npanel toggleSourceGutterCommand shift+u Edit Source\npanel toggleFullScreenCommand shift+f Toggle Full Screen\npanel toggleFocusedModeCommand command+shift+f Toggle Focused Mode\npanel toggleSourceEditorCommand ctrl+u Edit Source\nmounted deleteSelectionCommand backspace Delete Selection\nmounted saveProgramAndNotifyCommand command+s Save Program\nmounted showTabRenamePromptCommand ctrl+shift+r Rename File\npanel toggleAutoSaveCommand shift+s Toggle autosave\nmounted fetchAndReloadFocusedProgramCommand shift+r Re-download and refresh program\nmounted duplicateSelectionCommand command+d Duplicate Selection\nmounted toggleNodePickerCommand shift+p Edit node\nmounted undoFocusedProgramCommand command+z Undo\nmounted redoFocusedProgramCommand command+shift+z Redo\npanel openAllLinksCommand command+shift+o Open All Links\npanel _runSpeedTestCommand ctrl+shift+m\npanel openUrlPromptCommand shift+o Open url\npanel closeModalCommand escape Close any open modal\nmounted cloneProgramCommand ctrl+shift+n Clone program\nmounted toggleBuildProgramModal shift+b Build program"};
AbstractBrowserApplication.prototype.openAllLinksCommand=function(){var a=this;this.getLinks().forEach(function(b){a.openUrlInNewSpace(b.link)});return Promise.resolve()};AbstractBrowserApplication.prototype.toggleBuildProgramModal=function(){return this.toggleAndRender("buildProgramModal")};AbstractBrowserApplication.prototype.undoFocusedProgramCommand=function(){return this.getMountedProgram().undoCommand()};AbstractBrowserApplication.prototype.redoFocusedProgramCommand=function(){return this.getMountedProgram().redoCommand()};
AbstractBrowserApplication.prototype._getMousetrap=function(){return this.getFakeDom().getMousetrap()};AbstractBrowserApplication.prototype.closeModalCommand=function(){this.closeModal();return Promise.resolve()};
AbstractBrowserApplication.prototype._bindKeyboardShortcuts=function(){var a=this._getMousetrap();a._originalStopCallback=a.prototype.stopCallback;a.prototype.stopCallback=function(b,d,e){return"command+s"===e&&$(d).hasClass("savable")?($(d).trigger(BrowserEvents.change),b.preventDefault(),!0):a._pause?!0:a._originalStopCallback.call(this,b,d)};var b=this;this.getKeyboardShortcuts().getChildren().forEach(function(c){a.bind(c.getKeyCombo(),function(a){c.execute(b);a.preventDefault&&a.preventDefault();
return!1})})};AbstractBrowserApplication.prototype.executeCommandLine=function(a){this.logCommand(a.join(" "));return this[a[0]](a[1],a[2],a[3])};AbstractBrowserApplication.prototype.pauseShortcutListener=function(){this._getMousetrap()._pause=!0};AbstractBrowserApplication.prototype.resumeShortcutListener=function(){this._getMousetrap()._pause=!1};AbstractBrowserApplication.prototype.getStore=function(){return this.getFakeDom().getStore()};
AbstractBrowserApplication.prototype.getStoreKeys=function(){var a=this.constructor.name,b=a.length,c=[];this.getStore().each(function(d,e){e.startsWith(a)&&c.push(e.substr(b))});return c};AbstractBrowserApplication.prototype.getFromStore=function(a){return this.getStore().get(this.constructor.name+a)};AbstractBrowserApplication.prototype.storeValue=function(a,b){return this.getStore().set(this.constructor.name+a,b)};
AbstractBrowserApplication.prototype.removeValue=function(a){return this.getStore().remove(this.constructor.name+a)};AbstractBrowserApplication.prototype.clearStore=function(){this.getStore().disabled||this.getStore().clearAll()};AbstractBrowserApplication.prototype._makeDocumentCopyableAndCuttable=function(){var a=this;a.getDocumentStump().on(BrowserEvents.copy,function(b){return a.copySelectionCommand(b)}).on(BrowserEvents.cut,function(b){return a.cutSelectionCommand(b)})};
AbstractBrowserApplication.prototype.copySelectionCommand=function(a){return this.getMountedProgram().copySelection(a)};AbstractBrowserApplication.prototype.cutSelectionCommand=function(a){return this.getMountedProgram().cutSelection(a)};
AbstractBrowserApplication.prototype._handleLinkClick=function(a,b){var c=a.attr("href");if(c&&!a.attr("target")){b.preventDefault();if(Util.isExternalLink(c,this.getFakeDom().getLocation().hostname))return this.openExternalLink(c),!1;"true"===a.attr("data-focus")?this.openUrlInNewSpaceAndFocus(c):this.openUrlInNewSpace(c)}};
AbstractBrowserApplication.prototype._makeProgramLinksOpenImmediately=function(){var a=this;this.getBodyStump().on(BrowserEvents.click,"a",function(b){a._handleLinkClick($(this),b)})};AbstractBrowserApplication.prototype.getBodyStump=function(){return this.getFakeDom().getBodyStump()};AbstractBrowserApplication.prototype.saveProgramAndNotifyCommand=function(){var a=this,b=this.getMountedProgram();b.forceSaveToDisk().then(function(){a.renderApp()}).catch(function(a){b.handleProgramError(a)})};
AbstractBrowserApplication.prototype.prompt=function(a,b){return Promise.resolve(prompt(a,b))};AbstractBrowserApplication.prototype.confirm=function(a){return Promise.resolve(confirm(a))};AbstractBrowserApplication.prototype.openExternalLink=function(a){this.getWindowElement().open(a)};AbstractBrowserApplication.prototype.cloneProgramCommand=function(){var a=this.getMountedProgram(),b=a.getParentId()||a.getHostedProgramId();return this.createAndOpen(a.childrenToString(),a.getFileName(),b)};
AbstractBrowserApplication.prototype._makeWindowDroppable=function(){var a=this,b=function(b,c){c=_.upperFirst(Format.toTitleCase(Format.removeFileExtension(c)));c=Format.permalink(c);b=(new TreeNotation(b)).toString();return a.createAndOpen(">data\n content "+b+"\n >table\n >scatter",c)},c=function(a,b,e){b=b||"";a.isFile?a.file(function(a){console.log("File:",b+a.name);d(b,a,e)}):a.isDirectory&&a.createReader().readEntries(function(d){for(var e=0;e<d.length;e++)c(d[e],b+a.name+"/")})},d=function(a,
b,c){var d=b.name.match(/\.([^\.]+)$/);if(!d)return!1;d=d[1].toLowerCase();d.match(/(csv|json|tree|txt|tsv|ssv)/)?(a=new FileReader,a.onload=function(a){a=(new RowParser).parse(a.target.result,d);console.log("Processed "+a.length+" rows");c&&c(a,b.name)},a.onerror=function(a){return console.error("error: ",a)},a.readAsText(b)):console.log("No matching file extension found")},e=function(d,e){for(var f=0;f<d.length;f++){var g=d[f].webkitGetAsEntry();e?c(g,null,function(b){var c=a.getMountedProgram();
c&&(c.concat(a.makeDataBlock(b)),c.autosaveProgram(),a.renderApp())}):g&&c(g,null,b)}};(function(){var b=a.getBodyStump(),c=function(a){a=a.originalEvent;var b=a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect="move"===b||"linkMove"===b?"move":"copy"},d=function(a){a.preventDefault();a.stopPropagation();b.removeClass("dragOver");jqi($jscomp$templatelit$7).remove();b.off(BrowserEvents.dragleave,d)};b.on(BrowserEvents.dragover,function(a){c(a);a.preventDefault();a.stopPropagation();b.hasClass("dragOver")||
(b.append('<div id="dragOverHelp">'+Say($jscomp$templatelit$6)+"</div>"),b.addClass("dragOver"),setTimeout(function(){b.on(BrowserEvents.dragleave,d)},50))});b.on(BrowserEvents.drop,function(a){a.preventDefault();a.stopPropagation();b.removeClass("dragOver");jqi($jscomp$templatelit$8).remove();e(a.originalEvent.dataTransfer.items,a.shiftKey)});b.on(BrowserEvents.dragenter,function(a){a.preventDefault();a.stopPropagation()})})()};AbstractBrowserApplication.prototype.getRenderedBlocks=function(){return this.getMountedProgram().getDescendantBlocks().filter(function(a){return a.isMounted()})};
AbstractBrowserApplication.prototype._createProgramFromPaste=function(a){return this.createAndOpen(a,"untitled.flow")};AbstractBrowserApplication.prototype.pasteCommand=function(a){var b=this.getMountedProgram();return!b||b.isReadOnly()?this._createProgramFromPaste(a):b.appendFromPaste(a)};
AbstractBrowserApplication.prototype._makeWindowPastable=function(){var a=this;a.getWindowElement().addEventListener(BrowserEvents.paste,function(b){if(a.getFakeDom().someInputHasFocus())return!0;b.clipboardData&&b.clipboardData.getData&&a.pasteCommand(b.clipboardData.getData("text/plain"))},!1)};AbstractBrowserApplication.prototype.setContextMenuEvent=function(a){this._contextMenuEvent=a;return this};AbstractBrowserApplication.prototype.setDblClickEvent=function(a){this._dblClickEvent=a;return this};
AbstractBrowserApplication.prototype.getDblClickEvent=function(){return this._dblClickEvent};AbstractBrowserApplication.prototype.getContextMenuEvent=function(){return this._contextMenuEvent};
AbstractBrowserApplication.prototype._runSpeedTestCommand=function(){var a=this,b=this.getLinks().map(function(a){return a.link}),c=Date.now(),d=Util.pLimit(7),e=this.getFocusedPanel(),b=b.map(function(b){return d(function(){return a.openUrlInNewSpace(b).then(function(a){var b=e.getMountedProgram();e.setMountedProgram(a);b&&e.closeProgram(b);return a.getProgramStats()})})});return Promise.all(b).then(function(b){e.closeProgram(e.getMountedProgram());b=new TreeNotation(b);var d=Date.now()-c,d="Program Load Times "+
moment().format("MM/DD/YYYY")+" version "+a.getVersion()+". Run time: "+d;return a.createAndOpen(SpeedTestTemplate(d,b.toCsv()),"program-load-times")})};AbstractBrowserApplication.prototype.executeCommandOnFirstSelectedBlock=function(a,b,c){return this.getMountedProgram().getFirstSelectedBlock()[a](b,c)};
AbstractBrowserApplication.prototype._executeCommand=function(a,b,c,d){a=$(a);b=a.attr(b);if(!b||d&&c.target!==c.currentTarget)return!0;c.preventDefault();c=a.closest(".AC").data("container");d=a.is(":checkbox")?a.is(":checked")?!0:!1:a.attr("contenteditable")?a.html():a.val()?a.val():a.attr("value");var e=a.attr("name");this.logCommand([b,d,e].filter(function(a){return a}).join(" "));if(b.startsWith("block "))c.getChildBlock()[b.substr(6)](d,e);else if(b.startsWith("context "))this.getTargetNode()[b.substr(8)](d,
e);else if(b.startsWith("app "))this[b.substr(4)](d,e);else if(b.startsWith("ac "))c[b.substr(3)](d,e);else throw new ErrorKinds.ThisShouldNeverHappenError("Bad command "+b);0<a.closest(".AbstractContextMenu,.dropdownMenu").length&&$("body").trigger("click");return!1};
AbstractBrowserApplication.prototype._setContainerHandlers=function(){var a=this,b=this.getBodyStump();b.on(BrowserEvents.contextmenu,"*",function(b){if(b.ctrlKey)return!0;a.setContextMenuEvent(b);return a._executeCommand(this,"data-contextmenucommand",b)});b.on(BrowserEvents.change,"input,select,textarea",function(b){return a._executeCommand(this,"data-command",b)});b.on(BrowserEvents.blur,"[contenteditable='true']",function(b){return a._executeCommand(this,"data-command",b)});b.on(BrowserEvents.click,
"a,button,svg,section,span",function(b){return a._executeCommand(this,"data-command",b)});b.on(BrowserEvents.dblclick,"div",function(b){a.setDblClickEvent(b);return a._executeCommand(this,"data-dblclickcommand",b,!0)})};window.AbstractBrowserApplication=AbstractBrowserApplication;var AbstractModal=function(a){return AC.apply(this,arguments)||this};$jscomp.inherits(AbstractModal,AC);AbstractModal._mountedComponents=AC._mountedComponents;
AbstractModal.prototype.getHakon=function(){var a=this.getTheme();return AC.prototype.getHakon.call(this)+"\n.monospaceModal\n font-family Courier, monospace\n white-space pre\n "+a.enableTextSelect(2)+"\n >div\n  max-height 600px\n  overflow scroll\n input\n  display block\n  width 100%\n textarea\n  width 100%\n  display block\n  min-height 200px\n  font-size 14px\n  font-family Courier, monospace\n\n.modalBackground\n position fixed\n top 0\n left 0\n width 100%\n height 100%\n z-index 1000\n display flex\n padding-top 50px\n align-items baseline\n justify-content center\n box-sizing border-box\n background "+
a.modalDimmerBackground+"\n\n.modalContent\n background "+a.contextMenuBackground+"\n color "+a.foregroundColor+"\n box-shadow 0px 0px 2px "+a.boxShadow+"\n padding 20px\n position relative\n min-width 600px\n max-width 800px\n max-height 90%\n white-space nowrap\n text-overflow ellipsis\n overflow-x hidden\n overflow-y scroll\n textarea\n  margin-bottom 10px\n  white-space pre\n pre\n  "+a.enableTextSelect(1)+"\n\n.modalClose\n position absolute\n top 10px\n right 10px\n cursor pointer"};
AbstractModal.prototype.getBaseHtml=function(a){return'<section data-command="ac _confirmAndUnmountCommand" class="modalBackground"><section data-command="ac _stopPropagationCommand" class="modalContent"><a data-command="ac _confirmAndUnmountCommand" class="modalClose">X</a>'+(void 0===a?"":a)+"</section></section>"};AbstractModal.prototype.hasChanges=function(){return!1};window.AbstractModal=AbstractModal;var AbstractProgram=function(a){return AbstractProgramNode.apply(this,arguments)||this};
$jscomp.inherits(AbstractProgram,AbstractProgramNode);AbstractProgram._mountedComponents=AbstractProgramNode._mountedComponents;AbstractProgram.prototype.isProvider=function(){return!0};AbstractProgram.prototype.isProgram=function(){return!0};AbstractProgram.prototype.getPanel=function(){return this.getParent()};AbstractProgram.prototype.executeLoadProgramCode=function(){var a=this.getParser(),b=_.uniq(this.getDescendantBlocks().map(function(a){return a.getHead()}));return Promise.all(b.map(function(b){return a.loadBlockCode(b)}))};
AbstractProgram.prototype.executeLoadProgramCodeAndData=function(){var a=this;return this.executeLoadProgramCode().then(function(){return Promise.all(a.getChildBlocks().map(function(a){return a.executeLoadNewPlane()}))})};AbstractProgram.prototype.getBlockDimensionMap=function(a,b){return(new (this._getLayoutStrategyClass())(this,a,b)).makeBlockDimensionMap()};AbstractProgram.prototype._getLayoutStrategyClass=function(){return LayoutStrategies[this.findTail("layout")]||LayoutStrategies.custom};
AbstractProgram.prototype.getProgramDimension=function(){var a=this.getApp().getBodyStump();return{width:a.width()-this.getParent().getGutterWidth(),height:a.height()}};AbstractProgram.prototype.getSelectedBlocks=function(){return this.getDescendantBlocks().filter(function(a){return a.isSelected()})};AbstractProgram.prototype.clearSelection=function(){this.getSelectedBlocks().forEach(function(a){return a.unselect()})};AbstractProgram.prototype.selectAll=function(){this.getDescendantBlocks().forEach(function(a){return a.selectBlock()})};
AbstractProgram.prototype.getFirstSelectedBlock=function(){return this.getSelectedBlocks()[0]};AbstractProgram.prototype.selectNext=function(){for(var a=this.getFirstSelectedBlock().getNext();!a.getHead().startsWith(">");)a=this.getFirstSelectedBlock().getNext();this.clearSelection();a.selectBlock();return Promise.resolve()};
AbstractProgram.prototype.copySelection=function(a){a=this._copySelection(a);if(!a)return Promise.resolve();this.getApp().emitGlobalMessageAndFade(Say($jscomp$templatelit$9));return Promise.resolve(a)};AbstractProgram.prototype._copySelection=function(a){var b=this.getApp().getFakeDom();if(b.someInputHasFocus())return"";var c=this.selectionToString();if(!c)return"";b.setCopyData(a,c);return c};AbstractProgram.prototype.selectionToString=function(){return this.getSelectedBlocks().map(function(a){return a.toString()}).join("\n")};
AbstractProgram.prototype.selectBlocksBySelector=function(a){$(void 0===a?".ui-selected":a).each(function(){$(this).data("container").selectBlock()})};AbstractProgram.prototype._getPinChangeInPixels=function(a,b){return{left:a.offset.left-b.left,top:a.offset.top-b.top}};AbstractProgram.prototype.cutSelection=function(a){a=this._copySelection(a);if(!a)return Promise.resolve();this.deleteSelection();this.getApp().emitGlobalMessageAndFade(Say($jscomp$templatelit$10));return Promise.resolve(a)};
AbstractProgram.prototype.deleteSelection=function(){var a=this.getSelectedBlocks();if(!a.length)return Promise.resolve();a.forEach(function(a){return a.unmountAndDestroy()});return this.autosaveAndRender()};AbstractProgram.prototype.duplicateSelection=function(){var a=this,b=this.getSelectedBlocks().map(function(b){return a.cloneBlock(b)}),c=this.autosaveAndRender();this.clearSelection();b.forEach(function(a){return a.selectBlock()});return c};
AbstractProgram.prototype.selectPrevious=function(){for(var a=this.getFirstSelectedBlock().getPrevious();!a.getHead().startsWith(">");)a=this.getFirstSelectedBlock().getPrevious();this.clearSelection();a.selectBlock();return Promise.resolve()};AbstractProgram.prototype.appendFromPaste=function(a){var b=this,c=this.concat(a);a=this.autosaveAndRender();this.clearSelection();return a.then(function(){return b.executeLoadProgramCodeAndData().then(function(){c.forEach(function(a){return a.selectBlock()})})})};
AbstractProgram.prototype.getDiskFolder=function(){var a=(this.isFolder()?this.getUrl():this.getFolder())||"/";return require("path").normalize(a.replace("file://",""))};AbstractProgram.prototype.getFolder=function(){var a=this.getUrl().split("/");a.pop();return a.join("/")};AbstractProgram.prototype.setLayout=function(a){this.touchNode("layout").setTail(a);return this};
AbstractProgram.prototype.cloneBlock=function(a){var b=a.duplicate();(a=a.findTail("pin"))&&b.touchNode("pin").setTail(this.getAvailableSpot(a));return b};AbstractProgram.prototype.updateCustomPoint=function(){return this._updateCustomLayout()};AbstractProgram.prototype.updateCustomPointWithWidthAndHeight=function(){return this._updateCustomLayout(!0)};
AbstractProgram.prototype._updateCustomLayout=function(a){a=void 0===a?!1:a;var b=this;$(".BlockContainer").each(function(){b._updateBlockLayout($(this),a)});this.setLayout("custom");this.autosaveProgram();this.getApp().renderApp()};
AbstractProgram.prototype._updateBlockLayout=function(a,b){var c=a.data("container"),d=a.offset(),e=this.getGridSize(),f=a.parent().offset();a=[Math.floor((d.left-f.left)/e),Math.floor((d.top-f.top)/e),Math.floor(a.width()/e),Math.floor(a.height()/e)];b=b?a:a.slice(0,2);c.delete("pin");c.prepend("pin "+b.join(" "))};AbstractProgram.prototype.getAvailableSpot=function(a){a=a.split(" ").map(function(a){return parseInt(a)});a[0]++;a[1]++;return a.join(" ")};
AbstractProgram.prototype.toggleLayout=function(){var a=this.toggle("layout",["custom","bin","tree"]);this.getDescendantBlocks().forEach(function(a){return a.makeDirty()});this.getApp().emitGlobalMessageAndFade(Say($jscomp$templatelit$11,a));return this.autosaveAndRender()};AbstractProgram.prototype.getGridSize=function(){return 20};AbstractProgram.prototype.setIsFolder=function(a){this._isFolder=a;return this};AbstractProgram.prototype._getLongestLoadTime=function(){return this.getDescendantBlocks().map(function(a){return a.getTTL()}).sort().reverse()[0]};
AbstractProgram.prototype._getLongestRenderTime=function(){return this.getDescendantBlocks().map(function(a){return a.getNewestTimeToRender()}).sort().reverse()[0]};AbstractProgram.prototype.isFolder=function(){return!0===this._isFolder};AbstractProgram.prototype.getFullPath=function(){return this.getApp().normalizePath(this.getFileName())};AbstractProgram.prototype.handleProgramError=function(a){console.error(a)};AbstractProgram.prototype.isReadOnly=function(){return!0===this._readOnly};
AbstractProgram.prototype.setAuthor=function(a){this._author=a;return this};AbstractProgram.prototype.getAuthor=function(){return this._author||""};AbstractProgram.prototype.setReadOnly=function(a){this._readOnly=a;return this};AbstractProgram.prototype.autosaveAndRender=function(){var a=this.autosaveProgram();this.getApp().renderApp();return a};
AbstractProgram.prototype.autosaveProgram=function(){var a=this.childrenToString(),b=this._getTopUndoVersion();if(a===b)return Promise.resolve();this._recordChange(a);return this.getApp().isAutoSaveEnabled()?this.forceSaveToDisk():Promise.resolve()};AbstractProgram.prototype._clearRedoStack=function(){var a=this._getRedoStack();a.splice(0,a.length)};AbstractProgram.prototype._recordChange=function(a){this._clearRedoStack();this._getUndoStack().push(a)};
AbstractProgram.prototype.forceSaveToDisk=function(){var a=this._getDiff();this.setHash(a.newHash);this._setDiskVersion(a.newVersion);return this.getApp().saveProgramToDisk(this,a).catch(function(a){throw new ProgramSaveError(a);})};AbstractProgram.prototype._getDiskVersion=function(){return this._diskVersion};AbstractProgram.prototype._setDiskVersion=function(a){this._diskVersion=a;return this};AbstractProgram.prototype._getUndoStack=function(){this._undoStack||(this._undoStack=[]);return this._undoStack};
AbstractProgram.prototype._getRedoStack=function(){this._redoStack||(this._redoStack=[]);return this._redoStack};AbstractProgram.prototype._getTopUndoVersion=function(){var a=this._getUndoStack();return a[a.length-1]};AbstractProgram.prototype.undoCommand=function(){var a=this._getUndoStack(),b=this._getRedoStack();if(1===a.length)return Promise.resolve();b.push(a.pop());return this._reloadFromUndoTop()};
AbstractProgram.prototype._reloadFromUndoTop=function(){this.unmount();this.setChildren(this._getTopUndoVersion());return this._reloadProgram()};AbstractProgram.prototype.autosaveAndReloadWith=function(a){this.unmount();this.setChildren(a);this.autosaveProgram();return this._reloadProgram()};AbstractProgram.prototype._reloadProgram=function(){var a=this;return this.executeLoadProgramCodeAndData().then(function(){a.getParent().setMountedProgram(a);a.getApp().renderApp()})};
AbstractProgram.prototype.redoCommand=function(){var a=this._getUndoStack(),b=this._getRedoStack();if(!b.length)return Promise.resolve();a.push(b.pop());return this._reloadFromUndoTop()};AbstractProgram.prototype.setHostedProgramId=function(a){this._id=a};AbstractProgram.prototype.getHostedProgramId=function(){return this._id||0};AbstractProgram.prototype.hasUnsavedChanges=function(){return this.childrenToString()!==this._getDiskVersion()};
AbstractProgram.prototype.getHash=function(){return this._hash||""};AbstractProgram.prototype.setHash=function(a){this._hash=a};AbstractProgram.prototype._getDiff=function(){var a=this.getHash(),b=this.childrenToString(),c=this._getDiskVersion(),c=diff.compareStr(c,b,"\n"),d=new jsSHA("SHA-1","TEXT");d.update(a+JSON.stringify(c));d=d.getHash("HEX");return{oldHash:a,newHash:d,patch:c,newVersion:b}};
AbstractProgram.prototype.setChildrenAndDiskAndUndoStack=function(a){this.setChildren(a);this._setDiskVersion(a);this._getUndoStack().push(a);return this};AbstractProgram.prototype.getFileName=function(){return this.getUrl().split("/").pop()};AbstractProgram.prototype.setPrivate=function(a){this._private=a;return this};AbstractProgram.prototype.getUrl=function(){return this.getTail()};AbstractProgram.prototype.setParentId=function(a){this._parentId=a};
AbstractProgram.prototype.setApiKey=function(a){this._apiKey=a};AbstractProgram.prototype.setComments=function(a){this._comments=a};AbstractProgram.prototype.getComments=function(){return this._comments||[]};AbstractProgram.prototype.isPrivate=function(){return this._private||0};AbstractProgram.prototype.setListed=function(a){this._listed=a;return this};AbstractProgram.prototype.isListed=function(){return this._listed||0};AbstractProgram.prototype.getParentId=function(){return this._parentId||0};
AbstractProgram.prototype.getMTime=function(){return this._mtime||0};AbstractProgram.prototype.setMTime=function(a){this._mtime=a};AbstractProgram.prototype.getCTime=function(){return this._ctime||0};AbstractProgram.prototype.setCTime=function(a){this._ctime=a};AbstractProgram.prototype.getApiKey=function(){return this._apiKey||""};AbstractProgram.prototype.getHtml=function(){return""};AbstractProgram.prototype.getClasses=function(){return"AC AbstractProgram "+this.constructor.name};
AbstractProgram.prototype.getHakon=function(){var a=this.getTheme();return".AbstractProgram\n left "+this.getParent().getGutterWidth()+"px\n background "+a.surfaceBackground+"\n position relative\n right 0\n bottom 0\n\n.ui-selectable-helper\n position absolute\n z-index 100\n border-radius 2px\n background "+a.selectionBackground+"\n\n.ui-selecting,.ui-selected,.StaySelected\n outline 3px solid "+a.selectedOutline};
AbstractProgram.prototype._clearWideProgramMins=function(){var a={"min-height":"","min-width":""},b=this.getStump();b.css(a);b.parent().css(a);this._forceRepaint()};AbstractProgram.prototype._forceRepaint=function(){this.getApp().getDocumentStump().width()};AbstractProgram.prototype.makePin=function(a){var b=this.getGridSize();return[Math.floor((a.offsetX-0)/b),Math.floor(a.offsetY/b)].join(" ")};AbstractProgram.prototype.componentDidUpdate=function(){this._clearWideProgramMins();this._fixWideProgramBugs()};
AbstractProgram.prototype._fixWideProgramBugs=function(){var a=this.getApp(),b=a.getMenuContainer(),b=b&&b.getStump(),c=a.getHtmlStump();b&&b.css("width","");c.css({width:"",height:"","min-height":"","min-width":""});var a=a.getDocumentStump(),d=a.width(),e=a.height();b&&b.css("width",d);c.css({"min-height":"100%","min-width":"100%",width:d,height:e});b=this.getStump();c=b.parent();a={"min-height":a.height()-60+"px","min-width":a.width()+"px"};c.css(a);b.css(a)};
AbstractProgram.prototype.componentDidMount=function(){this._makeSelectable();this._makeBlocksMoveableAndResizableAndEditable();this.componentDidUpdate()};
AbstractProgram.prototype._makeSelectable=function(){var a=this.getApp(),b=this.getStump();b.on(BrowserEvents.click,function(b){b.target===this&&a.getFakeDom().someInputHasFocus()&&$(":focus").first().trigger("blur")});b.selectable({cancel:".BlockContainer",distance:10,filter:".BlockContainer",start:function(b){b.shiftKey?$(".ui-selected").addClass("StaySelected"):a.clearSelectionCommand()},stop:function(){$(".StaySelected").addClass("ui-selected").removeClass("StaySelected");a.selectBlocksBySelectorCommand();
return!0}})};AbstractProgram.prototype.getAllRows=function(){return _.flatten(this.getDescendantBlocks().map(function(a){return a.isProvider()?a.getOutputPlane().getRows():[]}))};AbstractProgram.prototype.getProgramRowCount=function(){return this.getAllRows().reduce(function(a,b){return a+b.length},0)};
AbstractProgram.prototype.getProgramStats=function(){var a=this.getDescendantBlocks(),b=a.map(function(a){return a.getErrorCount()}).reduce(function(a,b){return a+b},0);return{blocks:a.length,rows:this.getProgramRowCount(),url:this.getFileName(),timeToLoad:this._getLongestLoadTime(),timeToRender:this._getLongestRenderTime(),errorCount:b}};
AbstractProgram.prototype.shouldComponentMount=function(){return AbstractProgramNode.prototype.shouldComponentMount.call(this)&&this.getParent().getMountedProgram()===this};
AbstractProgram.prototype._makeBlocksMoveableAndResizableAndEditable=function(){var a=this.getApp(),b=this,c=this.getGridSize();this.getStump().on(BrowserEvents.mouseover,".BlockContainer",function(d){var e=$(this);if(0<e.find(".ui-resizable-handle").length)return!0;b.makeGroupDraggable(e,[c,c]);e.resizable({handles:"se",grid:c,create:function(a,b){e.find(".ui-resizable-handle").attr("title","Drag to resize")},stop:function(){return a.getMountedProgram().updateCustomPointWithWidthAndHeight()}})})};
AbstractProgram.prototype.getAttributes=function(){return'data-contextmenucommand="ac _openProgramContextMenuCommand" data-dblclickcommand="app insertMorphBlockCommand"'};AbstractProgram.prototype._openProgramContextMenuCommand=function(){return this.getApp().toggleAndRender("programContextMenu")};AbstractProgram.prototype._getSelectedBlockStumps=function(){return this.getApp().getFakeDom().getStumps(".BlockContainer.ui-selected")};
AbstractProgram.prototype.updateSelectedOnMove=function(a,b){var c=this._getSelectedBlockStumps();0!==c.length&&(c.not(a).each(function(){var a=$(this),c=parseFloat(a.css("top")),f=parseFloat(a.css("left"));a.css({transform:"",top:c+b.top+"px",left:f+b.left+"px"})}),a.closest(".ui-selectable").selectable("refresh"))};
AbstractProgram.prototype.makeGroupDraggable=function(a,b){var c=$(a);if(c.hasClass("draggable"))return!0;var d,e=this,f=this.getApp();a={stop:function(a,b){c.removeClass("noTransition");c.attr("data-translate","undefined undefined");a=e._getPinChangeInPixels(b,d);e.updateSelectedOnMove(c,a);d=b;f.getMountedProgram().updateCustomPoint()},handle:".BlockFooter",drag:function(a,b){c.hasClass("ui-selected")&&(a=e._getPinChangeInPixels(b,d),e._getSelectedBlockStumps().not(c).css("transform","translate("+
a.left+"px, "+a.top+"px)"))},start:function(a,b){d=b.offset;c.addClass("noTransition");if(a=c.attr("data-translate"))parseInt(a.split(" ")[0]),parseInt(a.split(" ")[1])}};b&&(a.grid=b);c.draggable(a).addClass("draggable")};window.AbstractProgram=AbstractProgram;var BlockDimension=function(a,b){a=a.getSuggestedSize();this.width=a.width;this.height=a.height;Object.assign(this,b)};
BlockDimension.prototype.getScaledCss=function(a){a=void 0===a?1:a;return this._toCss({width:this.width*a,height:this.height*a,left:this.left*a,top:this.top*a})};BlockDimension.prototype.toCss=function(){return this._toCss(this)};BlockDimension.prototype._toCss=function(a){return"width: "+a.width+"px; height: "+a.height+"px; left: "+a.left+"px; top: "+a.top+"px"};window.BlockDimension=BlockDimension;
var BrowserEvents={click:"click",change:"change",mouseover:"mouseover",mouseout:"mouseout",mousedown:"mousedown",contextmenu:"contextmenu",keypress:"keypress",keyup:"keyup",focus:"focus",mousemove:"mousemove",dblclick:"dblclick",submit:"submit",blur:"blur",paste:"paste",copy:"copy",cut:"cut",drop:"drop",dragover:"dragover",dragenter:"dragenter",dragleave:"dragleave",ready:"ready"};window.BrowserEvents=BrowserEvents;var DemoPrograms="faq.flow >url faq.md\n  format text\n  visible false\n  >markdown\nreadme.flow >url readme.md\n  format text\n  visible false\n  >markdown\nreleasenotes.flow >url releasenotes.md?06232017\n  format text\n  visible false\n  >markdown\nohayo.flow >youtube 8rwsuXHA7RA\nfib.fire fn fib n\n  < lessThan1 n 1\n  if lessThan1\n   return 0\n  <= lessOr2 n 2\n  if lessOr2\n   return 1\n  - oneLess n 1\n  - twoLess n 2\n  call oneLessFib fib oneLess\n  call twoLessFib fib twoLess\n  + sum oneLessFib twoLessFib\n  return sum\n call result fib 10\n ## tests 0 1 2 3 4 5 6 7 8 9 10\n . results tests map fib\n log results\n layout tree";
window.DemoPrograms=DemoPrograms;function jqi(a,b){for(var c=1;c<arguments.length;++c);return $("#"+a)}window.jqi=jqi;var GlobalShortcutNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(GlobalShortcutNode,TreeNotation);GlobalShortcutNode.prototype.getKeyCombo=function(){return this.getWord(2)};GlobalShortcutNode.prototype.getFn=function(){return this.getWord(1)};GlobalShortcutNode.prototype.getDescription=function(){return this.getWords(3).join(" ")};
GlobalShortcutNode.prototype.isEnabled=function(){return!0};GlobalShortcutNode.prototype.execute=function(a){if(!this.isEnabled(a))return!1;var b=this.getFn();a.logCommand("app "+b);a[b]()};var MountedShortcutNode=function(a){return GlobalShortcutNode.apply(this,arguments)||this};$jscomp.inherits(MountedShortcutNode,GlobalShortcutNode);MountedShortcutNode.prototype.isEnabled=function(a){return!!a.getMountedProgram()};
var KeyboardShortcutNotation=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(KeyboardShortcutNotation,TreeNotation);KeyboardShortcutNotation.prototype.parseNodeType=function(a){if(a.startsWith("panel"))return GlobalShortcutNode;if(a.startsWith("mounted"))return MountedShortcutNode;throw Error("bad keyboard node type");};window.KeyboardShortcutNotation=KeyboardShortcutNotation;var BinPacker=function(){};
BinPacker.prototype.fit=function(a){var b=a.length;this.root={x:0,y:0,w:0<b?a[0].w:0,h:0<b?a[0].h:0};for(var c=0;c<b;c++){var d=a[c],e=this.findNode(this.root,d.w,d.h);d.fit=e?this.splitNode(e,d.w,d.h):this.growNode(d.w,d.h)}};BinPacker.prototype.findNode=function(a,b,c){return a.used?this.findNode(a.right,b,c)||this.findNode(a.down,b,c):b<=a.w&&c<=a.h?a:null};BinPacker.prototype.splitNode=function(a,b,c){a.used=!0;a.down={x:a.x,y:a.y+c,w:a.w,h:a.h-c};a.right={x:a.x+b,y:a.y,w:a.w-b,h:c};return a};
BinPacker.prototype.growNode=function(a,b){var c=this.root,d=a<=c.w,e=b<=c.h,f=d&&c.w>=c.h+b;return e&&c.h>=c.w+a?this.growRight(a,b):f?this.growDown(a,b):e?this.growRight(a,b):d?this.growDown(a,b):null};BinPacker.prototype.growRight=function(a,b){var c=this.root;this.root={used:!0,x:0,y:0,w:c.w+a,h:c.h,down:c,right:{x:c.w,y:0,w:a,h:c.h}};return(c=this.findNode(this.root,a,b))?this.splitNode(c,a,b):null};
BinPacker.prototype.growDown=function(a,b){var c=this.root;this.root={used:!0,x:0,y:0,w:c.w,h:c.h+b,down:{x:0,y:c.h,w:c.w,h:b},right:c};return(c=this.findNode(this.root,a,b))?this.splitNode(c,a,b):null};var AbstractLayoutStrategy=function(a,b,c){this._program=a;this._width=void 0===b?1400:b;this._height=void 0===c?1400:c};AbstractLayoutStrategy.prototype.getBlocks=function(){return this.getProgram().getDescendantBlocks().filter(function(a){return a.isVisible()})};
AbstractLayoutStrategy.prototype.getHierarchy=function(){return this.getProgram().getHierarchy()};AbstractLayoutStrategy.prototype.getProgram=function(){return this._program};AbstractLayoutStrategy.prototype.getContainerWidth=function(){return this._width};AbstractLayoutStrategy.prototype.getContainerHeight=function(){return this._height};var CustomLayout=function(a){AbstractLayoutStrategy.apply(this,arguments)};$jscomp.inherits(CustomLayout,AbstractLayoutStrategy);
CustomLayout.prototype.makeBlockDimensionMap=function(){var a=this.getBlocks(),b=[],c=new Map;a.forEach(function(a,d){if(!a.getPin())return b.push(a);c.set(a,a.makeBlockDimension())});var d=0;b.forEach(function(a,b){b=a.makeBlockDimension("0 "+d);c.set(a,b);d+=b.height/20});return c};var TreeLayout=function(a){AbstractLayoutStrategy.apply(this,arguments)};$jscomp.inherits(TreeLayout,AbstractLayoutStrategy);
TreeLayout.prototype.makeBlockDimensionMap=function(){var a=d3.hierarchy(this.getHierarchy()),b=d3.tree().size([.8*this.getContainerWidth(),.8*this.getContainerHeight()]),c=new Map;b(a).descendants().forEach(function(a){var b=a.data.block;b.isProgram()||(a=new BlockDimension(b,{width:80,height:80,left:a.x,top:a.y}),c.set(b,a))});return c};var ColumnLayout=function(a){AbstractLayoutStrategy.apply(this,arguments)};$jscomp.inherits(ColumnLayout,AbstractLayoutStrategy);
ColumnLayout.prototype.makeBlockDimensionMap=function(){var a=0,b=Math.floor((this.getContainerWidth()-800)/2),c=new Map;this.getBlocks().forEach(function(d){var e=d.getSuggestedSize(),f=new BlockDimension(d,{width:800,height:e.height,left:b,top:a});c.set(d,f);a+=e.height});return c};var BinLayout=function(a){AbstractLayoutStrategy.apply(this,arguments)};$jscomp.inherits(BinLayout,AbstractLayoutStrategy);
BinLayout.prototype.makeBlockDimensionMap=function(){var a=new Map,b=this.getBlocks().map(function(a){var b=a.getSuggestedSize();return{w:b.width,h:b.height,block:a}}),b=_.sortBy(b,function(a){return Math.max(a.w,a.h)}).reverse();(new BinPacker).fit(b);b.forEach(function(b){var c=new BlockDimension(b.block,{width:b.w,height:b.h,left:b.fit.x,top:b.fit.y});a.set(b.block,c)});return a};var LayoutStrategies={custom:CustomLayout,column:ColumnLayout,tree:TreeLayout,bin:BinLayout};
window.LayoutStrategies=LayoutStrategies;function MakeSVG(a,b,c,d){c=void 0===c?"":c;d=void 0===d?"":d;var e=SVGS[a];if(!e){console.error("svg not found for "+a);debugger;return""}a=e.substr(4);return'<svg width="'+b+'" height="'+b+'" '+c+' class="SVGIcon '+d+'" '+a}window.MakeSVG=MakeSVG;window.console||(window.console={log:function(){},time:function(){},error:function(){},debug:function(){}});Object.values||(Object.values=function(a){return Object.keys(a).map(function(b){return a[b]})});
var SearchContainer=function(a){return AC.apply(this,arguments)||this};$jscomp.inherits(SearchContainer,AC);SearchContainer._mountedComponents=AC._mountedComponents;
SearchContainer.prototype.getHakon=function(){var a=this.getTheme();return".SearchContainer\n position absolute\n z-index 200\n top -30px\n left 250px\n .typeaheadInput\n  font-size 14px\n input\n  outline 0\n  border 0\n  width 300px\n  padding-left 5px\n  line-height 30px\n  height 30px\n  font-size 14px\n  background transparent\n .tt-menu\n  width 300px\n  margin-top 1px\n  padding-bottom 5px\n  background "+a.contextMenuBackground+"\n  border 0 1px 1px 1px solid "+a.lightGrey+"\n .tt-suggestion\n  padding 0 3px 3px 5px\n  cursor pointer\n .matchType\n  margin 0 20px 5px 0\n  padding 3px 0 3px 5px\n  border-bottom 1px solid "+
a.lightGrey+"\n  width 100%\n  color "+a.foregroundColor+"\n h3.matchType\n  font-size 16px\n .tt-cursor,.tt-suggestionhover\n  background "+a.hoverBackground+"\n  color "+a.white};SearchContainer.prototype.getHtml=function(){return'<input class="typeaheadInput" type="text" placeholder="Search">'};SearchContainer.prototype._getInputElement=function(){return this.getStump().find(".typeaheadInput")};SearchContainer.prototype.focusInputCommand=function(){this._getInputElement().focus();return Promise.resolve()};
SearchContainer.prototype._scanLinks=function(a){if(a)return this.getApp().getLinks().find(function(b){return a!==b.title?!1:!0})};SearchContainer.prototype.tryOpenByNameCommand=function(a,b){var c=this.getApp();(a=a&&this._scanLinks(a.split(" ").pop()))?(c.openUrlInNewSpaceAndFocus(a.link),this._getInputElement().typeahead("val","").blur()):b&&c.universalSearchCommand(b)};
SearchContainer.prototype._makeSearchFn=function(){var a=this.getApp();return function(b,c){var d=b.startsWith("!")?b.substring(1):b;try{var e=new RegExp(d,"i");var f=function(a){return e.test(a)}}catch(g){f=function(a){return a.includes(d)}}if(b.startsWith("!"))return b=a.getKeyboardShortcuts().getChildren().map(function(a){return"!"+a.getFn()}),c(b.filter(f));c(a.getLinks().map(function(a){return a.title}).filter(f))}};
SearchContainer.prototype.onEnter=function(){var a=this.getApp(),b=this._getInputElement(),c=b.typeahead("val"),d=$(".tt-input").val();d.startsWith("?")?a.universalSearchCommand(d.substr(1)):d.startsWith("!")?a.executeCommandLine(["app",d.substr(1)]):this.tryOpenByNameCommand(c,d);b.blur()};
SearchContainer.prototype.componentDidMount=function(){var a=this;this._getInputElement().typeahead({highlight:!0,minLength:1,hint:!0},{name:"myPrograms",limit:7,source:this._makeSearchFn(),templates:{header:'<h3 class="matchType">'+Say($jscomp$templatelit$12)+"</h3>"}}).bind("typeahead:select",function(b,c){return a.tryOpenByNameCommand(c)}).on(BrowserEvents.keyup,this,function(b){if(13===b.keyCode)a.onEnter()})};window.SearchContainer=SearchContainer;
var StorageKeys={openPrograms:"__openPrograms",autoSave:"__autoSave",theme:"__theme",visitCount:"__visitCount",newUser:"__newUser"},_storageKeysmap={};Object.values(StorageKeys).forEach(function(a){_storageKeysmap[a]=!0});StorageKeys.isKey=function(a){return _storageKeysmap[a]};window.StorageKeys=StorageKeys;
var Theme=function(a){var b=a=void 0===a?{}:a,c=void 0===b.backgroundColor?"rgb(255,255,255)":b.backgroundColor,d=void 0===b.foregroundColor?"black":b.foregroundColor,e=void 0===b.fn?"lighten":b.fn,b=void 0===b.selectionColor?"rgb(42, 89, 178)":b.selectionColor;this.blockBackgroundColor=this.contextMenuBackground=this.surfaceBackground=this.bodyBackground=this.programsBackground=this.tabBackground=this.menuBackground=this.backgroundColor=c;this.foregroundColor=this.menuContainerColor=d;this.lineColor=
tinycolor(d).setAlpha(.075).toString();this.boxShadow=tinycolor(d).setAlpha(.1).toString();this.darkerBackground=tinycolor(c).darken(10).toString();c=function(a){return tinycolor(d)[e](a).toString()};this.darkBlack=c(20);this.bodyColor=this.mediumBlack=c(40);this.midGray=c(60);this.greyish=c(82);this.lightGrey=c(93);this.veryLightGrey=c(97);this.borderColor=this.greyish;this.linkColor=this.hoverBackground=b;this.selectedOutline=tinycolor(b).setAlpha(.8).toString();this.selectionBackground=tinycolor(b).setAlpha(.1).toString();
this.errorColor="rgb(226, 120, 121)";this.successColor="#4CAF50";this.white="#fff";this.fonts="'San Francisco', 'Myriad Set Pro', 'Lucida Grande', 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif";this.modalDimmerBackground=tinycolor("#000").setAlpha(.4).toString();Object.assign(this,a)};Theme.prototype.enableTextSelect=function(a){return Theme._getIndented(a,"-moz-user-select text\n  -webkit-user-select text\n  -ms-user-select text\n  user-select text")};
Theme.prototype.getHeatColor=function(a){return"hsl(200, "+(25+75*a)+"%, "+(20+25*a)+"%)"};Theme.prototype.getTinyColor=function(){return tinycolor};Theme._getIndented=function(a,b){return b.split(/\n/g).join("\n"+" ".repeat(a))};Theme.prototype.disableTextSelect=function(a){return Theme._getIndented(a,"-webkit-touch-callout none\n-webkit-user-select none\n-khtml-user-select none\n-moz-user-select none\n-ms-user-select none\nuser-select none")};Theme.prototype.hakonToCss=function(a){return(new Hakon(a)).toCss()};
Theme.prototype.objToCss=function(a){return Object.keys(a).map(function(b){return a[b]||0===a[b]?b+": "+a[b]+";\n":""}).join("")+""};var Themes={};Themes.light=new Theme({menuBackground:"#3B539A",menuContainerColor:"white"});Themes.dark=new Theme({backgroundColor:"rgb(16, 16, 16)",foregroundColor:"#fff",fn:"darken"});
var glassColors={selectionColor:"rgba(46, 195, 212, .9)",bodyBackground:"linear-gradient(130deg, rgb(56, 114, 127), rgb(28, 98, 151) 45%, rgb(62, 73, 135))",backgroundColor:"rgba(0,0,0,.12)",contextMenuBackground:"rgba(0,0,0,.90)",blockBackgroundColor:"rgba(0,0,0,.12)",programsBackground:"transparent",boxShadow:"transparent",surfaceBackground:"transparent",borderColor:"transparent",foregroundColor:"#eee"};Themes.glass=new Theme(glassColors);glassColors.blockBackgroundColor="transparent";
Themes.sheet=new Theme(glassColors);window.Themes=Themes;var AbstractChartBlock=function(a){return AbstractBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractChartBlock,AbstractBlock);AbstractChartBlock._mountedComponents=AbstractBlock._mountedComponents;AbstractChartBlock.loadCode=AbstractBlock.loadCode;AbstractChartBlock.prototype.getBlockHtmlHeader=function(){return""+(this.getStruct().title||"")};
AbstractChartBlock.prototype.getBlockHtmlFooter=function(){var a=this.getInputPlane().getRowCount();return this.getBlockToolbarButton()+" In: "+a};AbstractChartBlock.prototype.toDisplayString=function(a,b){return void 0===a?"":this.getInputPlane().getPlaneColumnByName(b).toDisplayString(a)};window.AbstractChartBlock=AbstractChartBlock;var AbstractCommandBlock=function(a){return AbstractBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractCommandBlock,AbstractBlock);
AbstractCommandBlock._mountedComponents=AbstractBlock._mountedComponents;AbstractCommandBlock.loadCode=AbstractBlock.loadCode;window.AbstractCommandBlock=AbstractCommandBlock;var AbstractHeaderlessChartBlock=function(a){return AbstractChartBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractHeaderlessChartBlock,AbstractChartBlock);AbstractHeaderlessChartBlock._mountedComponents=AbstractChartBlock._mountedComponents;AbstractHeaderlessChartBlock.loadCode=AbstractChartBlock.loadCode;
AbstractHeaderlessChartBlock.prototype.getBlockHtmlPage=function(){return'<div class="BlockBody HeaderLess">'+this.getBlockHtmlBody()+'</div>\n  <div class="BlockFooter">'+this.getBlockHtmlFooter()+"</div>"};AbstractHeaderlessChartBlock.prototype.getHeaderHeight=function(){return 0};window.AbstractHeaderlessChartBlock=AbstractHeaderlessChartBlock;var AbstractProviderBlock=function(a){return AbstractBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractProviderBlock,AbstractBlock);
AbstractProviderBlock._mountedComponents=AbstractBlock._mountedComponents;AbstractProviderBlock.loadCode=AbstractBlock.loadCode;AbstractProviderBlock.prototype.getBlockHtmlFooter=function(){var a=this.getOutputPlane().getRowCount(),b=_.round(this.getTTL()/1E3,1);return this.getBlockToolbarButton()+" Out: "+a+" Time: "+b+"s "};AbstractProviderBlock.prototype.isProvider=function(){return!0};window.AbstractProviderBlock=AbstractProviderBlock;
var AbstractTransformerBlock=function(a){return AbstractProviderBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractTransformerBlock,AbstractProviderBlock);AbstractTransformerBlock._mountedComponents=AbstractProviderBlock._mountedComponents;AbstractTransformerBlock.loadCode=AbstractProviderBlock.loadCode;
AbstractTransformerBlock.prototype.getBlockHtmlFooter=function(){var a=this.getInputPlane().getRowCount(),b=this.getOutputPlane().getRowCount();return this.getBlockToolbarButton()+" In: "+a+" Out: "+b};AbstractTransformerBlock.prototype.getOutputColumnsTree=function(){return this.getNode("columns")||new TreeNotation};AbstractTransformerBlock.prototype.fetchRows=function(){return Promise.resolve(this.transformRows())};window.AbstractTransformerBlock=AbstractTransformerBlock;
var MockGoogle=function(){this.visualization={}},AbstractGoogleBase=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractGoogleBase,AbstractHeaderlessChartBlock);AbstractGoogleBase._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;AbstractGoogleBase.loadCode=AbstractHeaderlessChartBlock.loadCode;
AbstractGoogleBase.loadPackages=function(a){return"undefined"===typeof google?Promise.resolve():new Promise(function(b,c){return google.charts.load("current",{packages:a,callback:function(){return b()}})})};AbstractGoogleBase.prototype.getGoogle=function(){this._google||(this._google=this._isNode()?new MockGoogle:google);return this._google};AbstractGoogleBase.prototype.getBlockHtmlBody=function(){return'<div class="goog"></div>'};AbstractGoogleBase.prototype.getHakon=function(){return".goog\n .BlockPage\n  overflow scroll"};
AbstractGoogleBase.prototype._getGoogElement=function(){return this.getStump().find(".goog")[0]};AbstractGoogleBase.prototype._getGoogleOptions=function(){var a={},b=this.getStruct();Object.assign(a,b);b=this.getBlockBodyDimension();a.width=b.width;a.height=b.height;a.backgroundColor=this.getTheme().blockBackgroundColor;return a};AbstractGoogleBase.prototype._isNode=function(){return"undefined"===typeof google};
AbstractGoogleBase.prototype._draw=function(){if(!this._isNode()){var a=this._getChartClass(),b=this._getGoogElement(),a=new a(b),b=this._getGoogleOptions(),c=this._getGoogleData();a.draw(c,b)}};AbstractGoogleBase.prototype.componentDidMount=function(){AbstractHeaderlessChartBlock.prototype.componentDidMount.call(this);if(!this.getInputPlane().getRowCount())return"";this._draw()};AbstractGoogleBase.prototype.getLabelValue=function(){return this.getSomeData(["label","value"])};
AbstractGoogleBase.prototype.getSomeData=function(a){a=this.getRequiredTableWithDates(a);return this.getGoogle().visualization.arrayToDataTable(a)};AbstractGoogleBase.prototype.getPivotTable=function(a,b,c,d){var e=this.getStruct(),f=Object.keys(b.getMap()),g=[];Object.keys(c.getMap()).forEach(function(b){var c=[b];f.forEach(function(b){var d=_.find(a,function(a){return a[e.series]==b&&a[e.row]==a});c.push(d?d[e.cell]:0)});g.push(c)});f.unshift(e.series);g.unshift(f);return g};
window.AbstractGoogleBase=AbstractGoogleBase;var AbstractGoogleCore=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(AbstractGoogleCore,AbstractGoogleBase);AbstractGoogleCore._mountedComponents=AbstractGoogleBase._mountedComponents;AbstractGoogleCore.loadPackages=AbstractGoogleBase.loadPackages;AbstractGoogleCore.loadCode=function(){return AbstractGoogleBase.loadPackages(["corechart"])};AbstractGoogleCore.prototype._getGoogleData=function(){return this.getLabelValue()};
AbstractGoogleCore.prototype._getChartClass=function(){return this.getGoogle().visualization[this.getStruct().googleClassName]};window.AbstractGoogleCore=AbstractGoogleCore;var BrayBlock=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(BrayBlock,AbstractHeaderlessChartBlock);BrayBlock._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;BrayBlock.loadCode=AbstractHeaderlessChartBlock.loadCode;
BrayBlock.prototype._updateTextCommand=function(a){a=Format.stripHtml(a.replace(/\<br\>/g,"\n").replace(/\<div\>/g,"\n"));this.touchNode("content").setTailWithChildren(a);this.autosaveBlock();return this.getApp().render()};BrayBlock.prototype.getHakon=function(){return".BrayBlock\n p\n  padding 5px\n  width 100%\n  height 100%\n  box-sizing border-box\n  white-space pre\n  outline 0"};BrayBlock.prototype.getBlockHtmlFooter=function(){return this.getBlockToolbarButton()};
BrayBlock.prototype.getBlockHtmlBody=function(){var a=this.getStruct(),b=a.content,c=a.element||this.getHead().substr(1);return"<"+c+' style="'+a.style+'" data-command="ac _updateTextCommand" '+(a.editable?'contenteditable="true"':"")+">"+b+"</"+c+">"};window.BrayBlock=BrayBlock;var HeadTailArray=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(HeadTailArray,TreeNotation);
HeadTailArray.prototype.toArrayMap=function(){var a={};this.getChildren().forEach(function(b){a[b.getHead()]=b.getTail().split(" ")});return a};var HTMLChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(HTMLChart,AbstractHeaderlessChartBlock);HTMLChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;HTMLChart.loadCode=AbstractHeaderlessChartBlock.loadCode;
HTMLChart.prototype.getBlockHtmlBody=function(){var a=this.getStruct(),b=a.content||"",c=a.allowedTags.split(" "),a=(new HeadTailArray(a.allowedAttributes)).toArrayMap();return sanitizeHtml(b,{allowedTags:sanitizeHtml.defaults.allowedTags.concat(c),allowedSchemes:["http","https","file","mailto"],allowedAttributes:a})};window.HTMLChart=HTMLChart;var HeatCalendarChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(HeatCalendarChart,AbstractHeaderlessChartBlock);
HeatCalendarChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;HeatCalendarChart.loadCode=AbstractHeaderlessChartBlock.loadCode;HeatCalendarChart.prototype.getLegend=function(a,b,c){var d=this.getTheme();return'<g><text x="'+(c.left-25)+'" y="'+(c.top+10)+'">Less</text>'+a.map(function(a,f){f=c.left+b*f;return'<rect style="fill: '+d.getHeatColor(1-a.percent)+'" width="10" height="10" x="'+f+'" y="'+c.top+'"></rect>'}).join("")+('<text x="'+(c.left+70)+'" y="'+(c.top+10)+'">More</text></g>')};
HeatCalendarChart.prototype.getHakon=function(){return".heatCal\n rect\n  fill "+this.getTheme().darkerBackground+"\n  shape-rendering crispedges\n text\n  font-size 10px\n  fill #ddd"};HeatCalendarChart.prototype.getBlockHtmlBody=function(){return'<div class="heatCal" style="padding: 30px 10px 10px;">\n      '+this.getSvg()+"\n    </div>"};
HeatCalendarChart.prototype.getSvg=function(){var a=this.getInputPlane(),b=a.getRows();if(!b.length)return"";var c=this.getStruct(),d=c.day,e=c.count;if(!d||!e)return"";a.getPlaneColumnByName(d);var f=a.getPlaneColumnByName(e),c=moment(Date.now()).clone().subtract(365,"days"),a=365/6*12,g=this.getTheme(),h=f.getQuintiles(),k={};b.forEach(function(a){var b=a.getRowNumeric(),c=moment(b[d]).format("MM/DD/YYYY");a:{for(var f=0;f<h.length;f++)if(b[e]<=h[f].value){b=h[f].percent;break a}b=void 0}k[c]={quintile:b,
row:a}});for(var b=[],f=parseInt(c.format("e")),l=0;365>=l;l++){var n=c.clone().add(l,"days");b.push({day:n,row:parseInt(n.format("e")),col:Math.floor((f+l)/7)})}var c="<g>"+[{day:"Mon",row:2},{day:"Wed",row:4},{day:"Fri",row:6}].map(function(a){return'<text x="0" y="'+(20+12*a.row-3)+'">'+a.day+"</text>"}).join("")+"</g>",q={},f="<g>"+b.map(function(a){var b=a.day.format("MMM"),c=a.day.format("MM/YYYY");if(q[c])return"";q[c]=!0;return'<text x="'+(40+12*a.col)+'" y="10">'+b+"</text>"}).join("")+"</g>",
m=moment(Date.now()).format("MM/DD/YYYY"),b="<g>"+b.map(function(a){var b=a.day.format("MM/DD/YYYY"),c=20+12*a.row;a=40+12*a.col;var d=k[b],e=d?'id="t'+d.row.getPuid()+'"':"",f=b===m?"stroke-width:2;stroke:rgb(0,0,0);":"";return'<rect style="'+((d?"fill: "+g.getHeatColor(1-d.quintile):"")+";"+f)+'" '+e+' data-day="'+b+'" width="10" height="10" x="'+a+'" y="'+c+'"></rect>'}).join("")+"</g>",l=this.getLegend(h,12,{top:110,left:60});return'<svg width="'+a+'" height="184">'+(c+b+f+l)+"</svg>"};
window.HeatCalendarChart=HeatCalendarChart;var KpiChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(KpiChart,AbstractHeaderlessChartBlock);KpiChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;KpiChart.loadCode=AbstractHeaderlessChartBlock.loadCode;
KpiChart.prototype.getBlockHtmlBody=function(){var a=this.getStruct(),b=a.column,c=a.reduction;if(!b)return"";var d=this.getInputPlane().getPlaneColumnByName(b).getReductions()[c],d=this.toDisplayString(d,b);return'<div style="text-align: center;"><div style="padding-top: 10px;">\n      <a data-property="column">'+b+'</a>\n      <a data-property="reduction">'+c+"</a>\n      </div>\n      "+(a.title?"<h2>"+a.title+"</h2>":"")+"\n      <h1>"+d+"</h1></div>"};window.KpiChart=KpiChart;
var ListChart=function(a){return AbstractChartBlock.apply(this,arguments)||this};$jscomp.inherits(ListChart,AbstractChartBlock);ListChart._mountedComponents=AbstractChartBlock._mountedComponents;ListChart.loadCode=AbstractChartBlock.loadCode;ListChart.prototype.getHakon=function(){return".ListChart\n ol\n  height 100%\n  width 100%\n  overflow scroll\n  box-sizing border-box\n  margin 0"};
ListChart.prototype.getBlockHtmlBody=function(){var a=this.getStruct(),b=a.link,c=a.label;return"<ol>"+this.getRowsWithStructQuery().map(function(a){var d=Strip($jscomp$templatelit$13,a.getRowValue(c));return"<li><a "+(b?'href="'+Strip($jscomp$templatelit$14,a.getRowValue(b))+'"':"")+">"+d+"</a></li>"}).join("")+"</ol>"};window.ListChart=ListChart;var MarkdownChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(MarkdownChart,AbstractHeaderlessChartBlock);
MarkdownChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;MarkdownChart.loadCode=AbstractHeaderlessChartBlock.loadCode;MarkdownChart.prototype.getHakon=function(){return".MarkdownChart\n div\n  overflow scroll"};MarkdownChart.prototype.getBlockHtmlBody=function(){var a=this.getStruct(),b=this.getStruct().column,a=a.content||(b?this.getInputPlane().getMonadCellContent(b):"");return marked(a)};window.MarkdownChart=MarkdownChart;
var OutChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(OutChart,AbstractHeaderlessChartBlock);OutChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;OutChart.loadCode=AbstractHeaderlessChartBlock.loadCode;OutChart.prototype.getBlockHtmlBody=function(){return this.getInputPlane().getMonadCellContent(this.getStruct().column)};window.OutChart=OutChart;var TableBlock=function(a){return AbstractChartBlock.apply(this,arguments)||this};
$jscomp.inherits(TableBlock,AbstractChartBlock);TableBlock._mountedComponents=AbstractChartBlock._mountedComponents;TableBlock.loadCode=AbstractChartBlock.loadCode;
TableBlock.prototype.getHakon=function(){var a=this.getTheme();return".TableContainer\n overflow scroll\n font-size 12px\n box-sizing border-box\n width 100%\n height 100%\n "+a.enableTextSelect(1)+"\n top 34px\n tr\n  white-space nowrap\n  padding 0\n tdfirst-child,thfirst-child\n  padding-left 5px\n td,th\n  padding-right 30px\n  overflow hidden\n  text-overflow ellipsis\n  max-width 250px\n  &:hover\n   overflow visible\n th\n  cursor pointer\n input,textarea\n  border 0\n  font-size 14px\n  box-sizing border-box\n  padding 0\n  font-family "+a.fonts};
TableBlock.prototype._getTrHtml=function(a,b){var c="";this.getRowsWithStructQuery().forEach(function(b,e){var d=b.getPuid();b.getRowNumeric();var g=a.map(function(a){var c=a.getColumnName(),c=b.getRowValue(c),d="";void 0!==c&&(c=Format.stripHtml(c),d=a.isLink()?'<a href="'+c+'">'+c+"</a>":c);return"<td>"+d+"</td>"}).join("");c+='<tr data-contextmenucommand="ac openRowEditorByPuidCommand" value="'+d+'"><td>'+(e+1)+"</td>"+g+"</tr>"});return c};TableBlock.prototype.getContextMenuHtml=function(){return'<a data-command="app deleteAllRowsInTargetBlockCommand">Delete all rows</a>'};
TableBlock.prototype._getHeaderHtml=function(a,b){return"<th></th>"+a.map(function(a){return"<th "+(b===a||b==="-"+a?'style="font-style: italic"':"")+' value="'+a+'"><a tabindex="-1" data-command="ac _changeBlockOrderByCommand" value="'+a+'">'+a+"</a></th>"}).join("")};
TableBlock.prototype.getBlockHtmlBody=function(){var a=this.getStruct(),b=this.getInputPlane(),b="importance"===a.columnOrder?b.getColumnsByImportance():b.getColumnsArray();if(a.showColumns)var c=a.showColumns.split(" "),b=b.filter(function(a){return c.includes(a.getColumnName())});else if(a.hideColumns)var d=a.hideColumns.split(" "),b=b.filter(function(a){return!d.includes(a.getColumnName())});var b=b.slice(0,50),e=b.map(function(a){return a.getColumnName()}),e=this._getHeaderHtml(e,a.orderBy),a=
this._getTrHtml(b,a.pretty);return'<div class="TableContainer">\n<table>\n  <thead>\n    <tr title="'+Say($jscomp$templatelit$15)+'">'+e+"</tr>\n  </thead>\n  <tbody>"+a+"</tbody>\n  </table>\n</div>"};window.TableBlock=TableBlock;var ThreeDChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(ThreeDChart,AbstractHeaderlessChartBlock);ThreeDChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;ThreeDChart.loadCode=AbstractHeaderlessChartBlock.loadCode;
ThreeDChart.prototype.getBlockHtmlBody=function(){return'<div class="visjs"></div>'};ThreeDChart.prototype.componentDidMount=function(){AbstractHeaderlessChartBlock.prototype.componentDidMount.call(this);this.componentDidUpdate()};
ThreeDChart.prototype.componentDidUpdate=function(){AbstractHeaderlessChartBlock.prototype.componentDidUpdate.call(this);var a=this.getStruct(),b=this.getStruct().column,a=a.content||(b?this.getInputPlane().getMonadCellContent(b):"")||this.getProgram().childrenToString(),a=this.treeTo3D(a),c=new vis.DataSet;a.forEach(function(a){return c.add(a)});a=this.getBlockDimension();a={width:a.width+"px",height:a.height-60+"px",style:"dot-color",showPerspective:!0,showGrid:!0,keepAspectRatio:!0,verticalRatio:.2,
tooltip:function(a){return a.data.line}};b=this.getStump().find(".visjs")[0];new vis.Graph3d(b,c,a)};ThreeDChart.prototype.treeTo3D=function(a){return(new TreeNotation(a)).getTopDownArray().map(function(a,c){c=a.getPoint();var b=c.x,e=-c.y;a=a.getLine();return{x:b,y:e,line:a,z:0,style:Math.sqrt(Math.pow(c.x,2))}})};window.ThreeDChart=ThreeDChart;var WordCloudChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(WordCloudChart,AbstractHeaderlessChartBlock);
WordCloudChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;WordCloudChart.loadCode=AbstractHeaderlessChartBlock.loadCode;WordCloudChart.prototype.getBlockHtmlBody=function(){return'<div class="wordCloud" style="width: 100%; height: 100%;"></div>'};WordCloudChart.prototype._getWords=function(){return this.getRequiredTable(["name","count"])};
WordCloudChart.prototype.componentDidMount=function(){AbstractHeaderlessChartBlock.prototype.componentDidMount.call(this);var a=this.getStruct(),b=this.getStump().find(".wordCloud"),c=this._getWords();if(c.length){c.shift();var d=1,c={list:c,shuffle:!1,random:function(){var a=1E4*Math.sin(d++);return a-Math.floor(a)},wait:0};Object.assign(c,a);WordCloud(b[0],c)}};window.WordCloudChart=WordCloudChart;var YouTubeBlock=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};
$jscomp.inherits(YouTubeBlock,AbstractHeaderlessChartBlock);YouTubeBlock._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;YouTubeBlock.loadCode=AbstractHeaderlessChartBlock.loadCode;YouTubeBlock.prototype.getBlockHtmlBody=function(){var a=this.getBlockDimension().width,b=this.getStruct().video;return'<iframe width="'+a+'" height="'+a+'" src="https://www.youtube.com/embed/'+b+'" frameborder="0" allowfullscreen></iframe>'};window.YouTubeBlock=YouTubeBlock;
var GoogleArea=function(a){return AbstractGoogleCore.apply(this,arguments)||this};$jscomp.inherits(GoogleArea,AbstractGoogleCore);GoogleArea._mountedComponents=AbstractGoogleCore._mountedComponents;GoogleArea.loadPackages=AbstractGoogleCore.loadPackages;GoogleArea.loadCode=AbstractGoogleCore.loadCode;GoogleArea.prototype._getChartClass=function(){return this.getGoogle().visualization.AreaChart};GoogleArea.prototype._getGoogleData=function(){return this.getSomeData(["x","y"])};window.GoogleArea=GoogleArea;
var GoogleBar=function(a){return AbstractGoogleCore.apply(this,arguments)||this};$jscomp.inherits(GoogleBar,AbstractGoogleCore);GoogleBar._mountedComponents=AbstractGoogleCore._mountedComponents;GoogleBar.loadPackages=AbstractGoogleCore.loadPackages;GoogleBar.loadCode=AbstractGoogleCore.loadCode;GoogleBar.prototype._getChartClass=function(){return this.getGoogle().visualization.BarChart};GoogleBar.prototype._getGoogleData=function(){return this.getSomeData(["x","y"])};window.GoogleBar=GoogleBar;
var GoogleColumn=function(a){return AbstractGoogleCore.apply(this,arguments)||this};$jscomp.inherits(GoogleColumn,AbstractGoogleCore);GoogleColumn._mountedComponents=AbstractGoogleCore._mountedComponents;GoogleColumn.loadPackages=AbstractGoogleCore.loadPackages;GoogleColumn.loadCode=AbstractGoogleCore.loadCode;GoogleColumn.prototype._getChartClass=function(){return this.getGoogle().visualization.ColumnChart};
GoogleColumn.prototype._getGoogleData=function(){var a=this.getStruct(),b=this.getInputPlane(),c=b.getPlaneColumnByName(a.series),d=b.getPlaneColumnByName(a.row),a=b.getPlaneColumnByName(a.cell),b=b.getRows().map(function(a){return a.getRowNumeric()});return this.getGoogle().visualization.arrayToDataTable(this.getPivotTable(b,c,d,a))};window.GoogleColumn=GoogleColumn;var GoogleGauge=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(GoogleGauge,AbstractGoogleBase);
GoogleGauge._mountedComponents=AbstractGoogleBase._mountedComponents;GoogleGauge.loadPackages=AbstractGoogleBase.loadPackages;GoogleGauge.loadCode=function(){return AbstractGoogleBase.loadPackages(["gauge"])};GoogleGauge.prototype._getChartClass=function(){return this.getGoogle().visualization.Gauge};GoogleGauge.prototype._getGoogleData=function(){return this.getLabelValue()};window.GoogleGauge=GoogleGauge;var GoogleGeo=function(a){return AbstractGoogleCore.apply(this,arguments)||this};
$jscomp.inherits(GoogleGeo,AbstractGoogleCore);GoogleGeo._mountedComponents=AbstractGoogleCore._mountedComponents;GoogleGeo.loadPackages=AbstractGoogleCore.loadPackages;GoogleGeo.loadCode=function(){return AbstractGoogleBase.loadPackages(["geochart"])};GoogleGeo.prototype._getChartClass=function(){return this.getGoogle().visualization.GeoChart};window.GoogleGeo=GoogleGeo;var GoogleLine=function(a){return AbstractGoogleCore.apply(this,arguments)||this};$jscomp.inherits(GoogleLine,AbstractGoogleCore);
GoogleLine._mountedComponents=AbstractGoogleCore._mountedComponents;GoogleLine.loadPackages=AbstractGoogleCore.loadPackages;GoogleLine.loadCode=AbstractGoogleCore.loadCode;GoogleLine.prototype._getChartClass=function(){return this.getGoogle().visualization.LineChart};GoogleLine.prototype._getGoogleData=function(){return this.getSomeData(["x","y"])};window.GoogleLine=GoogleLine;var GoogleOrg=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(GoogleOrg,AbstractGoogleBase);
GoogleOrg._mountedComponents=AbstractGoogleBase._mountedComponents;GoogleOrg.loadPackages=AbstractGoogleBase.loadPackages;GoogleOrg.loadCode=function(){return AbstractGoogleBase.loadPackages(["orgchart"])};GoogleOrg.prototype._getChartClass=function(){return this.getGoogle().visualization.OrgChart};
GoogleOrg.prototype._getGoogleData=function(){var a=this.getInputPlane().getRows()[0];if(!a)return this.getGoogle().visualization.arrayToDataTable([]);a=(new TreeNotation(a.getRowSource())).getTopDownArray().map(function(a){return[{v:a.getPathVector().join(" "),f:a.getLine()},a.getParent().getPathVector().join(" ")]});return this.getGoogle().visualization.arrayToDataTable(a)};window.GoogleOrg=GoogleOrg;var GoogleScatter=function(a){return AbstractGoogleCore.apply(this,arguments)||this};
$jscomp.inherits(GoogleScatter,AbstractGoogleCore);GoogleScatter._mountedComponents=AbstractGoogleCore._mountedComponents;GoogleScatter.loadPackages=AbstractGoogleCore.loadPackages;GoogleScatter.loadCode=AbstractGoogleCore.loadCode;GoogleScatter.prototype._getChartClass=function(){return this.getGoogle().visualization.ScatterChart};GoogleScatter.prototype._getGoogleData=function(){return this.getSomeData(["x","y"])};window.GoogleScatter=GoogleScatter;
var GoogleSquare=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(GoogleSquare,AbstractGoogleBase);GoogleSquare._mountedComponents=AbstractGoogleBase._mountedComponents;GoogleSquare.loadPackages=AbstractGoogleBase.loadPackages;GoogleSquare.loadCode=function(){return AbstractGoogleBase.loadPackages(["treemap"])};
GoogleSquare.prototype._getGoogleOptions=function(){var a=this.getTheme();a.getTinyColor();var b=AbstractGoogleBase.prototype._getGoogleOptions.call(this);b.highlightOnMouseOver=!1;b.headerHeight=0;b.minColor=tinycolor(a.selectionColor).lighten(40).toHexString();b.midColor=tinycolor(a.selectionColor).toHexString();b.maxColor=tinycolor(a.selectionColor).darken(20).toHexString();return b};
GoogleSquare.prototype._getGoogleData=function(){var a=this.getRequiredTable(["label","value"]).map(function(a){return[a[0],"All",a[1]]}),b=a.shift();a.unshift(["All",null,0]);a.unshift(b);return this.getGoogle().visualization.arrayToDataTable(a)};GoogleSquare.prototype._getChartClass=function(){return this.getGoogle().visualization.TreeMap};window.GoogleSquare=GoogleSquare;var GoogleTimeline=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(GoogleTimeline,AbstractGoogleBase);
GoogleTimeline._mountedComponents=AbstractGoogleBase._mountedComponents;GoogleTimeline.loadPackages=AbstractGoogleBase.loadPackages;GoogleTimeline.loadCode=function(){return AbstractGoogleBase.loadPackages(["timeline"])};GoogleTimeline.prototype._getChartClass=function(){return this.getGoogle().visualization.Timeline};
GoogleTimeline.prototype._getGoogleData=function(){var a=(new this.getGoogle).visualization.DataTable();a.addColumn({type:"string",id:"Title"});a.addColumn({type:"date",id:"Start"});a.addColumn({type:"date",id:"End"});var b=this._getTimelineRows();a.addRows(b);return a};
GoogleTimeline.prototype._getTimelineRows=function(){var a=this.getInputPlane().getRows(),b=this.getStruct().label;return a.map(function(a){var c=a.getRowNumeric();a=a.getRowValue(b);var e=moment(c.start).toDate(),c=moment(c.end).toDate();return[a,e,c]})};window.GoogleTimeline=GoogleTimeline;var DidYouMeanBlock=function(a){return AbstractCommandBlock.apply(this,arguments)||this};$jscomp.inherits(DidYouMeanBlock,AbstractCommandBlock);DidYouMeanBlock._mountedComponents=AbstractCommandBlock._mountedComponents;
DidYouMeanBlock.loadCode=AbstractCommandBlock.loadCode;DidYouMeanBlock.prototype.getBlockHtmlBody=function(){var a=this.getHead(),b=this.getParser().getBlockNames(),b=didYouMean(a,b);return"No block '"+a+"' found. "+(b?'Did you mean <a tabindex="-1" value="'+b+'" data-command="ac changeTypeCommand">'+b+"</a>?":"")+"</p>"};DidYouMeanBlock.prototype.getBlockHtmlHeader=function(){return""};window.DidYouMeanBlock=DidYouMeanBlock;
var MorphBlock=function(a){return AbstractCommandBlock.apply(this,arguments)||this};$jscomp.inherits(MorphBlock,AbstractCommandBlock);MorphBlock._mountedComponents=AbstractCommandBlock._mountedComponents;MorphBlock.loadCode=AbstractCommandBlock.loadCode;MorphBlock.prototype.getHakon=function(){this.getTheme();return".MorphBlock\n .BlockBody\n  display flex\n  flex-flow row wrap\n  a\n   margin 10px\n   height 50px\n   overflow hidden\n   text-align center\n   text-overflow ellipsis\n   font-size 12px\n   width 50px"};
MorphBlock.prototype.getBlockHtmlBody=function(){var a=this.getProgram(),b=this.getParser(),a=a.getTopNodeTypes();this.getApp();return a.map(function(a){return b.getParserBlockByName(a)}).map(function(a){var b=MakeSVG(a.getSvg(),24);return'<a tabindex="-1" value="'+a.getHead()+'" data-command="ac changeTypeCommand">'+b+"<br>"+a.getHead()+"</a>"}).join("<br>")};MorphBlock.prototype.getBlockHtmlHeader=function(){return""};window.MorphBlock=MorphBlock;
var AbstractConnectorBlock=function(a){return AbstractProviderBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractConnectorBlock,AbstractProviderBlock);AbstractConnectorBlock._mountedComponents=AbstractProviderBlock._mountedComponents;AbstractConnectorBlock.loadCode=AbstractProviderBlock.loadCode;window.AbstractConnectorBlock=AbstractConnectorBlock;var AbstractSourceBlock=function(a){return AbstractProviderBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractSourceBlock,AbstractProviderBlock);
AbstractSourceBlock._mountedComponents=AbstractProviderBlock._mountedComponents;AbstractSourceBlock.loadCode=AbstractProviderBlock.loadCode;window.AbstractSourceBlock=AbstractSourceBlock;var AbstractUrlProvider=function(a){return AbstractConnectorBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractUrlProvider,AbstractConnectorBlock);AbstractUrlProvider._mountedComponents=AbstractConnectorBlock._mountedComponents;AbstractUrlProvider.loadCode=AbstractConnectorBlock.loadCode;
AbstractUrlProvider.prototype.getUrl=function(){return this.getStruct().url||""};AbstractUrlProvider.prototype._getFormat=function(a){a=Util.getFileExtension(a);if((new RowParser).getEncodingNames()[a])return a};
AbstractUrlProvider.prototype.fetchRows=function(){var a=this.getStruct(),b=this.getUrl();if(!b)return Promise.resolve([]);b=encodeURI(b);b.match(/\.json/);var c=a.format||this._getFormat(b);return this.getApp().getFakeDom().get(b).then(function(b){a.extract&&(b=b[a.extract]);var d=new RowParser;return"string"===typeof b?d.parse(b,c):d.parseFromObject(b,c)})};window.AbstractUrlProvider=AbstractUrlProvider;var DataBlockRow=function(a){ObjectBackedRow.apply(this,arguments)};
$jscomp.inherits(DataBlockRow,ObjectBackedRow);DataBlockRow._uniqueId=ObjectBackedRow._uniqueId;var DataBlock=function(a){return AbstractProviderBlock.apply(this,arguments)||this};$jscomp.inherits(DataBlock,AbstractProviderBlock);DataBlock._mountedComponents=AbstractProviderBlock._mountedComponents;DataBlock.loadCode=AbstractProviderBlock.loadCode;DataBlock.prototype._getData=function(){var a=this.getNode("content");return a?a.getTailWithChildren():""};
DataBlock.prototype.getBlockHtmlBody=function(){return'<textarea data-command="ac _saveDataCommand" class="BlockTextArea">'+Format.stripHtml(this._getData())+"</textarea>"};DataBlock.prototype._saveDataCommand=function(a){this.touchNode("content").setTailWithChildren(a);this.autosaveBlock();return this.executeLoadNewPlaneAndRender()};DataBlock.prototype.getRowClass=function(){return DataBlockRow};
DataBlock.prototype.fetchRows=function(){return Promise.resolve((new RowParser).parse(this._getData(),this.getStruct().format))};DataBlock.prototype._getFormatted=function(a,b){switch(b){case "tree":return(new TreeNotation(a)).toString();case "json":return(new TreeNotation(a)).toJson();default:return(new TreeNotation(a)).toCsv()}};DataBlock.prototype.createRows=function(a){var b=this.getStruct().format,c=this._getData(),c=(new RowParser).parse(c,b);a=_.concat(c,a);b=this._getFormatted(a,b);return this._saveDataCommand(b)};
DataBlock.prototype.updateRows=function(a){return this.autosaveBlock()};DataBlock.prototype.deleteRows=function(a){var b=this.getOutputPlane().getRows();_.remove(b,function(b){return a.indexOf(b)});b=this._getFormatted(b.map(function(a){return a.getRowSource()}),this.getStruct().format);return this._saveDataCommand(b)};window.DataBlock=DataBlock;var BPRow=function(a){ObjectBackedRow.apply(this,arguments)};$jscomp.inherits(BPRow,ObjectBackedRow);BPRow._uniqueId=ObjectBackedRow._uniqueId;
BPRow.prototype.destroyRowCommand=function(){return this.getRowApp().deleteFileCommand(this.getRowValue("permalink"))};BPRow.prototype.updateRowCommand=function(){};var ProgramsBlock=function(a){return AbstractProviderBlock.apply(this,arguments)||this};$jscomp.inherits(ProgramsBlock,AbstractProviderBlock);ProgramsBlock._mountedComponents=AbstractProviderBlock._mountedComponents;ProgramsBlock.loadCode=AbstractProviderBlock.loadCode;ProgramsBlock.prototype.getRowClass=function(){return BPRow};
ProgramsBlock.prototype.fetchRows=function(){return Promise.resolve(this.getApp().getLinks())};window.ProgramsBlock=ProgramsBlock;var QueryBlock=function(a){return AbstractUrlProvider.apply(this,arguments)||this};$jscomp.inherits(QueryBlock,AbstractUrlProvider);QueryBlock._mountedComponents=AbstractUrlProvider._mountedComponents;QueryBlock.loadCode=AbstractUrlProvider.loadCode;QueryBlock.prototype.getUrl=function(){return"/sql?q="+this.getStruct().query};
QueryBlock.prototype.getBlockHtmlBody=function(){return'<textarea data-command="ac changePropertyCommand" name="query" class="BlockTextArea">'+Strip($jscomp$templatelit$16,this.getStruct().query)+"</textarea>"};window.QueryBlock=QueryBlock;var RedditBlock=function(a){return AbstractUrlProvider.apply(this,arguments)||this};$jscomp.inherits(RedditBlock,AbstractUrlProvider);RedditBlock._mountedComponents=AbstractUrlProvider._mountedComponents;RedditBlock.loadCode=AbstractUrlProvider.loadCode;
RedditBlock.prototype.getUrl=function(){var a=this.getStruct();return"https://www.reddit.com/"+((a.subreddit?"/r/"+a.subreddit+"/top/.json?sort=top&t=all":"")||a.get)};RedditBlock.prototype.fetchRows=function(){return AbstractUrlProvider.prototype.fetchRows.call(this).then(function(a){return a[0].data.children.map(function(a){return a.data})})};window.RedditBlock=RedditBlock;var StoreBlock=function(a){return DataBlock.apply(this,arguments)||this};$jscomp.inherits(StoreBlock,DataBlock);
StoreBlock._mountedComponents=DataBlock._mountedComponents;StoreBlock.loadCode=DataBlock.loadCode;StoreBlock.prototype._getData=function(){return this.getApp().getStore().get(this._getKey())||""};StoreBlock.prototype._getKey=function(){return this.getStruct().key||this.getProgram().getUrl()};StoreBlock.prototype._saveDataCommand=function(a){this.getApp().getStore().set(this._getKey(),a)};window.StoreBlock=StoreBlock;var TopBlock=function(a){return AbstractUrlProvider.apply(this,arguments)||this};
$jscomp.inherits(TopBlock,AbstractUrlProvider);TopBlock._mountedComponents=AbstractUrlProvider._mountedComponents;TopBlock.loadCode=AbstractUrlProvider.loadCode;TopBlock.prototype.getUrl=function(){this.getStruct();return"/samples/presidents.csv"};window.TopBlock=TopBlock;var AbstractExtendBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractExtendBlock,AbstractTransformerBlock);AbstractExtendBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;
AbstractExtendBlock.loadCode=AbstractTransformerBlock.loadCode;AbstractExtendBlock.prototype.getBlockClassColumns=function(){return this.getStructColumns().filter(function(a){return!!a.source})};AbstractExtendBlock.prototype._convertValueToNumeric=function(a,b,c){if(void 0===a||!ColumnTypes[b]||""===a)return"";c=this._getConversionFn(c,b,a);return null!==c?c:ColumnTypes[b].fromStringToNumeric(a)};
AbstractExtendBlock.prototype._getConversionFn=function(a,b,c){var d=ColumnTypes[a];b=ColumnTypes[b];return d&&b?b.from&&b.from[a]?b.from[a](c):b.fromMomentToNumeric&&d.fromStringToMoment?b.fromMomentToNumeric(d.fromStringToMoment(c)):null:null};
AbstractExtendBlock.prototype.transformRows=function(){var a=this,b=this.getBlockClassColumns(),c=this.getInputPlane().getColumnsMap();return this.getInputPlane().getRows().map(function(d){var e=d.getRowSourceAsObject(),f={};Object.assign(f,e);b.forEach(function(b){var d=e[b.source],g=c[b.source].getTypeName();f[b.name]=a._convertValueToNumeric(d,b.type,g)});return f})};window.AbstractExtendBlock=AbstractExtendBlock;
var DateFilter=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(DateFilter,AbstractTransformerBlock);DateFilter._mountedComponents=AbstractTransformerBlock._mountedComponents;DateFilter.loadCode=AbstractTransformerBlock.loadCode;DateFilter.prototype.transformRows=function(){var a=this.getInputPlane().getNumericValues(),b=this.getStruct();if(!b.column||!b.days)return a;var c=getTime(b.days);return a.filter(function(a){return a[b.column]>=c})};
DateFilter.prototype.getTime=function(a){return Date.now()-864E5*parseFloat(a)};window.DateFilter=DateFilter;var DateBlock=function(a){return AbstractExtendBlock.apply(this,arguments)||this};$jscomp.inherits(DateBlock,AbstractExtendBlock);DateBlock._mountedComponents=AbstractExtendBlock._mountedComponents;DateBlock.loadCode=AbstractExtendBlock.loadCode;
DateBlock.prototype.getBlockClassColumns=function(){var a=this.getStruct().column;return a?["day","month","year"].map(function(b){return{source:a,name:b,type:b}}):[]};window.DateBlock=DateBlock;var FilterBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(FilterBlock,AbstractTransformerBlock);FilterBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;FilterBlock.loadCode=AbstractTransformerBlock.loadCode;
FilterBlock.prototype.transformRows=function(){var a=this.getStruct().filter,b=this.getInputPlane().getRows();if(!a)return b;var c=this._generateSearchFn(a);return b.filter(function(a){return c(a.rowToString())})};FilterBlock.prototype.getBlockClassColumns=function(){return this.getInputPlane().getColumnsArrayOfObjects()};
FilterBlock.prototype.getBlockHtmlBody=function(){return'<textarea placeholder="Enter a string to filter by." name="filter" data-command="ac changePropertyCommand" class="BlockTextArea">'+(this.getStruct().filter||"")+"</textarea>"};
FilterBlock.prototype._generateSearchFn=function(a){var b=[];a.split(";").forEach(function(a){var c="!"===a[0];c&&(a=a.substr(1));try{var e=new RegExp(a,"i");c?b.push(function(a){return!a.match(e)}):b.push(function(a){return!!a.match(e)})}catch(f){c?b.push(function(b){return!b.includes(a)}):b.push(function(b){return b.includes(a)})}});return function(a){var c=!0;b.forEach(function(b){b(a)||(c=!1)});return c}};window.FilterBlock=FilterBlock;
var GroupBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(GroupBlock,AbstractTransformerBlock);GroupBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;GroupBlock.loadCode=AbstractTransformerBlock.loadCode;
GroupBlock.prototype._makePivotResult=function(){var a=this.getStruct(),b=a.advanced||a.by;if(!b)return{rows:[],columns:[]};var c=this.getInputPlane(),a=c.getColumnsArrayOfObjects(),d={};a.forEach(function(a){return d[a.name]=!0});b=b.split(/ /g).filter(function(a){return d[a]});c=c.getNumericValues();return(new PivotTable(c,a,this.getStructColumns())).getNewRows(b)};GroupBlock.prototype.transformRows=function(){return this._getPivotResult().rows};
GroupBlock.prototype._getPivotResult=function(){var a=this.getInputPlane().getCTime();this._pivotCTime!==a&&delete this._result;this._result||(this._result=this._makePivotResult(),this._pivotCTime=a);return this._result};GroupBlock.prototype.getBlockClassColumns=function(){return this._getPivotResult().columns};window.GroupBlock=GroupBlock;var InterpolateBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(InterpolateBlock,AbstractTransformerBlock);
InterpolateBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;InterpolateBlock.loadCode=AbstractTransformerBlock.loadCode;InterpolateBlock.prototype._interpolator=function(a,b){a=parseInt(a);b=parseInt(b);for(var c=[];a<=b&&!(c.push(a),a+=26784E5,1E3<c.length););return c};
InterpolateBlock.prototype.transformRows=function(){var a=this.getInputPlane(),b=a.getRowSources();this.getOutputPlane();var c=this.getStruct().column;if(!c)return b;var d=a.getPlaneColumnByName(c),a=d.getMin(),d=d.getMax(),a=this._interpolator(a,d).map(function(a){var b={};b[c]=a;b.count=0;return b});return Util.joinArraysOn(c,[b,a])};window.InterpolateBlock=InterpolateBlock;var JoinBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(JoinBlock,AbstractTransformerBlock);
JoinBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;JoinBlock.loadCode=AbstractTransformerBlock.loadCode;
JoinBlock.prototype.transformRows=function(){var a=this.getStruct().on,b=this.getParent();this.getOutputPlane();if(b.isProgram())return[];var c=b.getParent();if(c.isProgram())return b.getOutputPlane().getRowSources();c=[b,c];b=c.map(function(a){return a.getOutputPlane().getRowSources()});if(!a)return _.flatten(b);c=c.map(function(a){return a.getOutputPlane().getColumnNames()});return Util.joinArraysOn(a,b,c)};window.JoinBlock=JoinBlock;
var ParseBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(ParseBlock,AbstractTransformerBlock);ParseBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;ParseBlock.loadCode=AbstractTransformerBlock.loadCode;ParseBlock.prototype.transformRows=function(){var a=this.getStruct(),b=this.getInputPlane().getRowSources(),c=a.format,d=a.column,e=new RowParser;return _.flatten(b.map(function(a){return e.parse(a[d],c)}))};window.ParseBlock=ParseBlock;
var WordCount=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(WordCount,AbstractTransformerBlock);WordCount._mountedComponents=AbstractTransformerBlock._mountedComponents;WordCount.loadCode=AbstractTransformerBlock.loadCode;WordCount.prototype.transformRows=function(){var a=this.getStruct().field,b=this.getInputPlane().getRowSources().map(function(b){return a?b[a]:b}).join(" ");return this._getWords(b)};
WordCount.prototype._getWords=function(a){var b=[];if(!a)return b;var c={};a.split(/\s/g).map(function(a){return a.replace(/[^a-z0-9\-]/gi,"")}).filter(function(a){return a}).forEach(function(a){c[a]?c[a]++:c[a]=1});Object.keys(c).forEach(function(a){(a=a.trim())&&b.push({name:a,count:c[a]})});return b};window.WordCount=WordCount;var AbstractContextMenu=function(a){return AC.apply(this,arguments)||this};$jscomp.inherits(AbstractContextMenu,AC);AbstractContextMenu._mountedComponents=AC._mountedComponents;
AbstractContextMenu.prototype.getHakon=function(){var a=this.getTheme();return".AbstractContextMenu\n position fixed\n overflow scroll\n max-height 100%\n z-index 221\n background "+a.contextMenuBackground+"\n border 1px solid "+a.borderColor+"\n box-shadow 0 1px 3px 0 "+a.boxShadow+"\n font-size 14px\n a\n  display block\n  padding 3px\n  font-size 14px\n  text-decoration none\n  color "+a.darkBlack+"\n  &:hover\n   color "+a.white+"\n   background "+a.hoverBackground};
AbstractContextMenu.prototype.getClasses=function(){return"AC AbstractContextMenu "+this.constructor.name};AbstractContextMenu.prototype.componentDidMount=function(){var a=this.getStump(),b=this.getApp(),c=b.getBodyStump(),d=function(){c.off(BrowserEvents.click,d);b.closeContextMenu()};setTimeout(function(){return c.on(BrowserEvents.click,d)},100);var e=b.getContextMenuEvent();a.css(this._getContextMenuPosition(b.getWindowStump(),e.clientX,e.clientY,a))};
AbstractContextMenu.prototype._getContextMenuPosition=function(a,b,c,d){var e=a.width();a=a.height();var f=b,g=d.outerWidth();d=d.outerHeight()+c-a;0<d&&(c-=d);0<g+f-e&&(f=b-g-5);0>c&&(c=0);return{left:f,top:c}};window.AbstractContextMenu=AbstractContextMenu;var AbstractMenuContainer=function(a){return AC.apply(this,arguments)||this};$jscomp.inherits(AbstractMenuContainer,AC);AbstractMenuContainer._mountedComponents=AC._mountedComponents;
AbstractMenuContainer.prototype.getClasses=function(){return"AC AbstractMenuContainer "+this.constructor.name};
AbstractMenuContainer.prototype._toggleDropdownMenuCommand=function(a){var b=$("#"+a);if(0<b.find(".dropdownMenu").length)return $(".dropdownMenu").remove();$(".dropdownMenu").remove();a=(new Bray(this[a]())).toHtml();var c=$('<div style="top: 30px; left: '+b.position().left+'px;" class="dropdownMenu">\n      '+a+"\n    </div>");b.append(c);var d=this.getApp().getBodyStump(),e=function(){d.off(BrowserEvents.click,e);c.remove()};setTimeout(function(){return d.on(BrowserEvents.click,e)},100)};
AbstractMenuContainer.prototype.getHakon=function(){var a=this.getTheme();return".AbstractMenuContainer\n "+a.disableTextSelect(1)+"\n font-size 14px\n padding-left 5px\n box-sizing border-box\n right 0\n left 0\n position relative\n height 30px\n z-index 92\n white-space nowrap\n background "+a.menuBackground+"\n color "+a.darkBlack+"\n display flex\n >a\n  padding-right 5px\n  line-height 30px\n  display inline-block\n  color "+a.menuContainerColor+"\n\n.subdued\n color "+a.midGray+"\n\n.dropdownMenu\n min-width 200px\n position absolute\n top 0\n left 0\n z-index 100\n padding 7px 0\n background "+
a.contextMenuBackground+"\n border 1px solid "+a.borderColor+"\n box-shadow 0 1px 3px 0 "+a.boxShadow+"\n a\n  color "+a.foregroundColor+"\n  display block\n  padding 0 10px\n  &:hover\n   background "+a.hoverBackground+"\n   color "+a.white};AbstractMenuContainer.prototype.getCreateNewBray=function(){return"@ a\n data-command app createNewBlankProgramCommand\n value untitled.flow\n content New Flow Program\n@ a\n data-command app createNewBlankProgramCommand\n value untitled.fire\n content New Fire Program"};
AbstractMenuContainer.prototype.getFileMenuItemsBray=function(){var a=this.getCreateNewBray();return this.getApp().getMountedProgram()?a+"\n@ div  divider\n@ a\n data-command app cloneProgramCommand\n content Clone Program\n@ a\n data-command app saveProgramAndNotifyCommand\n content Save Program\n@ a\n data-command app showTabRenamePromptCommand\n content Rename program\n@ a\n data-command app showDeleteFileConfirmDialogCommand\n content Delete program":a};
AbstractMenuContainer.prototype.getLogoBray=function(){return"@ a\n data-command app toggleHelpCommand\n @ strong\n  content ohayo"};AbstractMenuContainer.prototype.getFileMenuBray=function(){return"@ a\n id getFileMenuItemsBray\n value getFileMenuItemsBray\n data-command ac _toggleDropdownMenuCommand\n content File \u25be\n@ a\n id getProgramItemsBray\n value getProgramItemsBray\n data-command ac _toggleDropdownMenuCommand\n content Open \u25be"};
AbstractMenuContainer.prototype.getProgramItemsBray=function(){return this.getApp().getLinks().map(function(a){return"@ a\n data-focus true\n href "+a.link+"\n @ span\n  content "+Format.stripHtml(a.link)}).join("\n")};AbstractMenuContainer.prototype.getHtml=function(){var a=[this.getLogoBray(),this.getFileMenuBray()].join("\n");return(new Bray(a)).toHtml()};window.AbstractMenuContainer=AbstractMenuContainer;var BlockToolbarContainer=function(a){return AC.apply(this,arguments)||this};
$jscomp.inherits(BlockToolbarContainer,AC);BlockToolbarContainer._mountedComponents=AC._mountedComponents;BlockToolbarContainer.prototype.getHakon=function(){var a=this.getTheme();return".BlockToolbarContainer\n background "+a.contextMenuBackground+"\n border 1px solid "+a.lineColor+"\n font-size 12px\n position absolute\n padding 8px\n z-index 991\n min-width 300px\n top 100%\n left 0\n cursor pointer\n svg\n  fill "+a.greyish+"\n  padding 1px 3px 3px 3px\n  &:hover\n   fill "+a.foregroundColor};
BlockToolbarContainer.prototype.getChildBlock=function(){return this.getParent()};BlockToolbarContainer.prototype.getHtml=function(){return"<div>\n    "+MakeSVG("coding",20,'data-command="block openBlockSourceEditorModalCommand"')+"\n    "+MakeSVG("copy",20,'data-command="block cloneBlockCommand"')+"\n    "+MakeSVG("trash",20,'data-command="block destroyBlockCommand"')+"\n    "+MakeSVG("inspector",20,'data-command="block openBlockInspectorCommand"')+"\n    </div>\n    "+this._getFormHtml()+"\n    "};
BlockToolbarContainer.prototype._getFormHtml=function(){var a=this.getChildBlock();this.getApp();var b=a.getBlock().getPropertyNodes(),c=(new RowParser).getEncodingNames(),d=a.getInputPlane().getColumnNames(),e=a.getStruct(),f=function(a,b,c,d){return'<select data-command="block '+a+'" name="'+b+'">\n  <option value=""></option>'+c.map(function(a){return"<option "+(d===a?"selected":"")+' value="'+a+'">'+a+"</option>"})+"\n  </select>"},b=b.map(function(a){var b=a.getPropertyName(),g=e[b]||"",h=typeof g,
k=a.type,p='<input data-command="block changePropertyCommand" name="'+b+'" value="'+g+'">';if("boolean"===k)p='<input data-command="block changePropertyCommand" name="'+b+'" '+(!0===g?"checked":"")+' type="checkbox">';else if("int"===k)p='<input data-command="block changePropertyCommand" type="number" name="'+b+'" value="'+g+'">';else if("column"===k)p=f("changePropertyCommand",b,d,g);else if("format"===k)p=f("changePropertyCommand",b,c,g);else if("enum"===k)p=f("changePropertyCommand",b,Object.keys(a.getChoices()),
g);else if("javascript"===k||"content"===k||"object"===h)p='<textarea data-command="block changePropertyCommand" name="'+b+'">'+g+"</textarea>";return[b,p]}),g=a.getPathVector().join(" "),h='<select data-command="block changeParentCommand">\n  <option value=""></option>'+a.getProgram().getDescendantBlocks().map(function(a){return{name:a.getPathName(),value:a.getPathVector().join(" ")}}).map(function(a){return"<option "+(g===a.value?"selected":"")+' value="'+a.value+'">'+a.name+"</option>"})+"\n  </select>";
b.unshift(["parent",h]);h=a.getParser().getBlockNames();h.sort();a=f("changeTypeCommand","",h,a.getHead());b.unshift(["type",a]);return"<form>\n    <table>\n      "+b.map(function(a){return"<tr><td>"+a[0]+"</td><td>"+a[1]+"</td></tr>"}).join("")+"\n    </table>\n    </form>"};window.BlockToolbarContainer=BlockToolbarContainer;var MenuContainer=function(a){return AbstractMenuContainer.apply(this,arguments)||this};$jscomp.inherits(MenuContainer,AbstractMenuContainer);
MenuContainer._mountedComponents=AbstractMenuContainer._mountedComponents;window.MenuContainer=MenuContainer;var PanelContainer=function(a){return AC.apply(this,arguments)||this};$jscomp.inherits(PanelContainer,AC);PanelContainer._mountedComponents=AC._mountedComponents;
PanelContainer.prototype.parseNodeType=function(a){var b=a.split(" ")[0];return"program"===b?a.endsWith(".fire")?FireProgram:FlowProgram:{programs:ProgramSwitcherContainer,search:SearchContainer,sourceGutter:SourceGutter,commentsGutter:CommentsGutter,historyGutter:HistoryGutter}[b]};PanelContainer.prototype.getHtml=function(){return""};
PanelContainer.prototype.getHakon=function(){var a=this.getParent().getMenuContainer()?"30":"0";this.getTheme();return".PanelContainer\n left 0\n position relative\n right 0\n bottom 0\n height calc(100% - "+a+"px)"};PanelContainer.prototype.getGutterWidth=function(){return 0<this.getChildren().filter(function(a){return a.getHead().includes("Gutter")}).length?400:0};PanelContainer.prototype.log=function(a){console.log(a)};
PanelContainer.prototype.openSearchCommand=function(){var a=this.getNode("search");a&&a.focusInputCommand();return Promise.resolve()};PanelContainer.prototype.mountTabByIndex=function(a){return this.setMountedProgram(this.getPrograms()[a])};PanelContainer.prototype.getMountedProgram=function(){return this._mountedProgram};PanelContainer.prototype.fetchAndReloadProgram=function(a){var b=this;a.unmount();return this._executeFetchProgram(a).then(function(){b.getApp().renderApp()})};
PanelContainer.prototype._executeFetchProgram=function(a){var b=this.getApp();this._updateProgramSwitcherContainer();return b.fetchProgram(a).then(function(){return a.executeLoadProgramCodeAndData()}).then(function(){b.tabDidOpen(a);b.renderApp();return a})};PanelContainer.prototype.getOpenTabByUrl=function(a){return this.getPrograms().find(function(b){return b.getUrl()===a})};
PanelContainer.prototype.setMountedProgram=function(a){var b=this.getMountedProgram();if(b===a)return Promise.resolve(a);b&&b.unmount();this._mountedProgram=a;this._updateProgramSwitcherContainer();this.getApp().renderApp();return Promise.resolve(a)};PanelContainer.prototype.openUrlInNewSpace=function(a){return this._executeFetchProgram(this.append("program "+a))};PanelContainer.prototype.closeTabByIndex=function(a){return this.closeProgram(this.getPrograms()[a])};
PanelContainer.prototype.closeProgram=function(a){if(a.isMounted()){var b=a.getNextOrPrevious(this.getPrograms());a.unmountAndDestroy();if(b&&b!==a)return this.setMountedProgram(b);delete this._mountedProgram}else a.destroy();this._updateProgramSwitcherContainer();this.getApp().renderApp();return Promise.resolve()};PanelContainer.prototype.getOpenProgramsString=function(){var a=this.getMountedProgram();return this.getPrograms().map(function(b){return""+(b===a?"!":"")+b.getUrl()}).join(" ")};
PanelContainer.prototype._updateProgramSwitcherContainer=function(){var a=this.getOpenProgramsString();this.touchNode("programs").setTail(a);this._openPrograms!==a&&(this.getApp().storeValue(StorageKeys.openPrograms,a),this._openPrograms=a,this._updateLocationForRestoreOnRefresh())};
PanelContainer.prototype._updateLocationForRestoreOnRefresh=function(){var a=this.getApp(),b=this.getMountedProgram(),c=b?b.getUrl():"/";a.setRefreshUrl(c).getFakeDom().setWindowTitle(b?(b.hasUnsavedChanges()?"*":"")+(b.getFileName()+" - "+Say($jscomp$templatelit$17)):Say($jscomp$templatelit$18))};
PanelContainer.prototype.closeAllPrograms=function(){var a=this.getMountedProgram();a&&a.unmount();this.getPrograms().forEach(function(a){return a.destroy()});delete this._mountedProgram;this._updateProgramSwitcherContainer();this.getApp().renderApp();return Promise.resolve()};PanelContainer.prototype.mountPreviousProgram=function(){var a=this.getPrograms(),b=this.getMountedProgram();if(2>a.length||!b)return Promise.resolve();b=a.indexOf(b);return this.mountTabByIndex(0===b?a.length-1:b-1)};
PanelContainer.prototype.mountNextProgram=function(){var a=this.getPrograms(),b=this.getMountedProgram();if(2>a.length||!b)return Promise.resolve();b=a.indexOf(b);return this.mountTabByIndex(b===a.length-1?0:b+1)};PanelContainer.prototype.getPrograms=function(){return this.findNodes("program")};window.PanelContainer=PanelContainer;var ProgramSwitcherContainer=function(a){return AC.apply(this,arguments)||this};$jscomp.inherits(ProgramSwitcherContainer,AC);
ProgramSwitcherContainer._mountedComponents=AC._mountedComponents;ProgramSwitcherContainer.prototype.shouldComponentUpdate=function(){var a=this.getParent().getGutterWidth();return this._gutterWidth!==a?(this._gutterWidth=a,!0):AC.prototype.shouldComponentUpdate.call(this)};
ProgramSwitcherContainer.prototype.getHakon=function(){var a=this.getTheme(),b=this._getPrograms().length;return".ProgramSwitcherContainer\n height 30px\n box-sizing border-box\n left "+this.getParent().getGutterWidth()+"px\n right 0\n position relative\n white-space nowrap\n overflow-y hidden\n overflow-x "+(10<b?"scroll":"auto")+"\n border-bottom "+(b?"1px solid "+a.borderColor:"0")+"\n background "+a.programsBackground+"\n a\n  span\n   position absolute\n   top 10px\n   right 5px\n   display block\n   font-size 12px\n   line-height 10px\n   text-align center\n   opacity .25\n   &:hover\n    opacity 1\n  background "+
a.tabBackground+"\n  height 30px\n  display inline-block\n  box-sizing border-box\n  position relative\n  font-size 14px\n  padding 0 20px\n  color "+a.foregroundColor+"\n  line-height 30px\n  border-right 1px solid "+a.borderColor+"\n  border-bottom 1px solid "+a.borderColor+"\n  &.mountedProgram\n   background "+a.surfaceBackground+"\n   border-bottom 0"};ProgramSwitcherContainer.prototype._getPrograms=function(){var a=this.getTail();return a?a.split(" "):[]};
ProgramSwitcherContainer.prototype.getHtml=function(){return this._getPrograms().map(function(a,b){return'<a data-command="app mountTabByIndexCommand" value="'+b+'" class="'+(a.startsWith("!")?"mountedProgram":"")+'">'+a.replace("!","")+'<span data-command="app closeTabByIndexCommand" value="'+b+'" class="closeTabButton">x</span></a>'}).join("")};window.ProgramSwitcherContainer=ProgramSwitcherContainer;var ThemeContainer=function(a){return AC.apply(this,arguments)||this};
$jscomp.inherits(ThemeContainer,AC);ThemeContainer._mountedComponents=AC._mountedComponents;ThemeContainer.prototype.getHtml=function(){return""};
ThemeContainer.prototype.getHakon=function(){var a=this.getTheme();return"html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,audio,video\n margin 0\n padding 0\n border 0\n font-size 100%\n font inherit\n vertical-align baseline\narticle,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section\n display block\nbody\n line-height 1.3\nol,ul\n list-style none\ntable\n border-collapse collapse\n border-spacing 0\n\nhtml,body\n width 100%\n height 100%\n margin 0\n padding 0\n font-family "+a.fonts+
"\n color "+a.bodyColor+"\n\nhtml\n background "+a.bodyBackground+"\n\ntable\n padding 0\n margin 0\n border-collapse collapse\n border-spacing 0\n table-layout fixed\n tr,td\n  padding 0\n  margin 0\n\n.ThemeContainer\n display none\n\nh1\n font-size 200%\n\nh2\n font-size 166%\n\nh3\n font-size 133%\n\nh4\n font-size 120%\n\np\n margin 1em 0\n\na\n cursor pointer\n text-decoration none\n color "+a.linkColor+"\n\n::-webkit-scrollbar\n display none\n\n.ui-resizable-handle\n position absolute\n font-size 0.1px\n display block\n -ms-touch-action none\n touch-action none\n\n.ui-resizable-disabled\n .ui-resizable-handle\n  display none\n\n.ui-resizable-autohide\n .ui-resizable-handle\n  display none\n\n.leftButton,.rightButton\n background transparent\n border 0\n\n.BlockTextArea\n padding 5px\n width 100%\n height 100%\n box-sizing border-box\n outline 0\n border 0\n font-size 14px\n font-family "+
a.fonts+"\n resize none\n\n.rightButton\n float right\n\n.bigInput\n display block\n width 100%\n height 34px\n padding 6px 12px\n font-size 14px\n line-height 1.428571429\n vertical-align middle\n border-radius 4px\n box-sizing border-box\n color "+a.mediumBlack+"\n background "+a.backgroundColor+"\n border 1px solid "+a.greyish+"\n box-shadow inset 0 1px 1px "+a.boxShadow+"\n\ntextarea.bigInput\n height auto\n\n.dragOver\n opacity 0.5\n\n#dragOverHelp\n position absolute\n font-size 36px\n width 100%\n height 100%\n z-index 300\n display flex\n align-items center\n justify-content center\n top 0\n left 0\n\n.noTransition\n transition none\n\n.SVGIcon\n fill "+
a.foregroundColor+"\n cursor pointer\n\n.buttonPrimary\n border-radius 2px\n cursor pointer\n border none\n padding 15px 32px\n text-align center\n text-decoration none\n font-size 16px\n color white\n background "+a.successColor+"\n\n.divider\n background "+a.lineColor+"\n height 1px\n margin 10px 0\n width 100%\n\ninput,textarea\n background transparent\n color "+a.foregroundColor+"\n\n.BlockContainer\n position absolute\n background "+a.blockBackgroundColor+"\n border 1px solid "+a.borderColor+
"\n z-index 1\n "+a.disableTextSelect(1)+"\n svg.BlockPencilButton\n  opacity 0\n .ui-resizable-se\n  cursor se-resize\n  width 36px\n  height 36px\n  box-sizing border-box\n  right 1px\n  bottom 1px\n  opacity 0\n  border-right 4px solid "+a.darkerBackground+"\n  border-bottom 4px solid "+a.darkerBackground+"\n  &:hover\n   opacity 1\n &:hover\n  background "+a.backgroundColor+"\n  z-index 2\n  .ui-resizable-se\n   opacity .5\n  svg.BlockPencilButton\n   opacity 1\n   cursor pointer\n   fill "+a.greyish+
"\n   &:hover\n    fill "+a.foregroundColor+"\n .BlockPage\n  overflow hidden\n  width 100%\n  height 100%\n  position relative\n .BlockHeader,.BlockFooter\n  font-size 12px\n  height 30px\n  line-height 30px\n  padding-left 5px\n .BlockBody\n  padding 5px\n  width 100%\n  height calc(100% - 60px)\n  box-sizing border-box\n  &.HeaderLess\n   height calc(100% - 30px)\n .BlockHeader\n  text-transform uppercase\n  text-align center\n  border-bottom 1px solid "+a.borderColor+"\n .BlockFooter\n  border-top 1px solid "+
a.borderColor+"\n  cursor move\n iframe\n  width 100%\n  height 100%\n  border 0"};window.ThemeContainer=ThemeContainer;var BlockContextMenu=function(a){return AbstractContextMenu.apply(this,arguments)||this};$jscomp.inherits(BlockContextMenu,AbstractContextMenu);BlockContextMenu._mountedComponents=AbstractContextMenu._mountedComponents;
BlockContextMenu.prototype.getHtml=function(){return'<a data-command="app fetchAndReloadFocusedProgramCommand">Reload</a>\n<a tabindex="-1" data-command="context copyBlockCommand">Copy block with inputs</a>\n<a data-command="context copyDataCommand" value="\t">Copy data as tsv</a>\n<a data-command="context _exportDataCommand">Export data to csv file</a>\n'+this.getApp().getTargetNode().getContextMenuHtml()};window.BlockContextMenu=BlockContextMenu;
var ProgramContextMenu=function(a){return AbstractContextMenu.apply(this,arguments)||this};$jscomp.inherits(ProgramContextMenu,AbstractContextMenu);ProgramContextMenu._mountedComponents=AbstractContextMenu._mountedComponents;ProgramContextMenu.prototype.getHtml=function(){return this.getApp().getMountedProgram().getContextMenuCommands()};window.ProgramContextMenu=ProgramContextMenu;var AbstractGutter=function(a){return AbstractModal.apply(this,arguments)||this};$jscomp.inherits(AbstractGutter,AbstractModal);
AbstractGutter._mountedComponents=AbstractModal._mountedComponents;AbstractGutter.prototype.getHakon=function(){var a=this.getTheme(),b=this.getParent().getGutterWidth();return AbstractModal.prototype.getHakon.call(this)+"\n.AbstractGutter\n width "+b+"px\n left 0\n background "+a.backgroundColor+"\n border-color "+a.borderColor+"\n position absolute\n border-right-width 1px\n border-right-style solid\n box-sizing border-box\n top 0\n bottom 0\n padding 20px\n .GutterHeader\n  height 30px\n  padding 5px\n  box-sizing border-box\n  line-height 30px\n  font-size 16px\n .GutterBody\n  width 100%\n  overflow scroll\n  bottom 0\n  height calc(100% - 30px)\n .GutterClose\n  position absolute\n  top 0\n  line-height 30px\n  height 30px\n  right 10px\n  cursor pointer"};
AbstractGutter.prototype.getGutterTitle=function(){return""};AbstractGutter.prototype.getBaseHtml=function(a){a=void 0===a?"":a;return'<div class="GutterHeader">'+this.getGutterTitle()+' <a data-command="ac _confirmAndUnmountCommand" class="GutterClose">X</a></div>\n    <div class="GutterBody">'+a+"</div>"};AbstractGutter.prototype.getClasses=function(){return"AC AbstractGutter "+this.constructor.name};window.AbstractGutter=AbstractGutter;
var CommentsGutter=function(a){return AbstractGutter.apply(this,arguments)||this};$jscomp.inherits(CommentsGutter,AbstractGutter);CommentsGutter._mountedComponents=AbstractGutter._mountedComponents;
CommentsGutter.prototype._postCommentCommand=function(){var a=this.getApp(),b=a.getApi(),c=this.getStump().find("textarea").val(),d=a.getMountedProgram();b.commentCreate(d.getHostedProgramId(),c).then(function(){a.emitGlobalMessageAndFade("Comment posted");b.programGet(d.getAuthor(),d.getFileName()).then(function(b){d.setComments(b.comments);a.renderApp()})})};CommentsGutter.prototype.getGutterTitle=function(){return"Comments"};
CommentsGutter.prototype.getHakon=function(){var a=this.getTheme();return AbstractGutter.prototype.getHakon.call(this)+"\n.CommentsGutter>textarea\n width 100%\n height 60px\n .commentHeader\n  font-size 80%\n  padding-top 15px\n  padding-bottom 3px\n  color "+a.midGray};
CommentsGutter.prototype.getHtml=function(){var a=this.getApp().getMountedProgram();return a?'<textarea></textarea><br>\n    <button data-command="ac _postCommentCommand">add comment</button>\n    <div>'+a.getComments().map(function(a){return'<div>\n  <div class="commentHeader">'+a.user+" &nbsp;&nbsp;&nbsp;"+moment(a.ctime).fromNow()+"</div>\n  <div>"+Format.linkify(Strip($jscomp$templatelit$19,a.text))+"</div>\n</div>"}).join("")+"</div>":""};window.CommentsGutter=CommentsGutter;
var HistoryGutter=function(a){return AbstractGutter.apply(this,arguments)||this};$jscomp.inherits(HistoryGutter,AbstractGutter);HistoryGutter._mountedComponents=AbstractGutter._mountedComponents;
HistoryGutter.prototype.componentDidMount=function(){var a=this,b=this.getApp(),c=b.getApi(),d=this.getStump().find("#changes"),b=b.getMountedProgram().getUrl(),e=function(a,b){return'<a data-command="ac _copyChangeCommand" value="'+b+'">'+b+" - "+moment(a.ctime).fromNow()+"</a>"};c.programHistory(b).then(function(b){var c=b.changes;a.changes=c;a.original=b.original;b=c.map(e);b.reverse();b=b.join("<br>");d.append(b)})};HistoryGutter.prototype.getGutterTitle=function(){return"History"};
HistoryGutter.prototype._copyChangeCommand=function(a){a=parseInt(a);for(var b=this.original,c=0;c<=a;c++){var d=this.changes[c].diff;d.diff&&(b=diff.mergeStr(b,d))}this.getApp().getFakeDom().copyTextToClipboard(b);this.getApp().emitGlobalMessageAndFade(Say($jscomp$templatelit$20))};HistoryGutter.prototype.getHtml=function(){return"<div id='changes'></div>"};window.HistoryGutter=HistoryGutter;var SourceGutter=function(a){return AbstractGutter.apply(this,arguments)||this};
$jscomp.inherits(SourceGutter,AbstractGutter);SourceGutter._mountedComponents=AbstractGutter._mountedComponents;SourceGutter.prototype.hasChanges=function(){var a=this._getProgram();return a&&this._getTextarea().val()!==a.childrenToString()};SourceGutter.prototype._getTextarea=function(){return this.getStump().find("textarea")};SourceGutter.prototype._getProgram=function(){return this.getParent().getMountedProgram()};SourceGutter.prototype._saveChangesCommand=function(){return this._getProgram().autosaveAndReloadWith(this._getTextarea().val())};
SourceGutter.prototype.getGutterTitle=function(){return"Edit Source"};SourceGutter.prototype.componentDidUpdate=function(){AbstractGutter.prototype.componentDidUpdate.call(this);var a=this._getProgram();this._getTextarea().val(a?a.childrenToString():"")};SourceGutter.prototype.shouldComponentUpdate=function(){return!0};SourceGutter.prototype.componentDidMount=function(){AbstractGutter.prototype.componentDidMount.call(this);this.componentDidUpdate()};
SourceGutter.prototype.getHakon=function(){return AbstractGutter.prototype.getHakon.call(this)+"\n.SourceGutter\n textarea\n  border 0\n  outline 0\n  box-sizing border-box\n  padding 5px\n  font-size 14px\n  width 100%\n  height 100%"};SourceGutter.prototype.getHtml=function(){return'<textarea class="savable" data-command="ac _saveChangesCommand" wrap="off"></textarea>'};window.SourceGutter=SourceGutter;var AbstractHelpModal=function(a){return AbstractModal.apply(this,arguments)||this};
$jscomp.inherits(AbstractHelpModal,AbstractModal);AbstractHelpModal._mountedComponents=AbstractModal._mountedComponents;
AbstractHelpModal.prototype.getMomentHelp=function(){return"Char;Example;Description{YYYY;2014;4 or 2 digit year{YY;14;2 digit year{Y;-25;Year with any number of digits and sign{Q;1..4;Quarter of year. Sets month to first month in quarter.{M MM;1..12;Month number{MMM MMMM;Jan..December;Month name in locale set by moment.locale(){D DD;1..31;Day of month{Do;1st..31st;Day of month with ordinal{DDD DDDD;1..365;Day of year{X;1410715640.579;Unix timestamp{x;1410715640579;Unix ms timestamp{H HH;0..23;24 hour time{h hh;1..12;12 hour time used with a A.{a/p A/P;am pm;Post or ante meridiem{m mm;0..59;Minutes{s ss;0..59;Seconds{S SS SSS;0..999;Fractional seconds{Z ZZ;+12:00;Offset from UTC as +-HH:mm, +-HHmm, or Z{w ww;1..53;Locale week of year{e;0..6;Locale day of week{ddd dddd;Mon...Sunday;Day name in locale set by moment.locale(){E;1..7;ISO day of week".split("{").map(function(a){a=a.split(";");
return"<tr><td>"+a[0]+"</td><td>"+a[1]+"</td><td>"+a[2]+"</td></tr>"}).join("")};AbstractHelpModal.prototype.getHakon=function(){return AbstractModal.prototype.getHakon.call(this)+"\np\n width 100%\n white-space normal\n#shortcutsHelp td\n padding-right 10px"};
AbstractHelpModal.prototype.getShortcutsHelp=function(){var a=this.getApp();return a.getKeyboardShortcuts().getChildren().map(function(b){var c=b.isEnabled(a),d=b.getDescription(),e=b.getFn(),c=c?'<a data-command="app '+e+'">'+d+"</a>":d;return'<tr style="'+(d?"":"display: none;")+'"><td>'+b.getKeyCombo()+"</td><td>"+c+"</td></tr>"}).join("")};
AbstractHelpModal.prototype.getHtml=function(){var a=this.getApp(),b=[FlowProgram.getParser(a),FireProgram.getParser(a)].map(function(a){return a.getDocs()}).join("<br><br>");a.getMountedProgram();return"<h4>About "+Say($jscomp$templatelit$21)+'</h4>\n      <p>ohayo is the fastest programming tool in the solar system.</p>\n\n\n      <p>\n      <a data-command="app openOhayoProgram" value="ohayo.flow">Welcome Page</a> |\n      <a data-command="app openOhayoProgram" value="readme.flow">Read Me</a> |\n      <a data-command="app openOhayoProgram" value="faq.flow">FAQ</a> |\n      <a data-command="app openOhayoProgram" value="releasenotes.flow">Release Notes</a> |\n      <a data-command="app openOhayoProgram" value="fib.fire">Fire Example</a>\n      </p>\n\n      <a class="helpToggle">'+
Say($jscomp$templatelit$22)+'</a>\n      <div class="helpSection"><br>\n    <table id="shortcutsHelp" >\n      '+this.getShortcutsHelp()+'\n    </table><br>\n    </div>\n\n    <div><a class="helpToggle">ETN help</a>\n    <div class="helpSection"><p>ohayo currently supports 2 ETNs: Fire and Flow. Here are the available blocks.</p>\n    <pre>'+b+"</pre></div>\n    </div>\n\n    <p>Version "+a.getVersion()+" "+a.constructor.name+"</p>\n    "};
AbstractHelpModal.prototype.componentDidMount=function(){AbstractModal.prototype.componentDidMount.call(this);var a=this.getStump();a.find(".helpSection").hide();a.find(".helpToggle").on(BrowserEvents.click,function(){$(this).next().toggle()})};window.AbstractHelpModal=AbstractHelpModal;var BlockInspectorModal=function(a){return AbstractModal.apply(this,arguments)||this};$jscomp.inherits(BlockInspectorModal,AbstractModal);BlockInspectorModal._mountedComponents=AbstractModal._mountedComponents;
BlockInspectorModal.prototype._getChildBlock=function(){return this.getApp().getTargetNode()};BlockInspectorModal.prototype.componentDidMount=function(){AbstractModal.prototype.componentDidMount.call(this);var a=this._getChildBlock();this.getApp().getWindowElement().block=a;console.log("Block set to window.block")};BlockInspectorModal.prototype.getHakon=function(){return AbstractModal.prototype.getHakon.call(this)+"\n.BlockInspectorModal\n pre\n  width 600px\n  overflow-x scroll\n textarea\n  width 600px\n  height 200px"};
BlockInspectorModal.prototype.getHtml=function(){var a=this._getChildBlock(),b=a.getInputPlane(),c=a.getOutputPlane(),d=c.getColumnsArrayOfObjects(),e=b.getColumnsArrayOfObjects(),f=b.getRowCount(),g=c.getRowCount(),h=a.getBlock().getPropertyNodes().map(function(a){return a.getPropertyName()+" "+a.getPropertyTypeName()+" "+a.getDescription()}).join("\n"),k=a.getStruct(),l=a.getParent().getHead();return"<div>Input rows: "+f+" Output rows: "+g+"<br>\nLoad time: "+a.getTTL()+" Render time: "+a.getNewestTimeToRender()+
"\nBlockClass: "+a.constructor.name+" Parent: "+l+"<br>\nTree:<br>\n<pre>"+a.toString()+"</pre><br>\nBlockStruct:\n<pre>"+JSON.stringify(k,null,2)+"</pre><br>\nAll Block Properties:\n<pre>"+h+"</pre><br>\nInput Columns:<br>\n<pre>"+(new TreeNotation(e)).toFixedWidthTable()+"</pre><br>\nOutput Columns:<br>\n<pre>"+(new TreeNotation(d)).toFixedWidthTable()+"</pre><br>\nOutput Numeric Values:<br>\n<pre>"+(new TreeNotation(c.getNumericValues())).toFixedWidthTable()+"</pre>\nTypeScript Interface:<br>\n<pre>"+
c.toTypeScriptInterface()+"</pre>\nInput Numeric Values:<br>\n<pre>"+(new TreeNotation(b.getNumericValues())).toFixedWidthTable()+"</pre>\n</div>"};window.BlockInspectorModal=BlockInspectorModal;var BuildProgramModal=function(a){return AbstractModal.apply(this,arguments)||this};$jscomp.inherits(BuildProgramModal,AbstractModal);BuildProgramModal._mountedComponents=AbstractModal._mountedComponents;BuildProgramModal.prototype.getHakon=function(){return".BuildProgramModal\n textarea\n  font-family monospace\n  outline 0\n  font-size 14px\n  width 100%\n  height 400px"};
BuildProgramModal.prototype.getBray=function(){var a=this.getApp().getMountedProgram().buildProgram(),b=new TreeNotation("@ h4 Output\n@ textarea\n readonly\n content");b.nodeAt(1).getNode("content").setTailWithChildren(a);return b.toString()};window.BuildProgramModal=BuildProgramModal;var BulkInsertModal=function(a){return AbstractModal.apply(this,arguments)||this};$jscomp.inherits(BulkInsertModal,AbstractModal);BulkInsertModal._mountedComponents=AbstractModal._mountedComponents;
BulkInsertModal.prototype.componentDidMount=function(){AbstractModal.prototype.componentDidMount.call(this);this._getBulkTextarea().focus()};BulkInsertModal.prototype._getChildBlock=function(){return this.getApp().getTargetNode()};BulkInsertModal.prototype._getBulkTextarea=function(){return this.getApp().getFakeDom().getStumpById("bulkTextarea")};BulkInsertModal.prototype._getBulkAdvanced=function(){return this.getApp().getFakeDom().getStumpById("bulkAdvanced")};
BulkInsertModal.prototype._getBulkType=function(){return this.getApp().getFakeDom().getStumpById("bulkType")};BulkInsertModal.prototype._updateBulkTextAreaPlaceholderCommand=function(){var a=this._getBulkTextarea().val(),a=(new RowParser).getExample(a)||"";this._getBulkTextarea().attr("placeholder","Example:\n"+a);this._updateBulkTextAreaAdvancedCommand()};
BulkInsertModal.prototype._updateBulkTextAreaAdvancedCommand=function(){var a=this._getBulkTextarea(),b=this._getBulkAdvanced(),c=this._getBulkType().val();""===c?b.html("Detected: "+(new RowParser).inferEncoding(a.val())):"delimited"===c?b.html('Delimiter: <input placeholder="," id="bulkDelimiter">\n        <br>Enclosing Char: <input placeholder=\'"\' id="bulkEnclosingChar">\n        <br>Has Headers: <input type="checkbox" id="bulkHasHeader" checked>'):b.html("")};
BulkInsertModal.prototype._submitBulkInsertCommand=function(){var a=this.getApp(),b=this._getChildBlock(),c=this._getBulkTextarea().val(),d=this._getBulkType().val(),e=a.getFakeDom().getStumpById;if("advanced"===d){d=e("bulkDelimiter").val()||",";var f=e("bulkEnclosingChar").val()||'"';e=e("bulkHasHeader").is(":checked");c=(new RowParser).parseAdvancedDelimited(c,e,d,f)}else c=(new RowParser).parse(c,d);a.emitGlobalMessageAndFade(Say($jscomp$templatelit$23));b.createRows(c);a.closeModal()};
BulkInsertModal.prototype.getHtml=function(){return'\n<div id="bulkRowsPopup">\n  <h4>Insert Nodes</h4>\n  <p>Enter nodes in any format: csv, newlines, tsv, json, or tree.</p>\n  <div class="form-group">\n    <textarea data-command="ac _updateBulkTextAreaAdvancedCommand" class="bigInput" rows="15" id="bulkTextarea" wrap="off"></textarea>\n  </div>\n  <br>\n  <div class="form-group">\n    <label for="bulkType">Format</label>\n    <select data-command="ac _updateBulkTextAreaPlaceholderCommand" class="bigInput" id="bulkType">\n      <option value="">Detect</option>\n      <option value="csv">CSV</option>\n      <option value="tsv">TSV</option>\n      <option value="json">JSON</option>\n      <option value="ssv">SSV</option>\n      <option value="rss">RSS</option>\n      <option value="tree">Tree</option>\n      <option value="list">List</option>\n      <option value="spaced">Spaced Trees</option>\n      <option value="sections">Sections</option>\n      <option value="advanced">Advanced Delimited</option>\n    </select>\n  </div>\n    <div id="bulkAdvanced">\n    </div>\n    <br>\n  <button type="button" class="buttonPrimary" data-command="ac _submitBulkInsertCommand">Insert</button>\n'};
window.BulkInsertModal=BulkInsertModal;var CustomConfirmModal=function(a){return AbstractModal.apply(this,arguments)||this};$jscomp.inherits(CustomConfirmModal,AbstractModal);CustomConfirmModal._mountedComponents=AbstractModal._mountedComponents;
CustomConfirmModal.prototype.getHtml=function(){return"<h4>"+this.getTail()+'</h4>\n    <button value="0" data-command="ac _resolveCommand">'+Say($jscomp$templatelit$24)+'</button><button value="1" data-command="ac _resolveCommand">'+Say($jscomp$templatelit$25)+"</button>"};CustomConfirmModal.prototype._resolveCommand=function(a){this.resolve("1"===a);this.getApp().closeModal();return Promise.resolve()};
CustomConfirmModal.prototype.getHakon=function(){return AbstractModal.prototype.getHakon.call(this)+"\n.CustomConfirmModal\n h4\n  text-align left\n button\n  padding 7px 20px"};CustomConfirmModal.prototype.getConfirmPromise=function(){var a=this;return new Promise(function(b,c){a.resolve=b;a.reject=c})};window.CustomConfirmModal=CustomConfirmModal;var CustomPromptModal=function(a){return AbstractModal.apply(this,arguments)||this};$jscomp.inherits(CustomPromptModal,AbstractModal);
CustomPromptModal._mountedComponents=AbstractModal._mountedComponents;CustomPromptModal.prototype.getHtml=function(){return"<h4>"+this.findTail("message")+'</h4>\n    <input value="'+(this.findTail("value")||"")+'"/>\n    <button data-command="ac _resolveCommand">Ok</button>'};CustomPromptModal.prototype.parseNodeType=function(a){return TreeNotation};CustomPromptModal.prototype._resolveCommand=function(){var a=this.getStump().find("input");this.resolve(a.val());this.getApp().closeModal();return Promise.resolve()};
CustomPromptModal.prototype.componentDidMount=function(){AbstractModal.prototype.componentDidMount.call(this);this.getStump().find("input").focus()};CustomPromptModal.prototype.getHakon=function(){return AbstractModal.prototype.getHakon.call(this)+"\n.CustomPromptModal\n h4\n  text-align left\n input\n  width 100%\n  display block\n  margin-bottom 20px\n button\n  padding 7px 20px"};
CustomPromptModal.prototype.getPromptPromise=function(){var a=this;return new Promise(function(b,c){a.resolve=b;a.reject=c})};window.CustomPromptModal=CustomPromptModal;var HelpModal=function(a){return AbstractHelpModal.apply(this,arguments)||this};$jscomp.inherits(HelpModal,AbstractHelpModal);HelpModal._mountedComponents=AbstractHelpModal._mountedComponents;window.HelpModal=HelpModal;var NodeEditorModal=function(a){return AbstractModal.apply(this,arguments)||this};
$jscomp.inherits(NodeEditorModal,AbstractModal);NodeEditorModal._mountedComponents=AbstractModal._mountedComponents;NodeEditorModal.prototype.hasChanges=function(){var a=this.getNode(),b=this._getLatest();return b.children!==a.childrenToString()||b.line!==a.getLine()};NodeEditorModal.prototype._getLatest=function(){this.getStump();return{children:this._getTextarea().val(),line:this._getInput().val()}};
NodeEditorModal.prototype._saveChangesCommand=function(){var a=this.getNode(),b=this._getLatest();a.setChildren(b.children||void 0);a.setLine(b.line);a=this.getApp();a.closeModal();a.getMountedProgram().autosaveAndRender()};NodeEditorModal.prototype._getTextarea=function(){return this.getStump().find("textarea")};NodeEditorModal.prototype._getInput=function(){return this.getStump().find("input")};
NodeEditorModal.prototype._deleteNodeCommand=function(){var a=this,b=this.getApp();return b.confirm("Delete. Are you sure?").then(function(c){if(!c)return!1;c=a.getNode();c.unmountAndDestroy?c.unmountAndDestroy():c.destroy();b.closeModal();b.getMountedProgram().autosaveAndRender();return!0})};NodeEditorModal.prototype.componentDidMount=function(){var a=this.getNode();this._getTextarea().val(a.childrenToString()||"");this._getInput().val(a.getLine()||"")};NodeEditorModal.prototype.getNode=function(){return this.getApp().getTargetNode()};
NodeEditorModal.prototype.getHtml=function(){return"<h4>Editing '"+this.getNode().getPathName()+'\'</h4>\n    <div class="monospaceModal"><input><br><textarea></textarea></div>\n    <button title="Delete" data-command="ac _deleteNodeCommand" class="leftButton">'+MakeSVG("trash",30)+'</button>\n    <button title="Save" data-command="ac _saveChangesCommand" class="SVGIcon rightButton">'+MakeSVG("check",30)+"</button>"};window.NodeEditorModal=NodeEditorModal;
var NodePickerModal=function(a){return AbstractModal.apply(this,arguments)||this};$jscomp.inherits(NodePickerModal,AbstractModal);NodePickerModal._mountedComponents=AbstractModal._mountedComponents;NodePickerModal.prototype.getHakon=function(){var a=this.getTheme();return AbstractModal.prototype.getHakon.call(this)+"\n.head\n color "+a.linkColor+"\n cursor pointer"};NodePickerModal.prototype.getProgram=function(){return this.getApp().getMountedProgram()};
NodePickerModal.prototype.componentDidMount=function(){AbstractModal.prototype.componentDidMount.call(this);var a=this.getApp();this.getApp().getFakeDom().getStumpByClass("head").on(BrowserEvents.click,function(){var b=$(this).parent().attr("data-pathVector").split(" ").map(function(a){return parseInt(a)}),b=b.splice(2);a.closeModal();a.openNodeEditorModalCommand(b)})};
NodePickerModal.prototype.getHtml=function(){return'<h4>Click a property to edit</h4>\n    <div class="monospaceModal"><div>'+this.getProgram().toHtml()+"</div></div>"};window.NodePickerModal=NodePickerModal;var RowEditorModal=function(a){return AbstractModal.apply(this,arguments)||this};$jscomp.inherits(RowEditorModal,AbstractModal);RowEditorModal._mountedComponents=AbstractModal._mountedComponents;
RowEditorModal.prototype.componentDidMount=function(){AbstractModal.prototype.componentDidMount.call(this);this._getTextArea().val(this.getRow().rowToString())};RowEditorModal.prototype._getTextArea=function(){return this.getApp().getFakeDom().getStumpById("editRowTextarea")};RowEditorModal.prototype._deleteRowCommand=function(){this.getApp().closeModal();var a=this.getRow().getRowBlock();return this.getRow().destroyRowCommand().then(function(){a.executeLoadNewPlaneAndRender()})};
RowEditorModal.prototype._saveRowCommand=function(){var a=this.getRow();a.reloadFromStr(this._getTextArea().val());a.getChildBlock().updateRows([a]);this.getApp().closeModal()};
RowEditorModal.prototype.getHtml=function(){var a='<button title="Save" class="rightButton" data-command="ac _saveRowCommand">'+MakeSVG("check",30)+"</button>";return'<h4>Editing node</h4>\n    <textarea class="bigInput" rows="20" id="editRowTextarea"></textarea>\n    <button title="'+Say($jscomp$templatelit$26)+'" class="leftButton" data-command="ac _deleteRowCommand">'+MakeSVG("trash",30)+"</button>\n    "+a};RowEditorModal.prototype.getRow=function(){return this.getApp().getTargetNode()};
window.RowEditorModal=RowEditorModal;var SingleInsertModal=function(a){return AbstractModal.apply(this,arguments)||this};$jscomp.inherits(SingleInsertModal,AbstractModal);SingleInsertModal._mountedComponents=AbstractModal._mountedComponents;SingleInsertModal.prototype.componentDidMount=function(){AbstractModal.prototype.componentDidMount.call(this);var a=this._getChildBlock();this._getTextArea().val(a.getOutputPlane().toBlankFormTemplate());this._getTextArea().focus()};
SingleInsertModal.prototype._getChildBlock=function(){return this.getApp().getTargetNode()};SingleInsertModal.prototype._getTextArea=function(){return this.getApp().getFakeDom().getStumpById("newRowTextarea")};SingleInsertModal.prototype._submitRowCommand=function(){var a=new TreeNotation(this._getTextArea().val());this._getChildBlock().createRows([a]);this.getApp().closeModal()};
SingleInsertModal.prototype.getHtml=function(){return'\n  <h4>Insert</h4>\n  <textarea rows="20" class="bigInput" wrap="off" id="newRowTextarea"></textarea>\n  <button title="Save" data-command="ac _submitRowCommand" class="SVGIcon rightButton">'+MakeSVG("check",30)+"</button>"};window.SingleInsertModal=SingleInsertModal;var SourceEditorModal=function(a){return AbstractModal.apply(this,arguments)||this};$jscomp.inherits(SourceEditorModal,AbstractModal);SourceEditorModal._mountedComponents=AbstractModal._mountedComponents;
SourceEditorModal.prototype.hasChanges=function(){return this._getTextarea().val()!==this.getApp().getMountedProgram().childrenToString()};SourceEditorModal.prototype._getTextarea=function(){return this.getStump().find("textarea")};SourceEditorModal.prototype._saveChangesCommand=function(){var a=this.getApp(),b=this._getTextarea(),c=a.getMountedProgram(),b=b.val();c.setChildren(b);a.closeModal();c.autosaveAndRender()};SourceEditorModal.prototype.componentDidMount=function(){this._getTextarea().val(this.getApp().getMountedProgram().childrenToString())};
SourceEditorModal.prototype.getHtml=function(){return'<h4>Edit Source</h4>\n  <textarea rows="20" class="bigInput" wrap="off"></textarea>\n  <button title="Save" data-command="ac _saveChangesCommand" class="SVGIcon rightButton">'+MakeSVG("check",30)+"</button>"};window.SourceEditorModal=SourceEditorModal;var FireBlocks='>block\n & pin outputPoint .2\n require AbstractBlock /aientist/clients/base/program/AbstractBlock.js\n & visible boolean true\njs >block\n require AbstractFireBlock /aientist/clients/base/program/AbstractFireBlock.js\n size 100 100\n>command >block\n>didyoumean >command\n require DidYouMeanBlock /aientist/clients/browser/blocks/commands/DidYouMeanBlock.js\n>morph >command\n size 420 400\n require MorphBlock /aientist/clients/browser/blocks/commands/MorphBlock.js\nlog js\n pattern identifier\n toJS console.log({identifier})\n inserts 100\n svg printer\nrequire js\n svg import\n pattern identifier path\n toJS const {identifier} = require("{path}")\n inserts 20\nexport js\n svg export\n pattern identifier\n toJS module.exports = {identifier}\n inserts 20\n# js\n pattern identifier number\n toJS const {identifier} = {number}\n inserts 200\n svg hashtag\n$ js\n pattern identifier words\n toJS const {identifier} = "{words}"\n inserts 100\n svg font-1\n+ js\n pattern identifier numbers\n joinLastBy  + \n svg add\n toJS const {identifier} = {numbers}\n inserts 10\n< js\n pattern identifier left right\n toJS const {identifier} = {left} < {right}\n insert 10\n svg lt\n<= js\n pattern identifier left right\n toJS const {identifier} = {left} <= {right}\n insert 10\n svg lt-eq\n> js\n pattern identifier left right\n toJS const {identifier} = {left} > {right}\n insert 10\n- +\n joinLastBy  - \n svg minus\n/ +\n joinLastBy  / \n% +\n joinLastBy %\n* +\n joinLastBy *\n svg multiply\n~ js\n pattern identifier number\n toJS let {identifier} = {number}\n-- js\n pattern identifier\n toJS {identifier}--\n inserts 10\n++ js\n pattern identifier\n toJS {identifier}++\n## js\n pattern identifier numbers\n toJS const {identifier} = [{numbers}]\n joinLastBy , \ncall js\n svg call\n pattern identifier methodName args\n toJS const {identifier} = {methodName}({args})\n joinLastBy , \n. js\n pattern identifier instanceIdentifier methodName args\n toJS const {identifier} = {instanceIdentifier}.{methodName}({args})\n joinLastBy , \nreturn js\n pattern identifier\n toJS return {identifier}\n svg nw\nfn js\n pattern identifier args\n toJS const {identifier} = ({args}) =>\n hasBlock\n inserts 40\n svg function\n joinLastBy , \nif js\n svg fork\n pattern identifier\n toJS if ({identifier})\n hasBlock\nwhile js\n pattern identifier\n toJS while ({identifier})\n hasBlock\nclass js\n pattern identifier\n toJS class {identifier}\n hasBlock\nsubclass js\n pattern identifier parentIdentifier\n toJS class {identifier} extends {parentIdentifier}\n hasBlock';
window.FireBlocks=FireBlocks;var FireProgram=function(a){return AbstractProgram.apply(this,arguments)||this};$jscomp.inherits(FireProgram,AbstractProgram);FireProgram._mountedComponents=AbstractProgram._mountedComponents;FireProgram.prototype.getParser=function(){return FireProgram.getParser(this.getApp())};FireProgram.prototype.getCatchAllBlockClass=function(a,b,c,d){return c.startsWith("pin")||c.startsWith("etn")||c.startsWith("layout")||!c.trim().length?ParserETN.BlockPropertyNode:a.getDidYouMeanBlock().getJSClass(d)};
FireProgram.prototype.buildProgram=function(){return this.getChildren().map(function(a){return a.toJavascript()}).join("\n")};FireProgram.prototype.getContextMenuCommands=function(){return'<a tabindex="-1" data-command="app downloadJavascriptCommand">Export Javascript</a>'};FireProgram.prototype.getTopNodeTypes=function(){var a=(new TreeNotation(FireBlocks)).getChildren().slice(0);a.sort(Util.sortByAccessor(function(a){return a.findTail("inserts")||1}));a.reverse();return a.slice(0,20).map(function(a){return a.getHead()})};
FireProgram.getParser=function(a){this._parser||(this._parser=new ParserETN(FireBlocks,"fire",a));return this._parser};window.FireProgram=FireProgram;var FlowProgram=function(a){return AbstractProgram.apply(this,arguments)||this};$jscomp.inherits(FlowProgram,AbstractProgram);FlowProgram._mountedComponents=AbstractProgram._mountedComponents;FlowProgram.prototype.getParser=function(){return FlowProgram.getParser(this.getApp())};FlowProgram.prototype.getContextMenuCommands=function(){return""};
FlowProgram.prototype.getTopNodeTypes=function(){return">text >data >table >presidents >url >filter >group >kpi >reddit >h2".split(" ")};FlowProgram.prototype.getCatchAllBlockClass=function(a,b,c,d){a=a.getDidYouMeanBlock().getJSClass(d);return c.startsWith(">")?a:ParserETN.BlockPropertyNode};FlowProgram.prototype.clearParser=function(){delete this._parser};FlowProgram.getParser=function(a){this._parser||(this._parser=new ParserETN(a.getFlowBlocks(),"flow",a));return this._parser};
window.FlowProgram=FlowProgram;var SpeedTestTemplate=function(a,b){return">data\n pin 45 32 17 5\n content "+b.replace(/\n/g,"\n  ")+"\n columns\n  timeToLoad\n   type number\n  timeToRender\n   type number\n >text\n  content "+a+"\n  pin 45 0 23 3\n >table\n  link url\n  title Slow Load Times\n  x timeToLoad\n  y timeToRender\n  orderBy -timeToLoad\n  pin 0 0 43 18\n >table\n  link url\n  title Slow Render Times\n  x timeToLoad\n  y timeToRender\n  orderBy -timeToRender\n  pin 0 20 41 17\n >kpi\n  pin 45 4 11 7\n  column timeToLoad\n  reduction average\n >kpi\n  pin 45 15 11 7\n  column timeToRender\n  reduction average\n >kpi\n  pin 45 24 11 7\n  column timeToRender\n  reduction median\n >kpi\n  pin 57 4 11 7\n  column timeToLoad\n  reduction sum\n >kpi\n  pin 57 15 11 7\n  column timeToRender\n  reduction sum\n >kpi\n  pin 57 24 11 7\n  column timeToRender\n  reduction count"};
window.SpeedTestTemplate=SpeedTestTemplate;var OhayoApp=function(a){return AbstractBrowserApplication.apply(this,arguments)||this};$jscomp.inherits(OhayoApp,AbstractBrowserApplication);OhayoApp._mountedComponents=AbstractBrowserApplication._mountedComponents;OhayoApp.prototype.fetchProgram=function(a){a.setChildrenAndDiskAndUndoStack(this.getFromStore(a.getUrl()));return Promise.resolve()};
OhayoApp.prototype.componentWillMount=function(){var a=this;AbstractBrowserApplication.prototype.componentWillMount.call(this);var b=["readme.flow","faq.flow","releasenotes.flow","fib.fire"];1===this._getVisitCount()&&Promise.all(b.map(function(b){return a.openOhayoProgram(b)})).then(function(){a.openOhayoProgram("ohayo.flow")})};OhayoApp.prototype.saveProgramToDisk=function(a,b){this.storeValue(a.getFullPath(),b.newVersion);return Promise.resolve()};
OhayoApp.prototype.getLinks=function(){return this.getStoreKeys().filter(function(a){return!StorageKeys.isKey(a)}).map(function(a){return{link:a,title:a}})};OhayoApp.prototype.getProgramToOpen=function(){};OhayoApp.prototype.doesFileExistSync=function(a){return void 0!==this.getFromStore(a)};OhayoApp.prototype.setRefreshUrl=function(a){return this};OhayoApp.prototype.deleteFileCommand=function(a){this.removeValue(a);return Promise.resolve()};
OhayoApp.prototype.renameFileCommand=function(a,b,c){this.storeValue(b,this.getFromStore(a)||"");this.removeValue(a);return Promise.resolve(b)};OhayoApp.prototype._createFile=function(a,b,c){a=this._getAvailablePermalink(a);this.storeValue(a,b);return Promise.resolve(a)};OhayoApp.prototype.createAndOpen=function(a,b,c){var d=this;return this._createFile(b,a,c).then(function(a){return d.openUrlInNewSpaceAndFocus(a)})};var bsMain=function(){return(new OhayoApp).renderApp()};window.OhayoApp=OhayoApp;
