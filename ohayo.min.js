var $jscomp$templatelit$24=["Adding..."];$jscomp$templatelit$24.raw=["Adding..."];var $jscomp$templatelit$23=["Ok"];$jscomp$templatelit$23.raw=["Ok"];var $jscomp$templatelit$22=["Cancel"];$jscomp$templatelit$22.raw=["Cancel"];var $jscomp$templatelit$21=["Delete card"];$jscomp$templatelit$21.raw=["Delete card"];var $jscomp$templatelit$20=["Keyboard Shortcuts"];$jscomp$templatelit$20.raw=["Keyboard Shortcuts"];var $jscomp$templatelit$19=["ohayo"];$jscomp$templatelit$19.raw=["ohayo"];
var $jscomp$templatelit$18=["My programs"];$jscomp$templatelit$18.raw=["My programs"];var $jscomp$templatelit$17=["",""];$jscomp$templatelit$17.raw=["",""];var $jscomp$templatelit$16=["Click to sort."];$jscomp$templatelit$16.raw=["Click to sort."];var $jscomp$templatelit$15=["",""];$jscomp$templatelit$15.raw=["",""];var $jscomp$templatelit$14=["",""];$jscomp$templatelit$14.raw=["",""];var $jscomp$templatelit$13=["Layout set to '","'"];$jscomp$templatelit$13.raw=["Layout set to '","'"];
var $jscomp$templatelit$12=["Items cut"];$jscomp$templatelit$12.raw=["Items cut"];var $jscomp$templatelit$11=["Items copied"];$jscomp$templatelit$11.raw=["Items copied"];var $jscomp$templatelit$10=["Drop to create a new program. Hold shift key to insert cards into current program."];$jscomp$templatelit$10.raw=["Drop to create a new program. Hold shift key to insert cards into current program."];var $jscomp$templatelit$9=["Created '","'"];$jscomp$templatelit$9.raw=["Created '","'"];
var $jscomp$templatelit$8=["Created '","'"];$jscomp$templatelit$8.raw=["Created '","'"];var $jscomp$templatelit$7=["Are you sure you want to delete "," programs?"];$jscomp$templatelit$7.raw=["Are you sure you want to delete "," programs?"];var $jscomp$templatelit$6=["Are you sure you want to delete ","?"];$jscomp$templatelit$6.raw=["Are you sure you want to delete ","?"];var $jscomp$templatelit$5=["Switched to "," theme"];$jscomp$templatelit$5.raw=["Switched to "," theme"];
var $jscomp$templatelit$4=["Autosave is ",""];$jscomp$templatelit$4.raw=["Autosave is ",""];var $jscomp$templatelit$3=["Enter a regex to open multiple matching files"];$jscomp$templatelit$3.raw=["Enter a regex to open multiple matching files"];var $jscomp$templatelit$2=["Enter a url to open"];$jscomp$templatelit$2.raw=["Enter a url to open"];var $jscomp$templatelit$1=["Created '","'"];$jscomp$templatelit$1.raw=["Created '","'"];var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;
$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof e?a:new e(function(b,c){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){d(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];delete a[b];try{c()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(k){b.reject(k)}};e.prototype.createResolveAndReject_=
function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(k){this.reject_(k);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var f=new b;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(l){c.reject(l)}};e.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{d(a(b))}catch(q){f(q)}}:b}var d,f,g=new e(function(a,
b){d=a;f=b});this.callWhenSettled_(c(a,d),c(b,f));return g};e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(function(){f.asyncExecute(c)})};e.resolve=c;e.reject=function(a){return new e(function(b,c){c(a)})};e.race=function(a){return new e(function(b,
d){for(var e=$jscomp.makeIterator(a),f=e.next();!f.done;f=e.next())c(f.value).callWhenSettled_(b,d)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?c([]):new e(function(a,e){function f(b){return function(c){g[b]=c;h--;0==h&&a(g)}}var g=[],h=0;do g.push(void 0),h++,c(d.value).callWhenSettled_(f(g.length-1),e),d=b.next();while(!d.done)})};return e},"es6-impl","es3");
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};$jscomp.polyfill("Object.values",function(a){return a?a:function(a){var b=[],d;for(d in a)$jscomp.owns(a,d)&&b.push(a[d]);return b}},"es8","es3");$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;for(c=c||0;c<e;c++)if(b[c]==a||Object.is(b[c],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=b.length,f=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var g=0;g<f&&c<e;)if(b[c++]!=a[g++])return!1;return g>=f}},"es6-impl","es3");$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
$jscomp.polyfill("WeakMap",function(a){function b(a){$jscomp.owns(a,d)||$jscomp.defineProperty(a,d,{value:{}})}function c(a){var c=Object[a];c&&(Object[a]=function(a){b(a);return c(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(l){return!1}}())return a;var d="$jscomp_hidden_"+Math.random().toString().substring(2);c("freeze");c("preventExtensions");
c("seal");var e=0,f=function(a){this.id_=(e+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};f.prototype.set=function(a,c){b(a);if(!$jscomp.owns(a,d))throw Error("WeakMap key fail: "+a);a[d][this.id_]=c;return this};f.prototype.get=function(a){return $jscomp.owns(a,d)?a[d][this.id_]:void 0};f.prototype.has=function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)};f.prototype.delete=
function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)?delete a[d][this.id_]:!1};return f},"es6-impl","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(p){return!1}}())return a;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var b=new WeakMap,c=function(a){this.data_={};this.head_=f();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};c.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};c.prototype.delete=
function(a){a=d(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};c.prototype.has=function(a){return!!d(this,a).entry};c.prototype.get=function(a){return(a=d(this,a).entry)&&a.value};c.prototype.entries=function(){return e(this,function(a){return[a.key,
a.value]})};c.prototype.keys=function(){return e(this,function(a){return a.key})};c.prototype.values=function(){return e(this,function(a){return a.value})};c.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var d=function(a,c){var d=c&&typeof c;"object"==d||"function"==d?b.has(c)?d=b.get(c):(d=""+ ++g,b.set(c,d)):d="p_"+c;var e=a.data_[d];if(e&&$jscomp.owns(a.data_,d))for(a=0;a<e.length;a++){var f=
e[a];if(c!==c&&f.key!==f.key||c===f.key)return{id:d,list:e,index:a,entry:f}}return{id:d,list:e,index:-1,entry:void 0}},e=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},f=function(){var a={};return a.previous=a.next=a.head=a},g=0;return c},"es6-impl","es3");
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var e=a.length;0<e&&0<c;)if(b[--c]!=a[--e])return!1;return 0>=e}},"es6-impl","es3");$jscomp.polyfill("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e)for(var f in e)$jscomp.owns(e,f)&&(a[f]=e[f])}return a}},"es6-impl","es3");
var AbstractCard=function(a,b){a=void 0===a?{}:a;this._puid=this._getUniqueId();this._sourceObject=a;this._binder=b};AbstractCard.prototype._getUniqueId=function(){void 0===AbstractCard._uniqueId&&(AbstractCard._uniqueId=0);AbstractCard._uniqueId++;return AbstractCard._uniqueId};AbstractCard.prototype.destroy=function(){};AbstractCard.prototype._getCardBinder=function(){return this._binder};AbstractCard.prototype.getCardApp=function(){return this.getCardBlock().getApp()};
AbstractCard.prototype.getCardBlock=function(){return this._getCardBinder().getBinderOwner()};AbstractCard.prototype.destroyCardCommand=function(){return Promise.resolve()};AbstractCard.prototype.getCardSourceAsObject=function(){return this.getCardSource()};AbstractCard.prototype.getAsArray=function(a){var b=this.getCardNumeric();return a.map(function(a){return b[a]})};AbstractCard.prototype.getCardSource=function(){return this._sourceObject};
AbstractCard.prototype._parseNumeric=function(){var a=this,b=this._getCardBinder().getColumnsMap(),c={};Object.keys(b).forEach(function(d){var e=b[d],f=a.getCardValue(d);void 0===f&&(f="");c[d]=""===f?"":e.getType().fromStringToNumeric(f)});return c};AbstractCard.prototype.getCardNumeric=function(){this._numeric||(this._numeric=this._parseNumeric());return this._numeric};AbstractCard.prototype.getCardKeys=function(){return Object.keys(this.getCardSource())};AbstractCard.prototype.getFirstCell=function(){return this.getCardValue(this.getCardKeys()[0])};
AbstractCard.prototype.getCardValue=function(a){a=this.getCardSource()[a];return null===a?"":a};AbstractCard.prototype.setCardValue=function(a,b){this.getCardSource()[a]=b;return this};AbstractCard.prototype.reloadFromStr=function(a){var b=this.getCardSource();Object.keys(b).forEach(function(a){return delete b[a]});var c=JSON.parse(a);Object.keys(c).forEach(function(a){return b[a]=c[a]})};AbstractCard.prototype.deleteFromCard=function(a){delete this.getCardSource()[a];return this};
AbstractCard.prototype.getPuid=function(){return this._puid};AbstractCard.prototype.renameCard=function(a,b){var c=this.getCardSource();c[b]=c[a];delete c[a];return this};AbstractCard.prototype.cardToString=function(){return JSON.stringify(this.getCardSource(),null,2)};window.AbstractCard=AbstractCard;
var Binder=function(a,b,c,d){a=void 0===a?new TreeNotation:a;b=void 0===b?[]:b;c=void 0===c?[]:c;d=void 0===d?AbstractCard:d;var e=this;this._parentNode=a;this._cards=b.map(function(a){return a instanceof AbstractCard?a:new d(a,e)});var f={};this._columnsMap=f;c.concat(this._getDetectedColumns()).forEach(function(a){var b=e._getColumnTextVector(a.name);f[a.name]=new Column(a,b)});this._addRanks()};Binder.prototype.getCards=function(){return this._cards};Binder.prototype.getFirstColumnAsString=function(){return this.getCards().map(function(a){return a.getFirstCell()}).join("")};
Binder.prototype.getFirstCard=function(){return this.getCards()[0]};Binder.prototype._getColumnTextVector=function(a){return this.getCards().map(function(b){return b.getCardValue(a)})};Binder.prototype.getColumnNumericVector=function(a){return this.getCards().map(function(b){return b.getCardNumeric()[a]})};
Binder.prototype._getUnionSample=function(){var a={};this.getSampleSet().forEach(function(b){b.getCardKeys().forEach(function(c){if(c){var d=a[c];if(void 0===d||""===d)a[c]=b.getCardValue(c)}})});return a};Binder.prototype.getColumnsByImportance=function(){var a=this.getColumnsArray();a.sort(Util.sortByAccessor(function(a){return a.getRank()}));return a};Binder.prototype.getSampleSet=function(){this._sampleSet||(this._sampleSet=_.sampleSize(this.getCards(),30));return this._sampleSet};
Binder.prototype.getCardCount=function(){return this.getCards().length};Binder.prototype.getCardSources=function(){return this.getCards().map(function(a){return a.getCardSource()})};Binder.prototype.getColumnNames=function(){return Object.keys(this.getColumnsMap())};Binder.prototype.getColumnsMap=function(){return this._columnsMap};Binder.prototype.getCTime=function(){return this.getBinderOwner()._getNow()};Binder.prototype.getColumnsArray=function(){return Object.values(this.getColumnsMap())};
Binder.prototype.getColumnsArrayOfObjects=function(){return this.getColumnsArray().map(function(a){return a.toObject()})};Binder.prototype.getNumericValues=function(){return this.getCards().map(function(a){return a.getCardNumeric()})};Binder.prototype.getBinderColumnByName=function(a){return this.getColumnsMap()[a]};Binder.prototype._getDetectedColumns=function(){var a=this.getColumnsMap();return Object.keys(this._getUnionSample()).map(function(a){return a.trim()}).filter(function(a){return a}).filter(function(b){return!a[b]}).map(function(a){return{name:a}})};
Binder.prototype.getBinderOwner=function(){return this._parentNode};Binder.prototype.getCardTypeName=function(){return"Card"};Binder.prototype.toTypeScriptInterface=function(){var a=this.getColumnsArray().map(function(a){return"  "+a.getColumnName()+": "+a.getTypeName()+";"}).join("\n");return"interface "+this.getCardTypeName()+" {\n"+a+"\n}"};Binder.prototype.toBlankFormTemplate=function(){var a=this.getColumnNames().join(" \n");return(new TreeNotation(a?a+" ":a)).toString()};
Binder.prototype.getSortedCards=function(a){if(!a)return this.getCards();var b=this.getCards().map(function(a){return a});Util.sortByFast(b,a);return b};Binder.prototype.getSortedCardsWithLimit=function(a,b){return this.getSortedCards(a).slice(0,b)};Binder.prototype.toDelimited=function(a){return(new TreeNotation(this.getCardSources())).toDelimited(a,this.getColumnNames())};
Binder.prototype._addRanks=function(){var a=this.getColumnsMap(),b=Object.keys(a).map(function(b){return a[b]});b.sort(function(a,b){if(a.getTitlePotential()>b.getTitlePotential())return-1;if(b.getTitlePotential()>a.getTitlePotential())return 1;if(.5<a.getMissingDataPercentage()||.5<b.getMissingDataPercentage()){if(a.getMissingDataPercentage()>b.getMissingDataPercentage())return 1;if(b.getMissingDataPercentage()>a.getMissingDataPercentage())return-1}return a.isTemporal()&&!b.isTemporal()?-1:!a.isTemporal()&&
b.isTemporal()||a.isLink()&&!b.isLink()?1:!a.isLink()&&b.isLink()?-1:a.isString()&&!b.isString()?1:!a.isString()&&b.isString()?-1:a.isString()&&b.isString()?4<a.getEntropy()&&8>a.getEntropy()&&a.getEntropy()>b.getEntropy()?-1:a.getEstimatedTextLength()>b.getEstimatedTextLength()?1:-1:0});b.forEach(function(a,b){a.setRank(b)});return this};window.Binder=Binder;var AbstractCardParser=function(){};AbstractCardParser.prototype.getExample=function(){return""};AbstractCardParser.prototype.is=function(){return 0};
AbstractCardParser.prototype._getFormatName=function(){return""};AbstractCardParser.prototype.parse=function(){return[]};AbstractCardParser.prototype.isNode=function(){return"undefined"!==typeof exports};var AbstractTreeCardParser=function(a){AbstractCardParser.apply(this,arguments)};$jscomp.inherits(AbstractTreeCardParser,AbstractCardParser);AbstractTreeCardParser.prototype.parse=function(a){return this.parseTrees(a).getChildren().filter(function(a){return a.length}).map(function(a){return a.toObject()})};
var DelimitedParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(DelimitedParser,AbstractTreeCardParser);DelimitedParser.prototype.getExample=function(){return"john~12~50\nmary~13~43"};DelimitedParser.prototype.parseTrees=function(a,b,c,d){return TreeNotation.fromDelimited(a,b,c,d)};DelimitedParser.prototype.is=function(){return 0};DelimitedParser.prototype._getFormatName=function(){return"delimited"};var CsvParser=function(a){AbstractTreeCardParser.apply(this,arguments)};
$jscomp.inherits(CsvParser,AbstractTreeCardParser);CsvParser.prototype.getExample=function(){return"name,age,height\njohn,12,50"};CsvParser.prototype.parseTrees=function(a){return TreeNotation.fromCsv(a)};CsvParser.prototype.is=function(a){return a.firstLineCommaCount?a.blankLineCount?.05:.49:0};CsvParser.prototype._getFormatName=function(){return"csv"};var TsvParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(TsvParser,AbstractTreeCardParser);
TsvParser.prototype.getExample=function(){return"name\tage\theight\njohn\t12\t50"};TsvParser.prototype.parseTrees=function(a){return TreeNotation.fromTsv(a)};TsvParser.prototype.is=function(a){return a.firstLineTabCount?5<a.tabCount?.9:.25:0};TsvParser.prototype._getFormatName=function(){return"tsv"};var PsvParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(PsvParser,AbstractTreeCardParser);PsvParser.prototype._getFormatName=function(){return"psv"};
PsvParser.prototype.parseTrees=function(a){return TreeNotation.fromDelimited(a,"|")};PsvParser.prototype.is=function(a){return a.firstLineVerticalBarCount?a.verticalBarCount>=a.lineCount?.8:.01:0};var SsvParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(SsvParser,AbstractTreeCardParser);SsvParser.prototype.getExample=function(){return"name age height\njohn 12 50"};SsvParser.prototype._getFormatName=function(){return"ssv"};SsvParser.prototype.parseTrees=function(a){return TreeNotation.fromSsv(a)};
SsvParser.prototype.is=function(a){return a.firstLineSpaceCount?a.blankLineCount?.05:.11:0};var XmlParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(XmlParser,AbstractTreeCardParser);XmlParser.prototype.is=function(a){return a.trimmedStr.match(/^ *\</)?1:0};XmlParser.prototype._getFormatName=function(){return"xml"};XmlParser.prototype.parseTrees=function(a){return this.isNode()?new TreeNotation(a):TreeNotation.fromXml(a)};
var HtmlParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(HtmlParser,AbstractTreeCardParser);HtmlParser.prototype.is=function(a){return a.trimmedStr.match(/^(\<\!doctype html\>|\<html|\<div)/i)?1:0};HtmlParser.prototype._getFormatName=function(){return"html"};HtmlParser.prototype.parseTrees=function(a){return TreeNotation.fromXml(a)};var SpacedParser=function(a){AbstractCardParser.apply(this,arguments)};$jscomp.inherits(SpacedParser,AbstractCardParser);
SpacedParser.prototype.getExample=function(){return"name john\nage 12\n\nname mary\nage 20"};SpacedParser.prototype._getFormatName=function(){return"spaced"};SpacedParser.prototype.is=function(a){return 10<a.blankLineCount?.95:.05};
SpacedParser.prototype.parse=function(a){var b=a.indexOf("\n\n"),c=a.substr(0,b).split(/\n/g),d=a.substr(b+2).replace(/\n\n/g,"\n").trim().split("\n");a=c.length;for(var b=d.length,e=[],c=c.map(function(a){return a.replace(/ /g,"")}),f={i:0};f.i<b;f={obj:f.obj,i:f.i},f.i+=a)f.obj={},c.forEach(function(a){return function(b,c){a.obj[b]=d[a.i+c].trim()}}(f)),e.push(f.obj);return e};var TreeParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(TreeParser,AbstractTreeCardParser);
TreeParser.prototype.getExample=function(){return"person\n name john\n age 12\n height 50"};TreeParser.prototype.parseTrees=function(a){a=a instanceof TreeNotation?a:new TreeNotation(a);var b=a.getChildren().filter(function(a){return a.getBeam()}).length,c=a.getChildren().filter(function(a){return 0===a.length}).length;if(!b&&!c)return a;b=new TreeNotation;b.pushBeamAndChildren(void 0,a);return b};TreeParser.prototype.is=function(a){return 1>a.indentedLineCount?0:.1};
TreeParser.prototype._getFormatName=function(){return"tree"};var SectionsParser=function(a){AbstractCardParser.apply(this,arguments)};$jscomp.inherits(SectionsParser,AbstractCardParser);SectionsParser.prototype.getExample=function(){return"name\nage\n\njohn\n12\n\nmary\n20"};SectionsParser.prototype._getFormatName=function(){return"sections"};
SectionsParser.prototype.parse=function(a){var b=a.indexOf("\n\n"),c=[a.slice(0,b),a.slice(b+1)];a=c.shift().split(/\n/g);for(var b=a.length,c=c[0].trim().split(/\n/g),d=c.length/b,e=[],f={},g=0;g<d;f={obj:f.obj,values:f.values},g++){var h=g*b;f.values=c.slice(h,h+b);f.obj={};a.forEach(function(a){return function(b,c){return a.obj[b]=a.values[c]}}(f));e.push(f.obj)}return e};var ListParser=function(a){AbstractCardParser.apply(this,arguments)};$jscomp.inherits(ListParser,AbstractCardParser);
ListParser.prototype.getExample=function(){return"john doe\nfrank jones"};ListParser.prototype._getFormatName=function(){return"list"};ListParser.prototype.parse=function(a){return a.split(/\n/g).map(function(a,c){return{index:c,name:a}})};var TextParser=function(a){AbstractCardParser.apply(this,arguments)};$jscomp.inherits(TextParser,AbstractCardParser);TextParser.prototype._getFormatName=function(){return"text"};TextParser.prototype.is=function(a){return a.blankLineCount?.12:.05};
TextParser.prototype.parse=function(a){return[{text:a}]};var AbstractJsonParser=function(a){AbstractCardParser.apply(this,arguments)};$jscomp.inherits(AbstractJsonParser,AbstractCardParser);AbstractJsonParser.prototype._getFormatName=function(){return"json"};AbstractJsonParser.prototype.getExample=function(){return JSON.stringify([{name:"joe",age:2},{name:"mike",age:4}])};AbstractJsonParser.prototype.parse=function(a){a=JSON.parse(a);return a instanceof Array?a:[a]};
var JsonParser=function(a){AbstractJsonParser.apply(this,arguments)};$jscomp.inherits(JsonParser,AbstractJsonParser);var AbstractJsonArrayParser=function(a){AbstractJsonParser.apply(this,arguments)};$jscomp.inherits(AbstractJsonArrayParser,AbstractJsonParser);AbstractJsonArrayParser.prototype.getExample=function(){return JSON.stringify([{name:"jane",age:33},{name:"bill",age:25}])};AbstractJsonArrayParser.prototype.is=function(a){a=a.trimmedStr;return a.match(/^\s*\[/)&&a.match(/\]\s*$/)?.99:0};
var JsonArrayParser=function(a){AbstractJsonArrayParser.apply(this,arguments)};$jscomp.inherits(JsonArrayParser,AbstractJsonArrayParser);var AbstractJsonObjectParser=function(a){AbstractJsonParser.apply(this,arguments)};$jscomp.inherits(AbstractJsonObjectParser,AbstractJsonParser);AbstractJsonObjectParser.prototype.is=function(a){a=a.trimmedStr;return a.match(/^\s*\{/)&&a.match(/\}\s*$/)?.99:0};var JsonObjectParser=function(a){AbstractJsonObjectParser.apply(this,arguments)};
$jscomp.inherits(JsonObjectParser,AbstractJsonObjectParser);var JsonMapParser=function(a){AbstractJsonObjectParser.apply(this,arguments)};$jscomp.inherits(JsonMapParser,AbstractJsonObjectParser);JsonMapParser.prototype.getExample=function(){return JSON.stringify({person1:{name:"joe",age:2},person2:{name:"mike",age:4}})};JsonMapParser.prototype._getFormatName=function(){return"jsonMap"};JsonMapParser.prototype.parse=function(a){return Object.values(JSON.parse(a))};
var JsonVectorParser=function(a){AbstractJsonArrayParser.apply(this,arguments)};$jscomp.inherits(JsonVectorParser,AbstractJsonArrayParser);JsonVectorParser.prototype.getExample=function(){return JSON.stringify([23,32,41])};JsonVectorParser.prototype._getFormatName=function(){return"jsonVector"};JsonVectorParser.prototype.is=function(a){a=a.trimmedStr;try{var b=JSON.parse(a);return b instanceof Array?0===b.filter(function(a){return a&&"object"===typeof a&&a.hasOwnProperty}).length:0}catch(c){}return 0};
JsonVectorParser.prototype.parse=function(a){return JSON.parse(string).map(function(a){return{value:a}})};var JsonCountMapParser=function(a){AbstractJsonObjectParser.apply(this,arguments)};$jscomp.inherits(JsonCountMapParser,AbstractJsonObjectParser);JsonCountMapParser.prototype._getFormatName=function(){return"jsonCounts"};JsonCountMapParser.prototype.is=function(a){a=a.trimmedStr;try{var b=JSON.parse(a),c=Object.keys(b);return 2>c.length?0:c.some(function(a){return"number"!==typeof b[a]})?0:1}catch(d){}return 0};
JsonCountMapParser.prototype.getExample=function(){return JSON.stringify({h1:10,h2:5,h3:2})};JsonCountMapParser.prototype.parse=function(a){var b=JSON.parse(string);return Object.keys(b).map(function(a){return{name:a,count:b[a]}})};
var CardParser=function(){var a=this;this._parsers=[new CsvParser,new TsvParser,new SsvParser,new PsvParser,new TextParser,new TreeParser,new XmlParser,new HtmlParser,new SectionsParser,new SpacedParser,new ListParser,new JsonParser,new JsonArrayParser,new JsonVectorParser,new JsonMapParser,new JsonCountMapParser];this._parserMap={};this._parsers.forEach(function(b){var c=b._getFormatName();c&&(a._parserMap[c]=b)})};CardParser.prototype.getEncodingNames=function(){return Object.keys(this._getParserMap())};
CardParser.prototype.getExample=function(a){return this._getParser(a).getExample()};CardParser.prototype._getParser=function(a){var b=this._getParserMap();return b[a]||b.text};CardParser.prototype._getParserMap=function(){return this._parserMap};CardParser.prototype._getParsersArray=function(){return this._parsers};
CardParser.prototype.parseFromObject=function(a,b){return a instanceof Array?"object"===typeof a[0]?a:a.map(function(a){return"object"===typeof a?a:{value:a}}):"jsonMap"===b?Object.values(a):[a]};CardParser.prototype.parse=function(a,b){a=(void 0===a?"":a).trim();if(!a)return[];b=b||this.inferEncoding(a);return this._getParser(b).parse(a)};CardParser.prototype.parseAdvancedDelimited=function(a,b,c,d){return this._getParser("delimited").parse(a,b,c,d)};
CardParser.prototype.getProbabilities=function(a){var b=this._getParsersArray(),c={};a=new CardStringSpecimen(a);for(var d=0;d<b.length;d++){var e=b[d],f=e.is(a),e=e._getFormatName();if(1===f)return b={},b[e]=1,b;c[e]=f}return c};CardParser.prototype.inferEncoding=function(a){a=this.getProbabilities(a);var b=0,c=null,d;for(d in a)a[d]>b&&(b=a[d],c=d);return c};window.CardParser=CardParser;
var CardStringSpecimen=function(a){a=a.trim();var b=a.split(/\n/g),c=b[0],d=function(a,b){return(a.match(b)||[]).length};this.trimmedStr=a;this.lines=b;this.firstLine=c;this.lineCount=b.length;this.indentedLineCount=d(a,/\n /g);this.blankLineCount=d(a,/\n\n/g);this.commaCount=d(a,/\,/g);this.tabCount=d(a,/\t/g);this.verticalBarCount=d(a,/\|/g);this.firstLineCommaCount=d(c,/\,/g);this.firstLineTabCount=d(c,/\t/g);this.firstLineSpaceCount=d(c,/ /g);this.firstLineVerticalBarCount=d(c,/\|/g)};
window.CardStringSpecimen=CardStringSpecimen;var Chisel=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(Chisel,TreeNotation);Chisel.prototype.getApp=function(){return this.getRootNode()};Chisel.prototype.getStump=function(){return this._htmlStump};Chisel.prototype._stopPropagationCommand=function(){};Chisel.prototype.getHakon=function(){return""};Chisel.prototype.getTheme=function(){return this.getApp().getTheme()};
Chisel.prototype.getCommandsBuffer=function(){this._commandsBuffer||(this._commandsBuffer=[]);return this._commandsBuffer};Chisel.prototype.logCommand=function(a){this.getCommandsBuffer().push({command:a,time:Date.now()})};Chisel.prototype.getMessageBuffer=function(){this._messageBuffer||(this._messageBuffer=[]);return this._messageBuffer};Chisel.prototype.logMessage=function(a){this.getMessageBuffer().push({message:a,time:Date.now()})};
Chisel.prototype.unmount=function(){this.isMounted()&&(this._getChildChisels().forEach(function(a){return a.unmount()}),this.componentWillUnmount(),this._removeCss(),this._removeHtml(),delete this._rtime,this.componentDidUnmount())};Chisel.prototype._removeCss=function(){this._cssStump.removeStump();delete this._cssStump};Chisel.prototype._removeHtml=function(){this._htmlStump.removeStump();delete this._htmlStump};
Chisel.prototype._confirmAndUnmountCommand=function(){var a=this;return(this.hasChanges()?this.getApp().confirm("Drop changes?"):Promise.resolve(!0)).then(function(b){if(!b)return!1;b=a.getApp();b.makeAllDirty();a.unmountAndDestroy();b.renderApp()})};Chisel.prototype.getBray=function(){return"@ div\n class "+this.constructor.name};Chisel.prototype.componentWillMount=function(){};Chisel.prototype.componentDidMount=function(){void 0===Chisel._mountedComponents&&(Chisel._mountedComponents=0);Chisel._mountedComponents++};
Chisel.prototype.componentDidUnmount=function(){Chisel._mountedComponents--};Chisel.prototype.componentWillUnmount=function(){};Chisel.prototype.forceUpdate=function(){};Chisel.prototype.getNewestTimeToRender=function(){return this._lastTimeToRender};Chisel.prototype._setRTime=function(a){this._rtime=a;return this};Chisel.prototype.componentDidUpdate=function(){};Chisel.prototype._getChildChisels=function(){return this.getChildren().filter(function(a){return a instanceof Chisel})};
Chisel.prototype.makeAllDirty=function(){this.makeDirty();this._getChildChisels().forEach(function(a){return a.makeAllDirty()})};Chisel.prototype.hasChildren=function(){return 0<this._getChildChisels().length};Chisel.prototype.getStumpForChildren=function(){return this.getStump()};Chisel.prototype._renderChildren=function(){var a=this.getStumpForChildren();this._getChildChisels().filter(function(a){return a.isMounted()||a.shouldComponentMount()}).forEach(function(b,c){return b.render(a,c)})};
Chisel.prototype.getRTime=function(){return this._rtime};Chisel.prototype.makeDirty=function(){this._setRTime(0)};Chisel.prototype._getCss=function(){return this.getTheme().hakonToCss(this.getHakon())};Chisel.prototype._getCssBray=function(){return"@ style\n styleFor "+this.constructor.name+"\n content "+Util.indent(this._getCss(),2)};
Chisel.prototype._update=function(){if(!this.shouldComponentUpdate())return this;this._setRTime(this._getNow());this._removeCss();this._mountCss();if(!this.hasChildren())return this._replaceHtml(),this._lastTimeToRender=this._getNow()-this.getRTime(),this};Chisel.prototype._mountCss=function(a){this._cssStump=this.getApp().getWillowDocument().getHeadStump().insertChildNode(this._getCssBray())};Chisel.prototype._mountHtml=function(a,b){this._htmlStump=a.insertChildNode(this.getBray(),b);this._htmlStump.setStumpChisel(this)};
Chisel.prototype._replaceHtml=function(){var a=this._htmlStump.getParent(),b=this._htmlStump.getIndex();this._removeHtml();this._mountHtml(a,b)};Chisel.prototype._mount=function(a,b){if(!this.shouldComponentMount())return this;this._setRTime(this._getNow());this.componentWillMount();this.getApp().getWillowDocument();this._mountCss(a);this._mountHtml(a);this._lastTimeToRender=this._getNow()-this.getRTime();return this};Chisel.prototype.unmountAndDestroy=function(){this.unmount();return this.destroy()};
Chisel.prototype.toggle=function(a,b){var c=this.getNode(a);if(!b)return c?c.unmountAndDestroy():this.append(a);c=void 0===c?void 0:c.getBeam();c=b.indexOf(c);b=-1===c||c+1===b.length?b[0]:b[c+1];this.delete(a);b&&this.touchNode(a).setBeam(b);return b};Chisel.prototype.isMounted=function(){return!!this._htmlStump};Chisel.prototype.getNextOrPrevious=function(a){var b=a.length,c=a.indexOf(this);if(1!==b)return c===b-1?a[c-1]:a[c+1]};
Chisel.prototype.toggleAndRender=function(a,b){this.toggle(a,b);this.getApp().renderApp();return Promise.resolve()};Chisel.prototype.appendAndRender=function(a,b){this.append(a,b);this.getApp().renderApp();return Promise.resolve()};Chisel.prototype.shouldComponentUpdate=function(){return!this.getRTime()||this.getRTime()<(this.getMTime()||0)};Chisel.prototype.shouldComponentMount=function(){return!0};
Chisel.prototype.render=function(a,b){var c=this.isMounted();c?this._update():this._mount(a,b);this.isMounted()&&this._renderChildren();c?this.componentDidUpdate():this.componentDidMount();return this};window.Chisel=Chisel;var Column=function(a,b){this._obj=a;this._rawVector=b;this._sampleSet=_.sampleSize(b,30)};Column.prototype.getColumnName=function(){return this._obj.name};Column.prototype.isInvalidValue=function(a){return this.getType().isInvalidValue(a)};
Column.prototype._getSample=function(){if(void 0===this._sample){var a=this._getSampleSet();this._sample=a.length?a[0]:""}return this._sample};Column.prototype._getObject=function(){return this._obj};Column.prototype.getType=function(){this._type||(this._type=this._inferType());return this._type};Column.prototype.isNumericMS=function(){return this.getType().isNumericMS()};Column.prototype.isInt=function(){return this.getType().isInt()};Column.prototype.isTemporal=function(){return this.getType().isTemporal()};
Column.prototype.toDisplayString=function(a){return this.getType().toDisplayString(a,this.getFormat())};Column.prototype.isString=function(){return this.getType().isString()};Column.prototype.isHash=function(){return this.isString()&&!1};Column.prototype.getEntropy=function(){if(void 0!==this._entropy)return this._entropy;var a={},b=1;this.getColumnName();this._getSampleSet().forEach(function(c){a[c]||(b++,a[c]=!0)});return this._entropy=b};
Column.prototype.isLink=function(){if(void 0!==this._isLink)return this._isLink;var a=this._getSample();this.isString()&&a&&a.match?this._isLink=a.match(/^(http\:|\/)/)?1:0:this._isLink=!1;return this._isLink};Column.prototype._getBinder=function(){return this._binder};Column.prototype._getSampleSet=function(){return this._sampleSet};Column.prototype.isUnique=function(){return this.getEntropy()-1===this._getSampleSet().length};Column.prototype.setRank=function(a){this._rank=a};
Column.prototype.getRank=function(){return this._rank};Column.prototype.getTitlePotential=function(){if(this._obj.title)return 1;if(void 0!==this._titlePotential)return this._titlePotential;var a={title:.99,name:.98,label:.97,category:.96},b=this.getColumnName();a[b]?this._titlePotential=a[b]:150<this.getEstimatedTextLength()?this._titlePotential=.01:this.isString()&&!this.isLink()&&this.isUnique()&&!this.isHash()?this._titlePotential=.75:this._titlePotential=0;return this._titlePotential};
Column.prototype.getEstimatedTextLength=function(){if(!this.isString())return 0;if(void 0!==this._estimatedTextLength)return this._estimatedTextLength;this.getColumnName();var a=this._getSampleSet(),b=a.map(function(a){return a&&a.length}).reduce(function(a,b){return a+b},0);return this._estimatedTextLength=Math.floor(b/a.length)};Column.prototype.getAlias=function(){return this._obj.alias?this._obj.alias:this.getColumnName()};
Column.prototype.getFormat=function(){return this._obj.format?this._obj.format:this.getType().getDefaultFormat(this.getColumnName(),this._getSample())};Column.prototype.getMissingDataPercentage=function(){var a=0;this.getColumnName();var b=this._getSampleSet();b.forEach(function(b){void 0!==b&&""!==b||a++});return a/(b.length||1)};Column.prototype.getMap=function(){var a=this._map;return a?a:this._map=this._getVector().set};
Column.prototype._getVector=function(){this._vector||(this._vector=this._createVector());return this._vector};Column.prototype._createVector=function(){var a=this,b=[];this.getColumnName();var c={},d=0,e=0;this._rawVector.forEach(function(f){if(a.isInvalidValue(f))return d++,!0;c[f]?c[f].count++:(c[f]={count:0,index:0},e++);b.push(f)});return{set:c,values:b,incompleteCount:d,uniqueValues:e}};
Column.prototype.getQuintiles=function(){var a=this.getReductions().deciles;return[20,40,60,80,100].map(function(b){return{value:a[b],percent:b/100}})};Column.prototype.getTypeName=function(){return this.getType().getColumnTypeName()};
Column.prototype.toObject=function(){return{name:this.getColumnName(),type:this.getTypeName(),rank:this.getRank(),reduction:this._getObject().reduction,titlePotential:this.getTitlePotential(),isString:this.isString(),isTemporal:this.isTemporal(),isLink:this.isLink(),estimatedTextLength:this.getEstimatedTextLength()}};Column.prototype._getNumericallySortedValuesInIncreasingOrder=function(){var a=this._getVector().values.slice();a.sort(function(a,c){return a>c?1:a<c?-1:0});return a};
Column.prototype.getReductions=function(){this._reductions||(this._reductions=this._getReductionResult(this._getVector(),this));return this._reductions};Column.prototype.getMin=function(){return this.getReductions().min};Column.prototype.getMax=function(){return this.getReductions().max};Column.roundTo=function(a,b){return parseFloat(a.toFixed(b))};
Column.prototype._getReductionResult=function(a,b){var c=a.values,d=c.length,e={};e.incompleteCount=a.incompleteCount;e.uniqueValues=a.uniqueValues;if(!d)return e;a=function(a,b){return a>b?1:a<b?-1:0};var f=c.slice();b.isString()?f.sort():f.sort(a);c=f[0];a=f[0];for(var g=0,h=void 0,k=0,l=void 0,m=0,p=0;p<d;p++){var n=f[p],g=g+n;n>a&&(a=n);n<c&&(c=n);n===l?m++:(l=n,m=1);m>k&&(k=m,h=l)}l=Math.floor(d/2);e.count=d;e.sum=g;e.median=f[l];e.average=g/d;e.min=c;e.max=a;e.range=a-c;e.mode=h;e.modeSize=
k;b.isString()?(e.sum=void 0,e.average=void 0):b.isTemporal()&&(e.sum=void 0);e.deciles={};[10,20,30,40,50,60,70,80,90,99,100].forEach(function(a){var b=Math.floor(a/100*d),b=b===d?b-1:b;e.deciles[a]=f[b]});return e};
Column.prototype._inferType=function(){var a=this._getObject(),b=this.getColumnName(),c=this._getSample();if(a&&a.type&&ColumnTypes[a.type])return ColumnTypes[a.type];var a={number:.5,date:.25,string:.75,feet:.01,object:.1,boolean:.02},d=!isNaN(parseFloat(c))||ColumnTypes.usd.is(c),e=ColumnTypes.date.is(c);"object"===typeof c&&(a.object=.9);if(!0===c||!1===c)a.boolean=.96;b.match(/(team|name|link|image|description|permalink|title|label|status|thumb|ip|useragent)/i)&&(a.string=.95);b.match(/(gender|region|category|group|section|sector|field)/i)&&
(a.string=.95);b.match(/(height|length)/i)&&c.toString().match(/[0-9]+(\'|\-)[0-9\.]+/)&&ColumnTypes.feet.is(c)&&(a.feet=.97);a.number=d?.8:.1;if(ColumnTypes.usd.is(c)||!isNaN(c)&&b.match(/^(price|income|cost|revenue|budget|profit|amount|balance)$/i))a.usd=.99;d&&b.match(/(year|born)/i)&&4===c.length&&(a.year=.99);d&&b.match(/(time|second|created|edited)/i)&&10===c.length&&(a.second=.99);d&&b.match(/(time|second)/i)&&13===c.length&&(a.microsecond=.99);b.match(/(year|date|dob|birthday|day|month|time|birthdate)/i)&&
e&&(a.date=.98);"string"===typeof c&&100<c.length&&(a.string=.98);var b=0,d=null,f;for(f in a)a[f]>b&&(b=a[f],d=f);"number"===d&&"string"===typeof c&&c.match(",")&&(d="numberString");"date"===d&&"string"===typeof c&&ColumnTypes.day.is(c)&&(d="day");return ColumnTypes[d]};window.Column=Column;var ColumnSpecimen=function(){};window.ColumnSpecimen=ColumnSpecimen;moment.createFromInputFallback=function(a){a._d=new Date(a._i)};var AbstractColType=function(){};
AbstractColType.prototype.toDisplayString=function(a){return a};AbstractColType.prototype.fromStringToNumeric=function(a){return a};AbstractColType.prototype.getDefaultFormat=function(){};AbstractColType.prototype.isTemporal=function(){return!1};AbstractColType.prototype.isString=function(){return!1};AbstractColType.prototype.isInt=function(){return!1};AbstractColType.prototype._setName=function(a){this._name=a;return this};AbstractColType.prototype.getColumnTypeName=function(){return this._name};
AbstractColType.prototype.isNumericMS=function(){return!1};AbstractColType.prototype.isInvalidValue=function(a){return void 0===a||""===a?!0:!1};var AbstractNumeric=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractNumeric,AbstractColType);AbstractNumeric.prototype.fromStringToNumeric=function(a){return parseFloat(a)};AbstractNumeric.prototype.isInvalidValue=function(a){return AbstractColType.prototype.isInvalidValue.call(this,a)||isNaN(a)};
var AbstractTemporal=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractTemporal,AbstractColType);AbstractTemporal.prototype.fromStringToMoment=function(a){return moment(parseInt(a))};AbstractTemporal.prototype.isTemporal=function(){return!0};var AbstractCurrency=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractCurrency,AbstractColType);var DateCol=function(a){AbstractTemporal.apply(this,arguments)};$jscomp.inherits(DateCol,AbstractTemporal);
DateCol.prototype.toDisplayString=function(a,b){b||(b="MM/DD/YY");return"fromNow"===b?moment(parseFloat(a)).fromNow():moment(a).format(b)};DateCol.prototype.fromStringToNumeric=function(a){return 1E3*GetDate.getDate(a).unix()};DateCol.prototype.isNumericMS=function(){return!0};DateCol.prototype.fromStringToMoment=function(a){return GetDate.getDate(a)};DateCol.prototype.is=function(a){return GetDate.getDate(a).isValid()};var AbstractInt=function(a){AbstractColType.apply(this,arguments)};
$jscomp.inherits(AbstractInt,AbstractColType);AbstractInt.prototype.isInt=function(){return!0};AbstractInt.prototype.fromStringToNumeric=function(a){return parseInt(a)};var Int=function(a){AbstractInt.apply(this,arguments)};$jscomp.inherits(Int,AbstractInt);var AbstractTemporalInt=function(a){AbstractInt.apply(this,arguments)};$jscomp.inherits(AbstractTemporalInt,AbstractInt);var AbstractMicrosecond=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(AbstractMicrosecond,AbstractTemporalInt);
AbstractMicrosecond.prototype.toDisplayString=function(a,b){return"fromNow"===b?moment(parseFloat(a)).fromNow():a};AbstractMicrosecond.prototype.isNumericMS=function(){return!0};AbstractMicrosecond.prototype.getDefaultFormat=function(){return"fromNow"};var Microsecond=function(a){AbstractMicrosecond.apply(this,arguments)};$jscomp.inherits(Microsecond,AbstractMicrosecond);var Second=function(a){AbstractMicrosecond.apply(this,arguments)};$jscomp.inherits(Second,AbstractMicrosecond);
Second.prototype.fromStringToNumeric=function(a){return 1E3*parseInt(a)};var Day=function(a){AbstractTemporal.apply(this,arguments)};$jscomp.inherits(Day,AbstractTemporal);Day.prototype.toDisplayString=function(a,b){return moment(a).format(b||"MM/DD/YYYY")};Day.prototype.fromStringToNumeric=function(a){return 1E3*GetDate.getDate(a).startOf("day").unix()};Day.prototype.fromStringToMoment=function(a){return GetDate.getDate(a).startOf("day")};
Day.prototype.fromMomentToNumeric=function(a){return 1E3*a.startOf("day").unix()};Day.prototype.is=function(a){a=moment.parseFormat?moment.parseFormat(a):parseFormat;return"MM/DD/YY"===a||"MM/DD/YYYY"===a||"M/D/YYYY"===a};var Week=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(Week,AbstractTemporalInt);Week.prototype.toDisplayString=function(a,b){return moment(a).format("MM/DD/YYYY - WW")};Week.prototype.fromMomentToNumeric=function(a){return 1E3*a.startOf("week").unix()};
Week.prototype.isNumericMS=function(){return!0};var Month=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(Month,AbstractTemporalInt);Month.prototype.toDisplayString=function(a,b){return moment(a).format(b||"MMMM")};Month.prototype.fromMomentToNumeric=function(a){return 1E3*a.startOf("month").unix()};Month.prototype.isNumericMS=function(){return!0};var Hour=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(Hour,AbstractTemporalInt);
Hour.prototype.toDisplayString=function(a,b){return a};Hour.prototype.fromMomentToNumeric=function(a){return parseInt(a.startOf("hour").format("H"))};var HourMinute=function(a){AbstractTemporal.apply(this,arguments)};$jscomp.inherits(HourMinute,AbstractTemporal);HourMinute.prototype.toDisplayString=function(a){return a};HourMinute.prototype.fromStringToNumeric=function(a){return parseFloat(GetDate.getDate(value).format("H.m"))};var Minute=function(a){AbstractTemporal.apply(this,arguments)};
$jscomp.inherits(Minute,AbstractTemporal);Minute.prototype.toDisplayString=function(a,b){return moment(a).format("m")};Minute.prototype.fromStringToNumeric=function(a){return 1E3*GetDate.getDate(a).startOf("minute").unix()};var Year=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(Year,AbstractTemporalInt);Year.prototype.fromMomentToNumeric=function(a){return parseInt(a.format("YYYY"))};var Feet=function(a){AbstractNumeric.apply(this,arguments)};$jscomp.inherits(Feet,AbstractNumeric);
Feet.prototype.is=function(a){return!isNaN(FeetToInches(a))};Feet.prototype.fromStringToNumeric=function(a){return FeetToInches(a)};Feet.prototype.toDisplayString=function(a,b){a=parseFloat(a);return Math.floor(a/12)+"'"+Math.round(a%12)+'"'};var USD=function(a){AbstractCurrency.apply(this,arguments)};$jscomp.inherits(USD,AbstractCurrency);USD.prototype.toDisplayString=function(a,b){return b?numeral(a).format(b):a};
USD.prototype.fromStringToNumeric=function(a){return parseFloat(a.toString().replace(/[\$\, \%]/g,""))};USD.prototype.is=function(a){return a&&a.match&&!!a.match(/^\$[0-9\.\,]+$/)};USD.prototype.getDefaultFormat=function(){return"$(0a)"};var NumberCol=function(a){AbstractNumeric.apply(this,arguments)};$jscomp.inherits(NumberCol,AbstractNumeric);
NumberCol.prototype.toDisplayString=function(a,b){return"percent"===b?numeral(parseFloat(a)).format("0.00")+"%":b&&!isNaN(a)&&Infinity!==a?numeral(a).format(b):a};NumberCol.prototype.getDefaultFormat=function(a,b){if(a.match(/^(mile|pound|inch|feet)s?$/i))return"0.0";if(a.match(/^(calorie|steps)s?$/i)||b&&!b.toString().includes("."))return"0,0"};var NumberString=function(a){AbstractNumeric.apply(this,arguments)};$jscomp.inherits(NumberString,AbstractNumeric);
NumberString.prototype.toDisplayString=function(a,b){return b?numeral(a).format(b):a};NumberString.prototype.getDefaultFormat=function(){return"0,0"};NumberString.prototype.fromStringToNumeric=function(a){return parseFloat(a.toString().replace(/[\$\, \%]/g,""))};var AbstractStringCol=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractStringCol,AbstractColType);AbstractStringCol.prototype.isString=function(){return!0};
var StringCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(StringCol,AbstractStringCol);var UrlCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(UrlCol,AbstractStringCol);var TextCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(TextCol,AbstractStringCol);var AbstractCodeCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(AbstractCodeCol,AbstractStringCol);
var CodeCol=function(a){AbstractCodeCol.apply(this,arguments)};$jscomp.inherits(CodeCol,AbstractCodeCol);var HTMLCol=function(a){AbstractCodeCol.apply(this,arguments)};$jscomp.inherits(HTMLCol,AbstractCodeCol);var AbstractPathCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(AbstractPathCol,AbstractStringCol);var PathCol=function(a){AbstractPathCol.apply(this,arguments)};$jscomp.inherits(PathCol,AbstractPathCol);var DirCol=function(a){AbstractPathCol.apply(this,arguments)};
$jscomp.inherits(DirCol,AbstractPathCol);var ObjectCol=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(ObjectCol,AbstractColType);var BooleanCol=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(BooleanCol,AbstractColType);BooleanCol.prototype.fromStringToNumeric=function(a){return"true"===a.toString()?1:0};
var ColumnTypes={microsecond:Microsecond,second:Second,date:DateCol,day:Day,week:Week,month:Month,hour:Hour,hourMinute:HourMinute,minute:Minute,year:Year,feet:Feet,usd:USD,number:NumberCol,numberString:NumberString,string:StringCol,text:TextCol,path:PathCol,dir:DirCol,code:CodeCol,html:HTMLCol,url:UrlCol,object:ObjectCol,boolean:BooleanCol,int:Int};Object.keys(ColumnTypes).forEach(function(a){ColumnTypes[a]=new ColumnTypes[a];ColumnTypes[a]._setName(a)});window.ColumnTypes=ColumnTypes;
var CompileTimeError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(CompileTimeError,Error);var ProgramFetchError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(ProgramFetchError,Error);var ProgramSaveError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(ProgramSaveError,Error);
var BlockFetchDataError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(BlockFetchDataError,Error);var AbstractCardError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(AbstractCardError,Error);var ProgramLoadError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(ProgramLoadError,Error);
var ProgramCreateError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(ProgramCreateError,Error);var ThisShouldNeverHappenError=function(a){var b=Error.apply(this,arguments);this.message=b.message;"stack"in b&&(this.stack=b.stack)};$jscomp.inherits(ThisShouldNeverHappenError,Error);var ErrorKinds={};ErrorKinds.BlockFetchData=BlockFetchDataError;ErrorKinds.ProgramFetch=ProgramFetchError;ErrorKinds.ProgramCreateError=ProgramCreateError;
ErrorKinds.ProgramLoadError=ProgramLoadError;ErrorKinds.ThisShouldNeverHappenError=ThisShouldNeverHappenError;window.ErrorKinds=ErrorKinds;var FeetToInches=function(a){if("number"===typeof a)return a;if(!a)return null;var b=0,c=a.search(/[^0-9\.]/);if(1>c)return b=parseFloat(a.replace(/[^0-9\.]/g,"")),isNaN(b)?null:12*b;var d=parseFloat(a.substr(0,c).replace(/[^0-9\.]/g,""));a=parseFloat(a.substr(c).replace(/[^0-9\.]/g,""));isNaN(d)||(b+=12*d);isNaN(a)||(b+=a);return b};window.FeetToInches=FeetToInches;
var FlowBluePrints=">block\n & limit int 10000\n  percentage .5\n  description Maximum number of cards to show.\n & orderBy orderByExpression\n  percentage .5\n & pin outputPoint\n  percentage .2\n & visible boolean true\n  insert 1\n require AbstractBlockChisel /aientist/clients/base/program/AbstractBlockChisel.js\n>settings >block\n & layout enum custom\n  percentage .2\n  options custom tree bin\n & visible boolean false\n size 140 120\n>chart >block\n>mini >chart\n & title plaintext\n size 1080 600\n require MiniBlock /aientist/clients/browser/blocks/charts/MiniBlock.js\n>list >chart\n & title plaintext\n & label column\n  auto getTitlePotential\n require ListChart /aientist/clients/browser/blocks/charts/List.js\n>dump >chart\n require DumpChart /aientist/clients/browser/blocks/charts/DumpChart.js\n>kpi >chart\n svg score\n & column column\n  percentage .90\n  auto\n & title plaintext\n & reduction enum count\n  percentage .70\n  options count sum average min max median\n require KpiChart /aientist/clients/browser/blocks/charts/KpiChart.js\n size 140 120\n>html >chart\n & content html\n script /lib/sanitize-html.min.js\n require HTMLChart /aientist/clients/browser/blocks/charts/HTML.js\n & allowedTags string img\n  const\n & allowedAttributes string\n  const\n  default a href name target\n   img src\n>heatcal >chart\n & count column\n  description Column which contains the day's measurement value.\n  auto getTypeName=number\n & day column\n  description Column which contains the day the measurement was taken.\n  auto getTypeName=day\n & title plaintext\n size 750 200\n require HeatCalendarChart /aientist/clients/browser/blocks/charts/HeatCalendar.js\n>table >chart\n size 750 300\n svg table\n & pretty boolean\n  percentage .30\n  description Set to true to show formatted values in cell.\n & showColumns columnNames\n  percentage .20\n  description Column names to show\n & hideColumns columnNames\n  percentage .20\n  description Column names to hide\n & title plaintext\n & limit int 100\n  percentage .10\n & columnOrder enum importance\n  percentage .20\n  options default importance alphabetical\n require TableBlock /aientist/clients/browser/blocks/charts/TableBlock.js\n>element >chart\n & style plaintext\n & editable boolean true\n & content plaintext\n  monad\n require BrayBlock /aientist/clients/browser/blocks/charts/BrayBlock.js\n>title >element\n & element htmlTag h1\n  const\n size 250 90\n>text >element\n size 750 200\n svg text\n & element htmlTag p\n  const\n>output >element\n & editable boolean false\n & content linktext\n  monad\n & element htmlTag div\n & style plaintext white-space: pre;\n  const\n size 750 200\n>header >element\n size 600 60\n>pre >element\n>h1 >header\n>h2 >header\n>labzero >element\n & element htmlTag div\n  const\n & content plaintext LabZero is a product development firm in San Francisco. LZ hosted the first ever ohayo and ETN demo on 6/16/2017.\n  const\n>h3 >header\n>h4 >header\n>h5 >header\n>h6 >header\n>wordcloud >chart\n & name column\n  auto isString=true\n & count column\n  auto isString=false\n script /lib/wordcloud2.js\n require WordCloudChart /aientist/clients/browser/blocks/charts/WordCloud.js\n>google >chart\n & limit int 10\n  percentage .10\n & title plaintext\n script https://www.gstatic.com/charts/loader.js\n require AbstractGoogleBase /aientist/clients/browser/blocks/charts/AbstractGoogleBase.js\n>googleLabel >google\n & label column\n  description Column to use for the label\n  auto isString=true\n & value column\n  description Column to use for the value\n  auto isString=false\n>google.core >googleLabel\n & legendPosition enum right\n  percentage .5\n  path legend.position\n  options bottom labeled left none right top\n require AbstractGoogleCore /aientist/clients/browser/blocks/charts/AbstractGoogleCore.js\n>square >google.core\n require GoogleSquare /aientist/clients/browser/blocks/charts/google/GoogleSquare.js\n>google.geo >google.core\n & region region\n & resolution enum countries\n  percentage .30\n  options countries provinces metros\n require GoogleGeo /aientist/clients/browser/blocks/charts/google/GoogleGeo.js\n>google.pie >google.core\n & is3D boolean false\n  percentage .10\n & pieHole prob\n & pieStartAngle number\n & sliceVisibilityThreshold prob\n & googleClassName string PieChart\n  const\n>pie >google.pie\n>google.histogram >google.core\n & googleClassName string Histogram\n  const\n>histogram >google.histogram\n>google.column >google.core\n & x column\n & y column\n  auto isString=false\n & series column\n  auto isString=true\n & row column\n  auto isString=false\n & cell column\n  auto isString=false\n & isStacked boolean true\n  percentage .10\n require GoogleColumn /aientist/clients/browser/blocks/charts/google/GoogleColumn.js\n>line >google.core\n & x column\n & y column\n  auto isString=false\n require GoogleLine /aientist/clients/browser/blocks/charts/google/GoogleLine.js\n>google.area >line\n require GoogleArea /aientist/clients/browser/blocks/charts/google/GoogleArea.js\n>scatter >google.core\n & x column\n  auto isString=false\n & y column\n  auto isString=false\n & trendlines object\n & hMax number\n  path hAxis.maxValue\n & hMin number\n  path hAxis.minValue\n & vMax number\n  path vAxis.maxValue\n & vMin number\n  path vAxis.minValue\n require GoogleScatter /aientist/clients/browser/blocks/charts/google/GoogleScatter.js\n>google.gauge >googleLabel\n & min int 0\n  percentage .10\n & max int 100\n  percentage .10\n & redFrom int 90\n  percentage .10\n & redFrom int 100\n  percentage .10\n & yellowFrom int 75\n  percentage .10\n & yellowTo int 90\n  percentage .10\n & minorTicks int 5\n  percentage .10\n require GoogleGauge /aientist/clients/browser/blocks/charts/google/GoogleGauge.js\n>google.timeline >google\n & label column\n  auto getTitlePotential\n require GoogleTimeline /aientist/clients/browser/blocks/charts/google/GoogleTimeline.js\n>tree >google\n & allowCollapse boolean false\n  percentage .10\n & size enum medium\n  percentage .10\n  options small medium large\n require GoogleOrg /aientist/clients/browser/blocks/charts/google/GoogleOrg.js\n>bar >google\n & limit int 10\n  percentage .1\n & x column\n  auto\n & y column\n  auto isString=false\n require GoogleBar /aientist/clients/browser/blocks/charts/google/GoogleBar.js\n>provider >block\n size 140 120\n & columns columnsObject\n  percentage .5\n outputSuggestions >filter >group\n>data >provider\n svg folder\n & content content\n  percentage .9\n  description The actual data.\n & format format\n  percentage .40\n  description CSV, TSV, JSON, etc.\n size 280 220\n require DataBlock /aientist/clients/browser/blocks/providers/DataBlock.js\n>editor >data\n size 280 440\n & etn text\n  percentage .9\n  description Name of the ETN the content is written in.\n>store >data\n require StoreBlock /aientist/clients/browser/blocks/providers/StoreBlock.js\n & key string\n  percentage .3\n  monad\n  description Name of local storage key.\n>programs >provider\n size 140 120\n require ProgramsBlock /aientist/clients/browser/blocks/providers/ProgramsBlock.js\n>echo >provider\n & content text\n  monad\n  percentage .9\n  description Content to emit.\n require EchoBlock /aientist/clients/browser/blocks/providers/EchoBlock.js\n>url >provider\n svg www\n size 140 120\n & url url\n  percentage .90\n  template\n  monad\n & extract text\n  percentage .5\n  description If the url points to JSON, you can specify a field to extract\n & format format\n  percentage .10\n require AbstractUrlProvider /aientist/clients/browser/blocks/providers/AbstractUrlProvider.js\n>hn >url\n & url url https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty\n  percentage .10\n>reddit >url\n svg reddit\n & subreddit text\n  description Subreddit to download top stories for\n  monad\n & get enum .json\n  percentage .10\n  options\n   .json Homepage\n   reddits.json Top Subreddits\n require RedditBlock /aientist/clients/browser/blocks/providers/RedditBlock.js\n>query >provider\n & query sql\n  percentage .99\n  monad\n require QueryBlock /aientist/clients/browser/blocks/providers/QueryBlock.js\n>presidents >url\n svg whitehouse\n & url url /samples/presidents.csv\n  const\n>top >provider\n & query string\n  monad\n requre TopBlock /aientist/clients/browser/blocks/providers/TopBlock.js\n size 250 90\n>transformer >block\n outputSuggestions >table\n size 160 100\n>date >transformer\n & column column\n  auto isTemporal=true\n requre DateBlock /aientist/clients/browser/blocks/transformers/ExtendDate.js\n>datefilter >transformer\n & column column\n  percentage .90\n  auto isTemporal=true\n & days enum\n  options\n   0.0416 Last hour\n   1 Last 24 hours\n   3 Last 3 days\n   7 Last 7 days\n   30 Last 30 days\n   180 Last 6 months\n   365 Last 12 months\n require DateFilter /aientist/clients/browser/blocks/transformers/DateFilter.js\n>extend >transformer\n require AbstractExtendBlock /aientist/clients/browser/blocks/transformers/AbstractExtendBlock.js\n>filter >transformer\n svg filter\n size 250 90\n & filter text\n  percentage .90\n  description The filter string to search for\n  monad\n require FilterBlock /aientist/clients/browser/blocks/transformers/FilterBlock.js\n>morph >command\n size 420 200\n require MorphBlock /aientist/clients/browser/blocks/commands/MorphBlock.js\n>didyoumean >command\n require DidYouMeanBlock /aientist/clients/browser/blocks/commands/DidYouMeanBlock.js\n>group >transformer\n svg tree\n & by column\n  percentage .90\n  monad\n & advanced columns\n  percentage .10\n  description If you want to group by multiple columns\n require GroupBlock /aientist/clients/browser/blocks/transformers/Group.js\n>interpolate >transformer\n & column column\n require InterpolateBlock /aientist/clients/browser/blocks/transformers/InterpolateBlock.js\n>join >transformer\n & on column\n  monad\n require JoinBlock /aientist/clients/browser/blocks/transformers/JoinBlock.js\n>parse >transformer\n & column column\n  description Name of the column to parse data from.\n  auto getTypeName=text\n & format format\n  percentage .40\n  description CSV, TSV, JSON, etc.\n require ParseBlock /aientist/clients/browser/blocks/transformers/Parse.js\n>types >transformer\n & etn etn\n  percentage .40\n require TypesBlock /aientist/clients/browser/blocks/transformers/TypesBlock.js\n>wordcount >transformer\n require WordCount /aientist/clients/browser/blocks/transformers/WordCount.js\n>wc >wordcount\n>command >block\n>console >provider\n platform desktopapp\n & cwd dir\n  percentage .10\n  description Path to the directory to exec command in.\n & command shell\n  description Shell command to execute\n & format format\n  description Expected result format\n require ConsoleBlock /aientist/clients/desktop/blocks/providers/Console.js\n>csv >provider\n platform desktopapp\n & path file\n  percentage .90\n require CSVBlock /aientist/clients/desktop/blocks/providers/Csv.js\n>files >provider\n platform desktopapp\n & path path\n  percentage .90\n  description Path to the file or folder.\n  monad\n & stats boolean\n  description Set to true to return stats for files.\n & recursive boolean\n  description Set to true to recurse.\n require FilesBlock /aientist/clients/desktop/blocks/providers/FilesBlock.js\n>git >provider\n platform desktopapp\n & repo dir\n  percentage .90\n  required\n & command enum ls-files\n  percentage .50\n  options\n   ls-files List all tracked files\n require GitBlock /aientist/clients/desktop/blocks/providers/Git.js\n>mysql >provider\n platform desktopapp\n & query sql\n  percentage .90\n & host string\n & database string\n & port int\n & user string\n & password password\n require MySQLBlock /aientist/clients/desktop/blocks/providers/MySql.js\n>sqlite >provider\n platform desktopapp\n & file path\n  percentage .90\n  description Path to the sqlite database file\n & query sql\n  description SQL query to execute\n require SQLiteBlock /aientist/clients/desktop/blocks/providers/Sqlite.js\n>read >transformer\n platform desktopapp\n & column column\n  percentage .90\n  description Column which contains the filename\n  auto getTypeName=path\n require ReadBlock /aientist/clients/desktop/blocks/transformers/Read.js\n>typescript >transformer\n platform desktopapp\n & name column\n  description Column to use for the filepath/name\n  auto getTypeName=path\n & content column\n  description Column to get the code from\n require TypeScriptBlock /aientist/clients/desktop/blocks/transformers/TypeScript.js\n>downloader >command\n platform desktopapp\n & path dir\n  description Directory to write urls to\n & column column\n  description Column with urls to download\n require DownloaderBlock /aientist/clients/desktop/blocks/commands/Downloader.js\n>mbox >command\n platform desktopapp\n & mbox filepath 90%\n  description Path to the mbox file\n & db filepath\n  description Path to the sqlite3 database file\n require MboxBlock /aientist/clients/desktop/blocks/commands/Mbox.js\n>commands >provider\n & method string getCommandsBuffer\n  const\n require AbstractRunTimeProvider /aientist/clients/browser/blocks/providers/AbstractRunTimeProvider.js\n>grid >chart\n platform alphaapp\n require GridBlock /aientist/clients/alpha/blocks/charts/GridBlock.js\n script /node_modules/handsontable/dist/handsontable.full.js\n css /node_modules/handsontable/dist/handsontable.min.css\n>markdown >chart\n & content markdown\n require MarkdownChart /aientist/clients/browser/blocks/charts/MarkdownChart.js\n size 700 600\n>youtube >chart\n & video alphanumeric\n  monad\n require YouTubeBlock /aientist/clients/browser/blocks/charts/YouTubeBlock.js\n size 800 500\n>outline >chart\n require TreeOutline /aientist/clients/browser/blocks/charts/TreeOutline.js\n>3d >chart\n & content string\n script /node_modules/vis/dist/vis.min.js\n require ThreeDChart /aientist/clients/browser/blocks/charts/ThreeDChart.js\n size 800 500\n>fhtml >html\n platform alphaapp\n & allowedTags string img script\n  const\n & allowedAttributes string 0\n  const\n  default a href name target\n   img src\n   script src\n>input >command\n platform alphaapp\n & path string\n require InputBlock /aientist/clients/alpha/blocks/commands/InputBlock.js\n>picker >command\n platform alphaapp\n & path string\n  description The program path to update when user picks something.\n & column column\n  description The column to use for the values\n require PickerControl /aientist/clients/alpha/blocks/commands/Picker.js\n>eval >transformer\n platform alphaapp\n & javascript javascript\n require EvalBlock /aientist/clients/alpha/blocks/transformers/Eval.js\n>stats >transformer\n platform alphaapp\n require StatsTransformer /aientist/clients/alpha/blocks/transformers/Stats.js";
window.FlowBluePrints=FlowBluePrints;
var Format={toTitleCase:function(a){return a.length?a.replace(/(\s\w)/g,function(a){return a.toUpperCase().trim()}).replace(/_/g," ").replace(/\-/g," "):""},randomString:function(a){a=a||32;for(var b="",c,d=0;d<a;d++)c=Math.floor(61*Math.random()),b+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".substring(c,c+1);return b},removeFileExtension:function(a){return a?a.replace(/\.[^\.]+$/,""):""},stripHtml:function(a){return a&&a.replace?a.replace(/<(?:.|\n)*?>/gm,""):a},_permalink:function(a,
b){return a.length?a.toLowerCase().replace(b,"").replace(/ /g,"-"):""},permalink:function(a){return Format._permalink(a,/[^a-z0-9- _\.]/gi)},roundTo:function(a,b){return parseFloat(a.toFixed(b))},roundToWhole:function(a){return Format.roundTo(a,0)},roundToTenths:function(a){return Format.roundTo(a,1)},roundToHundredths:function(a){return Format.roundTo(a,2)},roundToThousandths:function(a){return Format.roundTo(a,3)},roundToTenThousandths:function(a){return Format.roundTo(a,4)},linkify:function(a){a=
a.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,'<a href="$1" target="_blank">$1</a>');a=a.replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,'$1<a href="http://$2" target="_blank">$2</a>');return a=a.replace(/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,'<a href="mailto:$1">$1</a>')}};window.Format=Format;moment.createFromInputFallback=function(a){a._d=new Date(a._i)};
var GetDate={getDateAsUnix:function(a){return GetDate.getDate(a).unix()},getDate:function(a){var b=moment(a);if(b.isValid())return b;if("string"===typeof a&&a.match(/^[0-9]{8}$/)){var b=parseInt(a.substr(0,2)),c=parseInt(a.substr(2,2)),d=parseInt(a.substr(4,2)),e=parseInt(a.substr(6,2)),f=parseInt(a.substr(0,4)),g=parseInt(a.substr(4,4)),d=13>d,h=32>e,e=13>e,f=1E3<f&&2100>f;return b=13>b&&32>c&&1E3<g&&2100>g?moment(a,"MMDDYYYY"):f&&d&&h?moment(a,"YYYYMMDD"):f&&e?moment(a,"YYYYDDMM"):moment(a,"DDMMYYYY")}return"string"===
typeof a&&a.match(/^[0-9]{2}\/[0-9]{4}$/)?moment(a,"MM/YYYY"):!a.match||a.match(/[^0-9]/)||(c=parseFloat(a),isNaN(c))?b:10===a.length?moment(1E3*c):moment(c)}};window.GetDate=GetDate;var HakonPropertyNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(HakonPropertyNode,TreeNotation);HakonPropertyNode.prototype.toCss=function(a){return""+a+this.getBase()+": "+this.getBeam()+";"};var HakonSelectorNode=function(a){return TreeNotation.apply(this,arguments)||this};
$jscomp.inherits(HakonSelectorNode,TreeNotation);HakonSelectorNode.prototype.parseNodeType=function(a){if(a.includes(";")){console.log(this.getStackString());debugger}return a.includes(" ")?HakonPropertyNode:HakonSelectorNode};HakonSelectorNode.prototype.getSelector=function(){var a=this.getParent().getSelector();return this.getBase().split(",").map(function(b){return b.startsWith("&")?a+b.substr(1):a?a+" "+b:b}).join(",")};
HakonSelectorNode.prototype.toCss=function(){var a=this.getChildrenByNodeType(HakonPropertyNode);return a.length?this.getSelector()+" {\n"+a.map(function(a){return a.toCss("  ")}).join("\n")+"\n}\n":""};var Hakon=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(Hakon,TreeNotation);Hakon.prototype.parseNodeType=function(a){return a?HakonSelectorNode:TreeNotation};Hakon.prototype.getSelector=function(){return""};
Hakon.prototype.toCss=function(){return this.getTopDownArray().filter(function(a){return a instanceof HakonSelectorNode}).map(function(a){return a.toCss()}).join("")};window.Hakon=Hakon;var ObjectBackedCard=function(a){AbstractCard.apply(this,arguments)};$jscomp.inherits(ObjectBackedCard,AbstractCard);ObjectBackedCard._uniqueId=AbstractCard._uniqueId;window.ObjectBackedCard=ObjectBackedCard;var BlockPropertyNode=function(a){return TreeNotation.apply(this,arguments)||this};
$jscomp.inherits(BlockPropertyNode,TreeNotation);BlockPropertyNode.prototype.getPropertyName=function(){return this.getWord(1)};BlockPropertyNode.prototype.getProbability=function(){var a=this.findBeam(BlockConstants.percentage);return a?parseFloat(a):.01};
BlockPropertyNode.prototype._getBlockCommandDropdownBray=function(a,b){a=a.map(function(a){return" @ option\n  value "+a+"\n  content "+a+"\n  "+(b===a?"selected":"notselected")}).join("\n");return"@ select\n data-onChangeCommand block changePropertyCommand\n name "+this.getPropertyName()+"\n @ option\n"+a};BlockPropertyNode.prototype.getPropertyTypeName=function(){return this.getWord(2)};BlockPropertyNode.prototype.getDescription=function(){return this.findBeam("description")||""};
BlockPropertyNode.prototype.parseNodeType=function(a){return TreeNotation};BlockPropertyNode.prototype.getDefaultValue=function(){var a=this.getWords(3),a=a.length?a.join(" "):"";return this.has("default")?this.getNode("default").getBeamWithChildren():a};BlockPropertyNode.prototype.parseValue=function(a){return a};BlockPropertyNode.prototype.isMonad=function(){return this.has("monad")};
BlockPropertyNode.prototype._getUserValue=function(a){var b=this.getDefaultValue();if(this.has("const"))return b;var c=a.getNode(this.getPropertyName()),d=this.isMonad()&&a.getBeam(),c=c&&c.getBeamWithChildren()||d||void 0;return void 0===c&&void 0!==b?b:c?this.has("template")&&c.includes("{")?a.getProgram().format(c):c:c};BlockPropertyNode.prototype.addValue=function(a,b){b=this.parseValue(this._getUserValue(b),b);var c=this.findBeam("path");c?_.set(a,c,b):a[this.getPropertyName()]=b};
BlockPropertyNode.prototype._getPropValue=function(a){return a.getStruct()[this.getPropertyName()]||""};BlockPropertyNode.prototype.toFormBray=function(a){return"@ input\n data-onChangeCommand block changePropertyCommand\n name "+this.getPropertyName()+"\n value "+this._getPropValue(a)};var EnumProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(EnumProp,BlockPropertyNode);
EnumProp.prototype.getChoices=function(){var a=this.getNode("options"),b={};a.length?a.getChildren().forEach(function(a){b[a.getBase()]=a.getBeam()}):a.getBeam().split(" ").forEach(function(a){b[a]=a});return b};EnumProp.prototype.parseValue=function(a){return this.getChoices()[a]?a:void 0};EnumProp.prototype.toFormBray=function(a){var b=Object.keys(this.getChoices());return this._getBlockCommandDropdownBray(b,this._getPropValue(a))};
var FormatProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(FormatProp,BlockPropertyNode);FormatProp.prototype.toFormBray=function(a){var b=(new CardParser).getEncodingNames();return this._getBlockCommandDropdownBray(b,this._getPropValue(a))};var TextProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(TextProp,BlockPropertyNode);
TextProp.prototype.toFormBray=function(a){return"@ textarea\n data-onChangeCommand block changePropertyCommand\n name "+this.getPropertyName()+"\n content "+Util.indent(this._getPropValue(a),2)};var BooleanProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(BooleanProp,BlockPropertyNode);BooleanProp.prototype.parseValue=function(a){return"true"===a?!0:!1};
BooleanProp.prototype.toFormBray=function(a){return"@ input\n data-onChangeCommand block changePropertyCommand\n name "+this.getPropertyName()+"\n type checkbox\n "+(!0===this._getPropValue(a)?"checked":"unchecked")};var PlainTextProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(PlainTextProp,BlockPropertyNode);PlainTextProp.prototype.parseValue=function(a){return Format.stripHtml(void 0===a?"":a)};
var LinkTextProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(LinkTextProp,BlockPropertyNode);LinkTextProp.prototype.parseValue=function(a){return Format.linkify(Format.stripHtml(void 0===a?"":a))};var AlphaNumericProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(AlphaNumericProp,BlockPropertyNode);AlphaNumericProp.prototype.parseValue=function(a){return(void 0===a?"":a).replace(/[^a-z0-9A-Z]/g,"")};
var IntProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(IntProp,BlockPropertyNode);IntProp.prototype.parseValue=function(a){return parseInt(a)};IntProp.prototype.toFormBray=function(a){return"@ input\n data-onChangeCommand block changePropertyCommand\n name "+this.getPropertyName()+"\n type number\n value "+this._getPropValue(a)};var ProbProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(ProbProp,BlockPropertyNode);
ProbProp.prototype.parseValue=function(a){return parseFloat(a)};var ColumnProp=function(a){return BlockPropertyNode.apply(this,arguments)||this};$jscomp.inherits(ColumnProp,BlockPropertyNode);ColumnProp.prototype.parseValue=function(a,b){var c=b.getInputBinder(),d=c.getColumnsMap(),e=this.getNode("auto");if(d[a])return a;if(e){if(e.getBeam())return this._getAutoColumn(b,e.getBeam());a=c.getColumnsByImportance();if(a=a.length&&a[0].getColumnName())return a}};
ColumnProp.prototype.toFormBray=function(a){var b=a.getInputBinder().getColumnNames();return this._getBlockCommandDropdownBray(b,this._getPropValue(a))};
ColumnProp.prototype._getAutoColumn=function(a,b){a=a.getInputBinder();b=b.split(",");var c=b.filter(function(a){return a.includes("=")}).map(function(a){return a.split("=")}),d=function(a){return c.every(function(b){return void 0!==a[b[0]]&&a[b[0]]().toString()===b[1]})};a=a.getColumnsArray().filter(function(a){return d(a)});var e=b.find(function(a){return!a.includes("=")});b=a;e&&(b=_.sortBy(b,function(a){return a[e]()}).reverse());if(b.length)return b[0].getColumnName()};
var ParserBlock=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(ParserBlock,TreeNotation);ParserBlock.prototype.parseNodeType=function(a){if(a.startsWith("&")){var b={boolean:BooleanProp,int:IntProp,prob:ProbProp,format:FormatProp,alphanumeric:AlphaNumericProp,plaintext:PlainTextProp,linktext:LinkTextProp,text:TextProp,column:ColumnProp,enum:EnumProp};a=a.split(" ")[2];return b[a]||BlockPropertyNode}return TreeNotation};ParserBlock.prototype.getDoc=function(){return this.getBase()};
ParserBlock.prototype.getMonadName=function(){return this.getPropertyNodes().filter(function(a){return a.isMonad()}).map(function(a){return a.getPropertyName()}).join("")};ParserBlock.prototype.getBeamPattern=function(){return this._getExtended().findBeam("beamPattern")};ParserBlock.prototype.getDescription=function(){return this.findBeam("description")||""};ParserBlock.prototype.getSvg=function(){return this._getExtended().findBeam("svg")||"table"};
ParserBlock.prototype._getExtended=function(){this._extended||(this._extended=this._makeExtended());return this._extended};ParserBlock.prototype._makeExtended=function(){var a=this.getGraph(),b=new ParserBlock;a.forEach(function(a){b.extend(a)});return b};
ParserBlock.prototype._loadCss=function(a){var b=this._getExtended().findBeam("css");if(b){var c=a.getServerPath();a.getWillowDocument().getBodyStump().insertChildNode(b.split(" ").map(function(a){return"@ link\n rel stylesheet\n media screen\n href "+(c+a)}).join("\n"))}};ParserBlock.prototype.executeLoadBlockOrGetLoadingPromise=function(a){this._loadCss(a);var b=this.getJSClass(a),c=this._getExtended().findBeam("script"),d=a.getServerPath(),c=c?c.match(/^https\:/)?c:d+c:void 0;return a.getWillowDocument().appendScript(c).then(function(){return b.loadCode()})};
ParserBlock.prototype.getSuggestedSize=function(){var a=(this._getExtended().findBeam("size")||"280 220").split(" ").map(function(a){return parseInt(a)});return{width:a[0],height:a[1]}};ParserBlock.prototype.getPropertyNodes=function(){var a=[];this.getGraph().forEach(function(b){b.getChildrenByNodeType(BlockPropertyNode).forEach(function(b){a.push(b)})});return a};ParserBlock.prototype.getPropertiesMap=function(){var a={};this.getPropertyNodes().forEach(function(b){a[b.getPropertyName()]=b});return a};
ParserBlock.prototype.computeStruct=function(a){var b={};this.getPropertyNodes().forEach(function(c){c.addValue(b,a)});return b};ParserBlock.prototype.getJSClass=function(a){if(this._class)return this._class;a=a.getWillowDocument().getWindowNamespace();var b=this._getExtended().findBeam("require").split(" "),c=b[0],b=b[1];"undefined"===typeof require||a[c]||(b=require(b),a[b.name]=b);return this._class=a[c]};var ParserETN=function(a){return TreeNotation.apply(this,arguments)||this};
$jscomp.inherits(ParserETN,TreeNotation);ParserETN.prototype.parseNodeType=function(a){return ParserBlock};ParserETN.prototype.dynamicGetJsClass=function(a,b,c){var d=b.split(" ")[0];return(d=(d=this._getParserBlockMap()[d])&&d.getJSClass(c))?d:a.getProgram().getCatchAllBlockClass(this,a,b,c)};ParserETN.prototype.getCatchAllBlockClass=function(a,b,c,d){return TreeNotation};ParserETN.prototype.getDocs=function(){return this.toString()};
ParserETN.prototype._getParserBlockMap=function(){if(this._blockMap)return this._blockMap;var a={};this.getChildren().forEach(function(b){a[b.getBase()]=b});return this._blockMap=a};ParserETN.prototype.getParserBlockByName=function(a){return this._getParserBlockMap()[a.toLowerCase()]||this.getDidYouMeanBlock()};ParserETN.prototype.getBlockNames=function(){return Object.keys(this._getParserBlockMap())};ParserETN.prototype.getDidYouMeanBlock=function(){return this._getParserBlockMap()[">didyoumean"]};
ParserETN.prototype.loadBlockCode=function(a){this._loadedBlocks||(this._loadedBlocks={});this._loadedBlocks[a]||(this._loadedBlocks[a]=this.getParserBlockByName(a).executeLoadBlockOrGetLoadingPromise(this.getParent()));return this._loadedBlocks[a]};ParserETN.BlockPropertyNode=BlockPropertyNode;window.ParserETN=ParserETN;var PivotTable=function(a,b,c){this._cards=a;var d={};b.forEach(function(a){return d[a.name]=a});c.forEach(function(a){return d[a.name]=a});this._columns=d};
PivotTable.prototype._getGroups=function(a,b){var c=new Map;a.forEach(function(a){var d=b.map(function(b){return a[b].toString().replace(/ /g,"")}).join(" ");d&&(c.has(d)||c.set(d,[]),c.get(d).push(a))});return c};
PivotTable.prototype.getNewCards=function(a){var b=this,c=this._getGroups(this._cards,a),d=[{name:"count",type:"number",min:0}];a.forEach(function(a){return d.push(b._columns[a])});var e=Object.values(this._columns).filter(function(a){return!!a.reduction});e.forEach(function(a){return d.push(a)});for(var f=[],g={},c=$jscomp.makeIterator(c),h=c.next();!h.done;g={newCard:g.newCard,firstCard:g.firstCard,group:g.group},h=c.next())h=$jscomp.makeIterator(h.value),h.next(),g.group=h.next().value,g.firstCard=
g.group[0],g.newCard={},a.forEach(function(a){return function(b){a.newCard[b]=a.firstCard?a.firstCard[b]:0}}(g)),g.newCard.count=g.group.length,e.forEach(function(a){return function(b){var c=b.name,d=a.group.map(function(a){return a[c]}).filter(function(a){return"number"===typeof a&&!isNaN(a)});b=b.reduction;var e=a.firstCard[c];"sum"===b&&(e=d.reduce(function(a,b){return a+b},0));"avg"===b&&(e=d.reduce(function(a,b){return a+b},0)/d.length);a.newCard[c]=e}}(g)),f.push(g.newCard);return{cards:f,columns:d}};
window.PivotTable=PivotTable;function Say(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(var d="",e=a.map(function(a){return a}),c=c.map(function(a){return a});e.length;){var d=d+e.shift(),f=c.shift();void 0!==f&&(d+=f)}return d}window.Say=Say;
var ShadowEvents={click:"click",change:"change",mouseover:"mouseover",mouseout:"mouseout",mousedown:"mousedown",contextmenu:"contextmenu",keypress:"keypress",keyup:"keyup",focus:"focus",mousemove:"mousemove",dblclick:"dblclick",submit:"submit",blur:"blur",paste:"paste",copy:"copy",resize:"resize",cut:"cut",drop:"drop",dragover:"dragover",dragenter:"dragenter",dragleave:"dragleave",ready:"ready"};window.ShadowEvents=ShadowEvents;
function Strip(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(var d="",e=a.map(function(a){return a}),c=c.map(function(a){return a});e.length;){var d=d+e.shift(),f=c.shift();void 0!==f&&(d+=f)}return d&&d.replace?d.replace(/<(?:.|\n)*?>/gm,""):d}window.Strip=Strip;
var TableSpecimen=function(a,b){this.colCount=a.length;this.cardCount=b.length;this.primaryKey=this.timeseries=!1;this.nounType="thing";this.nounClasses="someGeneralThing someMoreSpecificThing";this.hasNominalCol=this.hasDateCol=this.hasNumericCol=!1;this.cardNounType="";this.hasSubNounColumn=!1;this.subNounColumns=[];this.correlationMatrx=[];this.mostImportantColumns=[];this.hasSlice=this.hasFrequencyColumn=this.hasRankColumn=this.isOrderImportant=!1;this.cohesivity=1;this.isTuples=!1};
window.TableSpecimen=TableSpecimen;var TreeBackedCard=function(a){AbstractCard.apply(this,arguments)};$jscomp.inherits(TreeBackedCard,AbstractCard);TreeBackedCard._uniqueId=AbstractCard._uniqueId;TreeBackedCard.prototype.getCardId=function(){return this.getCardSource().getBase()};TreeBackedCard.prototype.destroy=function(){this.getCardSource().destroy();return AbstractCard.prototype.destroy.call(this)};TreeBackedCard.prototype.getCardSourceAsObject=function(){return this.getCardSource().toObject()};
TreeBackedCard.prototype.renameCard=function(a,b){return this.getCardSource().rename(a,b)};TreeBackedCard.prototype.reloadFromStr=function(a){return this.getCardSource().setChildren(a)};TreeBackedCard.prototype.setCardValue=function(a,b){this.getCardSource().touchNode(a).setBeam(b);return this};TreeBackedCard.prototype.getCardKeys=function(){return this.getCardSource().getBases()};TreeBackedCard.prototype.deleteFromCard=function(a){return this.getCardSource().delete(a)};
TreeBackedCard.prototype.cardToString=function(){return this.getCardSource().childrenToString()};TreeBackedCard.prototype.getCardValue=function(a){return this.getCardSource().findBeam(a)||""};window.TreeBackedCard=TreeBackedCard;
var Util={getFileExtension:function(a){return(a=(void 0===a?"":a).match(/\.([^\.]+)$/))&&a[1]||""},removeFileExtension:function(a){a=void 0===a?"":a;if(!a.includes("."))return a;a=a.split(".");a.pop();return a.join(".")},makeSemiRandomFn:function(a){a=void 0===a?1:a;return function(){var b=1E4*Math.sin(a++);return b-Math.floor(b)}},getAvailablePermalink:function(a,b){var c=Util.getFileExtension(a);a=Util.removeFileExtension(a);for(var d=2,e="",f=""+a+e+"."+c;b(f);)f=""+a+e+"."+c,e="-"+d,d++;return f},
parseCookie:function(a){var b={};(void 0===a?"":a).split(/[;,] */).forEach(function(a){var c=a.indexOf("="),e=a.substr(0,c).trim();a=a.substr(++c,a.length).trim();'"'===a[0]&&(a=a.slice(1,-1));if(void 0===b[e])try{b[e]=decodeURIComponent(a)}catch(f){b[e]=a}});return b},indent:function(a,b){return a.replace(/\n/g,"\n"+" ".repeat(b))},indentIf:function(a,b){return a?"\n"+" ".repeat(b)+a.replace(/\n/g,"\n"+" ".repeat(b)):""},pLimit:function(a){var b=[],c=0;return function(d){return new Promise(function(e,
f){var g=function(){c++;d().then(function(a){e(a);c--;b.length&&b.shift()()},function(a){f(a);c--;b.length&&b.shift()()})};c<a?g():b.push(g)})}},moveArray:function(a,b,c){return a.splice(c,0,a.splice(b,1)[0])},dynamicSort:function(a){var b=1;"-"===a[0]&&(b=-1,a=a.substr(1));return function(c,d){c=c[a];d=d[a];var e=c<d?-1:c>d?1:0;void 0===c&&void 0!==d?e=-1:void 0===d&&void 0!==c&&(e=1);return e*b}},sortByAccessor:function(a){return function(b,c){b=a(b);c=a(c);var d=b<c?-1:b>c?1:0;void 0===b&&void 0!==
c?d=-1:void 0===c&&void 0!==b&&(d=1);return d}},isExternalLink:function(a,b){if(a&&"/"===a.substr(0,1)||!a.includes(":"))return!1;a=new miuri(a);return a.hostname()&&b!==a.hostname()},toggle:function(a,b){a=b.indexOf(a);return-1===a||a+1===b.length?b[0]:b[a+1]},getDiskPath:function(a){return a?a.replace("file://",""):""},sortByFast:function(a,b){var c=[],d=b.split(/ /g).map(function(a,b){return"-"===a.substr(0,1)?(c[b]=!0,a.substr(1)):a}),e=function(a,b,h){var f=d[h];if(!f)return 0;var g=a.getCardNumeric()[f],
f=b.getCardNumeric()[f];return g===f?e(a,b,h+1):g>f?c[h]?-1:1:c[h]?1:-1};a.sort(function(a,b){return e(a,b,0)})},joinArraysOn:function(a,b,c){var d={},e=0;c||(c=b.map(function(a){return Object.keys(a[0])}));b.forEach(function(b,g){var f=c[g];b.forEach(function(b){var c=a?b[a]:e++;d[c]||(d[c]={});var g=d[c];f.forEach(function(a){return g[a]=b[a]})})});return Object.values(d)}};window.Util=Util;var Version="2.1.0";"undefined"!==typeof exports&&(module.exports=Version);
var AbstractProgramNodeChisel=function(a){return Chisel.apply(this,arguments)||this};$jscomp.inherits(AbstractProgramNodeChisel,Chisel);AbstractProgramNodeChisel._mountedComponents=Chisel._mountedComponents;AbstractProgramNodeChisel.prototype.parseNodeType=function(a){return this.getParser().dynamicGetJsClass(this,a,this.getApp())};AbstractProgramNodeChisel.prototype.toJavascript=function(){return""};AbstractProgramNodeChisel.prototype.getProgram=function(){return this.isProgram()?this:this.getParent().getProgram()};
AbstractProgramNodeChisel.prototype.getCardClass=function(){return ObjectBackedCard};AbstractProgramNodeChisel.prototype.getStructColumns=function(){return[]};AbstractProgramNodeChisel.prototype.getBlockClassColumns=function(){return[]};AbstractProgramNodeChisel.prototype.getChildBlocks=function(){return this.getChildrenByNodeType(AbstractProgramNodeChisel)};AbstractProgramNodeChisel.prototype.getChildNonBlocks=function(){return this.getChildren().filter(function(a){return!(a instanceof AbstractProgramNodeChisel)})};
AbstractProgramNodeChisel.prototype.getDescendantBlocks=function(){var a=[];this.getChildBlocks().forEach(function(b){return b._getDescendantBlocks(a)});return a};AbstractProgramNodeChisel.prototype._getDescendantBlocks=function(a){a.push(this);this.getChildBlocks().forEach(function(b){return b._getDescendantBlocks(a)})};AbstractProgramNodeChisel.prototype.getHierarchyWithNonTerminals=function(){return{children:this.getChildBlocks().map(function(a){return a._getHierarchyWithNonTerminals()})}};
AbstractProgramNodeChisel.prototype._getHierarchyWithNonTerminals=function(){var a=this.getChildBlocks().map(function(a){return a._getHierarchyWithNonTerminals()});a.unshift({block:this});return{children:a}};AbstractProgramNodeChisel.prototype.getTTL=function(){return this._ttl||0};AbstractProgramNodeChisel.prototype.getHierarchy=function(){return{block:this,children:this.getChildBlocks().map(function(a){return a.getHierarchy()})}};
AbstractProgramNodeChisel.prototype.getInputBinder=function(){var a=this.getParent();return a.isProvider()?a.getOutputBinder():a.getInputBinder()};AbstractProgramNodeChisel.prototype.getOutputBinder=function(){if(!this.isProvider())return this.getInputBinder();this._outputBinder||(this._outputBinder=new Binder(this));return this._outputBinder};window.AbstractProgramNodeChisel=AbstractProgramNodeChisel;var AbstractBlockChisel=function(a){return AbstractProgramNodeChisel.apply(this,arguments)||this};
$jscomp.inherits(AbstractBlockChisel,AbstractProgramNodeChisel);AbstractBlockChisel._mountedComponents=AbstractProgramNodeChisel._mountedComponents;AbstractBlockChisel.prototype.getStruct=function(){this._blockStruct||(this._blockStruct=this.getBlock().computeStruct(this));return this._blockStruct};AbstractBlockChisel.prototype.getParser=function(){return this.getProgram().getParser()};AbstractBlockChisel.prototype.isNode=function(){return"undefined"!==typeof exports};
AbstractBlockChisel.prototype.getPipishInput=function(){return this.getStruct().content||this.getInputBinder().getFirstColumnAsString()||""};AbstractBlockChisel.prototype.isVisible=function(){return this.getStruct().visible};AbstractBlockChisel.prototype.selectBlock=function(){this._selected=!0;this.isMounted()&&this.getStump().addClassToStump("ui-selected")};AbstractBlockChisel.prototype.unselect=function(){delete this._selected;this.isMounted()&&this.getStump().removeClassFromStump("ui-selected")};
AbstractBlockChisel.prototype.isSelected=function(){return this._selected};
AbstractBlockChisel.prototype.getBray=function(){return"@ div\n class BlockPage BlockChisel "+this.constructor.name+"\n id "+this.getId()+"\n data-onContextMenuCommand chisel _openBlockContextMenuCommand\n @ div\n  class BlockGrabber\n @ div\n  class BlockHeader\n  content "+this.getBlockHeaderContent()+"\n @ div\n  class BlockBody"+Util.indentIf(this.getBlockContentBray(),2)+"\n @ div\n  class BlockFooter"+Util.indentIf(this.getBlockFooterBray(),2)+"\n @ div\n  class BlockGrabber"};
AbstractBlockChisel.prototype.getBlockHeaderContent=function(){return""+this.getBase()};AbstractBlockChisel.prototype.getBeamPatternWords=function(){var a=this.getBlock().getBeamPattern();return a?a.split(" "):[]};AbstractBlockChisel.prototype.openCardEditorByIndexCommand=function(a){return this._openCardEditor(this.getInputBinder().getCards()[a])};
AbstractBlockChisel.prototype.makeBlockDimension=function(a){a=void 0===a?this.getPin():a;a=a.split(" ").map(function(a){return 20*parseInt(a)});var b={left:a[0],top:a[1]};2<a.length&&(b.width=a[2]);3<a.length&&(b.height=a[3]);return new BlockDimension(this,b)};AbstractBlockChisel.prototype.openCardEditorByPuidCommand=function(a){return this._openCardEditor(this._getCardByPuid(a))};AbstractBlockChisel.prototype._openCardEditor=function(a){var b=this.getApp();b.setTargetNode(a);return b.toggleAndRender("cardEditorModal")};
AbstractBlockChisel.prototype._getCardByPuid=function(a){a=parseInt(a);return this.getInputBinder().getCards().find(function(b){return b.getPuid()===a})};AbstractBlockChisel.prototype.getBlockContentBray=function(){return""};AbstractBlockChisel.prototype.openInsertCardModalCommand=function(){var a=this.getApp();a.setTargetNode(this);return a.toggleAndRender("insertCardModal")};AbstractBlockChisel.prototype.openInsertCardsModalCommand=function(){return this.getApp().setTargetNode(this).toggleAndRender("insertCardsModal")};
AbstractBlockChisel.prototype._getCss=function(){var a="#"+this.getId(),b=this.getStyles(),c=this.getTheme(),d=this.isVisible()?"":"display: none",e=this.getBlockDimension(),e=e?e.toCss():"",f=Object.keys(b).map(function(d){return a+" "+d+" {"+c.objToCss(b[d])+"}"}).join("");return a+" { "+d+" "+e+" }\n      "+f+"\n      "+c.hakonToCss(this.getHakon())};AbstractBlockChisel.prototype.isProvider=function(){return!1};AbstractBlockChisel.prototype.getBlock=function(){return this.getParser().getParserBlockByName(this.getBase())};
AbstractBlockChisel.prototype.mapPropertiesToColumnNames=function(a){var b=this.getStruct();return a.map(function(a){return b[a]})};AbstractBlockChisel.prototype.getRequiredTable=function(a){a=this.mapPropertiesToColumnNames(a);var b=this.getOutputBinder();return a.map(function(a){return b.getBinderColumnByName(a)}).some(function(a){return!a})?[]:this.getCardsAsCsvArray(a)};
AbstractBlockChisel.prototype.getCardsWithStructQuery=function(){if(this.isProgram())return this.getCards();var a=this.getLimit(),b=this.getStruct().orderBy;return this.getOutputBinder().getSortedCardsWithLimit(b,a)};AbstractBlockChisel.prototype.getCardsAsCsvArray=function(a){var b=this.getCardsWithStructQuery().map(function(b){return b.getAsArray(a)});b.unshift(a);return b};AbstractBlockChisel.prototype.getContextMenuBray=function(){return""};
AbstractBlockChisel.prototype.getRequiredTableWithDates=function(a){var b=this.getOutputBinder(),c=this.mapPropertiesToColumnNames(a).map(function(a){return b.getBinderColumnByName(a)}),d=this.getRequiredTable(a);if(!d.length)return d;a=c.map(function(a,b){return a.isNumericMS()?b:-1}).filter(function(a){return-1<a});if(!a.length)return d;for(var c=d.length,e={i:1};e.i<c;e={i:e.i},e.i++)a.forEach(function(a){return function(b){d[a.i][b]=new Date(d[a.i][b])}}(e));return d};
AbstractBlockChisel.loadCode=function(){return Promise.resolve()};AbstractBlockChisel.prototype.createCardsFromTNCommand=function(a){return this.createCards((new CardParser).parse(a,"tree"))};AbstractBlockChisel.prototype.createCards=function(a){return Promise.resolve()};AbstractBlockChisel.prototype.fetchCards=function(){return Promise.resolve([])};
AbstractBlockChisel.prototype.getStructColumns=function(){var a=this.getNode("columns"),b=a?a.toObject():{};return Object.keys(b).map(function(a){var c=b[a]||{};"object"!==typeof c&&(c={});c.name||(c.name=a);return c})};AbstractBlockChisel.prototype.getBlockClassColumns=function(){return[]};
AbstractBlockChisel.prototype.executeLoadNewBinder=function(){var a=this,b=this._getNow();this._timeLastLoadStarted=b;var c=this.fetchCards();if(!(c instanceof Promise))debugger;return c.then(function(c){if(a._timeLastLoadStarted!==b)return Promise.resolve();var d=_.flatten(a.getStructColumns(),a.getBlockClassColumns()),f=a.getCardClass();a._outputBinder=new Binder(a,c,d,f);a._ttl=a._getNow()-b;return Promise.all(a.getChildBlocks().map(function(a){return a.executeLoadNewBinder()})).then(function(b){return a})}).catch(function(b){a.handleBlockError(b)})};
AbstractBlockChisel.prototype.handleBlockError=function(a){this._errorCount||(this._errorCount=0);this._errorCount++;this.getApp().goRed(a)};AbstractBlockChisel.prototype.getErrorCount=function(){return this._errorCount||0};AbstractBlockChisel.prototype.isProgram=function(){return!1};AbstractBlockChisel.prototype.getLimit=function(){return this.getStruct().limit};AbstractBlockChisel.prototype.getChildNodeSuggestions=function(){return[">filter",">group",">table"]};
AbstractBlockChisel.prototype.getId=function(){return"block"+this._getUid()};AbstractBlockChisel.prototype.getStyles=function(){this._styles||(this._styles={});return this._styles};AbstractBlockChisel.prototype.getBlockDimension=function(){var a=this.getProgram(),b=a.getProgramDimension();return a.getBlockDimensionMap(b.width,b.height).get(this)};AbstractBlockChisel.prototype.getHeaderHeight=function(){return 30};AbstractBlockChisel.prototype.getFooterHeight=function(){return 30};
AbstractBlockChisel.prototype.getBlockBodyDimension=function(){var a=this.getBlockDimension();a.height=a.height-this.getHeaderHeight()-this.getFooterHeight();return a};AbstractBlockChisel.prototype.openBlockSourceEditorModalCommand=function(){return this.getApp().setTargetNode(this).toggleAndRender("nodeEditorModal")};AbstractBlockChisel.prototype.cloneBlockCommand=function(){var a=this.getProgram();a.cloneBlock(this);return a.autosaveAndRender()};
AbstractBlockChisel.prototype._changeBlockOrderByCommand=function(a){this.toggle("orderBy",[a,"-"+a,""]);this.autosaveBlock();this.makeDirty();return this.render()};AbstractBlockChisel.prototype.shouldComponentUpdate=function(){return AbstractProgramNodeChisel.prototype.shouldComponentUpdate.call(this)||this._isDataExpired()};AbstractBlockChisel.prototype._isDataExpired=function(){var a=this.getRTime();return this.getOutputBinder().getCTime()>a||this.getInputBinder().getCTime()>a};
AbstractBlockChisel.prototype.getFirstAncestor=function(){var a=this.getParent();return a instanceof AbstractBlockChisel?a.getFirstAncestor():this};AbstractBlockChisel.prototype.executeLoadNewBinderAndRender=function(){var a=this;return this.executeLoadNewBinder().then(function(){return a.render()})};AbstractBlockChisel.prototype.changeTypeCommand=function(a){var b=this;this.setBase(a);var c=this.duplicate();this.unmountAndDestroy();return c.getBlock().executeLoadBlockOrGetLoadingPromise(this.getApp()).then(function(){return b.getProgram().autosaveAndRender().then(function(){return c.executeLoadNewBinderAndRender()})})};
AbstractBlockChisel.prototype.changeParentCommand=function(a){var b=this.getProgram(),b=(a=a?a.split(" ").map(function(a){return parseInt(a)}):"")?this.getApp().nodeAt(a):b;this.copyTo(b);this.unmountAndDestroy();return this.getProgram().autosaveAndRender()};AbstractBlockChisel.prototype._openBlockContextMenuCommand=function(){return this.getApp().setTargetNode(this).toggleAndRender("blockContextMenu")};AbstractBlockChisel.prototype.destroyBlockCommand=function(){this.unmountAndDestroy();return this.getProgram().autosaveAndRender()};
AbstractBlockChisel.prototype.getNewDataCommand=function(){};AbstractBlockChisel.prototype.setMonadOrChild=function(a,b){return this.has(a)?this.touchNode(a).setBeam(b):this.getBlock().getMonadName()!==a||b.includes("\n")?this.touchNode(a).setBeam(b):this.setBeam(b)};AbstractBlockChisel.prototype.changePropertyCommand=function(a,b){this.setMonadOrChild(b,a);this.getApp().renderApp();return this.autosaveBlock()};
AbstractBlockChisel.prototype.changeWordCommand=function(a,b){this.setWord(b,a);this.render();return this.autosaveBlock()};AbstractBlockChisel.prototype.insertSuggestionCommand=function(a){var b=this;this.append(a);this.autosaveBlock();return this.getProgram().executeLoadProgramCode().then(function(){return b.render()})};AbstractBlockChisel.prototype.copyBlockCommand=function(){this.getApp().getWillowDocument().copyTextToClipboard(this.getFirstAncestor().toString());return Promise.resolve()};
AbstractBlockChisel.prototype.copyDataCommand=function(a){this.getApp().getWillowDocument().copyTextToClipboard(this.getOutputBinder().toDelimited(a));return Promise.resolve()};AbstractBlockChisel.prototype._exportDataCommand=function(){this.getApp().getWillowDocument().downloadFile(this.getOutputBinder().toDelimited(","),this.getBase()+".csv","text/csv")};AbstractBlockChisel.prototype.getHakon=function(){return""};AbstractBlockChisel.prototype.getTheme=function(){return this.getApp().getTheme()};
AbstractBlockChisel.prototype.getBlockFooterBray=function(){return this.getBlockToolbarButtonBray()};AbstractBlockChisel.prototype.getBlockToolbarButtonBray=function(){return"@ span\n class BlockPencilButton\n data-onClickCommand chisel toggleToolbarCommand\n content "+MakeSVG("pencil",16)};AbstractBlockChisel.prototype.openBlockInspectorCommand=function(){return this.getApp().setTargetNode(this).toggleAndRender("blockInspectorModal")};AbstractBlockChisel.prototype.getSuggestedSize=function(){return this.getBlock().getSuggestedSize()};
AbstractBlockChisel.prototype.getPin=function(){return this.findBeam(BlockConstants.pin)};AbstractBlockChisel.prototype.getStumpForChildren=function(){return this.getStump().getParent()};AbstractBlockChisel.prototype.componentDidMount=function(){AbstractProgramNodeChisel.prototype.componentDidMount.call(this);this._blockToolbar&&this._blockToolbar.render()};AbstractBlockChisel.prototype.autosaveBlock=function(){this._clearBlockStruct();return this.getProgram().autosaveProgram()};
AbstractBlockChisel.prototype._clearBlockStruct=function(){delete this._blockStruct};AbstractBlockChisel.prototype.toggleToolbarCommand=function(){this._blockToolbar=this._blockToolbar?this._blockToolbar.unmount():(new BlockToolbarChisel("",void 0,this)).render(this.getStump());return Promise.resolve()};
AbstractBlockChisel.prototype.toTypeString=function(a){a=void 0===a?0:a;var b=this.getBlock()._getExtended(),c=this.getBeamPatternWords(),d=this.getWords(1),e={},f=c.length-1;c.forEach(function(a,b){e[a]=b===f?d.slice(b).join(" "):d[b]});new TreeNotation(e);var c=[this.getBase()].concat(c),g=c[c.length-1];if(g.endsWith("+")){g=g.replace("+","");c[c.length-1]=g;for(var h=this.getWords();h.length>c.length;)c.push(g)}var c=c.join(" "),b=b.getNode("hasBlock"),k=" ".repeat(a);return b?k+c+"\n"+this.getChildrenByNodeType(AbstractBlockChisel).map(function(b){return k+
b.toTypeString(a+1)}).join("\n"):k+c};window.AbstractBlockChisel=AbstractBlockChisel;var AbstractFireBlock=function(a){return AbstractBlockChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractFireBlock,AbstractBlockChisel);AbstractFireBlock._mountedComponents=AbstractBlockChisel._mountedComponents;AbstractFireBlock.loadCode=AbstractBlockChisel.loadCode;AbstractFireBlock.prototype.getHakon=function(){return".AbstractFireBlock\n input\n  border 0\n  font-size 16px"};
AbstractFireBlock.prototype.getBlockContentBray=function(){var a=this,b=this.getBlock(),c=MakeSVG(b.getSvg(),14),d=this.getBeamPatternWords(),e=d.length-1,d=d.map(function(b,c){var d=c+1;c=(e===c?a.getWords(d).join(" "):a.getWord(d))||"";return" @ input\n  placeholder "+b+"\n  value "+c+"\n  name "+d+"\n  data-onChangeCommand chisel changeWordCommand"}).join("\n");return"@ div\n content "+c+" "+b.getDescription()+"\n@ div\n"+d};
AbstractFireBlock.prototype.toJavascript=function(a){a=void 0===a?0:a;var b=this.getBlock()._getExtended(),c=b.findBeam("toJS")||"",d=this.getBeamPatternWords(),e=this.getWords(1),f={},g=d.length-1,h=b.findBeam("joinLastBy")||" ";d.forEach(function(a,b){f[a]=b===g?e.slice(b).join(h):e[b]});var c=(new TreeNotation(f)).format(c),b=b.getNode("hasBlock"),k=" ".repeat(a);return b?k+c+" {\n"+this.getChildrenByNodeType(AbstractBlockChisel).map(function(b){return k+b.toJavascript(a+2)}).join("\n")+"\n"+k+
"}\n":k+c};window.AbstractFireBlock=AbstractFireBlock;var BlockConstants={pin:"pin",percentage:"percentage"};window.BlockConstants=BlockConstants;var Shadow=function(a){this._stump=a};Shadow.prototype.getShadowStump=function(){return this._stump};Shadow.prototype.getShadowValue=function(){return""};Shadow.prototype.setShadowValue=function(a){return this};Shadow.prototype.removeShadow=function(){return this};Shadow.prototype.makeResizable=function(){return this};Shadow.prototype.makeDraggable=function(){return this};
Shadow.prototype.makeTypeahead=function(){return this};Shadow.prototype.makeSelectable=function(){return this};Shadow.prototype.focusShadow=function(){return this};Shadow.prototype.isShadowChecked=function(){return!1};Shadow.prototype.getShadowHtml=function(){return""};Shadow.prototype.getShadowOffset=function(){return{left:111,top:111}};Shadow.prototype.getShadowWidth=function(){return 111};Shadow.prototype.getTypeaheadValue=function(){return""};Shadow.prototype.getShadowHeight=function(){return 111};
Shadow.prototype.isShadowResizable=function(){return!1};Shadow.prototype.bindShadow=function(){return this};Shadow.prototype.toggleShadow=function(){};Shadow.prototype.setShadowHtml=function(a){return this};Shadow.prototype.onShadowEvent=function(){return this};Shadow.prototype.offShadowEvent=function(){return this};Shadow.prototype.triggerShadowEvent=function(a){return this};Shadow.prototype.getShadowPosition=function(){return{left:111,top:111}};Shadow.prototype.getShadowOuterHeight=function(){return 11};
Shadow.prototype.getShadowOuterWidth=function(){return 11};Shadow.prototype.getShadowCss=function(){return""};Shadow.prototype.setShadowCss=function(){return this};Shadow.prototype.clearHtml=function(){};Shadow.prototype.insertHtmlNode=function(){};Shadow.prototype.getShadowElement=function(){};Shadow.prototype.removeShadowAttr=function(a){return this};Shadow.prototype.setShadowAttr=function(a,b){return this};var BrowserShadow=function(a){Shadow.apply(this,arguments)};
$jscomp.inherits(BrowserShadow,Shadow);BrowserShadow.prototype._getJQ=function(){return jQuery('[data-suid="'+this.getShadowStump()._getUid()+'"]')};BrowserShadow.prototype.clearHtml=function(){this._getJQ().html("");return this};BrowserShadow.prototype.getShadowElement=function(){return this._getJQ()[0]};
BrowserShadow.prototype.insertHtmlNode=function(a,b){var c=a.toHtmlWithSuids(),c=jQuery(c),d=this._getJQ();void 0===b?d.append(c):0===b?d.prepend(c):jQuery(d.children().get(b-1)).after(c);c.data("stump",a)};BrowserShadow.prototype.getShadowPosition=function(){return this._getJQ().position()};BrowserShadow.prototype.setShadowHtml=function(a){this._getJQ().html(a);return this};BrowserShadow.prototype.onShadowEvent=function(a,b,c){this._getJQ().on(a,b,c);return this};
BrowserShadow.prototype.offShadowEvent=function(a,b){this._getJQ().off(a,b);return this};BrowserShadow.prototype.triggerShadowEvent=function(a){this._getJQ().trigger(a);return this};BrowserShadow.prototype.getShadowHtml=function(){return this._getJQ().html()};BrowserShadow.prototype.getShadowValue=function(){return this._getJQ().val()};BrowserShadow.prototype.getShadowOuterHeight=function(){return this._getJQ().outerHeight()};BrowserShadow.prototype.getShadowOuterWidth=function(){return this._getJQ().outerWidth()};
BrowserShadow.prototype.setShadowValue=function(a){this._getJQ().val(a);return this};BrowserShadow.prototype.isShadowChecked=function(){return this._getJQ().is(":checked")};BrowserShadow.prototype.toggleShadow=function(){this._getJQ().toggle();return this};BrowserShadow.prototype.removeShadowAttr=function(a){this._getJQ().removeAttr(a);return this};BrowserShadow.prototype.setShadowAttr=function(a,b){this._getJQ().attr(a,b);return this};BrowserShadow.prototype.getShadowWidth=function(){return this._getJQ().width()};
BrowserShadow.prototype.getShadowHeight=function(){return this._getJQ().height()};BrowserShadow.prototype.makeResizable=function(a){this._getJQ().resizable(a);return this};BrowserShadow.prototype.getShadowOffset=function(){return this._getJQ().offset()};BrowserShadow.prototype.removeShadow=function(){this._getJQ().remove();return this};BrowserShadow.prototype.getTypeaheadValue=function(){return this._getJQ().typeahead("val")};
BrowserShadow.prototype.makeDraggable=function(a){this._getJQ().draggable(a);return this};BrowserShadow.prototype.getShadowCss=function(a){return this._getJQ().css(a)};BrowserShadow.prototype.setShadowCss=function(a){this._getJQ().css(a);return this};BrowserShadow.prototype.focusShadow=function(){this._getJQ().focus();return this};BrowserShadow.prototype.makeTypeahead=function(a,b){this._getJQ().typeahead(a,b);return this};
BrowserShadow.prototype.makeSelectable=function(a){this._getJQ().selectable(a);return this};BrowserShadow.prototype.bindShadow=function(a,b){this._getJQ().bind(a,b);return this};BrowserShadow.prototype.isShadowResizable=function(){return 0<this._getJQ().find(".ui-resizable-handle").length};Shadow.BrowserShadow=BrowserShadow;window.Shadow=Shadow;var WillowContentNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(WillowContentNode,TreeNotation);
WillowContentNode.prototype._toHtml=function(){return this.getBeamWithChildren()};var WillowAttributeNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(WillowAttributeNode,TreeNotation);WillowAttributeNode.prototype._toHtml=function(){return""};WillowAttributeNode.prototype.getAttribute=function(){return" "+this.getBase()+'="'+this.getBeam()+'"'};var Stump=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(Stump,TreeNotation);
Stump.prototype.getTag=function(){return this.getWord(1)};Stump.prototype.parseNodeType=function(a){return a.startsWith("@")?Stump:a.startsWith("content ")||"content"===a?WillowContentNode:WillowAttributeNode};Stump.prototype._childrenToHtml=function(a){return this.getChildren().map(function(b){return b._toHtml(a)}).join("")};Stump.prototype.toHtml=function(){return this.isRoot()?TreeNotation.prototype.toHtml.call(this):this._toHtml()};
Stump.prototype.toHtmlWithSuids=function(){return this.isRoot()?TreeNotation.prototype.toHtml.call(this):this._toHtml(void 0,!0)};
Stump.prototype._toHtml=function(a,b){var c=this.getTag(),d=this.getChildren().map(function(c){return c._toHtml(a+1,b)}).join(""),e=this.getChildrenByNodeType(WillowAttributeNode).map(function(a){return a.getAttribute()}).join(""),f=" ".repeat(a),g="@!"===this.getWord(0),h=!g&&0<this.getChildrenByNodeType(Stump).length,k=b?' data-suid="'+this._getUid()+'"':"";return(g?"":f)+"<"+c+e+k+">"+(h?"\n":"")+d+"</"+c+">"+(g?"":"\n")};Stump.prototype.removeStump=function(){this.getShadow().removeShadow();return this.destroy()};
Stump.prototype.getNodeByGuid=function(a){return this.getTopDownArray().find(function(b){return b._getUid()===a})};Stump.prototype.addClassToStump=function(a){var b=this.touchNode("class"),c=b.getWords();if(c.includes(a))return this;b.setWord(c.length,a);return this};Stump.prototype.removeClassFromStump=function(a){var b=this.getNode("class");if(!b)return this;a=b.getLine().replace(" "+a,"");"class"===a?b.destroy():b.setLine(a);return this};
Stump.prototype.stumpHasClass=function(a){var b=this.getNode("class");return b&&b.getWords().includes(a)?!0:!1};Stump.prototype.isStumpCheckbox=function(){return"checkbox"===this.findBeam("type")};Stump.prototype.getShadow=function(){return new (this.getShadowClass())(this)};Stump.prototype.insertChildNode=function(a,b){a=(new TreeNotation(a)).getChildren()[0];b=this.insert(a.getLine(),a.childrenToString(),b);a=this.getChildrenByNodeType(Stump).indexOf(b);this.getShadow().insertHtmlNode(b,a);return b};
Stump.prototype.isInputType=function(){return["input","div","textarea"].includes(this.getTag())||"true"===this.findBeam("contenteditable")};Stump.prototype.findStumpByChild=function(a){return this.findStumpsByChild(a)[0]};Stump.prototype.findStumpByTag=function(a){return this.findStumpsByTag(a)[0]};Stump.prototype.findStumpsByTag=function(a){return this.getTopDownArray().filter(function(b){return b instanceof Stump&&b.getWord(1)===a})};
Stump.prototype.hasLine=function(a){return this.getChildren().some(function(b){return b.getLine()===a})};Stump.prototype.findStumpsByChild=function(a){return this.getTopDownArray().filter(function(b){return b instanceof Stump&&b.hasLine(a)})};Stump.prototype.findStumpsWithClass=function(a){return this.getTopDownArray().filter(function(b){return b instanceof Stump&&b.has("class")&&b.getNode("class").getWords().includes(a)})};Stump.prototype.getShadowClass=function(){return this.getParent().getShadowClass()};
Stump.prototype.getLines=function(a,b){a=void 0===a?0:a;return this.toString().split("\n").slice(a,b).join("\n")};Stump.prototype.getStumpChisel=function(){return this._chisel||this.getParent().getStumpChisel()};Stump.prototype.setStumpChisel=function(a){this._chisel=a;return this};Stump.prototype._typedNodeAt=function(a,b){0>a&&(a=this.length+a);return this.getChildrenByNodeType(b)[a]};
Stump.prototype.typedNodeAt=function(a,b){if("number"===typeof a)return this._typedNodeAt(a,b);if(1===a.length)return this._typedNodeAt(a[0],b);var c=this._typedNodeAt(a[0],b);if(c)return c.typedNodeAt(a.slice(1),b)};Stump.prototype.setStumpCss=function(a){this.getShadow().setShadowCss(a);return this};Stump.prototype.getStumpCss=function(a){return this.getShadow().getShadowCss(a)};Stump.prototype.blurStump=function(){return this};Stump.prototype.getStumpAttr=function(a){return this.findBeam(a)};
Stump.prototype.setStumpAttr=function(a,b){return this};window.Stump=Stump;var WillowIpc=function(){};WillowIpc.prototype.on=function(){};WillowIpc.prototype.send=function(){};var WillowStore=function(){this._values={}};WillowStore.prototype.get=function(a){return this._values[a]};WillowStore.prototype.set=function(a,b){this._values[a]=b;return this};WillowStore.prototype.remove=function(a){delete this._values[a]};
WillowStore.prototype.each=function(a){var b=this;Object.keys(this._values).forEach(function(c){a(b._values[c],c)})};WillowStore.prototype.clearAll=function(){this._values={}};var WillowMousetrap=function(){this.prototype={}};WillowMousetrap.prototype.bind=function(){};
var AbstractDocument=function(a){var b=Stump.call(this,"@ html\n @ head\n @ body")||this;b._htmlStump=b.nodeAt(0);b._headStump=b.nodeAt(0).nodeAt(0);b._bodyStump=b.nodeAt(0).nodeAt(1);b.addSuidsToHtmlHeadAndBodyShadows();b._baseUrl=a||"";b.location={};return b};$jscomp.inherits(AbstractDocument,Stump);AbstractDocument.prototype.addSuidsToHtmlHeadAndBodyShadows=function(){};AbstractDocument.prototype.getShadowClass=function(){return Shadow};AbstractDocument.prototype.toggleFullScreen=function(){};
AbstractDocument.prototype.getMousetrap=function(){this._mousetrap||(this._mousetrap=new WillowMousetrap);return this._mousetrap};AbstractDocument.prototype.getFocusedShadow=function(){return this._focusedShadow||this.getBodyStump().getShadow()};AbstractDocument.prototype.getHeadStump=function(){return this._headStump};AbstractDocument.prototype.getBodyStump=function(){return this._bodyStump};AbstractDocument.prototype.getHtmlStump=function(){return this._htmlStump};
AbstractDocument.prototype.getStore=function(){this._store||(this._store=new WillowStore);return this._store};AbstractDocument.prototype.someInputHasFocus=function(){var a=this.getFocusedShadow();return a?(a=a.getShadowStump())&&a.isInputType():!1};AbstractDocument.prototype.isNode=function(){return"undefined"!==typeof exports};AbstractDocument.prototype.copyTextToClipboard=function(){};AbstractDocument.prototype.getWindowNamespace=function(){return{}};
AbstractDocument.prototype.getBaseUrlNoSlash=function(){return this.getBaseUrl().replace(/\/$/,"")};AbstractDocument.prototype.setCopyData=function(a,b){};AbstractDocument.prototype.getBaseUrl=function(){return this._baseUrl};AbstractDocument.prototype._normalizeUrl=function(a){return a.startsWith("http://")||a.startsWith("https://")?a:this.getBaseUrlNoSlash()+a};
AbstractDocument.prototype.get=function(a,b){a=this._normalizeUrl(a);return superagent.get(a).query(b).set(this._headers||{}).then(function(a){return a.body||a.text})};AbstractDocument.prototype.post=function(a,b){a=this._normalizeUrl(a);return superagent.post(a).set(this._headers||{}).send(b).then(function(a){return a.body||a.text})};AbstractDocument.prototype.encodeURIComponent=function(a){return encodeURIComponent(a)};AbstractDocument.prototype.downloadFile=function(a,b,c){};
AbstractDocument.prototype.appendScript=function(a){return Promise.resolve()};AbstractDocument.prototype.getWindowTitle=function(){var a=this.getTopDownArray().find(function(a){return"title"===a.getBase()});return a?a.getBeam():""};AbstractDocument.prototype.setWindowTitle=function(a){this.getTopDownArray().find(function(a){return"head"===a.getWord(1)}).touchNode("title").setBeam(a);return this};AbstractDocument.prototype.getHostname=function(){return this.location.hostname||""};
AbstractDocument.prototype.getIpc=function(){return new WillowIpc};AbstractDocument.prototype.openUrl=function(a){};AbstractDocument.prototype.getPageHtml=function(){return this.toHtmlWithSuids()};AbstractDocument.prototype.getStumpFromElement=function(a){};AbstractDocument.prototype.setPasteHandler=function(a){return this};AbstractDocument.prototype.setErrorHandler=function(a){return this};AbstractDocument.prototype.getValueOfSearchInput=function(){return""};
AbstractDocument.prototype.setWindowBlurHandler=function(a){return this};AbstractDocument.prototype.setWindowFocusHandler=function(a){return this};AbstractDocument.prototype.setCopyHandler=function(a){return this};AbstractDocument.prototype.setCutHandler=function(a){return this};AbstractDocument.prototype.setResizeEndHandler=function(a){return this};AbstractDocument.prototype.getCookie=function(){return{}};AbstractDocument.prototype.getWindowSize=function(){return{width:1111,height:1111}};
AbstractDocument.prototype.getDocumentSize=function(){return this.getWindowSize()};AbstractDocument.prototype.forceRepaint=function(){};AbstractDocument.startApp=function(a){document.addEventListener("DOMContentLoaded",function(){window.app||(window.app=new a,window.app.renderApp())},!1)};var BrowserDocument=function(a){return AbstractDocument.apply(this,arguments)||this};$jscomp.inherits(BrowserDocument,AbstractDocument);BrowserDocument.startApp=AbstractDocument.startApp;
BrowserDocument.prototype.getIpc=function(){return require("electron").ipcRenderer};BrowserDocument.prototype.findStumpsByShadowClass=function(a){var b=[],c=this;jQuery("."+a).each(function(){b.push(c.getStumpFromElement(this))});return b};BrowserDocument.prototype.addSuidsToHtmlHeadAndBodyShadows=function(){jQuery("html").attr("data-suid",this.getHtmlStump()._getUid());jQuery("head").attr("data-suid",this.getHeadStump()._getUid());jQuery("body").attr("data-suid",this.getBodyStump()._getUid())};
BrowserDocument.prototype.getShadowClass=function(){return Shadow.BrowserShadow};BrowserDocument.prototype.setCopyHandler=function(a){jQuery(document).on(ShadowEvents.copy,a);return this};BrowserDocument.prototype.setCutHandler=function(a){jQuery(document).on(ShadowEvents.cut,a);return this};BrowserDocument.prototype.setPasteHandler=function(a){window.addEventListener(ShadowEvents.paste,a,!1);return this};BrowserDocument.prototype.setErrorHandler=function(a){window.addEventListener("error",a);return this};
BrowserDocument.prototype.toggleFullScreen=function(){var a=document;a.fullScreenElement&&null!==a.fullScreenElement||!a.mozFullScreen&&!a.webkitIsFullScreen?a.documentElement.requestFullScreen?a.documentElement.requestFullScreen():a.documentElement.mozRequestFullScreen?a.documentElement.mozRequestFullScreen():a.documentElement.webkitRequestFullScreen&&a.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):a.cancelFullScreen?a.cancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():
a.webkitCancelFullScreen&&a.webkitCancelFullScreen()};BrowserDocument.prototype.setCopyData=function(a,b){a=a.originalEvent;a.preventDefault();a.clipboardData.setData("text/plain",b);a.clipboardData.setData("text/html",b)};BrowserDocument.prototype.getMousetrap=function(){return Mousetrap};
BrowserDocument.prototype.copyTextToClipboard=function(a){var b=document.createElement("textarea");b.style.position="fixed";b.style.top=0;b.style.left=0;b.style.width="2em";b.style.height="2em";b.style.padding=0;b.style.border="none";b.style.outline="none";b.style.boxShadow="none";b.style.background="transparent";b.value=a;document.body.appendChild(b);b.select();try{document.execCommand("copy")}catch(c){}document.body.removeChild(b)};BrowserDocument.prototype.getStore=function(){return store};
BrowserDocument.prototype.getWindowNamespace=function(){return window};BrowserDocument.prototype.getHostname=function(){return location.hostname};
BrowserDocument.prototype.appendScript=function(a){if(!a)return Promise.resolve();this._loadingPromises||(this._loadingPromises={});if(this._loadingPromises[a])return this._loadingPromises[a];if(this.isNode())return Promise.resolve();var b=new Promise(function(b,d){var c=!1,f=document.createElement("script");f.type="text/javascript";f.src=a;f.async=!0;f.onload=f.onreadystatechange=function(){c||this.readyState&&"complete"!=this.readyState||(c=!0,b(this))};f.onerror=f.onabort=d;document.head.appendChild(f)});
return this._loadingPromises[a]=b};BrowserDocument.prototype.downloadFile=function(a,b,c){var d=document.createElement("a");d.setAttribute("href","data:"+c+","+encodeURIComponent(a));d.setAttribute("download",b);d.click()};BrowserDocument.prototype.openUrl=function(a){window.open(a)};BrowserDocument.prototype.setWindowBlurHandler=function(a){jQuery(window).on(ShadowEvents.blur,a);return this};
BrowserDocument.prototype.setResizeEndHandler=function(a){var b;$(window).on(ShadowEvents.resize,function(c){$(c.target).is("div")||(clearTimeout(b),b=setTimeout(a,100))});return this};BrowserDocument.prototype.setWindowFocusHandler=function(a){jQuery(window).on(ShadowEvents.focus,a);return this};BrowserDocument.prototype.getStumpFromElement=function(a){return this.getHtmlStump().getNodeByGuid(parseInt(jQuery(a).attr("data-suid")))};BrowserDocument.prototype.forceRepaint=function(){jQuery(window).width()};
BrowserDocument.prototype.getCookie=function(){return document.cookie};BrowserDocument.prototype.getValueOfSearchInput=function(){return jQuery(".tt-input").val()};BrowserDocument.prototype.getBrowserHtml=function(){return document.documentElement.outerHTML};BrowserDocument.prototype.getWindowSize=function(){var a=jQuery(window);return{width:a.width(),height:a.height()}};BrowserDocument.prototype.getDocumentSize=function(){var a=jQuery(document);return{width:a.width(),height:a.height()}};
BrowserDocument.prototype.getFocusedShadow=function(){var a=this.getStumpFromElement(document.activeElement);return a&&a.getShadow()};var WillowDocument=function(a){return AbstractDocument.apply(this,arguments)||this};$jscomp.inherits(WillowDocument,AbstractDocument);WillowDocument.startApp=AbstractDocument.startApp;WillowDocument.BrowserDocument=BrowserDocument;window.WillowDocument=WillowDocument;var AbstractAppChisel=function(a){return Chisel.apply(this,arguments)||this};
$jscomp.inherits(AbstractAppChisel,Chisel);AbstractAppChisel._mountedComponents=Chisel._mountedComponents;
AbstractAppChisel.prototype.componentWillMount=function(){var a=this;this._startVisitCounter();var b=this.getFromStore(StorageKeys.openPrograms),b=(b=b?b.replace("!",""):"")?b.split(" "):[],b=_.uniq(b),c=this.getProgramToOpen();c&&-1===b.indexOf(c)&&b.push(c);b=b.map(function(a){return a===c?"!"+a:a});b=b.slice(0,30);this.concat("theme\nmenu\npanel\n programs "+b+"\n search");b.forEach(function(b){return b.startsWith("!")?a.openUrlInNewSpaceAndFocus(b.substr(1)):a.openUrlInNewSpace(b)});this._setBodyShadowHandlers();
this._makeProgramLinksOpenImmediately();this._makeWindowDroppable(this);this._makeWindowPastable(this);this._makeDocumentCopyableAndCuttable();this._makeWindowResizable(this);this._bindKeyboardShortcuts();this._setErrorHandlers()};AbstractAppChisel.prototype.registerETN=function(a,b,c){var d=this.getETNs(),e=this.getParsers();d[a]=b;a=new ParserETN(c,a,this);e[b.name]=a;return this};AbstractAppChisel.prototype.getParserFromETNConstructorName=function(a){return this.getParsers()[a]};
AbstractAppChisel.prototype.getProgramClass=function(a){return this.getETNs()[a]||FlowProgram};AbstractAppChisel.prototype.getParsers=function(){this.getETNs();this._parsers||(this._parsers={});return this._parsers};AbstractAppChisel.prototype.getETNs=function(){this._etns||(this._etns={},this.registerETN("flow",FlowProgram,this.getFlowBluePrintsStr()),this.registerETN("fire",FireProgram,FireBluePrints));return this._etns};AbstractAppChisel.prototype.getTargetNode=function(){return this._targetNode};
AbstractAppChisel.prototype.setTargetNode=function(a){this._targetNode=a;return this};AbstractAppChisel.prototype.getWillowDocument=function(){this._willowBrowser||(this._willowBrowser="undefined"===typeof jQuery?new WillowDocument("http://localhost:8000/"):new WillowDocument.BrowserDocument(""));return this._willowBrowser};AbstractAppChisel.prototype.emptyFolderCommand=function(){};AbstractAppChisel.prototype._getFlowBluePrintsStr=function(){return FlowBluePrints};
AbstractAppChisel.prototype.getFlowBluePrintsStr=function(){var a=this.constructor.name.toLowerCase();return(new TreeNotation(this._getFlowBluePrintsStr())).getChildren().filter(function(b){b=b.findBeam("platform");return!b||b.includes(a)?!0:!1}).map(function(a){return a.toString()}).join("\n")};AbstractAppChisel.prototype.getServerPath=function(){return""};AbstractAppChisel.prototype.getVersion=function(){return Version};
AbstractAppChisel.prototype._startVisitCounter=function(){var a=this._getVisitCount();a++;this.setVisitCount(a)};AbstractAppChisel.prototype.setVisitCount=function(a){this.storeValue(StorageKeys.visitCount,a)};AbstractAppChisel.prototype._getVisitCount=function(){var a=this.getFromStore(StorageKeys.visitCount);return a?parseInt(a):0};
AbstractAppChisel.prototype.getNodeTypes=function(){return{theme:ThemeChisel,menu:MenuChisel,panel:PanelChisel,nodePickerModal:NodePickerModal,buildProgramModal:BuildProgramModal,sourceEditorModal:SourceEditorModal,programContextMenu:ProgramContextMenuChisel,blockContextMenu:BlockContextMenuChisel,blockInspectorModal:BlockInspectorModal,cardEditorModal:CardEditorModal,insertCardModal:InsertCardModal,insertCardsModal:InsertCardsModal,promptModal:CustomPromptModal,confirmModal:CustomConfirmModal,nodeEditorModal:NodeEditorModal,
helpModal:HelpModal}};AbstractAppChisel.prototype.parseNodeType=function(a){return this.getNodeTypes()[a.split(" ")[0]]};AbstractAppChisel.prototype.getBray=function(){return"@ div\n class AbstractAppChisel "+this.constructor.name};AbstractAppChisel.prototype.getHakon=function(){return".AbstractAppChisel\n height 100%\n width 100%"};AbstractAppChisel.prototype.goRed=function(a){var b=this.getMountedProgram();this.logMessage("error on program: "+(b?b.getUrl():"")+".");this.isVerbose()&&console.log(a)};
AbstractAppChisel.prototype.isVerbose=function(){return!0===this._verbose};AbstractAppChisel.prototype.reportUncaughtError=function(a){if("undefined"===typeof ga)return Promise.resolve();ga("send","event","UncaughtError",error.name);return Promise.resolve()};AbstractAppChisel.prototype._setErrorHandlers=function(){var a=this;this.getWillowDocument().setErrorHandler(function(b,c,d){a.reportUncaughtError(b);a.goRed();console.error(b)})};
AbstractAppChisel.prototype.openNodeEditorModalCommand=function(a){a=this.getMountedProgram().nodeAt(a);this.setTargetNode(a);return this.toggleAndRender("nodeEditorModal")};AbstractAppChisel.prototype.closeModal=function(){this.getOpenModals().forEach(function(a){return a.unmountAndDestroy()})};AbstractAppChisel.prototype.getOpenModals=function(){return this.getChildren().filter(function(a){return a instanceof AbstractModalChisel})};
AbstractAppChisel.prototype.closeAllContextMenus=function(){this.getChildren().filter(function(a){return a instanceof AbstractContextMenuChisel}).forEach(function(a){return a.unmountAndDestroy()})};AbstractAppChisel.prototype.closeAllDropDownMenusCommand=function(){this.getTopDownArray().forEach(function(a){a.getLine().includes("DropDownMenu")&&a.unmountAndDestroy()});return Promise.resolve()};AbstractAppChisel.prototype.renderApp=function(){this.render(this.getWillowDocument().getBodyStump());return this};
AbstractAppChisel.prototype.appendBlockCommand=function(a,b){this._appendBlocks(a,b).forEach(function(a){return a.executeLoadNewBinder()});return this.getMountedProgram().autosaveAndRender()};AbstractAppChisel.prototype.appendBlockAndWaitCommand=function(a,b){var c=this;return Promise.all(this._appendBlocks(a,b).map(function(a){return a.executeLoadNewBinder()})).then(function(){return c.getMountedProgram().autosaveAndRender()})};
AbstractAppChisel.prototype._getAvailablePermalink=function(a){var b=this;return Util.getAvailablePermalink(a,function(a){return b.doesFileExistSync(a)})};AbstractAppChisel.prototype._appendBlocks=function(a,b){return this.getNodeCursors().map(function(c){return c.append(a,b)})};AbstractAppChisel.prototype.isPaid=function(){return!!Util.parseCookie(this.getWillowDocument().getCookie()).paidToken};
AbstractAppChisel.prototype.appendBlockAndSelectCommand=function(a,b){var c=this._appendBlocks(a,b);c.forEach(function(a){return a.executeLoadNewBinder()});a=this.getMountedProgram();a.clearSelection();return a.autosaveAndRender().then(function(){c.forEach(function(a){return a.selectBlock()})})};
AbstractAppChisel.prototype.insertMorphBlockCommand=function(){var a=this.getMountedProgram(),b=this.getMouseEvent();this.getNodeCursors().forEach(function(c){c.append(">morph",BlockConstants.pin+" "+a.makePin(b))});return a.autosaveAndRender()};AbstractAppChisel.prototype.getNodeCursors=function(){var a=this.getMountedProgram().getSelectedBlocks();return a.length?a:[this.getMountedProgram()]};
AbstractAppChisel.prototype.deleteAllCardsInTargetBlockCommand=function(){var a=this,b=this.getTargetNode().getInputBinder();return Promise.all(b.getCards().map(function(a){return a.destroyCardCommand()})).then(function(){a.renderApp()})};AbstractAppChisel.prototype.openOhayoProgramCommand=function(a){var b=this;return Promise.all(a.split(" ").map(function(a){return b._openOhayoProgramCommand(a)}))};
AbstractAppChisel.prototype._openOhayoProgramCommand=function(a){var b=(new TreeNotation(DemoPrograms)).getNode(a).getBeamWithChildren(),c=this.getFocusedPanel(),d=c.getOpenTabByUrl(a);return d?c.setMountedProgram(d):this.createAndOpen(b,a)};AbstractAppChisel.prototype.makeDataBlock=function(a){var b=(new CardParser).inferEncoding(a),b=new TreeNotation(">data\n format "+b+"\n content");b.getNode(">data content").setBeamWithChildren(a);return b.toString()};
AbstractAppChisel.prototype.onProgramsChange=function(){};AbstractAppChisel.prototype.getFocusedPanel=function(){return this.getNode("panel")};AbstractAppChisel.prototype.getMountedProgram=function(){return this.getFocusedPanel().getMountedProgram()};AbstractAppChisel.prototype.getMenuChisel=function(){return this.getNode("menu")};AbstractAppChisel.prototype.emitGlobalMessage=function(a){console.log(a)};AbstractAppChisel.prototype.handleGlobalError=function(a){console.error(a)};
AbstractAppChisel.prototype.createNewBlankProgramCommand=function(a){var b=this;return this.createAndOpen("",void 0===a?"untitled.flow":a).then(function(a){return b.logMessage(Say($jscomp$templatelit$1,a.getUrl()))})};AbstractAppChisel.prototype.canMakePrograms=function(){return!0};AbstractAppChisel.prototype.openUrlPromptCommand=function(){var a=this;this.prompt(Say($jscomp$templatelit$2),"").then(function(b){b&&a.openUrlInNewSpaceAndFocus(b)})};
AbstractAppChisel.prototype.openManyPrompt=function(){var a=this;return this.prompt(Say($jscomp$templatelit$3),"").then(function(b){if(b)return a.openManyCommand(b)})};AbstractAppChisel.prototype.openManyCommand=function(a){var b=this,c=new RegExp(a,"i");a=this.getCaddies().filter(function(a){return a.getCaddyLink().match(c)});return Promise.all(a.map(function(a){return b.openUrlInNewSpace(a.getCaddyLink())}))};
AbstractAppChisel.prototype.openUrlInNewSpace=function(a){var b=this.getFocusedPanel().getOpenTabByUrl(a);return b?Promise.resolve(b):this.getFocusedPanel().openUrlInNewSpace(a)};AbstractAppChisel.prototype.openUrlInNewSpaceAndFocus=function(a){var b=this;return this.openUrlInNewSpace(a).then(function(a){return b.getFocusedPanel().setMountedProgram(a)})};AbstractAppChisel.prototype.mountTabByIndexCommand=function(a){return this.getFocusedPanel().mountTabByIndex(a)};
AbstractAppChisel.prototype.closeTabByIndexCommand=function(a){return this.getFocusedPanel().closeTabByIndex(a)};AbstractAppChisel.prototype.getFolder=function(){return""};AbstractAppChisel.prototype.tabDidOpen=function(){};AbstractAppChisel.prototype.isAutoSaveEnabled=function(){return"false"!==this.getFromStore(StorageKeys.autoSave)};
AbstractAppChisel.prototype.toggleAutoSaveCommand=function(){var a=!this.isAutoSaveEnabled();a?this.removeValue(StorageKeys.autoSave):this.storeValue(StorageKeys.autoSave,"false");this.logMessage(Say($jscomp$templatelit$4,a));return Promise.resolve()};
AbstractAppChisel.prototype.saveCompiledCommand=function(){var a=this.getMountedProgram(),b=a.compilesTo(),c=Format.permalink(Format.removeFileExtension(a.getFileName()))+"."+b,a=a.buildProgram();this.getWillowDocument().downloadFile(a,c,"text/"+b);return Promise.resolve()};AbstractAppChisel.prototype.generateProgram=function(a,b){return new (this.getProgramClass(b))(a,b,this)};AbstractAppChisel.prototype.executeProgramCommand=function(){this.getMountedProgram().getProgramOfInterest().execute();return Promise.resolve()};
AbstractAppChisel.prototype.toggleThemeCommand=function(){return this._toggleTheme()};AbstractAppChisel.prototype._getThemeName=function(){return this.getFromStore(StorageKeys.theme)};AbstractAppChisel.prototype.getTheme=function(){return Themes[this._getThemeName()]||Themes.glass};
AbstractAppChisel.prototype._toggleTheme=function(){var a=Util.toggle(this._getThemeName(),Object.keys(Themes));this.logMessage(Say($jscomp$templatelit$5,a));this.storeValue(StorageKeys.theme,a);this.getApp().makeAllDirty();this.renderApp();return Promise.resolve()};AbstractAppChisel.prototype.confirmAndDeleteFile=function(a){var b=this;return this.confirm(Say($jscomp$templatelit$6,a)).then(function(c){return c?b.deleteFileCommand(a):Promise.resolve(!1)})};
AbstractAppChisel.prototype.promptToRenameFile=function(a,b){var c=this;return this.prompt("Enter new name for file",a).then(function(d){return d&&d!==a?(d=Format.permalink(d))?c.renameFileCommand(a,d,b).then(function(a){c.logMessage("Renamed");return a}):Promise.resolve():Promise.resolve()})};
AbstractAppChisel.prototype.deleteAllProgramsPrompt=function(){var a=this,b=this.getFocusedPanel().getPrograms();return this.confirm(Say($jscomp$templatelit$7,b.length)).then(function(c){return c?Promise.all(b.map(function(b){return a.deleteFileCommand(b.getDiskPath())})):Promise.resolve(!1)})};AbstractAppChisel.prototype.getFolderPath=function(){return""};AbstractAppChisel.prototype.insertStringCommand=function(a){this.getWillowDocument().getFocusedShadow().setShadowValue(a);return Promise.resolve()};
AbstractAppChisel.prototype.showTabRenamePromptCommand=function(){var a=this,b=this.getMountedProgram();this.promptToRenameFile(b.getFileName()).then(function(c){if(!c)return!1;a.openUrlInNewSpaceAndFocus(""+a.getFolderPath()+c).then(function(c){a.getFocusedPanel().closeProgram(b)})});return Promise.resolve()};AbstractAppChisel.prototype.toggleHelpCommand=function(){return this.toggleAndRender("helpModal")};AbstractAppChisel.prototype.toggleSourceEditorCommand=function(){return this.toggleAndRender("sourceEditorModal")};
AbstractAppChisel.prototype.toggleLayoutCommand=function(){return this.getMountedProgram().toggleLayout()};AbstractAppChisel.prototype.closeMountedProgramCommand=function(){return this.getFocusedPanel().closeProgram(this.getMountedProgram())};AbstractAppChisel.prototype.fetchAndReloadFocusedProgramCommand=function(){return this.getFocusedPanel().fetchAndReloadProgram(this.getMountedProgram())};AbstractAppChisel.prototype.selectAllCommand=function(){this.getMountedProgram().selectAll();return Promise.resolve()};
AbstractAppChisel.prototype.selectBlocksByShadowClassCommand=function(a){this.logCommand("app selectBlocksByShadowClassCommand");this.getMountedProgram().selectBlocksByShadowClass(a);return Promise.resolve()};AbstractAppChisel.prototype.clearSelectionCommand=function(){this.logCommand("app clearSelectionCommand");this.getMountedProgram().clearSelection();return Promise.resolve()};AbstractAppChisel.prototype.deleteSelectionCommand=function(){return this.getMountedProgram().deleteSelection()};
AbstractAppChisel.prototype.duplicateSelectionCommand=function(){return this.getMountedProgram().duplicateSelection()};AbstractAppChisel.prototype.cancelConfirmCommand=function(){return this._confirmModal._resolveCommand("0")};AbstractAppChisel.prototype.acceptConfirmCommand=function(){return this._confirmModal._resolveCommand("1")};AbstractAppChisel.prototype.submitPromptCommand=function(){return this._promptModal._resolveCommand()};
AbstractAppChisel.prototype.showDeleteFileConfirmDialogCommand=function(){var a=this,b=this.getMountedProgram();return this.confirmAndDeleteFile(b.getFileName()).then(function(c){!1!==c&&a.getFocusedPanel().closeProgram(b)})};AbstractAppChisel.prototype.mountPreviousProgramCommand=function(){return this.getFocusedPanel().mountPreviousProgram()};AbstractAppChisel.prototype.mountNextProgramCommand=function(){return this.getFocusedPanel().mountNextProgram()};
AbstractAppChisel.prototype.closeAllProgramsCommand=function(){return this.getFocusedPanel().closeAllPrograms()};AbstractAppChisel.prototype.openFocusedPanelSearchCommand=function(){return this.getFocusedPanel().openSearchCommand()};AbstractAppChisel.prototype.universalSearchCommand=function(a){return Promise.resolve()};AbstractAppChisel.prototype.toggleFullScreenCommand=function(){this.getWillowDocument().toggleFullScreen();return Promise.resolve()};
AbstractAppChisel.prototype.toggleFocusedModeCommand=function(){this.toggle("menu");var a=this.getFocusedPanel();a.toggle("programs");a.toggle("search");return this.toggleFullScreenCommand()};AbstractAppChisel.prototype.toggleSourceGutterCommand=function(){this.makeAllDirty();return this.getFocusedPanel().toggleAndRender("sourceGutter")};AbstractAppChisel.prototype.getKeyboardShortcuts=function(){this._shortcuts||(this._shortcuts=new Drums(this._getDrumsProgram()));return this._shortcuts};
AbstractAppChisel.prototype.selectNextCommand=function(){return this.getMountedProgram().selectNext()};AbstractAppChisel.prototype.selectPreviousCommand=function(){return this.getMountedProgram().selectPrevious()};AbstractAppChisel.prototype.createNewFlowVisProgramCommand=function(){var a=this,b=this.getMountedProgram(),c=b.childrenToString();return this.createAndOpen(FlowCodeEditorTemplate(c,"fire"),b.getFileName()+".editor.flow").then(function(b){return a.logMessage(Say($jscomp$templatelit$8,b.getUrl()))})};
AbstractAppChisel.prototype.createMiniMapCommand=function(){var a=this;return this.createAndOpen(MiniTemplate,"myPrograms.flow").then(function(b){return a.logMessage(Say($jscomp$templatelit$9,b.getUrl()))})};AbstractAppChisel.prototype._getDrumsProgram=function(){return"mounted showDeleteFileConfirmDialogCommand shift+backspace Delete Program\npanel createNewBlankProgramCommand ctrl+n New Flow Program\npanel toggleHelpCommand ? Help\nmounted closeMountedProgramCommand ctrl+w Close focused program\npanel closeAllProgramsCommand ctrl+shift+w Close all programs\npanel toggleThemeCommand shift+t Toggle Theme\nmounted createNewFlowVisProgramCommand shift+v Flow Code Editor\npanel createMiniMapCommand shift+m Mini Map\nmounted executeProgramCommand shift+e Execute Code\nmounted selectAllCommand command+a Select All\npanel openFocusedPanelSearchCommand command+p\nmounted toggleLayoutCommand shift+l Toggle layout\nmounted mountPreviousProgramCommand shift+left Previous program\nmounted mountNextProgramCommand shift+right Next program\nmounted selectNextCommand shift+down Select next\nmounted selectPreviousCommand shift+up Select previous\npanel toggleSourceGutterCommand shift+u Edit Source\npanel toggleFullScreenCommand shift+f Toggle Full Screen\npanel toggleFocusedModeCommand command+shift+f Toggle Focused Mode\npanel toggleSourceEditorCommand ctrl+u Edit Source\nmounted deleteSelectionCommand backspace Delete Selection\nmounted saveProgramAndNotifyCommand command+s Save Program\nmounted showTabRenamePromptCommand ctrl+shift+r Rename File\npanel toggleAutoSaveCommand shift+s Toggle autosave\nmounted fetchAndReloadFocusedProgramCommand shift+r Re-download and refresh program\nmounted duplicateSelectionCommand command+d Duplicate Selection\nmounted toggleNodePickerCommand shift+p Edit node\nmounted buildProgramCommand shift+b Build program\nmounted saveCompiledCommand command+shift+b\nmounted undoFocusedProgramCommand command+z Undo\nmounted redoFocusedProgramCommand command+shift+z Redo\npanel openManyPrompt command+shift+o Open multiple programs from regex\npanel deleteAllProgramsPrompt command+shift+d Delete all open programs\npanel _runSpeedTestCommand ctrl+shift+m\npanel openUrlPromptCommand shift+o Open program from url\npanel closeModalCommand escape Close any open modal\nmounted cloneProgramCommand ctrl+shift+n Clone program"};
AbstractAppChisel.prototype.buildProgramCommand=function(){return this.toggleAndRender("buildProgramModal")};AbstractAppChisel.prototype.toggleNodePickerCommand=function(){return this.toggleAndRender("nodePickerModal")};AbstractAppChisel.prototype.undoFocusedProgramCommand=function(){return this.getMountedProgram().undoCommand()};AbstractAppChisel.prototype.redoFocusedProgramCommand=function(){return this.getMountedProgram().redoCommand()};AbstractAppChisel.prototype._getMousetrap=function(){return this.getWillowDocument().getMousetrap()};
AbstractAppChisel.prototype.closeModalCommand=function(){this.closeModal();return Promise.resolve()};
AbstractAppChisel.prototype._bindKeyboardShortcuts=function(){var a=this._getMousetrap(),b=this.getWillowDocument();a._originalStopCallback=a.prototype.stopCallback;a.prototype.stopCallback=function(c,e,f){var d=b.getStumpFromElement(e);return d&&"command+s"===f&&d.stumpHasClass("savable")?(d.getShadow().triggerShadowEvent(ShadowEvents.change),c.preventDefault(),!0):a._pause?!0:a._originalStopCallback.call(this,c,e)};var c=this;this.getKeyboardShortcuts().getChildren().forEach(function(b){a.bind(b.getKeyCombo(),
function(a){b.execute(c);a.preventDefault&&a.preventDefault();return!1})})};AbstractAppChisel.prototype.executeCommandLine=function(a){this.logCommand(a.join(" "));return this[a[0]](a[1],a[2],a[3])};AbstractAppChisel.prototype.pauseShortcutListener=function(){this._getMousetrap()._pause=!0};AbstractAppChisel.prototype.resumeShortcutListener=function(){this._getMousetrap()._pause=!1};AbstractAppChisel.prototype.getStore=function(){return this.getWillowDocument().getStore()};
AbstractAppChisel.prototype.getStoreKeys=function(){var a=this.constructor.name,b=a.length,c=[];this.getStore().each(function(d,e){e.startsWith(a)&&c.push(e.substr(b))});return c};AbstractAppChisel.prototype.getFromStore=function(a){return this.getStore().get(this.constructor.name+a)};AbstractAppChisel.prototype.storeValue=function(a,b){return this.getStore().set(this.constructor.name+a,b)};AbstractAppChisel.prototype.removeValue=function(a){return this.getStore().remove(this.constructor.name+a)};
AbstractAppChisel.prototype.clearStoreCommand=function(){if(this.getStore().disabled)return Promise.resolve();this.getStore().clearAll();return Promise.resolve()};AbstractAppChisel.prototype._makeDocumentCopyableAndCuttable=function(){var a=this;a.getWillowDocument().setCopyHandler(function(b){return a.copySelectionCommand(b)}).setCutHandler(function(b){return a.cutSelectionCommand(b)})};AbstractAppChisel.prototype.copySelectionCommand=function(a){return this.getMountedProgram().copySelection(a)};
AbstractAppChisel.prototype.cutSelectionCommand=function(a){return this.getMountedProgram().cutSelection(a)};AbstractAppChisel.prototype._handleLinkClick=function(a,b){var c=a.getStumpAttr("href");if(c&&!a.getStumpAttr("target")&&(b.preventDefault(),Util.isExternalLink(c,this.getWillowDocument().getHostname())))return this.openExternalLink(c),!1};AbstractAppChisel.prototype.saveProgramAndNotifyCommand=function(){var a=this,b=this.getMountedProgram();b.forceSaveToDisk().then(function(){a.renderApp()}).catch(function(a){b.handleProgramError(a)})};
AbstractAppChisel.prototype.prompt=function(a,b){return Promise.resolve(prompt(a,b))};AbstractAppChisel.prototype.confirm=function(a){return Promise.resolve(confirm(a))};AbstractAppChisel.prototype.openExternalLink=function(a){this.getWillowDocument().openUrl(a)};AbstractAppChisel.prototype.cloneProgramCommand=function(){var a=this.getMountedProgram();return this.createAndOpen(a.childrenToString(),a.getFileName())};
AbstractAppChisel.prototype._makeWindowDroppable=function(){var a=this,b=a.getWillowDocument(),c=function(b,c){c=_.upperFirst(Format.toTitleCase(Format.removeFileExtension(c)));c=Format.permalink(c);b=(new TreeNotation(b)).toString();return a.createAndOpen(">data\n content "+b+"\n >table\n >scatter",c)},d=function(a,b,c){b=b||"";a.isFile?a.file(function(a){console.log("File:",b+a.name);e(b,a,c)}):a.isDirectory&&a.createReader().readEntries(function(c){for(var e=0;e<c.length;e++)d(c[e],b+a.name+"/")})},
e=function(a,b,c){var d=b.name.match(/\.([^\.]+)$/);if(!d)return!1;d=d[1].toLowerCase();d.match(/(csv|json|tree|txt|tsv|ssv)/)?(a=new FileReader,a.onload=function(a){a=(new CardParser).parse(a.target.result,d);console.log("Processed "+a.length+" cards");c&&c(a,b.name)},a.onerror=function(a){return console.error("error: ",a)},a.readAsText(b)):console.log("No matching file extension found")},f=function(b,e){for(var f=0;f<b.length;f++){var g=b[f].webkitGetAsEntry();e?d(g,null,function(b){var c=a.getMountedProgram();
c&&(c.concat(a.makeDataBlock(b)),c.autosaveProgram(),a.renderApp())}):g&&d(g,null,c)}};(function(){var a=b.getBodyStump(),c=a.getShadow(),d=function(a){a=a.originalEvent;var b=a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect="move"===b||"linkMove"===b?"move":"copy"},e=function(b){b.preventDefault();b.stopPropagation();a.removeClassFromStump("dragOver");a.findStumpByChild("id dragOverHelp").removeStump();c.offShadowEvent(ShadowEvents.dragleave,e)};c.onShadowEvent(ShadowEvents.dragover,function(b){d(b);
b.preventDefault();b.stopPropagation();a.stumpHasClass("dragOver")||(a.insertChildNode("@ div\n id dragOverHelp\n content "+Say($jscomp$templatelit$10)),a.addClassToStump("dragOver"),setTimeout(function(){c.onShadowEvent(ShadowEvents.dragleave,e)},50))});c.onShadowEvent(ShadowEvents.drop,function(b){b.preventDefault();b.stopPropagation();a.removeClassFromStump("dragOver");a.findStumpByChild("id dragOverHelp").removeStump();f(b.originalEvent.dataTransfer.items,b.shiftKey)});c.onShadowEvent(ShadowEvents.dragenter,
function(a){a.preventDefault();a.stopPropagation()})})()};AbstractAppChisel.prototype.getRenderedBlocks=function(){return this.getMountedProgram().getDescendantBlocks().filter(function(a){return a.isMounted()})};AbstractAppChisel.prototype._createProgramFromPaste=function(a){return this.createAndOpen(a,"untitled.flow")};AbstractAppChisel.prototype.pasteCommand=function(a){var b=this.getMountedProgram();return b?b.appendFromPaste(a):this._createProgramFromPaste(a)};
AbstractAppChisel.prototype._makeWindowResizable=function(){var a=this;a.getWillowDocument().setResizeEndHandler(function(b){a.renderApp()})};AbstractAppChisel.prototype._makeWindowPastable=function(){var a=this,b=a.getWillowDocument();b.setPasteHandler(function(c){if(b.someInputHasFocus())return!0;c.clipboardData&&c.clipboardData.getData&&a.pasteCommand(c.clipboardData.getData("text/plain"))})};AbstractAppChisel.prototype.setMouseEvent=function(a){this._mouseEvent=a;return this};
AbstractAppChisel.prototype.getMouseEvent=function(){return this._mouseEvent};
AbstractAppChisel.prototype._runSpeedTestCommand=function(){var a=this,b=this.getCaddies().map(function(a){return a.getCaddyLink()}),c=Date.now(),d=Util.pLimit(7),e=this.getFocusedPanel(),b=b.map(function(b){return d(function(){return a.openUrlInNewSpace(b).then(function(a){var b=e.getMountedProgram();e.setMountedProgram(a);b&&e.closeProgram(b);return a.getProgramStats()})})});return Promise.all(b).then(function(b){e.getMountedProgram()&&a.closeMountedProgramCommand();b=new TreeNotation(b);var d=
Date.now()-c,d="Program Load Times "+moment().format("MM/DD/YYYY")+" version "+a.getVersion()+". Run time: "+d;return a.createAndOpen(SpeedTestTemplate(d,b.toCsv()),"program-load-times")})};AbstractAppChisel.prototype.executeCommandOnFirstSelectedBlock=function(a,b,c){return this.getMountedProgram().getFirstSelectedBlock()[a](b,c)};AbstractAppChisel.prototype.toggleShadowById=function(a){this.getWillowDocument().findStumpByChild("id "+a).getShadow().toggleShadow()};
AbstractAppChisel.prototype.getStumpString=function(){return this.getWillowDocument().getHtmlStump().toString()};AbstractAppChisel.prototype._makeProgramLinksOpenImmediately=function(){var a=this,b=this.getWillowDocument();b.getBodyStump().getShadow().onShadowEvent(ShadowEvents.click,"a",function(c){a._handleLinkClick(b.getStumpFromElement(this),c)})};
AbstractAppChisel.prototype.executeStumpCommand=function(a,b){var c=a.getStumpChisel(),d=a.getShadow(),d=a.isStumpCheckbox()?d.isShadowChecked()?!0:!1:a.getStumpAttr("contenteditable")?d.getShadowHtml():d.getShadowValue()?d.getShadowValue():a.getStumpAttr("value");a=a.getStumpAttr("name");this.logCommand([b,d,a].filter(function(a){return a}).join(" "));this.closeAllContextMenus();this.closeAllDropDownMenusCommand();var e=b.split(" ");b=e.shift();var e=e.shift(),f;"block"===b?f=c.getChildBlock():"context"===
b?f=this.getTargetNode():"app"===b?f=this:"chisel"===b&&(f=c);return f[e](d,a)};AbstractAppChisel.prototype.executeStumpCommandByStumpId=function(a,b){return this._executeStumpCommandByStumpChild(a,"id "+b)};AbstractAppChisel.prototype.executeStumpCommandByStumpClass=function(a,b){return this._executeStumpCommandByStumpChild(a,"class "+b)};AbstractAppChisel.prototype._executeStumpCommandByStumpChild=function(a,b){b=this.getWillowDocument().findStumpByChild(b);return this.executeStumpCommand(b,b.getStumpAttr(a))};
AbstractAppChisel.prototype._setBodyShadowHandlers=function(){var a=this,b=this.getWillowDocument(),c=b.getBodyStump().getShadow(),d=function(c,d,g){c=b.getStumpFromElement(c);g.preventDefault();g.stopImmediatePropagation();a.executeStumpCommand(c,c.getStumpAttr(d));return!1};c.onShadowEvent(ShadowEvents.contextmenu,"[data-onContextMenuCommand]",function(b){if(b.ctrlKey)return!0;a.setMouseEvent(b);return d(this,"data-onContextMenuCommand",b)});c.onShadowEvent(ShadowEvents.change,"[data-onChangeCommand]",
function(a){return d(this,"data-onChangeCommand",a)});c.onShadowEvent(ShadowEvents.blur,"[data-onBlurCommand]",function(a){return d(this,"data-onBlurCommand",a)});c.onShadowEvent(ShadowEvents.click,"[data-onClickCommand]",function(a){return d(this,"data-onClickCommand",a)});c.onShadowEvent(ShadowEvents.dblclick,"[data-onDblClickCommand]",function(b){if(b.target!==b.currentTarget)return!0;a.setMouseEvent(b);return d(this,"data-onDblClickCommand",b)});c.onShadowEvent(ShadowEvents.click,"[data-onShiftClickCommand]",
function(b){if(!b.shiftKey||b.target!==b.currentTarget)return!0;a.setMouseEvent(b);return d(this,"data-onShiftClickCommand",b)})};window.AbstractAppChisel=AbstractAppChisel;var AbstractCaddy=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(AbstractCaddy,TreeNotation);AbstractCaddy.prototype.getCaddyLink=function(){return this.getLine()};AbstractCaddy.prototype.getCaddyContent=function(){return this.childrenToString()};
AbstractCaddy.prototype.toCaddyObject=function(){return{link:this.getCaddyLink(),content:this.getCaddyContent()}};window.AbstractCaddy=AbstractCaddy;var AbstractModalChisel=function(a){return Chisel.apply(this,arguments)||this};$jscomp.inherits(AbstractModalChisel,Chisel);AbstractModalChisel._mountedComponents=Chisel._mountedComponents;
AbstractModalChisel.prototype.getHakon=function(){var a=this.getTheme();return Chisel.prototype.getHakon.call(this)+"\n.monospaceModal\n font-family Courier, monospace\n white-space pre\n "+a.enableTextSelect(2)+"\n >div\n  max-height 600px\n  overflow scroll\n input\n  display block\n  width 100%\n textarea\n  width 100%\n  display block\n  min-height 200px\n  font-size 14px\n  font-family Courier, monospace\n\n.modalBackground\n position fixed\n top 0\n left 0\n width 100%\n height 100%\n z-index 1000\n display flex\n padding-top 50px\n align-items baseline\n justify-content center\n box-sizing border-box\n background "+
a.modalDimmerBackground+"\n\n.modalContent\n background "+a.contextMenuBackground+"\n color "+a.foregroundColor+"\n box-shadow 0px 0px 2px "+a.boxShadow+"\n padding 20px\n position relative\n min-width 600px\n max-width 800px\n max-height 90%\n white-space nowrap\n text-overflow ellipsis\n overflow-x hidden\n overflow-y scroll\n textarea\n  margin-bottom 10px\n  white-space pre\n pre\n  "+a.enableTextSelect(1)+"\n\n.modalClose\n position absolute\n top 10px\n right 10px\n cursor pointer"};
AbstractModalChisel.prototype.getModalBray=function(){return""};AbstractModalChisel.prototype.getBray=function(){return"@ section\n data-onClickCommand chisel _confirmAndUnmountCommand\n class modalBackground\n @ section\n  data-onClickCommand chisel _stopPropagationCommand\n  class modalContent\n  @ a\n   data-onClickCommand chisel _confirmAndUnmountCommand\n   class modalClose\n   content X"+Util.indentIf(this.getModalBray(),2)};AbstractModalChisel.prototype.hasChanges=function(){return!1};
window.AbstractModalChisel=AbstractModalChisel;var AbstractProgramChisel=function(a){return AbstractProgramNodeChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractProgramChisel,AbstractProgramNodeChisel);AbstractProgramChisel._mountedComponents=AbstractProgramNodeChisel._mountedComponents;AbstractProgramChisel.prototype.isProvider=function(){return!0};AbstractProgramChisel.prototype.getProgramOfInterest=function(){return this};AbstractProgramChisel.prototype.getParser=function(){return this.getApp().getParserFromETNConstructorName(this.constructor.name)};
AbstractProgramChisel.prototype.getTopNodeTypes=function(){var a=this.getParser().getChildren().slice(0);a.sort(Util.sortByAccessor(function(a){return a.findBeam(BlockConstants.percentage)}));a.reverse();return a.slice(0,20).map(function(a){return a.getBase()})};AbstractProgramChisel.prototype.isProgram=function(){return!0};AbstractProgramChisel.prototype.getProgramTypeString=function(){return this.getChildrenByNodeType(AbstractBlockChisel).map(function(a){return a.toTypeString()}).join("\n")};
AbstractProgramChisel.prototype.executeLoadProgramCode=function(){var a=this.getParser(),b=_.uniq(this.getDescendantBlocks().map(function(a){return a.getBase()}));return Promise.all(b.map(function(b){return a.loadBlockCode(b)}))};AbstractProgramChisel.prototype.executeLoadProgramCodeAndData=function(){var a=this;return this.executeLoadProgramCode().then(function(){return Promise.all(a.getChildBlocks().map(function(a){return a.executeLoadNewBinder()}))})};
AbstractProgramChisel.prototype.getBlockDimensionMap=function(a,b){return(new (this._getLayoutStrategyClass())(this,a,b)).makeBlockDimensionMap()};AbstractProgramChisel.prototype._getLayoutStrategyClass=function(){return LayoutStrategies[this.findBeam(">settings layout")]||LayoutStrategies.custom};AbstractProgramChisel.prototype.getProgramDimension=function(){var a=this.getApp().getWillowDocument().getBodyStump().getShadow();return{width:a.getShadowWidth()-this.getParent().getGutterWidth(),height:a.getShadowHeight()}};
AbstractProgramChisel.prototype.getSelectedBlocks=function(){return this.getDescendantBlocks().filter(function(a){return a.isSelected()})};AbstractProgramChisel.prototype.clearSelection=function(){this.getSelectedBlocks().forEach(function(a){return a.unselect()})};AbstractProgramChisel.prototype.selectAll=function(){this.getDescendantBlocks().forEach(function(a){return a.selectBlock()})};AbstractProgramChisel.prototype.getFirstSelectedBlock=function(){return this.getSelectedBlocks()[0]};
AbstractProgramChisel.prototype.selectNext=function(){for(var a=this.getFirstSelectedBlock().getNext();!a.getBase().startsWith(">");)a=this.getFirstSelectedBlock().getNext();this.clearSelection();a.selectBlock();return Promise.resolve()};AbstractProgramChisel.prototype.copySelection=function(a){a=this._copySelection(a);if(!a)return Promise.resolve();this.getApp().logMessage(Say($jscomp$templatelit$11));return Promise.resolve(a)};
AbstractProgramChisel.prototype._copySelection=function(a){var b=this.getApp().getWillowDocument();if(b.someInputHasFocus())return"";var c=this.selectionToString();if(!c)return"";b.setCopyData(a,c);return c};AbstractProgramChisel.prototype.selectionToString=function(){return this.getSelectedBlocks().map(function(a){return a.toString()}).join("\n")};AbstractProgramChisel.prototype.selectBlocksByShadowClass=function(a){a=void 0===a?"ui-selected":a;this.getApp().getWillowDocument().findStumpsByShadowClass(a).forEach(function(a){return a.getStumpChisel().selectBlock()})};
AbstractProgramChisel.prototype._getPinChangeInPixels=function(a,b){return{left:a.offset.left-b.left,top:a.offset.top-b.top}};AbstractProgramChisel.prototype.cutSelection=function(a){a=this._copySelection(a);if(!a)return Promise.resolve();this.deleteSelection();this.getApp().logMessage(Say($jscomp$templatelit$12));return Promise.resolve(a)};
AbstractProgramChisel.prototype.deleteSelection=function(){var a=this.getSelectedBlocks();if(!a.length)return Promise.resolve();a.forEach(function(a){return a.unmountAndDestroy()});return this.autosaveAndRender()};AbstractProgramChisel.prototype.duplicateSelection=function(){var a=this,b=this.getSelectedBlocks().map(function(b){return a.cloneBlock(b)}),c=this.autosaveAndRender();this.clearSelection();b.forEach(function(a){return a.selectBlock()});return c};
AbstractProgramChisel.prototype.selectPrevious=function(){for(var a=this.getFirstSelectedBlock().getPrevious();!a.getBase().startsWith(">");)a=this.getFirstSelectedBlock().getPrevious();this.clearSelection();a.selectBlock();return Promise.resolve()};
AbstractProgramChisel.prototype.appendFromPaste=function(a){var b=this,c=this.concat(a).filter(function(a){return a instanceof AbstractBlockChisel});a=this.autosaveAndRender();this.clearSelection();return a.then(function(){return b.executeLoadProgramCodeAndData().then(function(){c.forEach(function(a){return a.selectBlock()})}).catch(function(a){console.error(a);debugger})})};
AbstractProgramChisel.prototype.getDiskFolder=function(){var a=(this.isFolder()?this.getUrl():this.getFolder())||"/";return require("path").normalize(a.replace("file://",""))};AbstractProgramChisel.prototype.getFolder=function(){var a=this.getUrl().split("/");a.pop();return a.join("/")};AbstractProgramChisel.prototype.setLayout=function(a){this.touchNode(">settings layout").setBeam(a);return this};
AbstractProgramChisel.prototype.cloneBlock=function(a){var b=a.duplicate();(a=a.findBeam(BlockConstants.pin))&&b.touchNode(BlockConstants.pin).setBeam(this.getAvailableSpot(a));return b};AbstractProgramChisel.prototype.updateCustomPoint=function(){return this._updateCustomLayout()};AbstractProgramChisel.prototype.updateCustomPointWithWidthAndHeight=function(){return this._updateCustomLayout(!0)};
AbstractProgramChisel.prototype._updateCustomLayout=function(a){a=void 0===a?!0:a;var b=this,c=this.getApp();c.getWillowDocument().findStumpsWithClass("BlockChisel").forEach(function(c){return b._updateBlockLayout(c,a)});this.setLayout("custom");this.autosaveProgram();c.renderApp()};
AbstractProgramChisel.prototype._updateBlockLayout=function(a,b){var c=a.getShadow(),d=a.getStumpChisel();if(d.isVisible()){var e=c.getShadowOffset(),f=this.getGridSize();a=a.getParent().getShadow().getShadowOffset();c=[Math.floor((e.left-a.left)/f),Math.floor((e.top-a.top)/f),Math.floor(c.getShadowWidth()/f),Math.floor(c.getShadowHeight()/f)];b=b?c:c.slice(0,2);d.delete(BlockConstants.pin);d.prepend(BlockConstants.pin+" "+b.join(" "))}};
AbstractProgramChisel.prototype.getAvailableSpot=function(a){a=a.split(" ").map(function(a){return parseInt(a)});a[0]++;a[1]++;return a.join(" ")};AbstractProgramChisel.prototype.toggleLayout=function(){var a=this.toggle(">settings layout",["custom","bin","tree"]);this.getDescendantBlocks().forEach(function(a){return a.makeDirty()});this.getApp().logMessage(Say($jscomp$templatelit$13,a));return this.autosaveAndRender()};AbstractProgramChisel.prototype.getGridSize=function(){return 20};
AbstractProgramChisel.prototype.setIsFolder=function(a){this._isFolder=a;return this};AbstractProgramChisel.prototype._getLongestLoadTime=function(){return this.getDescendantBlocks().map(function(a){return a.getTTL()}).sort().reverse()[0]};AbstractProgramChisel.prototype._getLongestRenderTime=function(){return this.getDescendantBlocks().map(function(a){return a.getNewestTimeToRender()}).sort().reverse()[0]};AbstractProgramChisel.prototype.isFolder=function(){return!0===this._isFolder};
AbstractProgramChisel.prototype.getDiskPath=function(){var a=this.getDiskFolder()+"/"+this.getFileName();return require("path").normalize(a.replace("file://",""))};AbstractProgramChisel.prototype.handleProgramError=function(a){console.error(a)};AbstractProgramChisel.prototype.isThrowaway=function(){return!0===this._throwaway};AbstractProgramChisel.prototype.setThrowaway=function(a){this._throwaway=a;return this};
AbstractProgramChisel.prototype.autosaveAndRender=function(){var a=this.autosaveProgram();this.getApp().renderApp();return a};AbstractProgramChisel.prototype.autosaveProgram=function(){var a=this.childrenToString(),b=this._getTopUndoVersion();if(a===b)return Promise.resolve();this._recordChange(a);return this.getApp().isAutoSaveEnabled()?this.forceSaveToDisk():Promise.resolve()};AbstractProgramChisel.prototype._clearRedoStack=function(){var a=this._getRedoStack();a.splice(0,a.length)};
AbstractProgramChisel.prototype._recordChange=function(a){this._clearRedoStack();this._getUndoStack().push(a)};AbstractProgramChisel.prototype.forceSaveToDisk=function(){var a=this._getDiff();this.setHash(a.newHash);this._setDiskVersion(a.newVersion);return this.getApp().saveProgramToDisk(this,a).catch(function(a){throw new ProgramSaveError(a);})};AbstractProgramChisel.prototype._getDiskVersion=function(){return this._diskVersion};
AbstractProgramChisel.prototype._setDiskVersion=function(a){this._diskVersion=a;return this};AbstractProgramChisel.prototype._getUndoStack=function(){this._undoStack||(this._undoStack=[]);return this._undoStack};AbstractProgramChisel.prototype._getRedoStack=function(){this._redoStack||(this._redoStack=[]);return this._redoStack};AbstractProgramChisel.prototype._getTopUndoVersion=function(){var a=this._getUndoStack();return a[a.length-1]};
AbstractProgramChisel.prototype.undoCommand=function(){var a=this._getUndoStack(),b=this._getRedoStack();if(1===a.length)return Promise.resolve();b.push(a.pop());return this._reloadFromUndoTop()};AbstractProgramChisel.prototype._reloadFromUndoTop=function(){this.unmount();this.setChildren(this._getTopUndoVersion());return this._reloadProgram()};AbstractProgramChisel.prototype.autosaveAndReloadWith=function(a){this.unmount();this.setChildren(a);this.autosaveProgram();return this._reloadProgram()};
AbstractProgramChisel.prototype._reloadProgram=function(){var a=this;return this.executeLoadProgramCodeAndData().then(function(){a.getParent().setMountedProgram(a);a.getApp().renderApp()})};AbstractProgramChisel.prototype.redoCommand=function(){var a=this._getUndoStack(),b=this._getRedoStack();if(!b.length)return Promise.resolve();a.push(b.pop());return this._reloadFromUndoTop()};AbstractProgramChisel.prototype.hasUnsavedChanges=function(){return this.childrenToString()!==this._getDiskVersion()};
AbstractProgramChisel.prototype.getHash=function(){return this._hash||""};AbstractProgramChisel.prototype.setHash=function(a){this._hash=a};AbstractProgramChisel.prototype._getDiff=function(){var a=this.getHash(),b=this.childrenToString(),c=this._getDiskVersion(),c=diff.compareStr(c,b,"\n"),d=new jsSHA("SHA-1","TEXT");d.update(a+JSON.stringify(c));d=d.getHash("HEX");return{oldHash:a,newHash:d,patch:c,newVersion:b}};
AbstractProgramChisel.prototype.setChildrenAndDiskAndUndoStack=function(a){this.setChildren(a);this._setDiskVersion(a);this._getUndoStack().push(a);return this};AbstractProgramChisel.prototype.getFileName=function(){return this.getUrl().split("/").pop()};AbstractProgramChisel.prototype.getUrl=function(){return this.getBeam()};AbstractProgramChisel.prototype.getCTime=function(){return this._ctime||0};
AbstractProgramChisel.prototype.getHakon=function(){var a=this.getTheme(),b=this.getParent().getGutterWidth();return".AbstractProgramChisel\n background "+a.surfaceBackground+"\n position relative\n left "+b+"px\n right 0\n bottom 0\n height calc(100% - 60px)\n\n.ui-selectable-helper\n position absolute\n z-index 100\n border-radius 2px\n background "+a.selectionBackground+"\n\n.ui-selecting,.ui-selected,.StaySelected\n outline 3px solid "+a.selectedOutline};
AbstractProgramChisel.prototype.makePin=function(a){var b=this.getGridSize();return[Math.floor((a.offsetX-0)/b),Math.floor(a.offsetY/b)].join(" ")};AbstractProgramChisel.prototype.componentDidUpdate=function(){this._fixBigBug()};
AbstractProgramChisel.prototype._fixBigBug=function(){var a={"min-height":"","min-width":"",width:"",height:""},b=this.getApp(),c=this.getStump(),d=c.getParent(),e=b.getWillowDocument(),f=e.getHtmlStump(),b=(b=b.getMenuChisel())&&b.getStump();c.setStumpCss(a);d.setStumpCss(a);f.setStumpCss(a);e.forceRepaint();e=e.getDocumentSize();b&&b.setStumpCss(a);f.setStumpCss(a);a=e.width;e=e.height;b&&b.setStumpCss({width:a});f.setStumpCss({"min-height":"100%","min-width":"100%",width:a,height:e});f={"min-height":e-
60+"px","min-width":a+"px"};d.setStumpCss(f);c.setStumpCss(f)};AbstractProgramChisel.prototype.componentDidMount=function(){this._makeSelectable();this._makeBlocksMoveableAndResizableAndEditable();this._fixBigBug()};
AbstractProgramChisel.prototype._makeSelectable=function(){var a=this.getApp(),b=this.getStump().getShadow(),c=a.getWillowDocument();b.onShadowEvent(ShadowEvents.click,function(b){b.target===this&&a.getWillowDocument().someInputHasFocus()&&c.getFocusedShadow().triggerShadowEvent(ShadowEvents.blur)});b.makeSelectable({cancel:".BlockChisel",distance:10,filter:".BlockChisel",start:function(b){b.shiftKey?c.findStumpsWithClass("ui-selected").forEach(function(a){return a.addClassToStump("StaySelected")}):
a.clearSelectionCommand()},stop:function(){c.findStumpsWithClass("StaySelected").forEach(function(a){return a.addClassToStump("ui-selected").removeClassFromStump("StaySelected")});a.selectBlocksByShadowClassCommand();return!0}})};AbstractProgramChisel.prototype.getAllCards=function(){return _.flatten(this.getDescendantBlocks().map(function(a){return a.isProvider()?a.getOutputBinder().getCards():[]}))};
AbstractProgramChisel.prototype.getProgramCardCount=function(){return this.getAllCards().reduce(function(a,b){return a+b.length},0)};AbstractProgramChisel.prototype.getProgramStats=function(){var a=this.getDescendantBlocks(),b=a.map(function(a){return a.getErrorCount()}).reduce(function(a,b){return a+b},0);return{blocks:a.length,cards:this.getProgramCardCount(),url:this.getFileName(),timeToLoad:this._getLongestLoadTime(),timeToRender:this._getLongestRenderTime(),errorCount:b}};
AbstractProgramChisel.prototype.shouldComponentMount=function(){return AbstractProgramNodeChisel.prototype.shouldComponentMount.call(this)&&this.getParent().getMountedProgram()===this};
AbstractProgramChisel.prototype._makeBlocksMoveableAndResizableAndEditable=function(){var a=this.getApp(),b=a.getWillowDocument(),c=this,d=this.getGridSize();this.getStump().getShadow().onShadowEvent(ShadowEvents.mouseover,".BlockChisel",function(e){e=b.getStumpFromElement(this);var f=e.getShadow();if(f.isShadowResizable())return!0;c._makeGroupDraggable(e,[d,d]);f.makeResizable({handles:"se",grid:d,resize:function(a){a.stopPropagation();a.preventDefault();return!1},stop:function(){return a.getMountedProgram().updateCustomPointWithWidthAndHeight()}})})};
AbstractProgramChisel.prototype.getContextMenuCommandsBray=function(){return"@ a\n tabindex -1\n data-onClickCommand app saveCompiledCommand\n content Save compiled '"+this.compilesTo()+"' file"};AbstractProgramChisel.prototype.getBray=function(){return"@ div\n class AbstractProgramChisel "+this.constructor.name+"\n data-onContextMenuCommand chisel _openProgramContextMenuCommand\n data-onDblClickCommand app insertMorphBlockCommand\n data-onShiftClickCommand app insertMorphBlockCommand"};
AbstractProgramChisel.prototype._openProgramContextMenuCommand=function(){return this.getApp().toggleAndRender("programContextMenu")};AbstractProgramChisel.prototype._getSelectedBlockStumps=function(){return this.getApp().getWillowDocument().findStumpsWithClass("ui-selected")};
AbstractProgramChisel.prototype.updateSelectedOnMove=function(a,b){var c=this._getSelectedBlockStumps();c.length&&c.filter(function(b){return b!==a}).forEach(function(a){var c=parseFloat(a.getStumpCss("top")),d=parseFloat(a.getStumpCss("left"));a.setStumpCss({transform:"",top:c+b.top+"px",left:d+b.left+"px"})})};
AbstractProgramChisel.prototype._makeGroupDraggable=function(a,b){if(a.stumpHasClass("draggable"))return!0;var c,d=this,e=this.getApp(),f={stop:function(b,f){a.removeClassFromStump("noTransition");a.setStumpAttr("data-translate","undefined undefined");b=d._getPinChangeInPixels(f,c);d.updateSelectedOnMove(a,b);c=f;e.getMountedProgram().updateCustomPoint()},handle:".BlockGrabber",drag:function(b,e){if(a.stumpHasClass("ui-selected")){var f=d._getPinChangeInPixels(e,c);d._getSelectedBlockStumps().filter(function(b){return b!==
a}).forEach(function(a){return a.setStumpCss({transform:"translate("+f.left+"px, "+f.top+"px)"})})}},start:function(b,d){c=d.offset;a.addClassToStump("noTransition");if(b=a.getStumpAttr("data-translate"))parseInt(b.split(" ")[0]),parseInt(b.split(" ")[1])}};b&&(f.grid=b);a.addClassToStump("draggable").getShadow().makeDraggable(f)};window.AbstractProgramChisel=AbstractProgramChisel;var BlockDimension=function(a,b){a=a.getSuggestedSize();this.width=a.width;this.height=a.height;Object.assign(this,b)};
BlockDimension.prototype.getScaledCss=function(a){a=void 0===a?1:a;return this._toCss({width:this.width*a,height:this.height*a,left:this.left*a,top:this.top*a})};BlockDimension.prototype.toCss=function(){return this._toCss(this)};BlockDimension.prototype._toCss=function(a){return"width: "+a.width+"px; height: "+a.height+"px; left: "+a.left+"px; top: "+a.top+"px"};window.BlockDimension=BlockDimension;var DemoPrograms="faq.flow >url faq.md\n  format text\n  visible false\n  >markdown\nreadme.flow >url readme.md\n  format text\n  visible false\n  >markdown\nreleasenotes.flow >url releasenotes.md?06232017\n  format text\n  visible false\n  >markdown\nohayo.flow >youtube 8rwsuXHA7RA\nhelloWorld.fire =fn main\n  ::$ Hello world\n >> main\nfib.fire =fn fib n\n  =< lessThan1 n 1\n  if lessThan1\n   return 0\n  =<= lessOr2 n 2\n  if lessOr2\n   return 1\n  =- oneLess n 1\n  =- twoLess n 2\n  =>> oneLessFib fib oneLess\n  =>> twoLessFib fib twoLess\n  =+ sum oneLessFib twoLessFib\n  return sum\n =>> result fib 10\n =#+ tests 0 1 2 3 4 5 6 7 8 9 10\n =.>> results tests map fib\n :: results\n >settings layout tree";
window.DemoPrograms=DemoPrograms;var GlobalShortcutNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(GlobalShortcutNode,TreeNotation);GlobalShortcutNode.prototype.getKeyCombo=function(){return this.getWord(2)};GlobalShortcutNode.prototype.getFn=function(){return this.getWord(1)};GlobalShortcutNode.prototype.getDescription=function(){return this.getWords(3).join(" ")};GlobalShortcutNode.prototype.isEnabled=function(){return!0};
GlobalShortcutNode.prototype.execute=function(a){if(!this.isEnabled(a))return!1;var b=this.getFn();a.logCommand("app "+b);a[b]()};var MountedShortcutNode=function(a){return GlobalShortcutNode.apply(this,arguments)||this};$jscomp.inherits(MountedShortcutNode,GlobalShortcutNode);MountedShortcutNode.prototype.isEnabled=function(a){return!!a.getMountedProgram()};var Drums=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(Drums,TreeNotation);
Drums.prototype.parseNodeType=function(a){if(a.startsWith("panel"))return GlobalShortcutNode;if(a.startsWith("mounted"))return MountedShortcutNode;throw Error("bad keyboard node type");};window.Drums=Drums;var BinPacker=function(){};BinPacker.prototype.fit=function(a){var b=a.length;this.root={x:0,y:0,w:0<b?a[0].w:0,h:0<b?a[0].h:0};for(var c=0;c<b;c++){var d=a[c],e=this.findNode(this.root,d.w,d.h);d.fit=e?this.splitNode(e,d.w,d.h):this.growNode(d.w,d.h)}};
BinPacker.prototype.findNode=function(a,b,c){return a.used?this.findNode(a.right,b,c)||this.findNode(a.down,b,c):b<=a.w&&c<=a.h?a:null};BinPacker.prototype.splitNode=function(a,b,c){a.used=!0;a.down={x:a.x,y:a.y+c,w:a.w,h:a.h-c};a.right={x:a.x+b,y:a.y,w:a.w-b,h:c};return a};BinPacker.prototype.growNode=function(a,b){var c=this.root,d=a<=c.w,e=b<=c.h,f=d&&c.w>=c.h+b;return e&&c.h>=c.w+a?this.growRight(a,b):f?this.growDown(a,b):e?this.growRight(a,b):d?this.growDown(a,b):null};
BinPacker.prototype.growRight=function(a,b){var c=this.root;this.root={used:!0,x:0,y:0,w:c.w+a,h:c.h,down:c,right:{x:c.w,y:0,w:a,h:c.h}};return(c=this.findNode(this.root,a,b))?this.splitNode(c,a,b):null};BinPacker.prototype.growDown=function(a,b){var c=this.root;this.root={used:!0,x:0,y:0,w:c.w,h:c.h+b,down:{x:0,y:c.h,w:c.w,h:b},right:c};return(c=this.findNode(this.root,a,b))?this.splitNode(c,a,b):null};
var AbstractLayoutStrategy=function(a,b,c){this._program=a;this._width=void 0===b?1400:b;this._height=void 0===c?1400:c};AbstractLayoutStrategy.prototype.getBlocks=function(){return this.getProgram().getDescendantBlocks().filter(function(a){return a.isVisible()})};AbstractLayoutStrategy.prototype.getHierarchy=function(){return this.getProgram().getHierarchy()};AbstractLayoutStrategy.prototype.getProgram=function(){return this._program};AbstractLayoutStrategy.prototype._getLayoutBoxWidth=function(){return this._width};
AbstractLayoutStrategy.prototype._getLayoutBoxHeight=function(){return this._height};var CustomLayout=function(a){AbstractLayoutStrategy.apply(this,arguments)};$jscomp.inherits(CustomLayout,AbstractLayoutStrategy);CustomLayout.prototype.makeBlockDimensionMap=function(){var a=this.getBlocks(),b=[],c=new Map;a.forEach(function(a,d){if(!a.getPin())return b.push(a);c.set(a,a.makeBlockDimension())});var d=0;b.forEach(function(a,b){b=a.makeBlockDimension("0 "+d);c.set(a,b);d+=b.height/20});return c};
var TreeLayout=function(a){AbstractLayoutStrategy.apply(this,arguments)};$jscomp.inherits(TreeLayout,AbstractLayoutStrategy);TreeLayout.prototype.makeBlockDimensionMap=function(){var a=d3.hierarchy(this.getHierarchy()),b=d3.tree().size([.8*this._getLayoutBoxWidth(),.8*this._getLayoutBoxHeight()]),c=new Map;b(a).descendants().forEach(function(a){var b=a.data.block;b.isProgram()||(a=new BlockDimension(b,{width:80,height:80,left:a.x,top:a.y}),c.set(b,a))});return c};
var ColumnLayout=function(a){AbstractLayoutStrategy.apply(this,arguments)};$jscomp.inherits(ColumnLayout,AbstractLayoutStrategy);ColumnLayout.prototype.makeBlockDimensionMap=function(){var a=0,b=Math.floor((this._getLayoutBoxWidth()-800)/2),c=new Map;this.getBlocks().forEach(function(d){var e=d.getSuggestedSize(),f=new BlockDimension(d,{width:800,height:e.height,left:b,top:a});c.set(d,f);a+=e.height});return c};var BinLayout=function(a){AbstractLayoutStrategy.apply(this,arguments)};
$jscomp.inherits(BinLayout,AbstractLayoutStrategy);BinLayout.prototype.makeBlockDimensionMap=function(){var a=new Map,b=this.getBlocks().map(function(a){var b=a.getSuggestedSize();return{w:b.width,h:b.height,block:a}}),b=_.sortBy(b,function(a){return Math.max(a.w,a.h)}).reverse();(new BinPacker).fit(b);b.forEach(function(b){var c=new BlockDimension(b.block,{width:b.w,height:b.h,left:b.fit.x,top:b.fit.y});a.set(b.block,c)});return a};
var LayoutStrategies={custom:CustomLayout,column:ColumnLayout,tree:TreeLayout,bin:BinLayout};window.LayoutStrategies=LayoutStrategies;var LocalStorageCaddy=function(a){return AbstractCaddy.apply(this,arguments)||this};$jscomp.inherits(LocalStorageCaddy,AbstractCaddy);window.LocalStorageCaddy=LocalStorageCaddy;function MakeSVG(a,b){var c=SVGS[a];if(!c){console.error("svg not found for "+a);debugger;return""}a=c.substr(4);return'<svg width="'+b+'" height="'+b+'" class="SVGIcon" '+a}window.MakeSVG=MakeSVG;
window.console||(window.console={log:function(){},time:function(){},error:function(){},debug:function(){}});Object.values||(Object.values=function(a){return Object.keys(a).map(function(b){return a[b]})});var StorageKeys={openPrograms:"__openPrograms",autoSave:"__autoSave",theme:"__theme",visitCount:"__visitCount",newUser:"__newUser",mountedProgram:"__mountedProgram"},_storageKeysmap={};Object.values(StorageKeys).forEach(function(a){_storageKeysmap[a]=!0});StorageKeys.isKey=function(a){return _storageKeysmap[a]};
window.StorageKeys=StorageKeys;
var Theme=function(a){var b=a=void 0===a?{}:a,c=void 0===b.backgroundColor?"rgb(255,255,255)":b.backgroundColor,d=void 0===b.foregroundColor?"black":b.foregroundColor,e=void 0===b.fn?"lighten":b.fn,b=void 0===b.selectionColor?"rgb(42, 89, 178)":b.selectionColor;this.blockBackgroundColor=this.contextMenuBackground=this.surfaceBackground=this.bodyBackground=this.programsBackground=this.tabBackground=this.menuBackground=this.backgroundColor=c;this.foregroundColor=this.menuChiselColor=d;this.lineColor=
tinycolor(d).setAlpha(.075).toString();this.boxShadow=tinycolor(d).setAlpha(.1).toString();this.darkerBackground=tinycolor(c).darken(10).toString();c=function(a){return tinycolor(d)[e](a).toString()};this.darkBlack=c(20);this.bodyColor=this.mediumBlack=c(40);this.midGray=c(60);this.greyish=c(82);this.lightGrey=c(93);this.veryLightGrey=c(97);this.borderColor=this.greyish;this.linkColor=this.hoverBackground=b;this.selectedOutline=tinycolor(b).setAlpha(.8).toString();this.selectionBackground=tinycolor(b).setAlpha(.1).toString();
this.errorColor="rgb(226, 120, 121)";this.successColor="#4CAF50";this.white="#fff";this.fonts="'San Francisco', 'Myriad Set Pro', 'Lucida Grande', 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif";this.modalDimmerBackground=tinycolor("#000").setAlpha(.4).toString();Object.assign(this,a)};Theme.prototype.enableTextSelect=function(a){return Theme._getIndented(a,"-moz-user-select text\n  -webkit-user-select text\n  -ms-user-select text\n  user-select text")};
Theme.prototype.getHeatColor=function(a){return"hsl(200, "+(25+75*a)+"%, "+(20+25*a)+"%)"};Theme.prototype.getTinyColor=function(){return tinycolor};Theme._getIndented=function(a,b){return b.split(/\n/g).join("\n"+" ".repeat(a))};Theme.prototype.disableTextSelect=function(a){return Theme._getIndented(a,"-webkit-touch-callout none\n-webkit-user-select none\n-khtml-user-select none\n-moz-user-select none\n-ms-user-select none\nuser-select none")};Theme.prototype.hakonToCss=function(a){return(new Hakon(a)).toCss()};
Theme.prototype.objToCss=function(a){return Object.keys(a).map(function(b){return a[b]||0===a[b]?b+": "+a[b]+";\n":""}).join("")+""};var Themes={};Themes.light=new Theme({menuBackground:"#3B539A",menuChiselColor:"white"});Themes.dark=new Theme({backgroundColor:"rgb(16, 16, 16)",foregroundColor:"#fff",fn:"darken"});
var glassColors={selectionColor:"rgba(46, 195, 212, .9)",bodyBackground:"linear-gradient(130deg, rgb(56, 114, 127), rgb(28, 98, 151) 45%, rgb(62, 73, 135))",backgroundColor:"rgba(0,0,0,.12)",contextMenuBackground:"rgba(0,0,0,.90)",blockBackgroundColor:"rgba(0,0,0,.12)",programsBackground:"transparent",boxShadow:"transparent",surfaceBackground:"transparent",borderColor:"transparent",foregroundColor:"#eee"};Themes.glass=new Theme(glassColors);glassColors.blockBackgroundColor="transparent";
Themes.clearGlass=new Theme(glassColors);window.Themes=Themes;var AbstractChartBlock=function(a){return AbstractBlockChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractChartBlock,AbstractBlockChisel);AbstractChartBlock._mountedComponents=AbstractBlockChisel._mountedComponents;AbstractChartBlock.loadCode=AbstractBlockChisel.loadCode;AbstractChartBlock.prototype.getBlockHeaderContent=function(){return this.getStruct().title||""};
AbstractChartBlock.prototype.getBlockFooterBray=function(){var a=this.getInputBinder().getCardCount();return this.getBlockToolbarButtonBray()+"\n@ span\n content In: "+a};AbstractChartBlock.prototype.toDisplayString=function(a,b){return void 0===a?"":this.getInputBinder().getBinderColumnByName(b).toDisplayString(a)};window.AbstractChartBlock=AbstractChartBlock;var AbstractCommandBlock=function(a){return AbstractBlockChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractCommandBlock,AbstractBlockChisel);
AbstractCommandBlock._mountedComponents=AbstractBlockChisel._mountedComponents;AbstractCommandBlock.loadCode=AbstractBlockChisel.loadCode;window.AbstractCommandBlock=AbstractCommandBlock;var AbstractHeaderlessChartBlock=function(a){return AbstractChartBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractHeaderlessChartBlock,AbstractChartBlock);AbstractHeaderlessChartBlock._mountedComponents=AbstractChartBlock._mountedComponents;AbstractHeaderlessChartBlock.loadCode=AbstractChartBlock.loadCode;
AbstractHeaderlessChartBlock.prototype.getBray=function(){return"@ div\n class BlockPage BlockChisel "+this.constructor.name+"\n id "+this.getId()+"\n data-onContextMenuCommand chisel _openBlockContextMenuCommand\n @ div\n  class BlockGrabber\n @ div\n  class BlockBody HeaderLess"+Util.indentIf(this.getBlockContentBray(),2)+"\n @ div\n  class BlockFooter"+Util.indentIf(this.getBlockFooterBray(),2)+"\n @ div\n  class BlockGrabber"};AbstractHeaderlessChartBlock.prototype.getHeaderHeight=function(){return 0};
window.AbstractHeaderlessChartBlock=AbstractHeaderlessChartBlock;var AbstractProviderBlock=function(a){return AbstractBlockChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractProviderBlock,AbstractBlockChisel);AbstractProviderBlock._mountedComponents=AbstractBlockChisel._mountedComponents;AbstractProviderBlock.loadCode=AbstractBlockChisel.loadCode;
AbstractProviderBlock.prototype.getBlockFooterBray=function(){var a=this.getOutputBinder().getCardCount(),b=_.round(this.getTTL()/1E3,1);return this.getBlockToolbarButtonBray()+"\n@ span\n content Out: "+a+" Time: "+b+"s "};AbstractProviderBlock.prototype.isProvider=function(){return!0};window.AbstractProviderBlock=AbstractProviderBlock;var AbstractTransformerBlock=function(a){return AbstractProviderBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractTransformerBlock,AbstractProviderBlock);
AbstractTransformerBlock._mountedComponents=AbstractProviderBlock._mountedComponents;AbstractTransformerBlock.loadCode=AbstractProviderBlock.loadCode;AbstractTransformerBlock.prototype.getBlockFooterBray=function(){var a=this.getInputBinder().getCardCount(),b=this.getOutputBinder().getCardCount();return this.getBlockToolbarButtonBray()+"\n@ span\n content In: "+a+" Out: "+b};AbstractTransformerBlock.prototype.getOutputColumnsTree=function(){return this.getNode("columns")||new TreeNotation};
AbstractTransformerBlock.prototype.fetchCards=function(){return Promise.resolve(this.transformCards())};window.AbstractTransformerBlock=AbstractTransformerBlock;var MockGoogle=function(){this.visualization={}},AbstractGoogleBase=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractGoogleBase,AbstractHeaderlessChartBlock);AbstractGoogleBase._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;AbstractGoogleBase.loadCode=AbstractHeaderlessChartBlock.loadCode;
AbstractGoogleBase.loadPackages=function(a){return"undefined"===typeof google?Promise.resolve():new Promise(function(b,c){return google.charts.load("current",{packages:a,callback:function(){return b()}})})};AbstractGoogleBase.prototype.getGoogle=function(){this._google||(this._google=this.isNode()?new MockGoogle:google);return this._google};AbstractGoogleBase.prototype.getBlockContentBray=function(){return"@ div\n class goog"};AbstractGoogleBase.prototype.getHakon=function(){return".goog\n .BlockPage\n  overflow scroll"};
AbstractGoogleBase.prototype._getGoogElement=function(){return this.getStump().findStumpByChild("class goog").getShadow().getShadowElement()};AbstractGoogleBase.prototype._getGoogleOptions=function(){var a={},b=this.getStruct();Object.assign(a,b);b=this.getBlockBodyDimension();a.width=b.width;a.height=b.height;a.backgroundColor=this.getTheme().blockBackgroundColor;return a};
AbstractGoogleBase.prototype._draw=function(){if(!this.getInputBinder().getCardCount())return"";if(!this.isNode()){var a=this._getChartClass(),b=this._getGoogElement(),a=new a(b),b=this._getGoogleOptions(),c=this._getGoogleData();a.draw(c,b)}};AbstractGoogleBase.prototype.componentDidUpdate=function(){this._draw()};AbstractGoogleBase.prototype.componentDidMount=function(){this._draw()};AbstractGoogleBase.prototype.getLabelValue=function(){return this.getSomeData(["label","value"])};
AbstractGoogleBase.prototype.getSomeData=function(a){a=this.getRequiredTableWithDates(a);return this.getGoogle().visualization.arrayToDataTable(a)};AbstractGoogleBase.prototype.getPivotTable=function(a,b,c,d){var e=this.getStruct(),f=Object.keys(b.getMap()),g=[];Object.keys(c.getMap()).forEach(function(b){var c=[b];f.forEach(function(b){var d=_.find(a,function(a){return a[e.series]==b&&a[e.card]==a});c.push(d?d[e.cell]:0)});g.push(c)});f.unshift(e.series);g.unshift(f);return g};
window.AbstractGoogleBase=AbstractGoogleBase;var AbstractGoogleCore=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(AbstractGoogleCore,AbstractGoogleBase);AbstractGoogleCore._mountedComponents=AbstractGoogleBase._mountedComponents;AbstractGoogleCore.loadPackages=AbstractGoogleBase.loadPackages;AbstractGoogleCore.loadCode=function(){return AbstractGoogleBase.loadPackages(["corechart"])};AbstractGoogleCore.prototype._getGoogleData=function(){return this.getLabelValue()};
AbstractGoogleCore.prototype._getChartClass=function(){return this.getGoogle().visualization[this.getStruct().googleClassName]};window.AbstractGoogleCore=AbstractGoogleCore;var BrayBlock=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(BrayBlock,AbstractHeaderlessChartBlock);BrayBlock._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;BrayBlock.loadCode=AbstractHeaderlessChartBlock.loadCode;
BrayBlock.prototype._updateTextCommand=function(a){a=Format.stripHtml(a.replace(/\<br\>/g,"\n").replace(/\<div\>/g,"\n"));this.touchNode("content").setBeamWithChildren(a);this.autosaveBlock();return this.getApp().render()};BrayBlock.prototype.getHakon=function(){return".BrayBlock\n overflow scroll\n p\n  padding 5px\n  width 100%\n  height 100%\n  box-sizing border-box\n  white-space pre\n  outline 0"};BrayBlock.prototype.getBlockFooterBray=function(){return this.getBlockToolbarButtonBray()};
BrayBlock.prototype.getBlockContentBray=function(){var a=this.getStruct(),b=this.getPipishInput();return"@ "+(a.element||this.getBase().substr(1))+"\n style "+a.style+"\n data-onBlurCommand chisel _updateTextCommand\n contenteditable "+(a.editable?"true":"false")+"\n content "+Util.indent(b,2)};window.BrayBlock=BrayBlock;var DumpChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(DumpChart,AbstractHeaderlessChartBlock);DumpChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;
DumpChart.loadCode=AbstractHeaderlessChartBlock.loadCode;DumpChart.prototype.getBlockContentBray=function(){return"@ div\n style overflow: scroll; width: 100%; height: 100%;\n content "+Util.indent(this.getPipishInput(),2)};window.DumpChart=DumpChart;var BaseBeamArray=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(BaseBeamArray,TreeNotation);
BaseBeamArray.prototype.toArrayMap=function(){var a={};this.getChildren().forEach(function(b){a[b.getBase()]=b.getBeam().split(" ")});return a};var HTMLChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(HTMLChart,AbstractHeaderlessChartBlock);HTMLChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;HTMLChart.loadCode=AbstractHeaderlessChartBlock.loadCode;
HTMLChart.prototype.getBlockContentBray=function(){var a=this.getStruct(),b=a.content||"",c=a.allowedTags.split(" "),a=(new BaseBeamArray(a.allowedAttributes)).toArrayMap(),b=sanitizeHtml(b,{allowedTags:sanitizeHtml.defaults.allowedTags.concat(c),allowedSchemes:["http","https","file","mailto"],allowedAttributes:a});return"@ div\n content "+Util.indent(b)};window.HTMLChart=HTMLChart;var HeatCalendarChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};
$jscomp.inherits(HeatCalendarChart,AbstractHeaderlessChartBlock);HeatCalendarChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;HeatCalendarChart.loadCode=AbstractHeaderlessChartBlock.loadCode;
HeatCalendarChart.prototype.getLegend=function(a,b,c){var d=this.getTheme();return'<g><text x="'+(c.left-25)+'" y="'+(c.top+10)+'">Less</text>'+a.map(function(a,f){f=c.left+b*f;return'<rect style="fill: '+d.getHeatColor(1-a.percent)+'" width="10" height="10" x="'+f+'" y="'+c.top+'"></rect>'}).join("")+('<text x="'+(c.left+70)+'" y="'+(c.top+10)+'">More</text></g>')};HeatCalendarChart.prototype.getHakon=function(){return".heatCal\n rect\n  fill "+this.getTheme().darkerBackground+"\n  shape-rendering crispedges\n text\n  font-size 10px\n  fill #ddd"};
HeatCalendarChart.prototype.getBlockContentBray=function(){return"@ div\n class heatCal\n style padding: 30px 10px 10px;\n content "+Util.indent(this.getSvg(),2)};
HeatCalendarChart.prototype.getSvg=function(){var a=this.getInputBinder(),b=a.getCards();if(!b.length)return"";var c=this.getStruct(),d=c.day,e=c.count;if(!d||!e)return"";a.getBinderColumnByName(d);var f=a.getBinderColumnByName(e),c=moment(Date.now()).clone().subtract(365,"days"),a=365/6*12,g=this.getTheme(),h=f.getQuintiles(),k={};b.forEach(function(a){var b=a.getCardNumeric(),c=moment(b[d]).format("MM/DD/YYYY");a:{for(var f=0;f<h.length;f++)if(b[e]<=h[f].value){b=h[f].percent;break a}b=void 0}k[c]=
{quintile:b,card:a}});for(var b=[],f=parseInt(c.format("e")),l=0;365>=l;l++){var m=c.clone().add(l,"days");b.push({day:m,row:parseInt(m.format("e")),col:Math.floor((f+l)/7)})}var c="<g>"+[{day:"Mon",row:2},{day:"Wed",row:4},{day:"Fri",row:6}].map(function(a){return'<text x="0" y="'+(20+12*a.row-3)+'">'+a.day+"</text>"}).join("")+"</g>",p={},f="<g>"+b.map(function(a){var b=a.day.format("MMM"),c=a.day.format("MM/YYYY");if(p[c])return"";p[c]=!0;return'<text x="'+(40+12*a.col)+'" y="10">'+b+"</text>"}).join("")+
"</g>",n=moment(Date.now()).format("MM/DD/YYYY"),b="<g>"+b.map(function(a){var b=a.day.format("MM/DD/YYYY"),c=20+12*a.row;a=40+12*a.col;var d=k[b],e=d?'id="t'+d.card.getPuid()+'"':"",f=b===n?"stroke-width:2;stroke:rgb(0,0,0);":"";return'<rect style="'+((d?"fill: "+g.getHeatColor(1-d.quintile):"")+";"+f)+'" '+e+' data-day="'+b+'" width="10" height="10" x="'+a+'" y="'+c+'"></rect>'}).join("")+"</g>",l=this.getLegend(h,12,{top:110,left:60});return'<svg width="'+a+'" height="184">'+(c+b+f+l)+"</svg>"};
window.HeatCalendarChart=HeatCalendarChart;var KpiChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(KpiChart,AbstractHeaderlessChartBlock);KpiChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;KpiChart.loadCode=AbstractHeaderlessChartBlock.loadCode;
KpiChart.prototype.getBlockContentBray=function(){var a=this.getStruct(),b=a.column,c=a.reduction;if(!b)return"";var d=this.getInputBinder().getBinderColumnByName(b).getReductions()[c],d=this.toDisplayString(d,b);return"@ div\n style text-align: center;\n @ div\n  style padding-top: 10px;\n  @ a\n   data-property column\n   content "+b+"\n  @ a\n   data-property reduction\n   content "+c+"\n"+(a.title?"@ h2\n content "+a.title:"")+"\n@ h1\n content "+d};window.KpiChart=KpiChart;
var ListChart=function(a){return AbstractChartBlock.apply(this,arguments)||this};$jscomp.inherits(ListChart,AbstractChartBlock);ListChart._mountedComponents=AbstractChartBlock._mountedComponents;ListChart.loadCode=AbstractChartBlock.loadCode;ListChart.prototype.getHakon=function(){return".ListChart\n ol\n  height 100%\n  width 100%\n  overflow scroll\n  box-sizing border-box\n  margin 0"};
ListChart.prototype.getBlockContentBray=function(){var a=this.getStruct(),b=a.link,c=a.label;return"@ ol\n"+this.getCardsWithStructQuery().map(function(a){var d=Strip($jscomp$templatelit$14,a.getCardValue(c));return" @ li\n  @ a\n   "+(b?"href "+Strip($jscomp$templatelit$15,a.getCardValue(b)):"")+"\n   content "+d}).join("\n")};window.ListChart=ListChart;var MarkdownChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(MarkdownChart,AbstractHeaderlessChartBlock);
MarkdownChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;MarkdownChart.loadCode=AbstractHeaderlessChartBlock.loadCode;MarkdownChart.prototype.getHakon=function(){return".MarkdownChart\n div\n  overflow scroll"};MarkdownChart.prototype.getBlockContentBray=function(){var a=this.getPipishInput();return"@ div\n content "+Util.indent(marked(a),2)};window.MarkdownChart=MarkdownChart;var MiniBlock=function(a){return AbstractChartBlock.apply(this,arguments)||this};
$jscomp.inherits(MiniBlock,AbstractChartBlock);MiniBlock._mountedComponents=AbstractChartBlock._mountedComponents;MiniBlock.loadCode=AbstractChartBlock.loadCode;
MiniBlock.prototype.getHakon=function(){var a=this.getTheme();return".MiniBlock\n .BlockBody\n  overflow scroll\n .miniMap\n  background "+a.backgroundColor+"\n  width 120px\n  height 90px\n  margin 6px\n  position relative\n  overflow hidden\n  display inline-block\n  .miniFooter\n   font-size 12px\n   position absolute\n   bottom 0\n   width 100%\n   height 15px\n   line-height 15px\n   text-align center\n  .miniPreview\n   position absolute\n   width 100%\n   height calc(100% - 15px)\n   top 0\n   overflow hidden\n   div\n    position absolute\n    background "+a.linkColor};
MiniBlock.prototype._getMiniBray=function(a,b,c,d){var e=a.getBlockDimensionMap(void 0===c?120:c,void 0===d?75:d);a=a.getDescendantBlocks().filter(function(a){return a.isVisible()}).map(function(a){return"@ div\n style "+e.get(a).getScaledCss(.1)}).join("\n");return"@ a\n class miniMap\n data-onClickCommand app openUrlInNewSpaceAndFocus\n value "+b+"\n href "+b+"\n @ div\n  class miniPreview"+Util.indentIf(a,2)+"\n @ div\n  class miniFooter\n  content "+b};
MiniBlock.prototype.getBlockContentBray=function(){var a=this;this.getStruct();var b=this.getApp(),c=this.getCardsWithStructQuery().map(function(c){var d=c.getCardValue("content");c=c.getCardValue("link");var f=new FlowProgram(void 0,void 0,b);f.setChildrenAndDiskAndUndoStack(d);return a._getMiniBray(f,c)}).join("\n");return"@ div\n class MiniBlock"+Util.indentIf(c,1)};window.MiniBlock=MiniBlock;var TableBlock=function(a){return AbstractChartBlock.apply(this,arguments)||this};
$jscomp.inherits(TableBlock,AbstractChartBlock);TableBlock._mountedComponents=AbstractChartBlock._mountedComponents;TableBlock.loadCode=AbstractChartBlock.loadCode;
TableBlock.prototype.getHakon=function(){var a=this.getTheme();return".TableChisel\n overflow scroll\n font-size 12px\n box-sizing border-box\n width 100%\n height 100%\n "+a.enableTextSelect(1)+"\n top 34px\n tr\n  white-space nowrap\n  padding 0\n td:first-child,th:first-child\n  padding-left 5px\n td,th\n  padding-right 30px\n  overflow hidden\n  text-overflow ellipsis\n  max-width 250px\n td:hover,th:hover\n  overflow visible\n th\n  cursor pointer\n input,textarea\n  border 0\n  font-size 14px\n  box-sizing border-box\n  padding 0\n  font-family "+a.fonts};
TableBlock.prototype._getTrBray=function(a,b){return this.getCardsWithStructQuery().map(function(b,d){var c=b.getPuid();b.getCardNumeric();var f=a.map(function(a){var c=a.getColumnName(),c=b.getCardValue(c),d="";void 0!==c&&(d=Format.stripHtml(c));return a.isLink()?"@ td\n @ a\n  href "+d+"\n  content "+Util.indent(d,3):"@ td\n content "+Util.indent(d,2)}).join("\n");return"@ tr\n class tableRow\n data-onContextMenuCommand chisel openCardEditorByPuidCommand\n value "+c+"\n @ td\n  content "+(d+1)+
Util.indentIf(f,2)}).join("\n")};TableBlock.prototype.getContextMenuBray=function(){return"@ a\n data-onClickCommand app deleteAllCardsInTargetBlockCommand\n content Delete all cards"};TableBlock.prototype._getHeaderBray=function(a,b){return"@ th\n"+a.map(function(a){return"@ th\n style "+(b===a||b==="-"+a?"font-style: italic;":"")+"\n value "+a+"\n @ span\n  tabindex -1\n  data-onClickCommand chisel _changeBlockOrderByCommand\n  value "+a+"\n  content "+a}).join("\n")};
TableBlock.prototype.getBlockContentBray=function(){var a=this.getStruct(),b=this.getInputBinder(),b="importance"===a.columnOrder?b.getColumnsByImportance():b.getColumnsArray();if(a.showColumns)var c=a.showColumns.split(" "),b=b.filter(function(a){return c.includes(a.getColumnName())});else if(a.hideColumns)var d=a.hideColumns.split(" "),b=b.filter(function(a){return!d.includes(a.getColumnName())});var b=b.slice(0,50),e=b.map(function(a){return a.getColumnName()}),e=this._getHeaderBray(e,a.orderBy),
a=this._getTrBray(b,a.pretty);return"@ div\n class TableChisel\n @ table\n  @ thead\n   @ tr\n    title "+Say($jscomp$templatelit$16)+Util.indentIf(e,4)+"\n  @ tbody "+Util.indentIf(a,2)};window.TableBlock=TableBlock;var ThreeDChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(ThreeDChart,AbstractHeaderlessChartBlock);ThreeDChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;ThreeDChart.loadCode=AbstractHeaderlessChartBlock.loadCode;
ThreeDChart.prototype.getBlockContentBray=function(){return"@ div\n class visjs"};ThreeDChart.prototype.componentDidMount=function(){AbstractHeaderlessChartBlock.prototype.componentDidMount.call(this);this.componentDidUpdate()};ThreeDChart.prototype.componentDidUpdate=function(){AbstractHeaderlessChartBlock.prototype.componentDidUpdate.call(this);if(!this.isNode())try{this._tryVis()}catch(a){console.error(a)}};
ThreeDChart.prototype._tryVis=function(){this.getStruct();var a=this.getPipishInput(),a=this.getApp().generateProgram(a,"fire"),a=this._treeTo3D(a),b=new vis.DataSet;a.forEach(function(a){return b.add(a)});var a=this.getBlockDimension(),a={width:a.width+"px",height:a.height-80+"px",style:"dot-color",showPerspective:!1,showLegend:!1,showShadow:!1,keepAspectRatio:!0,xStep:1,yStep:1,zStep:1,zMax:5,showGrid:!1,showZAxis:!0,showXAxis:!0,showYAxis:!0,dotSizeRatio:.02,dotSizeMinFraction:1,cameraPosition:{horizontal:.1,
vertical:1.5,distance:4},verticalRatio:1,tooltip:function(a){return a.data.line}},c=this.getStump().findStumpByChild("class visjs").getShadow().getShadowElement();new vis.Graph3d(c,b,a)};
ThreeDChart.prototype._treeTo3D=function(a){var b={},c=new TreeNotation(a.getProgramTypeString()),d=Util.makeSemiRandomFn(),e=[];a.getTopDownArray().forEach(function(f,g){var h=f.getPoint(a);g=f.getPathVector(a);var k=c.nodeAt(g);f.getWords().forEach(function(a,c){var f=k.getWord(c);b[f]||(b[f]=d());e.push({x:h.x,y:-h.y,line:a+" "+f,z:c,style:b[f]})})});return e};window.ThreeDChart=ThreeDChart;var TreeOutline=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};
$jscomp.inherits(TreeOutline,AbstractHeaderlessChartBlock);TreeOutline._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;TreeOutline.loadCode=AbstractHeaderlessChartBlock.loadCode;TreeOutline.prototype.getBlockContentBray=function(){var a=(new TreeNotation(this.getPipishInput())).toOutline();return"@ pre\n style overflow: scroll; width: 100%; height: 100%; margin: 0; box-sizing: border-box;\n content "+Util.indent(a,2)};window.TreeOutline=TreeOutline;
var WordCloudChart=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};$jscomp.inherits(WordCloudChart,AbstractHeaderlessChartBlock);WordCloudChart._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;WordCloudChart.loadCode=AbstractHeaderlessChartBlock.loadCode;WordCloudChart.prototype.getBlockContentBray=function(){return"@ div\n class wordCloud\n style width: 100%; height: 100%;"};
WordCloudChart.prototype._getWords=function(){return this.getRequiredTable(["name","count"])};WordCloudChart.prototype.componentDidUpdate=function(){this._draw()};WordCloudChart.prototype.componentDidMount=function(){this._draw()};
WordCloudChart.prototype._draw=function(){var a=this.getStruct(),b=this._getWords();b.length&&(b.shift(),b={list:b.map(function(a){return[a[0],10*a[1]]}),shuffle:!1,backgroundColor:"transparent",random:Util.makeSemiRandomFn(),wait:0},Object.assign(b,a),a=this.getStump().findStumpByChild("class wordCloud").getShadow().getShadowElement(),WordCloud(a,b))};window.WordCloudChart=WordCloudChart;var YouTubeBlock=function(a){return AbstractHeaderlessChartBlock.apply(this,arguments)||this};
$jscomp.inherits(YouTubeBlock,AbstractHeaderlessChartBlock);YouTubeBlock._mountedComponents=AbstractHeaderlessChartBlock._mountedComponents;YouTubeBlock.loadCode=AbstractHeaderlessChartBlock.loadCode;YouTubeBlock.prototype.getBlockContentBray=function(){var a=this.getBlockDimension().width,b=this.getStruct().video;return"@ iframe\n width "+a+"\n height "+a+"\n src https://www.youtube.com/embed/"+b+"\n frameborder 0\n allowfullscreen"};window.YouTubeBlock=YouTubeBlock;
var GoogleArea=function(a){return AbstractGoogleCore.apply(this,arguments)||this};$jscomp.inherits(GoogleArea,AbstractGoogleCore);GoogleArea._mountedComponents=AbstractGoogleCore._mountedComponents;GoogleArea.loadPackages=AbstractGoogleCore.loadPackages;GoogleArea.loadCode=AbstractGoogleCore.loadCode;GoogleArea.prototype._getChartClass=function(){return this.getGoogle().visualization.AreaChart};GoogleArea.prototype._getGoogleData=function(){return this.getSomeData(["x","y"])};window.GoogleArea=GoogleArea;
var GoogleBar=function(a){return AbstractGoogleCore.apply(this,arguments)||this};$jscomp.inherits(GoogleBar,AbstractGoogleCore);GoogleBar._mountedComponents=AbstractGoogleCore._mountedComponents;GoogleBar.loadPackages=AbstractGoogleCore.loadPackages;GoogleBar.loadCode=AbstractGoogleCore.loadCode;GoogleBar.prototype._getChartClass=function(){return this.getGoogle().visualization.BarChart};GoogleBar.prototype._getGoogleData=function(){return this.getSomeData(["x","y"])};window.GoogleBar=GoogleBar;
var GoogleColumn=function(a){return AbstractGoogleCore.apply(this,arguments)||this};$jscomp.inherits(GoogleColumn,AbstractGoogleCore);GoogleColumn._mountedComponents=AbstractGoogleCore._mountedComponents;GoogleColumn.loadPackages=AbstractGoogleCore.loadPackages;GoogleColumn.loadCode=AbstractGoogleCore.loadCode;GoogleColumn.prototype._getChartClass=function(){return this.getGoogle().visualization.ColumnChart};
GoogleColumn.prototype._getGoogleData=function(){var a=this.getStruct(),b=this.getInputBinder(),c=b.getBinderColumnByName(a.series),d=b.getBinderColumnByName(a.card),a=b.getBinderColumnByName(a.cell),b=b.getCards().map(function(a){return a.getCardNumeric()});return this.getGoogle().visualization.arrayToDataTable(this.getPivotTable(b,c,d,a))};window.GoogleColumn=GoogleColumn;var GoogleGauge=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(GoogleGauge,AbstractGoogleBase);
GoogleGauge._mountedComponents=AbstractGoogleBase._mountedComponents;GoogleGauge.loadPackages=AbstractGoogleBase.loadPackages;GoogleGauge.loadCode=function(){return AbstractGoogleBase.loadPackages(["gauge"])};GoogleGauge.prototype._getChartClass=function(){return this.getGoogle().visualization.Gauge};GoogleGauge.prototype._getGoogleData=function(){return this.getLabelValue()};window.GoogleGauge=GoogleGauge;var GoogleGeo=function(a){return AbstractGoogleCore.apply(this,arguments)||this};
$jscomp.inherits(GoogleGeo,AbstractGoogleCore);GoogleGeo._mountedComponents=AbstractGoogleCore._mountedComponents;GoogleGeo.loadPackages=AbstractGoogleCore.loadPackages;GoogleGeo.loadCode=function(){return AbstractGoogleCore.loadPackages(["geochart"])};GoogleGeo.prototype._getChartClass=function(){return this.getGoogle().visualization.GeoChart};window.GoogleGeo=GoogleGeo;var GoogleLine=function(a){return AbstractGoogleCore.apply(this,arguments)||this};$jscomp.inherits(GoogleLine,AbstractGoogleCore);
GoogleLine._mountedComponents=AbstractGoogleCore._mountedComponents;GoogleLine.loadPackages=AbstractGoogleCore.loadPackages;GoogleLine.loadCode=AbstractGoogleCore.loadCode;GoogleLine.prototype._getChartClass=function(){return this.getGoogle().visualization.LineChart};GoogleLine.prototype._getGoogleData=function(){return this.getSomeData(["x","y"])};window.GoogleLine=GoogleLine;var GoogleOrg=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(GoogleOrg,AbstractGoogleBase);
GoogleOrg._mountedComponents=AbstractGoogleBase._mountedComponents;GoogleOrg.loadPackages=AbstractGoogleBase.loadPackages;GoogleOrg.loadCode=function(){return AbstractGoogleBase.loadPackages(["orgchart"])};GoogleOrg.prototype._getChartClass=function(){return this.getGoogle().visualization.OrgChart};
GoogleOrg.prototype._getGoogleData=function(){var a=this.getInputBinder().getCards()[0];if(!a)return this.getGoogle().visualization.arrayToDataTable([]);a=(new TreeNotation(a.getCardSource())).getTopDownArray().map(function(a){return[{v:a.getPathVector().join(" "),f:a.getLine()},a.getParent().getPathVector().join(" ")]});return this.getGoogle().visualization.arrayToDataTable(a)};window.GoogleOrg=GoogleOrg;var GoogleScatter=function(a){return AbstractGoogleCore.apply(this,arguments)||this};
$jscomp.inherits(GoogleScatter,AbstractGoogleCore);GoogleScatter._mountedComponents=AbstractGoogleCore._mountedComponents;GoogleScatter.loadPackages=AbstractGoogleCore.loadPackages;GoogleScatter.loadCode=AbstractGoogleCore.loadCode;GoogleScatter.prototype._getChartClass=function(){return this.getGoogle().visualization.ScatterChart};GoogleScatter.prototype._getGoogleData=function(){return this.getSomeData(["x","y"])};window.GoogleScatter=GoogleScatter;
var GoogleSquare=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(GoogleSquare,AbstractGoogleBase);GoogleSquare._mountedComponents=AbstractGoogleBase._mountedComponents;GoogleSquare.loadPackages=AbstractGoogleBase.loadPackages;GoogleSquare.loadCode=function(){return AbstractGoogleBase.loadPackages(["treemap"])};
GoogleSquare.prototype._getGoogleOptions=function(){var a=this.getTheme();a.getTinyColor();var b=AbstractGoogleBase.prototype._getGoogleOptions.call(this);b.highlightOnMouseOver=!1;b.headerHeight=0;b.minColor=tinycolor(a.selectionColor).lighten(40).toHexString();b.midColor=tinycolor(a.selectionColor).toHexString();b.maxColor=tinycolor(a.selectionColor).darken(20).toHexString();return b};
GoogleSquare.prototype._getGoogleData=function(){var a=this.getRequiredTable(["label","value"]).map(function(a){return[a[0],"All",a[1]]}),b=a.shift();a.unshift(["All",null,0]);a.unshift(b);return this.getGoogle().visualization.arrayToDataTable(a)};GoogleSquare.prototype._getChartClass=function(){return this.getGoogle().visualization.TreeMap};window.GoogleSquare=GoogleSquare;var GoogleTimeline=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(GoogleTimeline,AbstractGoogleBase);
GoogleTimeline._mountedComponents=AbstractGoogleBase._mountedComponents;GoogleTimeline.loadPackages=AbstractGoogleBase.loadPackages;GoogleTimeline.loadCode=function(){return AbstractGoogleBase.loadPackages(["timeline"])};GoogleTimeline.prototype._getChartClass=function(){return this.getGoogle().visualization.Timeline};
GoogleTimeline.prototype._getGoogleData=function(){var a=(new this.getGoogle).visualization.DataTable();a.addColumn({type:"string",id:"Title"});a.addColumn({type:"date",id:"Start"});a.addColumn({type:"date",id:"End"});var b=this._getTimelineCards();a.addCards(b);return a};
GoogleTimeline.prototype._getTimelineCards=function(){var a=this.getInputBinder().getCards(),b=this.getStruct().label;return a.map(function(a){var c=a.getCardNumeric();a=a.getCardValue(b);var e=moment(c.start).toDate(),c=moment(c.end).toDate();return[a,e,c]})};window.GoogleTimeline=GoogleTimeline;var DidYouMeanBlock=function(a){return AbstractCommandBlock.apply(this,arguments)||this};$jscomp.inherits(DidYouMeanBlock,AbstractCommandBlock);DidYouMeanBlock._mountedComponents=AbstractCommandBlock._mountedComponents;
DidYouMeanBlock.loadCode=AbstractCommandBlock.loadCode;DidYouMeanBlock.prototype.getBlockContentBray=function(){var a=this.getBase(),b=this.getParser().getBlockNames();return(b=didYouMean(a,b))?"@ div\n content No block '"+a+"' found. Did you mean\n @! a\n  content "+b+"\n  tabindex -1\n  value "+b+"\n  data-onClickCommand chisel changeTypeCommand\n content ?":"@ div\n content No block '"+a+"' found."};DidYouMeanBlock.prototype.getBlockHeaderContent=function(){return""};window.DidYouMeanBlock=DidYouMeanBlock;
var MorphBlock=function(a){return AbstractCommandBlock.apply(this,arguments)||this};$jscomp.inherits(MorphBlock,AbstractCommandBlock);MorphBlock._mountedComponents=AbstractCommandBlock._mountedComponents;MorphBlock.loadCode=AbstractCommandBlock.loadCode;MorphBlock.prototype.getHakon=function(){this.getTheme();return".MorphBlock\n .BlockBody\n  display flex\n  flex-flow row wrap\n  a\n   margin 10px\n   height 50px\n   overflow hidden\n   text-align center\n   text-overflow ellipsis\n   font-size 12px\n   width 50px"};
MorphBlock.prototype.getBlockContentBray=function(){var a=this.getProgram(),b=this.getParser(),a=a.getTopNodeTypes();this.getApp();return a.map(function(a){return b.getParserBlockByName(a)}).map(function(a){var b=MakeSVG(a.getSvg(),24);return"@ a\n title "+a.getDescription()+"\n tabindex -1\n value "+a.getBase()+"\n data-onClickCommand chisel changeTypeCommand\n content "+b+"<br>"+a.getBase()}).join("\n")};MorphBlock.prototype.getBlockHeaderContent=function(){return""};window.MorphBlock=MorphBlock;
var AbstractConnectorBlock=function(a){return AbstractProviderBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractConnectorBlock,AbstractProviderBlock);AbstractConnectorBlock._mountedComponents=AbstractProviderBlock._mountedComponents;AbstractConnectorBlock.loadCode=AbstractProviderBlock.loadCode;window.AbstractConnectorBlock=AbstractConnectorBlock;var AbstractRunTimeProvider=function(a){return AbstractProviderBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractRunTimeProvider,AbstractProviderBlock);
AbstractRunTimeProvider._mountedComponents=AbstractProviderBlock._mountedComponents;AbstractRunTimeProvider.loadCode=AbstractProviderBlock.loadCode;AbstractRunTimeProvider.prototype.fetchCards=function(){return Promise.resolve(this.getApp()[this.getStruct().method]())};window.AbstractRunTimeProvider=AbstractRunTimeProvider;var AbstractSourceBlock=function(a){return AbstractProviderBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractSourceBlock,AbstractProviderBlock);
AbstractSourceBlock._mountedComponents=AbstractProviderBlock._mountedComponents;AbstractSourceBlock.loadCode=AbstractProviderBlock.loadCode;window.AbstractSourceBlock=AbstractSourceBlock;var AbstractUrlProvider=function(a){return AbstractConnectorBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractUrlProvider,AbstractConnectorBlock);AbstractUrlProvider._mountedComponents=AbstractConnectorBlock._mountedComponents;AbstractUrlProvider.loadCode=AbstractConnectorBlock.loadCode;
AbstractUrlProvider.prototype.getUrl=function(){return this.getStruct().url||""};AbstractUrlProvider.prototype._getFormat=function(a){a=Util.getFileExtension(a);if((new CardParser).getEncodingNames()[a])return a};
AbstractUrlProvider.prototype.fetchCards=function(){var a=this,b=this.getStruct(),c=this.getUrl();if(!c)return Promise.resolve([]);c=encodeURI(c);c.match(/\.json/);var d=b.format||this._getFormat(c);return this.getApp().getWillowDocument().get(c).then(function(a){b.extract&&(a=a[b.extract]);var c=new CardParser;return"string"===typeof a?c.parse(a,d):c.parseFromObject(a,d)}).catch(function(b){a.logMessage("Fetch error");return[]})};window.AbstractUrlProvider=AbstractUrlProvider;
var DataBlockCard=function(a){ObjectBackedCard.apply(this,arguments)};$jscomp.inherits(DataBlockCard,ObjectBackedCard);DataBlockCard._uniqueId=ObjectBackedCard._uniqueId;var DataBlock=function(a){return AbstractProviderBlock.apply(this,arguments)||this};$jscomp.inherits(DataBlock,AbstractProviderBlock);DataBlock._mountedComponents=AbstractProviderBlock._mountedComponents;DataBlock.loadCode=AbstractProviderBlock.loadCode;
DataBlock.prototype.getDataContent=function(){var a=this.getNode("content");return a?a.getBeamWithChildren():""};DataBlock.prototype.getBlockContentBray=function(){var a=Format.stripHtml(this.getDataContent());return"@ textarea\n data-onChangeCommand chisel _saveDataCommand\n class BlockTextArea savable\n content "+Util.indent(a,2)};DataBlock.prototype._saveDataCommand=function(a){this.touchNode("content").setBeamWithChildren(a);this.autosaveBlock();return this.executeLoadNewBinderAndRender()};
DataBlock.prototype.getCardClass=function(){return DataBlockCard};DataBlock.prototype.fetchCards=function(){return Promise.resolve((new CardParser).parse(this.getDataContent(),this.getStruct().format))};DataBlock.prototype._getFormatted=function(a,b){switch(b){case "tree":return(new TreeNotation(a)).toString();case "json":return(new TreeNotation(a)).toJson();default:return(new TreeNotation(a)).toCsv()}};
DataBlock.prototype.createCards=function(a){var b=this.getStruct().format,c=this.getDataContent(),c=(new CardParser).parse(c,b);a=_.concat(c,a);b=this._getFormatted(a,b);return this._saveDataCommand(b)};DataBlock.prototype.updateCards=function(a){return this.autosaveBlock()};DataBlock.prototype.deleteCards=function(a){var b=this.getOutputBinder().getCards();_.remove(b,function(b){return a.indexOf(b)});b=this._getFormatted(b.map(function(a){return a.getCardSource()}),this.getStruct().format);return this._saveDataCommand(b)};
window.DataBlock=DataBlock;var EchoBlock=function(a){return AbstractProviderBlock.apply(this,arguments)||this};$jscomp.inherits(EchoBlock,AbstractProviderBlock);EchoBlock._mountedComponents=AbstractProviderBlock._mountedComponents;EchoBlock.loadCode=AbstractProviderBlock.loadCode;EchoBlock.prototype.fetchCards=function(){return Promise.resolve([{text:this.getStruct().content}])};window.EchoBlock=EchoBlock;var OhayoProgramCard=function(a){ObjectBackedCard.apply(this,arguments)};
$jscomp.inherits(OhayoProgramCard,ObjectBackedCard);OhayoProgramCard._uniqueId=ObjectBackedCard._uniqueId;OhayoProgramCard.prototype.destroyCardCommand=function(){return this.getCardApp().deleteFileCommand(this.getCardValue("link"))};OhayoProgramCard.prototype.updateCardCommand=function(){};var ProgramsBlock=function(a){return AbstractProviderBlock.apply(this,arguments)||this};$jscomp.inherits(ProgramsBlock,AbstractProviderBlock);ProgramsBlock._mountedComponents=AbstractProviderBlock._mountedComponents;
ProgramsBlock.loadCode=AbstractProviderBlock.loadCode;ProgramsBlock.prototype.getCardClass=function(){return OhayoProgramCard};ProgramsBlock.prototype.fetchCards=function(){return Promise.resolve(this.getApp().getCaddies().map(function(a){return a.toCaddyObject()}))};window.ProgramsBlock=ProgramsBlock;var QueryBlock=function(a){return AbstractUrlProvider.apply(this,arguments)||this};$jscomp.inherits(QueryBlock,AbstractUrlProvider);QueryBlock._mountedComponents=AbstractUrlProvider._mountedComponents;
QueryBlock.loadCode=AbstractUrlProvider.loadCode;QueryBlock.prototype.getUrl=function(){return"/sql?q="+this.getStruct().query};QueryBlock.prototype.getBlockContentBray=function(){return"@ textarea\n data-onChangeCommand chisel changePropertyCommand\n name query\n class BlockTextArea\n content "+Util.indent(Strip($jscomp$templatelit$17,this.getStruct().query))};window.QueryBlock=QueryBlock;var RedditBlock=function(a){return AbstractUrlProvider.apply(this,arguments)||this};
$jscomp.inherits(RedditBlock,AbstractUrlProvider);RedditBlock._mountedComponents=AbstractUrlProvider._mountedComponents;RedditBlock.loadCode=AbstractUrlProvider.loadCode;RedditBlock.prototype.getUrl=function(){var a=this.getStruct();return"https://www.reddit.com/"+((a.subreddit?"/r/"+a.subreddit+"/top/.json?sort=top&t=all":"")||a.get)};
RedditBlock.prototype.fetchCards=function(){return AbstractUrlProvider.prototype.fetchCards.call(this).then(function(a){return a.length?a[0].data.children.map(function(a){return a.data}):[]})};window.RedditBlock=RedditBlock;var StoreBlock=function(a){return DataBlock.apply(this,arguments)||this};$jscomp.inherits(StoreBlock,DataBlock);StoreBlock._mountedComponents=DataBlock._mountedComponents;StoreBlock.loadCode=DataBlock.loadCode;
StoreBlock.prototype.getDataContent=function(){return this.getApp().getStore().get(this._getKey())||""};StoreBlock.prototype._getKey=function(){return this.getStruct().key||this.getProgram().getUrl()};StoreBlock.prototype._saveDataCommand=function(a){this.getApp().getStore().set(this._getKey(),a)};window.StoreBlock=StoreBlock;var TopBlock=function(a){return AbstractUrlProvider.apply(this,arguments)||this};$jscomp.inherits(TopBlock,AbstractUrlProvider);TopBlock._mountedComponents=AbstractUrlProvider._mountedComponents;
TopBlock.loadCode=AbstractUrlProvider.loadCode;TopBlock.prototype.getUrl=function(){this.getStruct();return"/samples/presidents.csv"};window.TopBlock=TopBlock;var AbstractExtendBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(AbstractExtendBlock,AbstractTransformerBlock);AbstractExtendBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;AbstractExtendBlock.loadCode=AbstractTransformerBlock.loadCode;
AbstractExtendBlock.prototype.getBlockClassColumns=function(){return this.getStructColumns().filter(function(a){return!!a.source})};AbstractExtendBlock.prototype._convertValueToNumeric=function(a,b,c){if(void 0===a||!ColumnTypes[b]||""===a)return"";c=this._getConversionFn(c,b,a);return null!==c?c:ColumnTypes[b].fromStringToNumeric(a)};
AbstractExtendBlock.prototype._getConversionFn=function(a,b,c){var d=ColumnTypes[a];b=ColumnTypes[b];return d&&b?b.from&&b.from[a]?b.from[a](c):b.fromMomentToNumeric&&d.fromStringToMoment?b.fromMomentToNumeric(d.fromStringToMoment(c)):null:null};
AbstractExtendBlock.prototype.transformCards=function(){var a=this,b=this.getBlockClassColumns(),c=this.getInputBinder().getColumnsMap();return this.getInputBinder().getCards().map(function(d){var e=d.getCardSourceAsObject(),f={};Object.assign(f,e);b.forEach(function(b){var d=e[b.source],g=c[b.source].getTypeName();f[b.name]=a._convertValueToNumeric(d,b.type,g)});return f})};window.AbstractExtendBlock=AbstractExtendBlock;
var DateFilter=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(DateFilter,AbstractTransformerBlock);DateFilter._mountedComponents=AbstractTransformerBlock._mountedComponents;DateFilter.loadCode=AbstractTransformerBlock.loadCode;DateFilter.prototype.transformCards=function(){var a=this.getInputBinder().getNumericValues(),b=this.getStruct();if(!b.column||!b.days)return a;var c=getTime(b.days);return a.filter(function(a){return a[b.column]>=c})};
DateFilter.prototype.getTime=function(a){return Date.now()-864E5*parseFloat(a)};window.DateFilter=DateFilter;var DateBlock=function(a){return AbstractExtendBlock.apply(this,arguments)||this};$jscomp.inherits(DateBlock,AbstractExtendBlock);DateBlock._mountedComponents=AbstractExtendBlock._mountedComponents;DateBlock.loadCode=AbstractExtendBlock.loadCode;
DateBlock.prototype.getBlockClassColumns=function(){var a=this.getStruct().column;return a?["day","month","year"].map(function(b){return{source:a,name:b,type:b}}):[]};window.DateBlock=DateBlock;var ExtractBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(ExtractBlock,AbstractTransformerBlock);ExtractBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;ExtractBlock.loadCode=AbstractTransformerBlock.loadCode;
ExtractBlock.prototype.transformCards=function(){var a=this.getInputBinder().getFirstCard().getFirstCell(),b={};ExtractBlock._extractTablesFromObject(b,a);a=Object.keys(b);return b[a[0]]};ExtractBlock._getColumnNamesFromObj=function(a){a=Object.keys(a);a.sort();return a};
ExtractBlock._extractTablesFromObject=function(a,b){var c=this;if(!(b instanceof Array)){var d=this._getColumnNamesFromObj(b).join(" ");a[d]||(a[d]=0);a[d]++}Object.keys(b).forEach(function(d){d=b[d];"object"===typeof d&&c._extractTablesFromObject(a,d)})};window.ExtractBlock=ExtractBlock;var FilterBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(FilterBlock,AbstractTransformerBlock);FilterBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;
FilterBlock.loadCode=AbstractTransformerBlock.loadCode;FilterBlock.prototype.transformCards=function(){var a=this.getStruct().filter,b=this.getInputBinder().getCards();if(!a)return b;var c=this._generateSearchFn(a);return b.filter(function(a){return c(a.cardToString())})};FilterBlock.prototype.getBlockClassColumns=function(){return this.getInputBinder().getColumnsArrayOfObjects()};
FilterBlock.prototype.getBlockContentBray=function(){return"@textarea\n placeholder Enter a string to filter by.\n name filter\n data-onChangeCommand chisel changePropertyCommand\n class BlockTextArea\n content "+(this.getStruct().filter||"")};
FilterBlock.prototype._generateSearchFn=function(a){var b=[];a.split(";").forEach(function(a){var c="!"===a[0];c&&(a=a.substr(1));try{var e=new RegExp(a,"i");c?b.push(function(a){return!a.match(e)}):b.push(function(a){return!!a.match(e)})}catch(f){c?b.push(function(b){return!b.includes(a)}):b.push(function(b){return b.includes(a)})}});return function(a){var c=!0;b.forEach(function(b){b(a)||(c=!1)});return c}};window.FilterBlock=FilterBlock;
var GroupBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(GroupBlock,AbstractTransformerBlock);GroupBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;GroupBlock.loadCode=AbstractTransformerBlock.loadCode;
GroupBlock.prototype._makePivotResult=function(){var a=this.getStruct(),b=a.advanced||a.by;if(!b)return{cards:[],columns:[]};var c=this.getInputBinder(),a=c.getColumnsArrayOfObjects(),d={};a.forEach(function(a){return d[a.name]=!0});b=b.split(/ /g).filter(function(a){return d[a]});c=c.getNumericValues();return(new PivotTable(c,a,this.getStructColumns())).getNewCards(b)};GroupBlock.prototype.transformCards=function(){return this._getPivotResult().cards};
GroupBlock.prototype._getPivotResult=function(){var a=this.getInputBinder().getCTime();this._pivotCTime!==a&&delete this._result;this._result||(this._result=this._makePivotResult(),this._pivotCTime=a);return this._result};GroupBlock.prototype.getBlockClassColumns=function(){return this._getPivotResult().columns};window.GroupBlock=GroupBlock;var InterpolateBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(InterpolateBlock,AbstractTransformerBlock);
InterpolateBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;InterpolateBlock.loadCode=AbstractTransformerBlock.loadCode;InterpolateBlock.prototype._interpolator=function(a,b){a=parseInt(a);b=parseInt(b);for(var c=[];a<=b&&!(c.push(a),a+=26784E5,1E3<c.length););return c};
InterpolateBlock.prototype.transformCards=function(){var a=this.getInputBinder(),b=a.getCardSources();this.getOutputBinder();var c=this.getStruct().column;if(!c)return b;var d=a.getBinderColumnByName(c),a=d.getMin(),d=d.getMax(),a=this._interpolator(a,d).map(function(a){var b={};b[c]=a;b.count=0;return b});return Util.joinArraysOn(c,[b,a])};window.InterpolateBlock=InterpolateBlock;var JoinBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(JoinBlock,AbstractTransformerBlock);
JoinBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;JoinBlock.loadCode=AbstractTransformerBlock.loadCode;
JoinBlock.prototype.transformCards=function(){var a=this.getStruct().on,b=this.getParent();this.getOutputBinder();if(b.isProgram())return[];var c=b.getParent();if(c.isProgram())return b.getOutputBinder().getCardSources();c=[b,c];b=c.map(function(a){return a.getOutputBinder().getCardSources()});if(!a)return _.flatten(b);c=c.map(function(a){return a.getOutputBinder().getColumnNames()});return Util.joinArraysOn(a,b,c)};window.JoinBlock=JoinBlock;
var ParseBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(ParseBlock,AbstractTransformerBlock);ParseBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;ParseBlock.loadCode=AbstractTransformerBlock.loadCode;ParseBlock.prototype.transformCards=function(){var a=this.getStruct(),b=this.getInputBinder().getCardSources(),c=a.format,d=a.column,e=new CardParser;return _.flatten(b.map(function(a){return e.parse(a[d],c)}))};window.ParseBlock=ParseBlock;
var TypesBlock=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(TypesBlock,AbstractTransformerBlock);TypesBlock._mountedComponents=AbstractTransformerBlock._mountedComponents;TypesBlock.loadCode=AbstractTransformerBlock.loadCode;TypesBlock.prototype.transformCards=function(){var a=this.getPipishInput();return[{text:this.getApp().generateProgram(a,"fire").getProgramTypeString()}]};window.TypesBlock=TypesBlock;
var WordCount=function(a){return AbstractTransformerBlock.apply(this,arguments)||this};$jscomp.inherits(WordCount,AbstractTransformerBlock);WordCount._mountedComponents=AbstractTransformerBlock._mountedComponents;WordCount.loadCode=AbstractTransformerBlock.loadCode;WordCount.prototype.transformCards=function(){return this._getWords(this.getPipishInput())};
WordCount.prototype._getWords=function(a){var b=[];if(!a)return b;var c={};a.split(/\s/g).map(function(a){return a.replace(/[^a-z0-9\-]/gi,"")}).filter(function(a){return a}).forEach(function(a){c[a]?c[a]++:c[a]=1});Object.keys(c).forEach(function(a){(a=a.trim())&&b.push({name:a,count:c[a]})});return b};window.WordCount=WordCount;var AbstractContextMenuChisel=function(a){return Chisel.apply(this,arguments)||this};$jscomp.inherits(AbstractContextMenuChisel,Chisel);
AbstractContextMenuChisel._mountedComponents=Chisel._mountedComponents;
AbstractContextMenuChisel.prototype.getHakon=function(){var a=this.getTheme();return".AbstractContextMenuChisel\n position fixed\n overflow scroll\n max-height 100%\n z-index 221\n background "+a.contextMenuBackground+"\n border 1px solid "+a.borderColor+"\n box-shadow 0 1px 3px 0 "+a.boxShadow+"\n font-size 14px\n a\n  display block\n  padding 3px\n  font-size 14px\n  text-decoration none\n  color "+a.darkBlack+"\n  &:hover\n   color "+a.white+"\n   background "+a.hoverBackground};
AbstractContextMenuChisel.prototype.getBray=function(){return"@ div\n class AbstractContextMenuChisel "+this.constructor.name+Util.indentIf(this.getContextMenuContentBray(),1)};
AbstractContextMenuChisel.prototype.componentDidMount=function(){var a=this.getStump(),b=this.getApp(),c=b.getWillowDocument(),d=c.getBodyStump().getShadow(),e=function(){d.offShadowEvent(ShadowEvents.click,e);b.closeAllContextMenus()};setTimeout(function(){return d.onShadowEvent(ShadowEvents.click,e)},100);var f=b.getMouseEvent(),c=c.getWindowSize();a.setStumpCss(this._getContextMenuPosition(c.width,c.height,f.clientX,f.clientY,a.getShadow()))};
AbstractContextMenuChisel.prototype._getContextMenuPosition=function(a,b,c,d,e){var f=c,g=e.getShadowOuterWidth();b=e.getShadowOuterHeight()+d-b;0<b&&(d-=b);0<g+f-a&&(f=c-g-5);0>d&&(d=0);return{left:f,top:d}};window.AbstractContextMenuChisel=AbstractContextMenuChisel;var AbstractDropDownMenuChisel=function(a){return Chisel.apply(this,arguments)||this};$jscomp.inherits(AbstractDropDownMenuChisel,Chisel);AbstractDropDownMenuChisel._mountedComponents=Chisel._mountedComponents;
AbstractDropDownMenuChisel.prototype.getHakon=function(){var a=this.getTheme();return"\n.subdued\n color "+a.midGray+"\n\n.dropdownMenu\n min-width 200px\n position absolute\n top 0\n left 0\n z-index 100\n padding 7px 0\n background "+a.contextMenuBackground+"\n border 1px solid "+a.borderColor+"\n box-shadow 0 1px 3px 0 "+a.boxShadow+"\n .message\n  line-height 30px\n  padding 0 10px\n a\n  color "+a.foregroundColor+"\n  display block\n  line-height 30px\n  padding 0 10px\n  &:hover\n   background "+
a.hoverBackground+"\n   color "+a.white};AbstractDropDownMenuChisel.prototype.componentDidMount=function(){var a=this.getApp(),b=a.getWillowDocument().getBodyStump().getShadow(),c=function(){b.offShadowEvent(ShadowEvents.click,c);a.closeAllDropDownMenusCommand()};setTimeout(function(){return b.onShadowEvent(ShadowEvents.click,c)},100)};
AbstractDropDownMenuChisel.prototype.getBray=function(){var a=this.getDropDownBray(),b=this.getAnchorId();return"@ div\n style top: 30px; left: "+this.getParent().getStump().findStumpByChild("id "+b).getShadow().getShadowPosition().left+"px;\n class dropdownMenu"+Util.indentIf(a,1)};window.AbstractDropDownMenuChisel=AbstractDropDownMenuChisel;var AbstractMenuChisel=function(a){return Chisel.apply(this,arguments)||this};$jscomp.inherits(AbstractMenuChisel,Chisel);
AbstractMenuChisel._mountedComponents=Chisel._mountedComponents;AbstractMenuChisel.prototype.getNodeTypes=function(){return{fileDropDownMenu:FileDropDownMenuChisel,openDropDownMenu:OpenDropDownMenuChisel}};AbstractMenuChisel.prototype.parseNodeType=function(a){return this.getNodeTypes()[a]};
AbstractMenuChisel.prototype.getHakon=function(){var a=this.getTheme();return".AbstractMenuChisel\n "+a.disableTextSelect(1)+"\n font-size 14px\n padding-left 5px\n box-sizing border-box\n right 0\n left 0\n position relative\n height 30px\n z-index 92\n white-space nowrap\n background "+a.menuBackground+"\n color "+a.darkBlack+"\n display flex\n >a\n  padding-right 5px\n  line-height 30px\n  display inline-block\n  color "+a.menuChiselColor};
AbstractMenuChisel.prototype.getBray=function(){return"@ div\n class AbstractMenuChisel "+this.constructor.name+"\n @ a\n  data-onClickCommand app toggleHelpCommand\n  content ohayo\n @ a\n  id fileToggle\n  data-onClickCommand chisel toggleAndRender\n  value fileDropDownMenu\n  content File \u25be\n @ a\n  id openToggle\n  data-onClickCommand chisel toggleAndRender\n  value openDropDownMenu\n  content Open \u25be"};window.AbstractMenuChisel=AbstractMenuChisel;
var BlockToolbarChisel=function(a){return Chisel.apply(this,arguments)||this};$jscomp.inherits(BlockToolbarChisel,Chisel);BlockToolbarChisel._mountedComponents=Chisel._mountedComponents;
BlockToolbarChisel.prototype.getHakon=function(){var a=this.getTheme();return".BlockToolbarChisel\n background "+a.contextMenuBackground+"\n border 1px solid "+a.lineColor+"\n font-size 12px\n position absolute\n padding 8px\n z-index 991\n min-width 300px\n top 100%\n left 0\n cursor pointer\n svg\n  fill "+a.greyish+"\n  padding 1px 3px 3px 3px\n  &:hover\n   fill "+a.foregroundColor};BlockToolbarChisel.prototype.getChildBlock=function(){return this.getParent()};
BlockToolbarChisel.prototype.getBray=function(){var a=this._getFormBray();return"@ div\n class BlockToolbarChisel\n @ span\n  data-onClickCommand block openBlockSourceEditorModalCommand\n  content "+MakeSVG("coding",20)+"\n @ span\n  data-onClickCommand block cloneBlockCommand\n  content "+MakeSVG("copy",20)+"\n @ span\n  data-onClickCommand block destroyBlockCommand\n  content "+MakeSVG("trash",20)+"\n @ span\n  data-onClickCommand block openBlockInspectorCommand\n  content "+MakeSVG("inspector",
20)+Util.indentIf(a,1)};BlockToolbarChisel.prototype._getTypeDropdownBray=function(){var a=this.getChildBlock(),b=a.getParser().getBlockNames();b.sort();var c=a.getBase();return"@ select\n data-onChangeCommand block changeTypeCommand\n @ option\n"+b.map(function(a){return" @ option\n  value "+a+"\n  content "+a+"\n  "+(c===a?"selected":"notselected")}).join("\n")};
BlockToolbarChisel.prototype._getParentDropdownBray=function(){var a=this.getChildBlock(),b=a.getPathVector().join(" ");return"@ select\n data-onChangeCommand block changeParentCommand\n @ option\n"+a.getProgram().getDescendantBlocks().map(function(a){return{name:a.getBasePath(),value:a.getPathVector().join(" ")}}).map(function(a){return" @ option\n  value "+a.value+"\n  content "+a.name+"\n  "+(b===a.value?"selected":"notselected")}).join("\n")};
BlockToolbarChisel.prototype._getFormBray=function(){var a=this.getChildBlock(),b=a.getBlock().getPropertyNodes().map(function(b){return[b.getPropertyName(),b.toFormBray(a)]});b.unshift(["parent",this._getParentDropdownBray()]);b.unshift(["type",this._getTypeDropdownBray()]);return"@ form\n @ table\n"+b.map(function(a){return"  @ tr\n   @ td\n    content "+a[0]+"\n   @ td"+Util.indentIf(a[1],4)}).join("\n")};window.BlockToolbarChisel=BlockToolbarChisel;
var FileDropDownMenuChisel=function(a){return AbstractDropDownMenuChisel.apply(this,arguments)||this};$jscomp.inherits(FileDropDownMenuChisel,AbstractDropDownMenuChisel);FileDropDownMenuChisel._mountedComponents=AbstractDropDownMenuChisel._mountedComponents;
FileDropDownMenuChisel.prototype.getDropDownBray=function(){return this.getApp().getMountedProgram()?"@ a\n data-onClickCommand app createNewBlankProgramCommand\n value untitled.flow\n content New Flow Program\n@ a\n data-onClickCommand app createNewBlankProgramCommand\n value untitled.fire\n content New Fire Program\n@ div  divider\n@ a\n data-onClickCommand app cloneProgramCommand\n content Clone Program\n@ a\n data-onClickCommand app saveProgramAndNotifyCommand\n content Save Program\n@ a\n data-onClickCommand app showTabRenamePromptCommand\n content Rename program\n@ a\n data-onClickCommand app showDeleteFileConfirmDialogCommand\n content Delete program":"@ a\n data-onClickCommand app createNewBlankProgramCommand\n value untitled.flow\n content New Flow Program\n@ a\n data-onClickCommand app createNewBlankProgramCommand\n value untitled.fire\n content New Fire Program"};
FileDropDownMenuChisel.prototype.getAnchorId=function(){return"fileToggle"};window.FileDropDownMenuChisel=FileDropDownMenuChisel;var MenuChisel=function(a){return AbstractMenuChisel.apply(this,arguments)||this};$jscomp.inherits(MenuChisel,AbstractMenuChisel);MenuChisel._mountedComponents=AbstractMenuChisel._mountedComponents;window.MenuChisel=MenuChisel;var OpenDropDownMenuChisel=function(a){return AbstractDropDownMenuChisel.apply(this,arguments)||this};$jscomp.inherits(OpenDropDownMenuChisel,AbstractDropDownMenuChisel);
OpenDropDownMenuChisel._mountedComponents=AbstractDropDownMenuChisel._mountedComponents;OpenDropDownMenuChisel.prototype.getDropDownBray=function(){var a=this.getApp().getCaddies();return a.length?a.map(function(a){return"@ a\n data-onClickCommand app openUrlInNewSpaceAndFocus\n value "+a.getCaddyLink()+"\n href "+a.getCaddyLink()+"\n @ span\n  content "+Format.stripHtml(a.getCaddyLink())}).join("\n"):"@ div\n class message\n content You don't have any saved programs."};
OpenDropDownMenuChisel.prototype.getAnchorId=function(){return"openToggle"};window.OpenDropDownMenuChisel=OpenDropDownMenuChisel;var PanelChisel=function(a){return Chisel.apply(this,arguments)||this};$jscomp.inherits(PanelChisel,Chisel);PanelChisel._mountedComponents=Chisel._mountedComponents;PanelChisel.prototype.parseNodeType=function(a){var b=this.getApp(),c=a.split(" ")[0];return"program"===c?b.getProgramClass(Util.getFileExtension(a)):{programs:ProgramSwitcherChisel,search:SearchChisel,sourceGutter:SourceGutter}[c]};
PanelChisel.prototype.getHakon=function(){var a=this.getParent().getMenuChisel()?"30":"0";this.getTheme();return".PanelChisel\n left 0\n position relative\n right 0\n bottom 0\n height calc(100% - "+a+"px)"};PanelChisel.prototype.getGutterWidth=function(){return 0<this.getChildren().filter(function(a){return a.getBase().includes("Gutter")}).length?400:0};PanelChisel.prototype.log=function(a){console.log(a)};
PanelChisel.prototype.openSearchCommand=function(){var a=this.getNode("search");a&&a.focusInputCommand();return Promise.resolve()};PanelChisel.prototype.mountTabByIndex=function(a){return this.setMountedProgram(this.getPrograms()[a])};PanelChisel.prototype.getMountedProgram=function(){return this._mountedProgram};PanelChisel.prototype.fetchAndReloadProgram=function(a){var b=this;a.unmount();return this._executeFetchProgram(a).then(function(){b.getApp().renderApp()})};
PanelChisel.prototype._executeFetchProgram=function(a){var b=this.getApp();this._updateProgramSwitcherChisel();return b.fetchProgram(a).then(function(){return a.executeLoadProgramCodeAndData()}).then(function(){b.tabDidOpen(a);b.renderApp();return a})};PanelChisel.prototype.getOpenTabByUrl=function(a){return this.getPrograms().find(function(b){return b.getUrl()===a})};PanelChisel.prototype.getPanelPath=function(){void 0===this._panelPath&&(this._panelPath="");return this._panelPath};
PanelChisel.prototype.setPanelPath=function(a){this._panelPath=a;return this};PanelChisel.prototype.setMountedProgram=function(a){var b=this.getMountedProgram();if(b===a)return Promise.resolve(a);b&&b.unmount();this._mountedProgram=a;this._updateProgramSwitcherChisel();this.getApp().renderApp();return Promise.resolve(a)};PanelChisel.prototype.openUrlInNewSpace=function(a){return this._executeFetchProgram(this.append("program "+a))};PanelChisel.prototype.closeTabByIndex=function(a){return this.closeProgram(this.getPrograms()[a])};
PanelChisel.prototype.closeProgram=function(a){if(a.isMounted()){var b=a.getNextOrPrevious(this.getPrograms());a.unmountAndDestroy();if(b&&b!==a)return this.setMountedProgram(b);delete this._mountedProgram}else a.destroy();this._updateProgramSwitcherChisel();this.getApp().renderApp();return Promise.resolve()};PanelChisel.prototype.getOpenProgramsString=function(){var a=this.getMountedProgram();return this.getPrograms().map(function(b){return""+(b===a?"!":"")+b.getUrl()}).join(" ")};
PanelChisel.prototype._updateProgramSwitcherChisel=function(){var a=this.getOpenProgramsString();this.touchNode("programs").setBeam(a);this._openPrograms!==a&&(this.getApp().storeValue(StorageKeys.openPrograms,a),this._openPrograms=a,this._updateLocationForRestoreOnRefresh())};PanelChisel.prototype._updateLocationForRestoreOnRefresh=function(){var a=this.getApp(),b=this.getMountedProgram();b?a.storeValue(StorageKeys.mountedProgram,b.getUrl()):a.removeValue(StorageKeys.mountedProgram)};
PanelChisel.prototype.closeAllPrograms=function(){var a=this.getMountedProgram();a&&a.unmount();this.getPrograms().forEach(function(a){return a.destroy()});delete this._mountedProgram;this._updateProgramSwitcherChisel();this.getApp().renderApp();return Promise.resolve()};PanelChisel.prototype.mountPreviousProgram=function(){var a=this.getPrograms(),b=this.getMountedProgram();if(2>a.length||!b)return Promise.resolve();b=a.indexOf(b);return this.mountTabByIndex(0===b?a.length-1:b-1)};
PanelChisel.prototype.mountNextProgram=function(){var a=this.getPrograms(),b=this.getMountedProgram();if(2>a.length||!b)return Promise.resolve();b=a.indexOf(b);return this.mountTabByIndex(b===a.length-1?0:b+1)};PanelChisel.prototype.getPrograms=function(){return this.findNodes("program")};window.PanelChisel=PanelChisel;var ProgramSwitcherChisel=function(a){return Chisel.apply(this,arguments)||this};$jscomp.inherits(ProgramSwitcherChisel,Chisel);ProgramSwitcherChisel._mountedComponents=Chisel._mountedComponents;
ProgramSwitcherChisel.prototype.shouldComponentUpdate=function(){var a=this.getParent().getGutterWidth();return this._gutterWidth!==a?(this._gutterWidth=a,!0):Chisel.prototype.shouldComponentUpdate.call(this)};
ProgramSwitcherChisel.prototype.getHakon=function(){var a=this.getTheme(),b=this._getPrograms().length;return".ProgramSwitcherChisel\n height 30px\n box-sizing border-box\n left "+this.getParent().getGutterWidth()+"px\n right 0\n position relative\n white-space nowrap\n overflow-y hidden\n overflow-x "+(10<b?"scroll":"auto")+"\n border-bottom "+(b?"1px solid "+a.borderColor:"0")+"\n background "+a.programsBackground+"\n a\n  span\n   position absolute\n   top 10px\n   right 5px\n   display block\n   font-size 12px\n   line-height 10px\n   text-align center\n   opacity .25\n   &:hover\n    opacity 1\n  background "+
a.tabBackground+"\n  height 30px\n  display inline-block\n  box-sizing border-box\n  position relative\n  font-size 14px\n  padding 0 20px\n  color "+a.foregroundColor+"\n  line-height 30px\n  border-right 1px solid "+a.borderColor+"\n  border-bottom 1px solid "+a.borderColor+"\n  &.mountedProgram\n   background "+a.surfaceBackground+"\n   border-bottom 0"};ProgramSwitcherChisel.prototype._getPrograms=function(){var a=this.getBeam();return a?a.split(" "):[]};
ProgramSwitcherChisel.prototype.getBray=function(){var a=this._getPrograms().map(function(a,c){return"@! a\n data-onClickCommand app mountTabByIndexCommand\n value "+c+"\n class "+(a.startsWith("!")?"mountedProgram":"")+"\n content "+a.replace("!","")+"\n @! span\n  data-onClickCommand app closeTabByIndexCommand\n  value "+c+"\n  class closeTabButton\n  content x"}).join("\n");return"@ div\n class ProgramSwitcherChisel"+Util.indentIf(a,1)};window.ProgramSwitcherChisel=ProgramSwitcherChisel;
var SearchChisel=function(a){return Chisel.apply(this,arguments)||this};$jscomp.inherits(SearchChisel,Chisel);SearchChisel._mountedComponents=Chisel._mountedComponents;
SearchChisel.prototype.getHakon=function(){var a=this.getTheme();return".SearchChisel\n position absolute\n z-index 200\n top -30px\n left 250px\n .typeaheadInput\n  font-size 14px\n input\n  outline 0\n  border 0\n  width 300px\n  padding-left 5px\n  line-height 30px\n  height 30px\n  font-size 14px\n  background transparent\n .tt-menu\n  width 300px\n  margin-top 1px\n  padding-bottom 5px\n  background "+a.contextMenuBackground+"\n  border 0 1px 1px 1px solid "+a.lightGrey+"\n .tt-suggestion\n  padding 0 3px 3px 5px\n  cursor pointer\n .matchType\n  margin 0 20px 5px 0\n  padding 3px 0 3px 5px\n  border-bottom 1px solid "+
a.lightGrey+"\n  width 100%\n  color "+a.foregroundColor+"\n h3.matchType\n  font-size 16px\n .tt-cursor,.tt-suggestionhover\n  background "+a.hoverBackground+"\n  color "+a.white};SearchChisel.prototype.getBray=function(){return"@ div\n class SearchChisel\n @ input\n  class typeaheadInput\n  type text\n  placeholder Search"};SearchChisel.prototype._getInputStump=function(){return this.getStump().findStumpByChild("class typeaheadInput")};
SearchChisel.prototype.focusInputCommand=function(){this._getInputStump().getShadow().focusShadow();return Promise.resolve()};SearchChisel.prototype._scanLinks=function(a){if(a)return this.getApp().getCaddies().find(function(b){return a!==b.getCaddyLink()?!1:!0})};SearchChisel.prototype.tryOpenByNameCommand=function(a,b){var c=this.getApp();(a=a&&this._scanLinks(a.split(" ").pop()))?(c.openUrlInNewSpaceAndFocus(a.link),this._getInputStump().blurStump().getShadow().makeTypeahead("val","")):b&&c.universalSearchCommand(b)};
SearchChisel.prototype._makeSearchFn=function(){var a=this.getApp();return function(b,c){var d=b.startsWith("!")?b.substring(1):b;try{var e=new RegExp(d,"i");var f=function(a){return e.test(a)}}catch(g){f=function(a){return a.includes(d)}}if(b.startsWith("!"))return b=a.getKeyboardShortcuts().getChildren().map(function(a){return"!"+a.getFn()}),c(b.filter(f));c(a.getCaddies().map(function(a){return a.getCaddyLink()}).filter(f))}};
SearchChisel.prototype._onEnter=function(){var a=this.getApp(),b=a.getWillowDocument(),c=this._getInputStump(),d=c.getShadow().getTypeaheadValue(),b=b.getValueOfSearchInput();b.startsWith("?")?a.universalSearchCommand(b.substr(1)):b.startsWith("!")?a.executeCommandLine([b.substr(1)]):this.tryOpenByNameCommand(d,b);c.blurStump()};
SearchChisel.prototype.componentDidMount=function(){var a=this;this._getInputStump().getShadow().makeTypeahead({highlight:!0,minLength:1,hint:!0},{name:"myPrograms",limit:7,source:this._makeSearchFn(),templates:{header:'<h3 class="matchType">'+Say($jscomp$templatelit$18)+"</h3>"}}).bindShadow("typeahead:select",function(b,c){return a.tryOpenByNameCommand(c)}).onShadowEvent(ShadowEvents.keyup,this,function(b){13===b.keyCode&&a._onEnter()})};window.SearchChisel=SearchChisel;
var ThemeChisel=function(a){return Chisel.apply(this,arguments)||this};$jscomp.inherits(ThemeChisel,Chisel);ThemeChisel._mountedComponents=Chisel._mountedComponents;
ThemeChisel.prototype.getHakon=function(){var a=this.getTheme();return"html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,audio,video\n margin 0\n padding 0\n border 0\n font-size 100%\n font inherit\n vertical-align baseline\narticle,aside,figcaption,figure,footer,header,hgroup,menu,nav,section\n display block\nbody\n line-height 1.3\nol,ul\n list-style none\ntable\n border-collapse collapse\n border-spacing 0\n\nhtml,body\n width 100%\n height 100%\n margin 0\n padding 0\n font-family "+a.fonts+
"\n color "+a.bodyColor+"\n\nhtml\n background "+a.bodyBackground+"\n\ntable\n padding 0\n margin 0\n border-collapse collapse\n border-spacing 0\n table-layout fixed\n tr,td\n  padding 0\n  margin 0\n\n.ThemeChisel\n display none\n\nh1\n font-size 200%\n\nh2\n font-size 166%\n\nh3\n font-size 133%\n\nh4\n font-size 120%\n\np\n margin 1em 0\n\na\n cursor pointer\n text-decoration none\n color "+a.linkColor+"\n\n::-webkit-scrollbar\n display none\n\n.ui-resizable-handle\n position absolute\n font-size 0.1px\n display block\n -ms-touch-action none\n touch-action none\n\n.ui-resizable-disabled\n .ui-resizable-handle\n  display none\n\n.ui-resizable-autohide\n .ui-resizable-handle\n  display none\n\n.leftButton,.rightButton\n background transparent\n border 0\n\n.BlockTextArea\n padding 5px\n width 100%\n height 100%\n box-sizing border-box\n outline 0\n border 0\n font-size 14px\n font-family "+
a.fonts+"\n resize none\n\n.rightButton\n float right\n\n.bigInput\n display block\n width 100%\n height 34px\n padding 6px 12px\n font-size 14px\n line-height 1.428571429\n vertical-align middle\n border-radius 4px\n box-sizing border-box\n color "+a.mediumBlack+"\n background "+a.backgroundColor+"\n border 1px solid "+a.greyish+"\n box-shadow inset 0 1px 1px "+a.boxShadow+"\n\ntextarea.bigInput\n height auto\n\n.dragOver\n opacity 0.5\n\n#dragOverHelp\n position absolute\n font-size 36px\n width 100%\n height 100%\n z-index 300\n display flex\n align-items center\n justify-content center\n top 0\n left 0\n\n.noTransition\n transition none\n\n.SVGIcon\n fill "+
a.foregroundColor+"\n cursor pointer\n\n.buttonPrimary\n border-radius 2px\n cursor pointer\n border none\n padding 15px 32px\n text-align center\n text-decoration none\n font-size 16px\n color white\n background "+a.successColor+"\n\n.divider\n background "+a.lineColor+"\n height 1px\n margin 10px 0\n width 100%\n\ninput,textarea\n background transparent\n color "+a.foregroundColor+"\n\n.BlockChisel\n position absolute\n background "+a.blockBackgroundColor+"\n border 1px solid "+a.borderColor+"\n z-index 1\n "+
a.disableTextSelect(1)+"\n .BlockPencilButton\n  svg\n   opacity 0\n .ui-resizable-se\n  cursor se-resize\n  width 36px\n  height 36px\n  box-sizing border-box\n  right 1px\n  bottom 1px\n  opacity 0\n  border-right 4px solid "+a.darkerBackground+"\n  border-bottom 4px solid "+a.darkerBackground+"\n  &:hover\n   opacity 1\n &:hover\n  background "+a.backgroundColor+"\n  z-index 2\n  .ui-resizable-se\n   opacity .5\n  .BlockPencilButton\n   svg\n    opacity 1\n    cursor pointer\n    fill "+a.greyish+
"\n    &:hover\n     fill "+a.foregroundColor+"\n .BlockPage\n  overflow hidden\n  width 100%\n  height 100%\n  position relative\n .BlockHeader,.BlockFooter\n  font-size 12px\n  height 30px\n  line-height 30px\n  padding-left 5px\n .BlockBody\n  padding 5px\n  width 100%\n  height calc(100% - 80px)\n  box-sizing border-box\n  &.HeaderLess\n   height calc(100% - 50px)\n .BlockGrabber\n  width 100%\n  height 10px\n  cursor move\n .BlockHeader\n  text-transform uppercase\n  text-align center\n  border-bottom 1px solid "+
a.borderColor+"\n .BlockFooter\n  border-top 1px solid "+a.borderColor+"\n iframe\n  width 100%\n  height 100%\n  border 0"};window.ThemeChisel=ThemeChisel;var BlockContextMenuChisel=function(a){return AbstractContextMenuChisel.apply(this,arguments)||this};$jscomp.inherits(BlockContextMenuChisel,AbstractContextMenuChisel);BlockContextMenuChisel._mountedComponents=AbstractContextMenuChisel._mountedComponents;
BlockContextMenuChisel.prototype.getContextMenuContentBray=function(){return"@ a\n data-onClickCommand app fetchAndReloadFocusedProgramCommand\n content Reload\n@ a\n tabindex -1\n data-onClickCommand context copyBlockCommand\n content Copy block with inputs\n@ a\n data-onClickCommand context copyDataCommand\n value \t\n content Copy data as tsv\n@ a\n data-onClickCommand context _exportDataCommand\n content Export data to csv file\n"+this.getApp().getTargetNode().getContextMenuBray()};
window.BlockContextMenuChisel=BlockContextMenuChisel;var ProgramContextMenuChisel=function(a){return AbstractContextMenuChisel.apply(this,arguments)||this};$jscomp.inherits(ProgramContextMenuChisel,AbstractContextMenuChisel);ProgramContextMenuChisel._mountedComponents=AbstractContextMenuChisel._mountedComponents;ProgramContextMenuChisel.prototype.getContextMenuContentBray=function(){return this.getApp().getMountedProgram().getContextMenuCommandsBray()};window.ProgramContextMenuChisel=ProgramContextMenuChisel;
var AbstractGutterChisel=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractGutterChisel,AbstractModalChisel);AbstractGutterChisel._mountedComponents=AbstractModalChisel._mountedComponents;
AbstractGutterChisel.prototype.getHakon=function(){var a=this.getTheme(),b=this.getParent().getGutterWidth();return AbstractModalChisel.prototype.getHakon.call(this)+"\n.AbstractGutterChisel\n width "+b+"px\n left 0\n background "+a.backgroundColor+"\n border-color "+a.borderColor+"\n position absolute\n border-right-width 1px\n border-right-style solid\n box-sizing border-box\n top 0\n bottom 0\n padding 20px\n .GutterHeader\n  height 30px\n  padding 5px\n  box-sizing border-box\n  line-height 30px\n  font-size 16px\n .GutterBody\n  width 100%\n  overflow scroll\n  bottom 0\n  height calc(100% - 30px)\n .GutterClose\n  position absolute\n  top 0\n  line-height 30px\n  height 30px\n  right 10px\n  cursor pointer"};
AbstractGutterChisel.prototype.getGutterTitle=function(){return""};AbstractGutterChisel.prototype.getBray=function(){return"@ div\n class AbstractGutterChisel\n @ div\n  class GutterHeader\n  content "+this.getGutterTitle()+"\n  @ a\n   data-onClickCommand chisel _confirmAndUnmountCommand\n   class GutterClose\n   content X\n @ div\n  class GutterBody"+Util.indentIf(this.getGutterBray(),2)};window.AbstractGutterChisel=AbstractGutterChisel;
var SourceGutter=function(a){return AbstractGutterChisel.apply(this,arguments)||this};$jscomp.inherits(SourceGutter,AbstractGutterChisel);SourceGutter._mountedComponents=AbstractGutterChisel._mountedComponents;SourceGutter.prototype.hasChanges=function(){var a=this._getProgram();return a&&this._getTextarea().getShadow().getShadowValue()!==a.childrenToString()};SourceGutter.prototype._getTextarea=function(){return this.getStump().findStumpByTag("textarea")};SourceGutter.prototype._getProgram=function(){return this.getParent().getMountedProgram()};
SourceGutter.prototype._saveChangesCommand=function(){return this._getProgram().autosaveAndReloadWith(this._getTextarea().getShadow().getShadowValue())};SourceGutter.prototype.getGutterTitle=function(){return"Edit Source"};SourceGutter.prototype.componentDidUpdate=function(){AbstractGutterChisel.prototype.componentDidUpdate.call(this);var a=this._getProgram();this._getTextarea().getShadow().setShadowValue(a?a.childrenToString():"")};SourceGutter.prototype.shouldComponentUpdate=function(){return!0};
SourceGutter.prototype.componentDidMount=function(){AbstractGutterChisel.prototype.componentDidMount.call(this);this.componentDidUpdate()};SourceGutter.prototype.getHakon=function(){return AbstractGutterChisel.prototype.getHakon.call(this)+"\n.sourceArea\n border 0\n outline 0\n box-sizing border-box\n padding 5px\n font-size 14px\n width 100%\n height 100%"};SourceGutter.prototype.getGutterBray=function(){return"@ textarea\n class sourceArea savable\n data-onChangeCommand chisel _saveChangesCommand\n wrap off"};
window.SourceGutter=SourceGutter;var AbstractHelpModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractHelpModal,AbstractModalChisel);AbstractHelpModal._mountedComponents=AbstractModalChisel._mountedComponents;
AbstractHelpModal.prototype.getMomentHelp=function(){return"Char;Example;Description{YYYY;2014;4 or 2 digit year{YY;14;2 digit year{Y;-25;Year with any number of digits and sign{Q;1..4;Quarter of year. Sets month to first month in quarter.{M MM;1..12;Month number{MMM MMMM;Jan..December;Month name in locale set by moment.locale(){D DD;1..31;Day of month{Do;1st..31st;Day of month with ordinal{DDD DDDD;1..365;Day of year{X;1410715640.579;Unix timestamp{x;1410715640579;Unix ms timestamp{H HH;0..23;24 hour time{h hh;1..12;12 hour time used with a A.{a/p A/P;am pm;Post or ante meridiem{m mm;0..59;Minutes{s ss;0..59;Seconds{S SS SSS;0..999;Fractional seconds{Z ZZ;+12:00;Offset from UTC as +-HH:mm, +-HHmm, or Z{w ww;1..53;Locale week of year{e;0..6;Locale day of week{ddd dddd;Mon...Sunday;Day name in locale set by moment.locale(){E;1..7;ISO day of week".split("{").map(function(a){a=a.split(";");
return"<tr><td>"+a[0]+"</td><td>"+a[1]+"</td><td>"+a[2]+"</td></tr>"}).join("")};AbstractHelpModal.prototype.getHakon=function(){return AbstractModalChisel.prototype.getHakon.call(this)+"\np\n width 100%\n white-space normal\n.helpToggle\n display block\n.helpSection\n display none\n#shortcutsHelp td\n padding-right 10px"};
AbstractHelpModal.prototype._getShortcutsHelpBray=function(){var a=this.getApp();return"@ table\n id shortcutsHelp\n class helpSection\n"+a.getKeyboardShortcuts().getChildren().map(function(b){var c=b.getDescription();return" @ tr\n  style "+(c?"":"display: none;")+"\n  @ td\n   content "+b.getKeyCombo()+"\n  @ td\n   @ "+(b.isEnabled(a)?"a":"span")+"\n    data-onClickCommand app "+b.getFn()+"\n    content "+c}).join("\n")};
AbstractHelpModal.prototype.getModalBray=function(){var a=this.getApp(),b=Object.values(a.getETNs()),c=Object.values(a.getParsers()),d=c.map(function(a){return a.getDocs()}).join("<br><br>"),c=c.map(function(a){return a.getLine()}).join(", ");a.getMountedProgram();return"@ h4\n content About "+Say($jscomp$templatelit$19)+"\n@ p\n content ohayo is the fastest programming tool in the solar system.\n@ p\n @ a\n  data-onClickCommand app openOhayoProgramCommand\n  value ohayo.flow\n  content Welcome Page\n @ span\n  content |\n @ a\n  data-onClickCommand app openOhayoProgramCommand\n  value readme.flow\n  content Read Me\n @ span\n  content |\n @ a\n  data-onClickCommand app openOhayoProgramCommand\n  value faq.flow\n  content FAQ\n @ span\n  content |\n @ a\n  data-onClickCommand app openOhayoProgramCommand\n  value releasenotes.flow\n  content Release Notes\n @ span\n  content |\n @ a\n  data-onClickCommand app openOhayoProgramCommand\n  value helloWorld.fire\n  content Fire Hello World\n @ span\n  content |\n @ a\n  data-onClickCommand app openOhayoProgramCommand\n  value fib.fire\n  content Fire Fibonacci\n@ a\n class helpToggle\n data-onClickCommand app toggleShadowById\n value shortcutsHelp\n content "+
Say($jscomp$templatelit$20)+"\n"+this._getShortcutsHelpBray()+"\n@ a\n class helpToggle\n data-onClickCommand app toggleShadowById\n value etnHelpSection\n content ETN help\n@ div\n class helpSection\n id etnHelpSection\n @ p\n  content ohayo currently supports "+b.length+" ETNs ("+c+"). Here are the available blocks.\n @ pre\n  content "+Util.indent(d,3)+"\n@ p\n content Version "+a.getVersion()+" "+a.constructor.name};window.AbstractHelpModal=AbstractHelpModal;
var BlockInspectorModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(BlockInspectorModal,AbstractModalChisel);BlockInspectorModal._mountedComponents=AbstractModalChisel._mountedComponents;BlockInspectorModal.prototype._getChildBlock=function(){return this.getApp().getTargetNode()};BlockInspectorModal.prototype.componentDidMount=function(){AbstractModalChisel.prototype.componentDidMount.call(this);this._getChildBlock();this.getApp()};
BlockInspectorModal.prototype.getHakon=function(){return AbstractModalChisel.prototype.getHakon.call(this)+"\n.BlockInspectorModal\n ol\n  list-style decimal\n  padding 20px\n pre\n  width 600px\n  overflow-x scroll\n textarea\n  width 600px\n  height 200px"};
BlockInspectorModal.prototype.getModalBray=function(){var a=this._getChildBlock(),b=a.getInputBinder(),c=a.getOutputBinder(),d=c.getColumnsArrayOfObjects(),e=b.getColumnsArrayOfObjects(),f=b.getCardCount(),g=c.getCardCount(),h=a.getMessageBuffer().map(function(a){return"@ li\n content "+moment(a.time).fromNow()+" - "+a.message}),k=a.getBlock().getPropertyNodes().map(function(a){return a.getPropertyName()+" "+a.getPropertyTypeName()+" "+a.getDescription()}).join("\n"),l=a.getStruct(),m=a.getParent().getBase();
return"@ div\n content Input cards: "+f+" Output cards: "+g+"\n@ div\n content Load time: "+a.getTTL()+" Render time: "+a.getNewestTimeToRender()+"\n@ div\n content BlockClass: "+a.constructor.name+" Parent: "+m+"\n@ div\n content Messages:\n@ ol\n "+h+"\n@ div\n content Tree:\n@ pre\n content "+Util.indent(a.toString(),2)+"\n@ div\n content BlockStruct:\n@ pre\n content "+Util.indent(JSON.stringify(l,null,2),2)+"\n@ div\n content All Block Properties:\n@ pre\n content "+Util.indent(k,2)+"\n@ div\n content Input Columns:\n@ pre\n content "+
Util.indent((new TreeNotation(e)).toFixedWidthTable(),2)+"\n@ div\n content Output Columns\n@ pre\n content "+Util.indent((new TreeNotation(d)).toFixedWidthTable(),2)+"\n@ div\n content Output Numeric Values:\n@ pre\n content "+Util.indent((new TreeNotation(c.getNumericValues())).toFixedWidthTable(),2)+"\n@ div\n content TypeScript Interface:\n@ pre\n content "+Util.indent(c.toTypeScriptInterface(),2)+"\n@ div\n content Input Numeric Values:\n@ pre\n content "+Util.indent((new TreeNotation(b.getNumericValues())).toFixedWidthTable(),
2)};window.BlockInspectorModal=BlockInspectorModal;var BuildProgramModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(BuildProgramModal,AbstractModalChisel);BuildProgramModal._mountedComponents=AbstractModalChisel._mountedComponents;
BuildProgramModal.prototype.getModalBray=function(){var a=this.getApp().getMountedProgram().getProgramOfInterest(),b=a.buildProgram(),a=a.getLine()+" compiled to "+a.compilesTo(),a=new TreeNotation("@ h4\n content "+a+"\n@ div\n class monospaceModal\n @ textarea\n  readonly\n  content\n@ button\n content Save\n data-onClickCommand app saveCompiledCommand\n@ button\n content Execute\n data-onClickCommand app executeProgramCommand");a.nodeAt(1).nodeAt(1).getNode("content").setBeamWithChildren(b);return a.toString()};
BuildProgramModal.prototype.shouldComponentUpdate=function(){return!0};window.BuildProgramModal=BuildProgramModal;var CardEditorModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(CardEditorModal,AbstractModalChisel);CardEditorModal._mountedComponents=AbstractModalChisel._mountedComponents;CardEditorModal.prototype.componentDidMount=function(){AbstractModalChisel.prototype.componentDidMount.call(this);this._getTextArea().getShadow().setShadowValue(this.getCard().cardToString())};
CardEditorModal.prototype._getTextArea=function(){return this.getStump().findStumpByChild("id editCardTextarea")};CardEditorModal.prototype._deleteCardCommand=function(){this.getApp().closeModal();var a=this.getCard().getCardBlock();return this.getCard().destroyCardCommand().then(function(){a.executeLoadNewBinderAndRender()})};
CardEditorModal.prototype._saveCardCommand=function(){var a=this.getCard();a.reloadFromStr(this._getTextArea().getShadow().getShadowValue());a.getCardBlock().updateCards([a]);this.getApp().closeModal()};
CardEditorModal.prototype.getModalBray=function(){return"@ h4\n content Editing node\n@ textarea\n class bigInput\n rows 20\n id editCardTextarea\n@ button\n title "+Say($jscomp$templatelit$21)+"\n class leftButton\n data-onClickCommand chisel _deleteCardCommand\n content "+MakeSVG("trash",30)+"\n@ button\n title Save\n class rightButton\n data-onClickCommand chisel _saveCardCommand\n content "+MakeSVG("check",30)};CardEditorModal.prototype.getCard=function(){return this.getApp().getTargetNode()};
window.CardEditorModal=CardEditorModal;var CustomConfirmModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(CustomConfirmModal,AbstractModalChisel);CustomConfirmModal._mountedComponents=AbstractModalChisel._mountedComponents;
CustomConfirmModal.prototype.getModalBray=function(){return"@ h4\n content "+this.getBeam()+"\n@ button\n value 0\n data-onClickCommand chisel _resolveCommand\n content "+Say($jscomp$templatelit$22)+"\n@ button\n value 1\n data-onClickCommand chisel _resolveCommand\n content "+Say($jscomp$templatelit$23)};CustomConfirmModal.prototype._resolveCommand=function(a){this.resolve("1"===a);this.getApp().closeModal();return Promise.resolve()};
CustomConfirmModal.prototype.getHakon=function(){return AbstractModalChisel.prototype.getHakon.call(this)+"\n.CustomConfirmModal\n h4\n  text-align left\n button\n  padding 7px 20px"};CustomConfirmModal.prototype.getConfirmPromise=function(){var a=this;return new Promise(function(b,c){a.resolve=b;a.reject=c})};window.CustomConfirmModal=CustomConfirmModal;var CustomPromptModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(CustomPromptModal,AbstractModalChisel);
CustomPromptModal._mountedComponents=AbstractModalChisel._mountedComponents;CustomPromptModal.prototype.getModalBray=function(){return"@ h4\n content "+this.findBeam("message")+"\n@ input\n value "+this.findBeam("value")+"\n@ button\n data-onClickCommand chisel _resolveCommand\n content Ok"};CustomPromptModal.prototype.parseNodeType=function(a){return TreeNotation};
CustomPromptModal.prototype._resolveCommand=function(){var a=this.getStump().findStumpByTag("input");this.resolve(a.getShadow().getShadowValue());this.getApp().closeModal();return Promise.resolve()};CustomPromptModal.prototype.componentDidMount=function(){AbstractModalChisel.prototype.componentDidMount.call(this);this.getStump().findStumpByTag("input").getShadow().focusShadow()};CustomPromptModal.prototype.getHakon=function(){return AbstractModalChisel.prototype.getHakon.call(this)+"\n.CustomPromptModal\n h4\n  text-align left\n input\n  width 100%\n  display block\n  margin-bottom 20px\n button\n  padding 7px 20px"};
CustomPromptModal.prototype.getPromptPromise=function(){var a=this;return new Promise(function(b,c){a.resolve=b;a.reject=c})};window.CustomPromptModal=CustomPromptModal;var HelpModal=function(a){return AbstractHelpModal.apply(this,arguments)||this};$jscomp.inherits(HelpModal,AbstractHelpModal);HelpModal._mountedComponents=AbstractHelpModal._mountedComponents;window.HelpModal=HelpModal;var InsertCardModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};
$jscomp.inherits(InsertCardModal,AbstractModalChisel);InsertCardModal._mountedComponents=AbstractModalChisel._mountedComponents;InsertCardModal.prototype.componentDidMount=function(){AbstractModalChisel.prototype.componentDidMount.call(this);var a=this._getChildBlock(),b=this._getTextArea();b.getShadow().setShadowValue(a.getOutputBinder().toBlankFormTemplate());b.getShadow().focusShadow()};InsertCardModal.prototype._getChildBlock=function(){return this.getApp().getTargetNode()};
InsertCardModal.prototype._getTextArea=function(){return this.getStump().findStumpByChild("id newCardTextarea")};InsertCardModal.prototype._submitCardCommand=function(){var a=new TreeNotation(this._getTextArea().getShadow().getShadowValue());this._getChildBlock().createCards([a]);this.getApp().closeModal()};
InsertCardModal.prototype.getModalBray=function(){return"\n@ h4\n content Insert\n@ textarea\n rows 20\n wrap off\n class bigInput\n id newCardTextarea\n@ button\n title Save\n data-onClickCommand chisel _submitCardCommand\n class SVGIcon rightButton\n content "+MakeSVG("check",30)};window.InsertCardModal=InsertCardModal;var InsertCardsModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(InsertCardsModal,AbstractModalChisel);
InsertCardsModal._mountedComponents=AbstractModalChisel._mountedComponents;InsertCardsModal.prototype.componentDidMount=function(){AbstractModalChisel.prototype.componentDidMount.call(this);this._getBulkTextarea().getShadow().focusShadow()};InsertCardsModal.prototype._getChildBlock=function(){return this.getApp().getTargetNode()};InsertCardsModal.prototype._getBulkTextarea=function(){return this.getStump().findStumpByChild("id bulkTextarea")};InsertCardsModal.prototype._getBulkAdvanced=function(){return this.getStump().findStumpByChild("id bulkAdvanced")};
InsertCardsModal.prototype._getBulkType=function(){return this.getStump().findStumpByChild("id bulkType")};InsertCardsModal.prototype._updateBulkTextAreaPlaceholderCommand=function(){var a=this._getBulkType().getShadow().getShadowValue(),a=(new CardParser).getExample(a)||"";this._getBulkTextarea().setStumpAttr("placeholder","Example:\n"+a);this._updateBulkTextAreaAdvancedCommand()};
InsertCardsModal.prototype._updateBulkTextAreaAdvancedCommand=function(){var a=this._getBulkTextarea(),b=this._getBulkAdvanced(),c=this._getBulkType().getShadow().getShadowValue(),d="";""===c?d="Detected: "+(new CardParser).inferEncoding(a.getShadow().getShadowValue()):"advanced"===c&&(d='Delimiter: <input placeholder="," id="bulkDelimiter">\n        <br>Enclosing Char: <input placeholder=\'"\' id="bulkEnclosingChar">\n        <br>Has Headers: <input type="checkbox" id="bulkHasHeader" checked>');
b.getShadow().setShadowHtml(d)};
InsertCardsModal.prototype._submitBulkInsertCommand=function(){var a=this.getApp(),b=this._getChildBlock(),c=this._getBulkTextarea().getShadow().getShadowValue(),d=this._getBulkType().getShadow().getShadowValue(),e=this.getStump().findStumpByChild;if("advanced"===d){d=e("id bulkDelimiter").getShadow().getShadowValue()||",";var f=e("id bulkEnclosingChar").getShadow().getShadowValue()||'"';e=e("id bulkHasHeader").getShadow().isShadowChecked();c=(new CardParser).parseAdvancedDelimited(c,e,d,f)}else c=
(new CardParser).parse(c,d);a.logMessage(Say($jscomp$templatelit$24));b.createCards(c);a.closeModal()};InsertCardsModal.prototype.getModalBray=function(){return"\n@ div\n id bulkCardsPopup\n @ h4\n  content Insert Nodes\n  @ p\n   content Enter nodes in any format: csv, newlines, tsv, json, or tree.\n  @ div\n   class form-group\n   @ textarea\n    data-onChangeCommand chisel _updateBulkTextAreaAdvancedCommand\n    class bigInput\n    rows 15\n    id bulkTextarea\n    wrap off\n  @ div\n   class form-group\n   @ label\n    for bulkType\n    content Format\n   @ select\n    data-onChangeCommand chisel _updateBulkTextAreaPlaceholderCommand\n    class bigInput\n    id bulkType\n    @ option\n     content Detect\n     value \n    @ option\n     value csv\n     content CSV\n    @ option\n     value tsv\n     content TSV\n    @ option\n     value json\n     content JSON\n    @ option\n     value ssv\n     content SSV\n    @ option\n     value rss\n     content RSS\n    @ option\n     value tree\n     content Tree\n    @ option\n     value list\n     content List\n    @ option\n     value spaced\n     content Spaced Trees\n    @ option\n     value sections\n     content Sections\n    @ option\n     value advanced\n     content Advanced Delimited\n   @ div\n    id bulkAdvanced\n    content &nbsp;\n   @ button\n    type button\n    class buttonPrimary\n    data-onClickCommand chisel _submitBulkInsertCommand\n    content Insert"};
window.InsertCardsModal=InsertCardsModal;var NodeEditorModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(NodeEditorModal,AbstractModalChisel);NodeEditorModal._mountedComponents=AbstractModalChisel._mountedComponents;NodeEditorModal.prototype.hasChanges=function(){var a=this.getNode(),b=this._getLatest();return b.children!==a.childrenToString()||b.line!==a.getLine()};
NodeEditorModal.prototype._getLatest=function(){this.getStump();return{children:this._getTextarea().getShadow().getShadowValue(),line:this._getInput().getShadow().getShadowValue()}};NodeEditorModal.prototype._saveChangesCommand=function(){var a=this.getNode(),b=this._getLatest();a.setChildren(b.children||void 0);a.setLine(b.line);a=this.getApp();a.closeModal();a.getMountedProgram().autosaveAndRender()};NodeEditorModal.prototype._getTextarea=function(){return this.getStump().findStumpByTag("textarea")};
NodeEditorModal.prototype._getInput=function(){return this.getStump().findStumpByTag("input")};NodeEditorModal.prototype._deleteNodeCommand=function(){var a=this,b=this.getApp();return b.confirm("Delete. Are you sure?").then(function(c){if(!c)return!1;c=a.getNode();c.unmountAndDestroy?c.unmountAndDestroy():c.destroy();b.closeModal();b.getMountedProgram().autosaveAndRender();return!0})};
NodeEditorModal.prototype.componentDidMount=function(){var a=this.getNode();this._getTextarea().getShadow().setShadowValue(a.childrenToString()||"");this._getInput().getShadow().setShadowValue(a.getLine()||"")};NodeEditorModal.prototype.getNode=function(){return this.getApp().getTargetNode()};
NodeEditorModal.prototype.getModalBray=function(){return"@ h4\n content Editing '"+this.getNode().getBasePath()+"'\n @ div\n  class monospaceModal\n  @ input\n  @ textarea\n@ button\n title Delete\n data-onClickCommand chisel _deleteNodeCommand\n class leftButton\n content "+MakeSVG("trash",30)+"\n@ button\n title Save\n data-onClickCommand chisel _saveChangesCommand\n class SVGIcon rightButton\n content "+MakeSVG("check",30)};window.NodeEditorModal=NodeEditorModal;
var NodePickerModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(NodePickerModal,AbstractModalChisel);NodePickerModal._mountedComponents=AbstractModalChisel._mountedComponents;NodePickerModal.prototype.getHakon=function(){var a=this.getTheme();return AbstractModalChisel.prototype.getHakon.call(this)+"\n.base\n color "+a.linkColor+"\n cursor pointer"};NodePickerModal.prototype.getProgram=function(){return this.getApp().getMountedProgram()};
NodePickerModal.prototype._openNodeEditorCommand=function(a){a=a.split(" ").map(function(a){return parseInt(a)});a=a.splice(2);app.closeModal();app.openNodeEditorModalCommand(a)};NodePickerModal.prototype.getModalBray=function(){var a=this.getProgram().toHtml().replace(/data\-pathVector/g,'data-onClickCommand="chisel _openNodeEditorCommand" value');return"@ h4\n content Click a property to edit\n@ div\n class monospaceModal\n @ div\n  content "+Util.indent(a,3)};window.NodePickerModal=NodePickerModal;
var SourceEditorModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(SourceEditorModal,AbstractModalChisel);SourceEditorModal._mountedComponents=AbstractModalChisel._mountedComponents;SourceEditorModal.prototype.hasChanges=function(){return this._getTextarea().getShadow().getShadowValue()!==this.getApp().getMountedProgram().childrenToString()};SourceEditorModal.prototype._getTextarea=function(){return this.getStump().findStumpByTag("textarea")};
SourceEditorModal.prototype._saveChangesCommand=function(){var a=this.getApp(),b=this._getTextarea(),c=a.getMountedProgram(),b=b.getShadow().getShadowValue();c.setChildren(b);a.closeModal();c.autosaveAndRender()};SourceEditorModal.prototype.componentDidMount=function(){this._getTextarea().getShadow().setShadowValue(this.getApp().getMountedProgram().childrenToString())};
SourceEditorModal.prototype.getModalBray=function(){return"@ h4\n content Edit Source\n@ textarea\n rows 20\n class bigInput\n wrap off\n@ button\n title Save\n data-onClickCommand chisel _saveChangesCommand\n class SVGIcon rightButton\n content "+MakeSVG("check",30)};window.SourceEditorModal=SourceEditorModal;var FireBluePrints='>block\n & pin outputPoint .2\n require AbstractBlockChisel /aientist/clients/base/program/AbstractBlockChisel.js\n & visible boolean true\n>settings >block\n & layout enum custom\n  percentage .1\n  options custom tree bin\njs >block\n require AbstractFireBlock /aientist/clients/base/program/AbstractFireBlock.js\n size 280 160\nblock js\n hasBlock\nassignment js\n>command >block\n>didyoumean >command\n require DidYouMeanBlock /aientist/clients/browser/blocks/commands/DidYouMeanBlock.js\n>morph >command\n size 420 400\n require MorphBlock /aientist/clients/browser/blocks/commands/MorphBlock.js\n:: js\n description Print a variable to the console\n beamPattern identifier+\n toJS console.log({identifier+})\n percentage .5\n svg printer\n joinLastBy , \n::$ js\n description Print a string to the console\n beamPattern word+\n toJS console.log("{word+}")\n percentage .1\n svg printer\nrequire js\n description Require Something\n svg import\n beamPattern identifier path\n toJS const {identifier} = require("{path}")\n percentage .1\nexport js\n description Export This\n svg export\n beamPattern identifier\n toJS module.exports = {identifier}\n percentage .1\n=# assignment\n description Number Assignment\n beamPattern identifier number\n toJS const {identifier} = {number}\n percentage .3\n svg hashtag\n=$ assignment\n description String Assignment\n beamPattern identifier word+\n toJS const {identifier} = "{word+}"\n percentage .2\n svg font-1\n=+ assignment\n description Add Numbers\n beamPattern identifier number+\n joinLastBy  + \n svg add\n toJS const {identifier} = {number+}\n percentage .1\n=< assignment\n description Less than test\n beamPattern identifier number number\n toJS const {identifier} = {number} < {number}\n percentage .1\n svg lt\n=<= assignment\n description Less than or equal to test\n beamPattern identifier number number\n toJS const {identifier} = {number} <= {number}\n percentage .1\n svg lt-eq\n=> assignment\n description Greater than test\n beamPattern identifier number number\n toJS const {identifier} = {number} > {number}\n percentage .1\n=- =+\n description Subtract Numbers\n joinLastBy  - \n svg minus\n=/ =+\n description Divide Numbers\n joinLastBy  / \n=% =+\n description Modulo Numbers\n joinLastBy %\n=* =+\n description Multiply Numbers\n joinLastBy  * \n svg multiply\n=~ assignment\n description Mutable Number Assignment\n beamPattern identifier number\n toJS let {identifier} = {number}\n-- js\n description Decrement\n beamPattern identifier\n toJS {identifier}--\n percentage .1\n++ js\n description Increment\n percentage .3\n beamPattern identifier\n toJS {identifier}++\n=#+ assignment\n description Number Array Assignment\n beamPattern identifier number+\n percentage .4\n toJS const {identifier} = [{number+}]\n joinLastBy , \n=>> assignment\n description Function Call\n percentage .5\n svg call\n beamPattern identifier functionIdentifier parameter+\n toJS const {identifier} = {functionIdentifier}({parameter+})\n joinLastBy , \n>> js\n description Function call ignore result.\n percentage .1\n svg call\n beamPattern functionIdentifier parameter+\n toJS {functionIdentifier}({parameter+})\n joinLastBy , \n=.>> assignment\n description Method Call\n percentage .5\n beamPattern identifier instanceIdentifier methodName parameter+\n toJS const {identifier} = {instanceIdentifier}.{methodName}({parameter+})\n joinLastBy , \nreturn js\n beamPattern identifier\n toJS return {identifier}\n percentage .1\n svg nw\n=fn block\n description Function Assignment\n beamPattern functionIdentifier parameter+\n toJS const {functionIdentifier} = ({parameter+}) =>\n percentage .1\n svg function\n joinLastBy , \nif block\n description If block\n svg fork\n beamPattern identifier\n percentage .2\n toJS if ({identifier})\nwhile block\n description While block\n beamPattern identifier\n percentage .1\n toJS while ({identifier})\nclass block\n description Class Assignment\n beamPattern identifier\n percentage .2\n toJS class {identifier}\nsubclass block\n percentage .2\n description Subclass Assignment\n beamPattern identifier parentIdentifier\n toJS class {identifier} extends {parentIdentifier}';
window.FireBluePrints=FireBluePrints;var FireProgram=function(a){return AbstractProgramChisel.apply(this,arguments)||this};$jscomp.inherits(FireProgram,AbstractProgramChisel);FireProgram._mountedComponents=AbstractProgramChisel._mountedComponents;FireProgram.prototype.getCatchAllBlockClass=function(a,b,c,d){return c.trim().length?a.getDidYouMeanBlock().getJSClass(d):ParserETN.BlockPropertyNode};FireProgram.prototype.compilesTo=function(){return"js"};FireProgram.prototype.buildProgram=function(){return this.getChildrenByNodeType(AbstractBlockChisel).map(function(a){return a.toJavascript()}).filter(function(a){return a}).join("\n")};
FireProgram.prototype.execute=function(){return eval(this.buildProgram())};window.FireProgram=FireProgram;var FlowProgram=function(a){return AbstractProgramChisel.apply(this,arguments)||this};$jscomp.inherits(FlowProgram,AbstractProgramChisel);FlowProgram._mountedComponents=AbstractProgramChisel._mountedComponents;FlowProgram.prototype.getTopNodeTypes=function(){return">text >data >table >presidents >url >filter >group >kpi >reddit >h2".split(" ")};
FlowProgram.prototype.getProgramOfInterest=function(){var a=this.getDescendantBlocks().find(function(a){return">editor"===a.getBase()});if(a){var b=a.getStruct().etn;return this.getApp().generateProgram(a.getDataContent(),b)}return this};FlowProgram.prototype.compilesTo=function(){return"html"};FlowProgram.prototype.buildProgram=function(){return this.getDescendantBlocks().filter(function(a){return!(a instanceof ParserETN.BlockPropertyNode)}).map(function(a){return a.getBlockContentBray()}).join("\n")};
FlowProgram.prototype.getCatchAllBlockClass=function(a,b,c,d){a=a.getDidYouMeanBlock().getJSClass(d);return c.startsWith(">")?a:ParserETN.BlockPropertyNode};window.FlowProgram=FlowProgram;var FlowCodeEditorTemplate=function(a,b){return">editor\n format text\n etn "+b+"\n content "+Util.indent(a,2)+"\n >3d\n >outline\n >types\n  >pre\n   >wc\n    >wordcloud\n>settings\n layout bin"};window.FlowCodeEditorTemplate=FlowCodeEditorTemplate;var MiniTemplate=">programs\n visible false\n >mini\n  title My Programs\n  orderBy link";
window.MiniTemplate=MiniTemplate;var SpeedTestTemplate=function(a,b){return">data\n pin 45 32 17 5\n content "+b.replace(/\n/g,"\n  ")+"\n columns\n  timeToLoad\n   type number\n  timeToRender\n   type number\n >text\n  content "+a+"\n  pin 45 0 23 3\n >table\n  link url\n  title Slow Load Times\n  x timeToLoad\n  y timeToRender\n  orderBy -timeToLoad\n  pin 0 0 43 18\n >table\n  link url\n  title Slow Render Times\n  x timeToLoad\n  y timeToRender\n  orderBy -timeToRender\n  pin 0 20 41 17\n >kpi\n  pin 45 4 11 7\n  column timeToLoad\n  reduction average\n >kpi\n  pin 45 15 11 7\n  column timeToRender\n  reduction average\n >kpi\n  pin 45 24 11 7\n  column timeToRender\n  reduction median\n >kpi\n  pin 57 4 11 7\n  column timeToLoad\n  reduction sum\n >kpi\n  pin 57 15 11 7\n  column timeToRender\n  reduction sum\n >kpi\n  pin 57 24 11 7\n  column timeToRender\n  reduction count"};
window.SpeedTestTemplate=SpeedTestTemplate;var OhayoApp=function(a){return AbstractAppChisel.apply(this,arguments)||this};$jscomp.inherits(OhayoApp,AbstractAppChisel);OhayoApp._mountedComponents=AbstractAppChisel._mountedComponents;OhayoApp.prototype.fetchProgram=function(a){a.setChildrenAndDiskAndUndoStack(this.getFromStore(a.getUrl()));return Promise.resolve()};OhayoApp.prototype.getHomeUrl=function(){return"/"};
OhayoApp.prototype.componentWillMount=function(){AbstractAppChisel.prototype.componentWillMount.call(this);1===this._getVisitCount()&&this.playFirstVisitCommand()};OhayoApp.prototype.playFirstVisitCommand=function(){var a=this;return this.openOhayoProgramCommand("readme.flow faq.flow releasenotes.flow helloWorld.fire").then(function(){return a.openOhayoProgramCommand("ohayo.flow")})};OhayoApp.prototype.saveProgramToDisk=function(a,b){this.storeValue(a.getFileName(),b.newVersion);return Promise.resolve()};
OhayoApp.prototype.getCaddies=function(){var a=this;return this.getStoreKeys().filter(function(a){return!StorageKeys.isKey(a)}).map(function(b){return new LocalStorageCaddy(a.getFromStore(b),b)})};OhayoApp.prototype.getProgramToOpen=function(){return this.getFromStore(StorageKeys.mountedProgram)};OhayoApp.prototype.doesFileExistSync=function(a){return void 0!==this.getFromStore(a)};OhayoApp.prototype.deleteFileCommand=function(a){this.removeValue(a);return Promise.resolve()};
OhayoApp.prototype.renameFileCommand=function(a,b,c){this.storeValue(b,this.getFromStore(a)||"");this.removeValue(a);return Promise.resolve(b)};OhayoApp.prototype._createFile=function(a,b){a=this._getAvailablePermalink(a);this.storeValue(a,b);return Promise.resolve(a)};OhayoApp.prototype.createAndOpen=function(a,b){var c=this;return this._createFile(b,a).then(function(a){return c.openUrlInNewSpaceAndFocus(a)})};window.OhayoApp=OhayoApp;WillowDocument.startApp(OhayoApp);
