var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof e?a:new e(function(b,c){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){d(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];delete a[b];try{c()}catch(k){this.asyncThrow_(k)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(l){b.reject(l)}};e.prototype.createResolveAndReject_=
function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(l){this.reject_(l);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var f=new b;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(k){c.reject(k)}};e.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{d(a(b))}catch(q){f(q)}}:b}var d,f,g=new e(function(a,
b){d=a;f=b});this.callWhenSettled_(c(a,d),c(b,f));return g};e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(function(){f.asyncExecute(c)})};e.resolve=c;e.reject=function(a){return new e(function(b,c){c(a)})};e.race=function(a){return new e(function(b,
d){for(var e=$jscomp.makeIterator(a),f=e.next();!f.done;f=e.next())c(f.value).callWhenSettled_(b,d)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?c([]):new e(function(a,e){function f(b){return function(c){g[b]=c;h--;0==h&&a(g)}}var g=[],h=0;do g.push(void 0),h++,c(d.value).callWhenSettled_(f(g.length-1),e),d=b.next();while(!d.done)})};return e},"es6-impl","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=b.length,f=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var g=0;g<f&&c<e;)if(b[c++]!=a[g++])return!1;return g>=f}},"es6-impl","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;for(c=c||0;c<e;c++)if(b[c]==a||Object.is(b[c],a))return!0;return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6-impl","es3");
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};$jscomp.polyfill("Object.values",function(a){return a?a:function(a){var b=[],d;for(d in a)$jscomp.owns(a,d)&&b.push(a[d]);return b}},"es8","es3");$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");
$jscomp.polyfill("WeakMap",function(a){function b(a){$jscomp.owns(a,d)||$jscomp.defineProperty(a,d,{value:{}})}function c(a){var c=Object[a];c&&(Object[a]=function(a){b(a);return c(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(k){return!1}}())return a;var d="$jscomp_hidden_"+Math.random().toString().substring(2);c("freeze");c("preventExtensions");
c("seal");var e=0,f=function(a){this.id_=(e+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};f.prototype.set=function(a,c){b(a);if(!$jscomp.owns(a,d))throw Error("WeakMap key fail: "+a);a[d][this.id_]=c;return this};f.prototype.get=function(a){return $jscomp.owns(a,d)?a[d][this.id_]:void 0};f.prototype.has=function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)};f.prototype.delete=
function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)?delete a[d][this.id_]:!1};return f},"es6-impl","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(p){return!1}}())return a;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var b=new WeakMap,c=function(a){this.data_={};this.head_=f();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};c.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};c.prototype.delete=
function(a){a=d(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};c.prototype.has=function(a){return!!d(this,a).entry};c.prototype.get=function(a){return(a=d(this,a).entry)&&a.value};c.prototype.entries=function(){return e(this,function(a){return[a.key,
a.value]})};c.prototype.keys=function(){return e(this,function(a){return a.key})};c.prototype.values=function(){return e(this,function(a){return a.value})};c.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var d=function(a,c){var d=c&&typeof c;"object"==d||"function"==d?b.has(c)?d=b.get(c):(d=""+ ++g,b.set(c,d)):d="p_"+c;var e=a.data_[d];if(e&&$jscomp.owns(a.data_,d))for(a=0;a<e.length;a++){var f=
e[a];if(c!==c&&f.key!==f.key||c===f.key)return{id:d,list:e,index:a,entry:f}}return{id:d,list:e,index:-1,entry:void 0}},e=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},f=function(){var a={};return a.previous=a.next=a.head=a},g=0;return c},"es6-impl","es3");
$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var e=a.length;0<e&&0<c;)if(b[--c]!=a[--e])return!1;return 0>=e}},"es6-impl","es3");$jscomp.polyfill("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e)for(var f in e)$jscomp.owns(e,f)&&(a[f]=e[f])}return a}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d}},"es6-impl","es3");var AbstractChisel=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(AbstractChisel,TreeNotation);AbstractChisel.prototype.getApp=function(){return this.getRootNode()};
AbstractChisel.prototype.getParseErrorCount=function(){return this.length?lodash.sum(this.getTopDownArray().map(function(a){return a.getParseErrorCount()})):0};AbstractChisel.prototype.getRunTimeFailureCount=function(){return 0};AbstractChisel.prototype.getStump=function(){return this._htmlStump};AbstractChisel.prototype._stopPropagationCommand=function(){};AbstractChisel.prototype.isNode=function(){return"undefined"!==typeof exports};AbstractChisel.prototype.getHakon=function(){return""};
AbstractChisel.prototype.getTheme=function(){return this.getApp().getTheme()};AbstractChisel.prototype.getCommandsBuffer=function(){this._commandsBuffer||(this._commandsBuffer=[]);return this._commandsBuffer};AbstractChisel.prototype.logCommand=function(a){this.getCommandsBuffer().push({command:a,time:this._getNow()})};AbstractChisel.prototype.getMessageBuffer=function(){this._messageBuffer||(this._messageBuffer=new TreeNotation);return this._messageBuffer};
AbstractChisel.prototype.clearCommand=function(){delete this._messageBuffer;return Promise.resolve()};AbstractChisel.prototype.logMessage=function(a){this.getMessageBuffer().append("message",a)};AbstractChisel.prototype.unmount=function(){this.isMounted()&&(this._getChildChisels().forEach(function(a){return a.unmount()}),this.chiselWillUnmount(),this._removeCss(),this._removeHtml(),delete this._lastRenderedTime,this.chiselDidUnmount())};
AbstractChisel.prototype._removeCss=function(){this._cssStump.removeStump();delete this._cssStump};AbstractChisel.prototype._removeHtml=function(){this._htmlStump.removeStump();delete this._htmlStump};AbstractChisel.prototype._confirmAndUnmountCommand=function(){var a=this;return(this.hasChanges()?this.getApp().confirm("Drop changes?"):Promise.resolve(!0)).then(function(b){if(!b)return!1;b=a.getApp();a.unmountAndDestroy();b.renderApp()})};
AbstractChisel.prototype.getBray=function(){return"@div\n class "+this.constructor.name};AbstractChisel.prototype.chiselWillMount=function(){};AbstractChisel.prototype.chiselDidMount=function(){void 0===AbstractChisel._mountedChisels&&(AbstractChisel._mountedChisels=0);AbstractChisel._mountedChisels++};AbstractChisel.prototype.chiselDidUnmount=function(){AbstractChisel._mountedChisels--};AbstractChisel.prototype.chiselWillUnmount=function(){};AbstractChisel.prototype.forceUpdate=function(){};
AbstractChisel.prototype.getNewestTimeToRender=function(){return this._lastTimeToRender};AbstractChisel.prototype._setLastRenderedTime=function(a){this._lastRenderedTime=a;return this};AbstractChisel.prototype.chiselDidUpdate=function(){};AbstractChisel.prototype._getChildChisels=function(){return this.getChildren().filter(function(a){return a instanceof AbstractChisel})};AbstractChisel.prototype.makeAllDirty=function(){this.makeDirty();this._getChildChisels().forEach(function(a){return a.makeAllDirty()})};
AbstractChisel.prototype.hasChildren=function(){return 0<this._getChildChisels().length};AbstractChisel.prototype.getStumpForChildren=function(){return this.getStump()};AbstractChisel.prototype._renderChildren=function(){var a=this.getStumpForChildren();this._getChildChisels().filter(function(a){return a.isMounted()||a.shouldChiselMount()}).forEach(function(b,c){return b.render(a,c)})};AbstractChisel.prototype.getLastRenderedTime=function(){return this._lastRenderedTime};
AbstractChisel.prototype.makeDirty=function(){this._setLastRenderedTime(0)};AbstractChisel.prototype._getCss=function(){return this.getTheme().hakonToCss(this.getHakon())};AbstractChisel.prototype._getCssBray=function(){return"@style\n styleFor "+this.constructor.name+"\n bern"+TreeNotation.nest(this._getCss(),2)};
AbstractChisel.prototype._update=function(){if(!this._shouldChiselUpdate())return!1;this._setLastRenderedTime(this._getNow());this._removeCss();this._mountCss();if(this.hasChildren())return!1;this.updateHtml();this._lastTimeToRender=this._getNow()-this.getLastRenderedTime();return!0};AbstractChisel.prototype._mountCss=function(a){this._cssStump=this.getApp().getWillowProgram().getHeadStump().insertChildNode(this._getCssBray())};
AbstractChisel.prototype._mountHtml=function(a,b){this._htmlStump=a.insertChildNode(this.getBray(),b);this._htmlStump.setStumpChisel(this)};AbstractChisel.prototype.updateHtml=function(){var a=this._htmlStump.getParent(),b=this._htmlStump.getIndex();this._removeHtml();this._mountHtml(a,b)};
AbstractChisel.prototype._mount=function(a,b){if(!this.shouldChiselMount())return this;this._setLastRenderedTime(this._getNow());this.chiselWillMount();this.getApp().getWillowProgram();this._mountCss(a);this._mountHtml(a,b);this._lastTimeToRender=this._getNow()-this.getLastRenderedTime();return this};AbstractChisel.prototype.unmountAndDestroy=function(){this.unmount();return this.destroy()};
AbstractChisel.prototype.toggle=function(a,b){var c=this.getNode(a);if(!b)return c?c.unmountAndDestroy():this.append(a);c=void 0===c?void 0:c.getBeam();c=b.indexOf(c);b=-1===c||c+1===b.length?b[0]:b[c+1];this.delete(a);b&&this.touchNode(a).setBeam(b);return b};AbstractChisel.prototype.isMounted=function(){return!!this._htmlStump};AbstractChisel.prototype.getNextOrPrevious=function(a){var b=a.length,c=a.indexOf(this);if(1!==b)return c===b-1?a[c-1]:a[c+1]};
AbstractChisel.prototype.toggleAndRender=function(a,b){this.toggle(a,b);this.getApp().renderApp();return Promise.resolve()};AbstractChisel.prototype.appendAndRender=function(a,b){this.append(a,b);this.getApp().renderApp();return Promise.resolve()};AbstractChisel.prototype.swapAndRender=function(a,b){var c=this.has(a)?b:a;a=this.has(a)?a:b;a=this.getNode(a);b=a.getIndex();this.insert(c,void 0,b);a.unmountAndDestroy();this.getApp().renderApp();return Promise.resolve()};
AbstractChisel.prototype._shouldChiselUpdate=function(){var a=this.getLastRenderedTime();return!a||a<this.getMTime()?!0:this.getDependencyTimestamps().some(function(b){return b>a})};AbstractChisel.prototype.getDependencyTimestamps=function(){return[]};AbstractChisel.prototype.shouldChiselMount=function(){return!0};
AbstractChisel.prototype.render=function(a,b){var c=this.isMounted(),d=!1;c?d=this._update():this._mount(a,b);this.isMounted()&&this._renderChildren();c?d&&this.chiselDidUpdate():this.chiselDidMount();return this};window.AbstractChisel=AbstractChisel;var AbstractProgramChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractProgramChisel,AbstractChisel);AbstractProgramChisel._mountedChisels=AbstractChisel._mountedChisels;
AbstractProgramChisel.prototype.parseNodeType=function(a){var b=this.getDictionary();return(a=b.parseNodeTypeFromDictionary(this,a))?a:b.getDidYouMeanDefinition().getDefinitionJSClass()};AbstractProgramChisel.prototype.getProgram=function(){return this};AbstractProgramChisel.prototype.getOutputBinder=function(){this._outputBinder||(this._outputBinder=new Binder(this));return this._outputBinder};
AbstractProgramChisel.prototype.getGuess=function(){var a=this.getDictionary();return{guess:this.getParseErrorCount(),name:a.getExtensionName()}};AbstractProgramChisel.prototype.getHierarchy=function(){return{node:this,children:this.getProgramCogs().map(function(a){return a.getHierarchy()})}};AbstractProgramChisel.prototype.getProgramCogs=function(){return this.getTopDownArray().filter(function(a){return a instanceof AbstractCogChisel})};AbstractProgramChisel.prototype.getProgramOfInterest=function(){return this};
AbstractProgramChisel.prototype.buildProgram=function(){return this.getChildrenByNodeType(AbstractCogChisel).map(function(a){return a.getBuiltCog()}).filter(function(a){return a}).join("\n")};AbstractProgramChisel.prototype.getDictionary=function(){this._dictionary||(this._dictionary=new DictionaryProgram(this.getDictionaryString(),void 0,this));return this._dictionary};AbstractProgramChisel.prototype.isProgram=function(){return!0};
AbstractProgramChisel.prototype.getProgramSlotString=function(){return this.getTopDownArray().map(function(a){return a.getIndentation()+a.getSlotLine()}).join("\n")};AbstractProgramChisel.prototype.executeLoadProgramCode=function(){var a=this,b=this.getDictionary(),c=lodash.uniq(this.getProgramCogs().map(function(a){return a.getBase()}));return Promise.all(c.map(function(c){return b.loadDefinitionCode(c,a.getApp())}))};
AbstractProgramChisel.prototype.executeLoadProgramCodeAndData=function(){var a=this;return this.executeLoadProgramCode().then(function(){return Promise.all(a.getProgramCogs().map(function(a){return a.executeLoadData()}))})};AbstractProgramChisel.prototype.getCogDimensionMap=function(a,b){return(new (this._getLayoutStrategyClass())(this,a,b)).makeCogDimensionMap()};AbstractProgramChisel.prototype._getLayoutStrategyClass=function(){return LayoutStrategies[this.findBeam(">settings layout")]||LayoutStrategies.custom};
AbstractProgramChisel.prototype.getProgramDimension=function(){var a=this.getApp().getWillowProgram().getBodyStump().getShadow();return{width:a.getShadowWidth()-this.getParent().getGutterWidth(),height:a.getShadowHeight()}};AbstractProgramChisel.prototype.getSelectedCogs=function(){return this.getProgramCogs().filter(function(a){return a.isSelected()})};AbstractProgramChisel.prototype.clearSelection=function(){this.getSelectedCogs().forEach(function(a){return a.unselect()})};
AbstractProgramChisel.prototype.selectAll=function(){this.getProgramCogs().forEach(function(a){return a.selectCog()})};AbstractProgramChisel.prototype.getFirstSelectedCog=function(){return this.getSelectedCogs()[0]};AbstractProgramChisel.prototype.selectNext=function(){for(var a=this.getFirstSelectedCog().getNext();!a.getBase().startsWith(">");)a=this.getFirstSelectedCog().getNext();this.clearSelection();a.selectCog();return Promise.resolve()};
AbstractProgramChisel.prototype.copySelection=function(a){a=this._copySelection(a);if(!a)return Promise.resolve();this.getApp().logMessage("Items copied");return Promise.resolve(a)};AbstractProgramChisel.prototype._copySelection=function(a){var b=this.getApp().getWillowProgram();if(b.someInputHasFocus())return"";var c=this.selectionToString();if(!c)return"";b.setCopyData(a,c);return c};AbstractProgramChisel.prototype.selectionToString=function(){return this.getSelectedCogs().map(function(a){return a.toString()}).join("\n")};
AbstractProgramChisel.prototype.selectCogsByShadowClass=function(a){a=void 0===a?"ui-selected":a;this.getApp().getWillowProgram().findStumpsByShadowClass(a).forEach(function(a){return a.getStumpChisel().selectCog()})};AbstractProgramChisel.prototype._getPinChangeInPixels=function(a,b){return{left:a.offset.left-b.left,top:a.offset.top-b.top}};
AbstractProgramChisel.prototype.cutSelection=function(a){a=this._copySelection(a);if(!a)return Promise.resolve();this.deleteSelection();this.getApp().logMessage("Items cut");return Promise.resolve(a)};AbstractProgramChisel.prototype.deleteSelection=function(){var a=this.getSelectedCogs();if(!a.length)return Promise.resolve();a.forEach(function(a){return a.unmountAndDestroy()});return this.autosaveAndRender()};
AbstractProgramChisel.prototype.duplicateSelection=function(){var a=this,b=this.getSelectedCogs().map(function(b){return a.cloneCog(b)}),c=this.autosaveAndRender();this.clearSelection();b.forEach(function(a){return a.selectCog()});return c};AbstractProgramChisel.prototype.selectPrevious=function(){for(var a=this.getFirstSelectedCog().getPrevious();!a.getBase().startsWith(">");)a=this.getFirstSelectedCog().getPrevious();this.clearSelection();a.selectCog();return Promise.resolve()};
AbstractProgramChisel.prototype.appendFromPaste=function(a){var b=this,c=this.concat(a).filter(function(a){return a instanceof AbstractCogChisel});a=this.autosaveAndRender();this.clearSelection();return a.then(function(){return b.executeLoadProgramCodeAndData().then(function(){c.forEach(function(a){return a.selectCog()})}).catch(function(a){console.error(a)})})};
AbstractProgramChisel.prototype.getAutocompleteWords=function(a){var b=this.getDictionary().getCogNames().join("\n")+"\n"+this.childrenToString();return Util.getUniqueWordsArray(b).filter(function(b){return b.word.includes(a)&&b.word!==a}).map(function(a){return a.word})};AbstractProgramChisel.prototype.setLayout=function(a){this.touchNode(">settings layout").setBeam(a);return this};
AbstractProgramChisel.prototype.cloneCog=function(a){var b=a.duplicate();(a=a.findBeam(CogConstants.pin))&&b.touchNode(CogConstants.pin).setBeam(this.getAvailableSpot(a));return b};AbstractProgramChisel.prototype._updateCustomPoint=function(){return this._updateCustomLayout()};AbstractProgramChisel.prototype._updateCustomPointWithWidthAndHeight=function(){return this._updateCustomLayout(!0)};
AbstractProgramChisel.prototype._updateCustomLayout=function(a){a=void 0===a?!0:a;var b=this,c=this.getApp();c.getWillowProgram().findStumpsWithClass("CogChisel").forEach(function(c){return b._updateCogLayout(c,a)});this.setLayout("custom");this.autosaveProgram();c.renderApp()};
AbstractProgramChisel.prototype._updateCogLayout=function(a,b){var c=a.getShadow(),d=a.getStumpChisel();if(d.isVisible()){var e=c.getShadowOffset(),f=this.getGridSize();a=a.getParent().getShadow().getShadowOffset();c=[Math.floor((e.left-a.left)/f),Math.floor((e.top-a.top)/f),Math.floor(c.getShadowWidth()/f),Math.floor(c.getShadowHeight()/f)];b=(b?c:c.slice(0,2)).join(" ");d.findBeam(CogConstants.pin)!==b&&(d.delete(CogConstants.pin),d.prepend(CogConstants.pin+" "+b))}};
AbstractProgramChisel.prototype.getAvailableSpot=function(a){a=a.split(" ").map(function(a){return parseInt(a)});a[0]++;a[1]++;return a.join(" ")};AbstractProgramChisel.prototype.toggleLayout=function(){var a=this.toggle(">settings layout",["custom","bin","tree"]);this.getProgramCogs().forEach(function(a){return a.makeDirty()});this.logMessage("Layout set to '"+a+"'");return this.autosaveAndRender()};AbstractProgramChisel.prototype.getGridSize=function(){return 20};
AbstractProgramChisel.prototype.autosaveAndRender=function(){var a=this.autosaveProgram();this.getApp().renderApp();return a};AbstractProgramChisel.prototype.autosaveProgram=function(){var a=this,b=this.childrenToString(),c=this._getTopUndoVersion();if(b===c)return Promise.resolve();this._recordChange(b);var d=this.getApp();return d.isAutoSaveEnabled()?this.forceSaveToDisk().then(function(){a.logMessage("Saved "+a.getUrl());var b=d.getNode("panel gutter console");b&&b.render()}):Promise.resolve()};
AbstractProgramChisel.prototype._clearRedoStack=function(){var a=this._getRedoStack();a.splice(0,a.length)};AbstractProgramChisel.prototype._recordChange=function(a){this._clearRedoStack();this._getUndoStack().push(a)};AbstractProgramChisel.prototype.forceSaveToDisk=function(){var a=this._getDiff();this.setHash(a.newHash);this._setDiskVersion(a.newVersion);return this.getApp().saveProgramToDisk(this,a)};AbstractProgramChisel.prototype._getDiskVersion=function(){return this._diskVersion};
AbstractProgramChisel.prototype._setDiskVersion=function(a){this._diskVersion=a;return this};AbstractProgramChisel.prototype._getUndoStack=function(){this._undoStack||(this._undoStack=[]);return this._undoStack};AbstractProgramChisel.prototype._getRedoStack=function(){this._redoStack||(this._redoStack=[]);return this._redoStack};AbstractProgramChisel.prototype._getTopUndoVersion=function(){var a=this._getUndoStack();return a[a.length-1]};
AbstractProgramChisel.prototype.undoCommand=function(){var a=this._getUndoStack(),b=this._getRedoStack();if(1===a.length)return Promise.resolve();b.push(a.pop());return this._reloadFromUndoTop()};AbstractProgramChisel.prototype._reloadFromUndoTop=function(){this.unmount();this.setChildren(this._getTopUndoVersion());return this._reloadProgram()};AbstractProgramChisel.prototype.autosaveAndReloadWith=function(a){this.unmount();this.setChildren(a);this.autosaveProgram();return this._reloadProgram()};
AbstractProgramChisel.prototype._reloadProgram=function(){var a=this;return this.executeLoadProgramCodeAndData().then(function(){a.getParent().setMountedProgram(a);a.getApp().renderApp()})};AbstractProgramChisel.prototype.redoCommand=function(){var a=this._getUndoStack(),b=this._getRedoStack();if(!b.length)return Promise.resolve();a.push(b.pop());return this._reloadFromUndoTop()};AbstractProgramChisel.prototype.hasUnsavedChanges=function(){return this.childrenToString()!==this._getDiskVersion()};
AbstractProgramChisel.prototype.getHash=function(){return this._hash||""};AbstractProgramChisel.prototype.setHash=function(a){this._hash=a};AbstractProgramChisel.prototype._getDiff=function(){var a=this.getHash(),b=this.childrenToString(),c=this._getDiskVersion(),c=diff.compareStr(c,b,"\n"),d=new jsSHA("SHA-1","TEXT");d.update(a+JSON.stringify(c));d=d.getHash("HEX");return{oldHash:a,newHash:d,patch:c,newVersion:b}};
AbstractProgramChisel.prototype.setChildrenAndDiskAndUndoStack=function(a){this.setChildren(a);this._setDiskVersion(a);this._getUndoStack().push(a);return this};AbstractProgramChisel.prototype.getFileName=function(){return Util.getFileName(this.getUrl())};AbstractProgramChisel.prototype.getUrl=function(){return this.getBeam()};AbstractProgramChisel.prototype.getCTime=function(){return this._ctime||0};
AbstractProgramChisel.prototype.getHakon=function(){var a=this.getTheme(),b=this.getParent().getGutterWidth();return".CorkBoard\n background "+a.corkBoardBackground+"\n position relative\n left "+b+"px\n right 0\n bottom 0\n height calc(100% - 60px)\n\n.ui-selectable-helper\n position absolute\n z-index 100\n border-radius 2px\n background "+a.selectionBackground+"\n\n.ui-selecting,.ui-selected,.StaySelected\n outline 3px solid "+a.selectedOutline};
AbstractProgramChisel.prototype.makePin=function(a){var b=this.getGridSize();return[Math.floor((a.offsetX-0)/b),Math.floor(a.offsetY/b)].join(" ")};AbstractProgramChisel.prototype.chiselDidUpdate=function(){this._fixBigBug()};
AbstractProgramChisel.prototype._fixBigBug=function(){var a={"min-height":"","min-width":"",width:"",height:""},b=this.getApp(),c=this.getStump(),d=c.getParent(),e=b.getWillowProgram(),f=e.getHtmlStump(),b=(b=b.getMenuChisel())&&b.getStump();c.setStumpCss(a);d.setStumpCss(a);f.setStumpCss(a);e.forceRepaint();e=e.getDocumentSize();b&&b.setStumpCss(a);f.setStumpCss(a);a=e.width;e=e.height;b&&b.setStumpCss({width:a});f.setStumpCss({"min-height":"100%","min-width":"100%",width:a,height:e});f={"min-height":e-
60+"px","min-width":a+"px"};d.setStumpCss(f);c.setStumpCss(f)};AbstractProgramChisel.prototype.chiselDidMount=function(){this._makeSelectable();this._makeCogsMoveableAndResizableAndEditable();this._fixBigBug()};
AbstractProgramChisel.prototype._makeSelectable=function(){var a=this.getApp(),b=this.getStump().getShadow(),c=a.getWillowProgram();b.onShadowEvent(WillowShadowEvents.click,function(a){a.target===b.getShadowElement()&&c.blurFocusedInput()});b.makeSelectable({cancel:".CogChisel",distance:10,filter:".CogChisel",start:function(b){b.shiftKey?c.findStumpsWithClass("ui-selected").forEach(function(a){return a.addClassToStump("StaySelected")}):a.clearSelectionCommand()},stop:function(){c.findStumpsWithClass("StaySelected").forEach(function(a){return a.addClassToStump("ui-selected").removeClassFromStump("StaySelected")});
a.selectCogsByShadowClassCommand();return!0}})};AbstractProgramChisel.prototype.getProgramStats=function(){var a=this.getProgramCogs(),b=a.map(function(a){return a.getCogErrorCount()}).reduce(function(a,b){return a+b},0);return{cogs:a.length,errorCount:b,url:this.getFileName()}};AbstractProgramChisel.prototype.shouldChiselMount=function(){return AbstractChisel.prototype.shouldChiselMount.call(this)&&this.getParent().getMountedProgram()===this};
AbstractProgramChisel.prototype._makeCogsMoveableAndResizableAndEditable=function(){var a=this.getApp(),b=a.getWillowProgram(),c=this,d=this.getGridSize();this.getStump().getShadow().onShadowEvent(WillowShadowEvents.mouseover,".CogChisel",function(e){e=b.getStumpFromElement(this);var f=e.getShadow();if(f.isShadowResizable())return!0;c._makeGroupDraggable(e,[d,d]);f.makeResizable({handles:"se",grid:d,resize:function(a){a.stopPropagation();a.preventDefault();return!1},stop:function(){return a.getMountedProgram()._updateCustomPointWithWidthAndHeight()}})})};
AbstractProgramChisel.prototype.getContextMenuCommandsBray=function(){return"@a Save Program\n data-onClickCommand app saveProgramAndNotifyCommand\n@a Rename program\n data-onClickCommand app showTabRenamePromptCommand\n@a Delete program\n data-onClickCommand app showDeleteFileConfirmDialogCommand\n@a Save compiled '"+this.getDictionary().compilesTo()+"' file\n tabindex -1\n data-onClickCommand app saveCompiledCommand"};
AbstractProgramChisel.prototype.getBray=function(){return"@div\n class CorkBoard "+this.constructor.name+"\n data-onContextMenuCommand chisel _openProgramContextMenuCommand\n data-onDblClickCommand app insertMorphCogCommand"};AbstractProgramChisel.prototype._openProgramContextMenuCommand=function(){return this.getApp().toggleAndRender("programContextMenu")};AbstractProgramChisel.prototype._getSelectedCogStumps=function(){return this.getApp().getWillowProgram().findStumpsWithClass("ui-selected")};
AbstractProgramChisel.prototype._updateSelectedOnMove=function(a,b){var c=this._getSelectedCogStumps();c.length&&c.filter(function(b){return b!==a}).forEach(function(a){var c=parseFloat(a.getStumpCss("top")),d=parseFloat(a.getStumpCss("left"));a.setStumpCss({transform:"",top:c+b.top+"px",left:d+b.left+"px"})})};
AbstractProgramChisel.prototype._makeGroupDraggable=function(a,b){if(a.stumpHasClass("draggable"))return!0;var c,d=this,e=this.getApp(),f={stop:function(b,f){a.removeClassFromStump("noTransition");a.setStumpAttr("data-translate","undefined undefined");b=d._getPinChangeInPixels(f,c);d._updateSelectedOnMove(a,b);c=f;e.getMountedProgram()._updateCustomPoint()},handle:".CogGrabber",drag:function(b,e){if(a.stumpHasClass("ui-selected")){var f=d._getPinChangeInPixels(e,c);d._getSelectedCogStumps().filter(function(b){return b!==
a}).forEach(function(a){return a.setStumpCss({transform:"translate("+f.left+"px, "+f.top+"px)"})})}},start:function(b,d){c=d.offset;a.addClassToStump("noTransition");if(b=a.getStumpAttr("data-translate"))parseInt(b.split(" ")[0]),parseInt(b.split(" ")[1])}};b&&(f.grid=b);a.addClassToStump("draggable").getShadow().makeDraggable(f)};window.AbstractProgramChisel=AbstractProgramChisel;var AbstractCard=function(a,b){a=void 0===a?{}:a;this._puid=this._getUniqueId();this._sourceObject=a;this._binder=b};
AbstractCard.prototype._getUniqueId=function(){void 0===AbstractCard._uniqueId&&(AbstractCard._uniqueId=0);AbstractCard._uniqueId++;return AbstractCard._uniqueId};AbstractCard.prototype.destroy=function(){};AbstractCard.prototype._getCardBinder=function(){return this._binder};AbstractCard.prototype.getCardApp=function(){return this.getCardCog().getApp()};AbstractCard.prototype.getCardCog=function(){return this._getCardBinder().getBinderOwner()};AbstractCard.prototype.destroyCardCommand=function(){return Promise.resolve()};
AbstractCard.prototype.getCardSourceAsObject=function(){return this.getCardSource()};AbstractCard.prototype.getAsArray=function(a){var b=this.getCardNumeric();return a.map(function(a){return b[a]})};AbstractCard.prototype.getCardSource=function(){return this._sourceObject};
AbstractCard.prototype._parseNumeric=function(){var a=this,b=this._getCardBinder().getColumnsMap(),c={};Object.keys(b).forEach(function(d){var e=b[d],f=a.getCardValue(d);void 0===f&&(f="");c[d]=""===f?"":e.getColumnTypeObj().fromStringToNumeric(f)});return c};AbstractCard.prototype.getCardNumeric=function(){this._numeric||(this._numeric=this._parseNumeric());return this._numeric};AbstractCard.prototype.getCardKeys=function(){return Object.keys(this.getCardSource())};
AbstractCard.prototype.getFirstCell=function(){return this.getCardValue(this.getCardKeys()[0])};AbstractCard.prototype.getCardValue=function(a){a=this.getCardSource()[a];return null===a?"":a};AbstractCard.prototype.setCardValue=function(a,b){this.getCardSource()[a]=b;return this};AbstractCard.prototype.reloadFromStr=function(a){var b=this.getCardSource();Object.keys(b).forEach(function(a){return delete b[a]});var c=JSON.parse(a);Object.keys(c).forEach(function(a){return b[a]=c[a]})};
AbstractCard.prototype.deleteFromCard=function(a){delete this.getCardSource()[a];return this};AbstractCard.prototype.getPuid=function(){return this._puid};AbstractCard.prototype.renameCardCol=function(a,b){var c=this.getCardSource();c[b]=c[a];delete c[a];return this};AbstractCard.prototype.cardToString=function(){return JSON.stringify(this.getCardSource(),null,2)};window.AbstractCard=AbstractCard;
var Binder=function(a,b,c,d){a=void 0===a?new TreeNotation:a;b=void 0===b?[]:b;c=void 0===c?[]:c;d=void 0===d?AbstractCard:d;var e=this;this._parentNode=a;this._cards=b.map(function(a){return a instanceof AbstractCard?a:new d(a,e)});var f={};this._columnsMap=f;c.concat(this._getDetectedColumns()).forEach(function(a){var b=e._getColumnTextVector(a.name);f[a.name]=new Column(a,b)});this._ctime=this.getBinderOwner()._getNow();this._addRanks()};Binder.prototype.getCards=function(){return this._cards};
Binder.prototype.getFirstColumnAsString=function(){return this.getCards().map(function(a){return a.getFirstCell()}).join("")};Binder.prototype.getFirstCard=function(){return this.getCards()[0]};Binder.prototype._getColumnTextVector=function(a){return this.getCards().map(function(b){return b.getCardValue(a)})};Binder.prototype.getColumnNumericVector=function(a){return this.getCards().map(function(b){return b.getCardNumeric()[a]})};
Binder.prototype._getUnionSample=function(){var a={};this.getSampleSet().forEach(function(b){b.getCardKeys().forEach(function(c){if(c){var d=a[c];if(void 0===d||""===d)a[c]=b.getCardValue(c)}})});return a};Binder.prototype.getColumnsByImportance=function(){var a=this.getColumnsArray();a.sort(Util.sortByAccessor(function(a){return a.getRank()}));return a};Binder.prototype.getSampleSet=function(){this._sampleSet||(this._sampleSet=lodash.sampleSize(this.getCards(),30));return this._sampleSet};
Binder.prototype.getCardCount=function(){return this.getCards().length};Binder.prototype.getCardSources=function(){return this.getCards().map(function(a){return a.getCardSource()})};Binder.prototype.getColumnNames=function(){return Object.keys(this.getColumnsMap())};Binder.prototype.getColumnsMap=function(){return this._columnsMap};Binder.prototype.getCTime=function(){return this._ctime};Binder.prototype.getColumnsArray=function(){return Object.values(this.getColumnsMap())};
Binder.prototype.getColumnsArrayOfObjects=function(){return this.getColumnsArray().map(function(a){return a.toObject()})};Binder.prototype.getNumericValues=function(){return this.getCards().map(function(a){return a.getCardNumeric()})};Binder.prototype.getBinderColumnByName=function(a){return this.getColumnsMap()[a]};Binder.prototype._getDetectedColumns=function(){var a=this.getColumnsMap();return Object.keys(this._getUnionSample()).map(function(a){return a.trim()}).filter(function(a){return a}).filter(function(b){return!a[b]}).map(function(a){return{name:a}})};
Binder.prototype.getBinderOwner=function(){return this._parentNode};Binder.prototype.getCardTypeName=function(){return"Card"};Binder.prototype.toTypeScriptInterface=function(){var a=this.getColumnsArray().map(function(a){return"  "+a.getColumnName()+": "+a.getColumnTypeName()+";"}).join("\n");return"interface "+this.getCardTypeName()+" {\n"+a+"\n}"};Binder.prototype.toBlankFormTemplate=function(){var a=this.getColumnNames().join(" \n");return(new TreeNotation(a?a+" ":a)).toString()};
Binder.prototype.getSortedCards=function(a){if(!a)return this.getCards();var b=this.getCards().map(function(a){return a});Util.sortByFast(b,a);return b};Binder.prototype.getSortedCardsWithLimit=function(a,b){return this.getSortedCards(a).slice(0,b)};Binder.prototype.toDelimited=function(a){return(new TreeNotation(this.getCardSources())).toDelimited(a,this.getColumnNames())};
Binder.prototype._addRanks=function(){var a=this.getColumnsMap(),b=Object.keys(a).map(function(b){return a[b]});b.sort(function(a,b){if(a.getTitlePotential()>b.getTitlePotential())return-1;if(b.getTitlePotential()>a.getTitlePotential())return 1;if(.5<a.getMissingDataPercentage()||.5<b.getMissingDataPercentage()){if(a.getMissingDataPercentage()>b.getMissingDataPercentage())return 1;if(b.getMissingDataPercentage()>a.getMissingDataPercentage())return-1}return a.isTemporal()&&!b.isTemporal()?-1:!a.isTemporal()&&
b.isTemporal()||a.isLink()&&!b.isLink()?1:!a.isLink()&&b.isLink()?-1:a.isString()&&!b.isString()?1:!a.isString()&&b.isString()?-1:a.isString()&&b.isString()?4<a.getEntropy()&&8>a.getEntropy()&&a.getEntropy()>b.getEntropy()?-1:a.getEstimatedTextLength()>b.getEstimatedTextLength()?1:-1:0});b.forEach(function(a,b){a.setRank(b)});return this};window.Binder=Binder;var AbstractCardParser=function(){};AbstractCardParser.prototype.getProbForCardSpecimen=function(){return 0};
AbstractCardParser.prototype.isNode=function(){return"undefined"!==typeof exports};var AbstractTreeCardParser=function(a){AbstractCardParser.apply(this,arguments)};$jscomp.inherits(AbstractTreeCardParser,AbstractCardParser);AbstractTreeCardParser.prototype.parse=function(a){return this.parseTrees(a).getChildren().filter(function(a){return a.length}).map(function(a){return a.toObject()})};var DelimitedParser=function(a){AbstractTreeCardParser.apply(this,arguments)};
$jscomp.inherits(DelimitedParser,AbstractTreeCardParser);DelimitedParser.prototype.getExample=function(){return"john~12~50\nmary~13~43"};DelimitedParser.prototype.parseTrees=function(a,b,c,d){return TreeNotation.fromDelimited(a,b,c,d)};DelimitedParser.prototype.getFormatName=function(){return"delimited"};var CsvParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(CsvParser,AbstractTreeCardParser);CsvParser.prototype.getExample=function(){return"name,age,height\njohn,12,50"};
CsvParser.prototype.parseTrees=function(a){return TreeNotation.fromCsv(a)};CsvParser.prototype.getProbForCardSpecimen=function(a){return a.firstLineCommaCount?a.blankLineCount?.05:.49:0};CsvParser.prototype.getFormatName=function(){return"csv"};var TsvParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(TsvParser,AbstractTreeCardParser);TsvParser.prototype.getExample=function(){return"name\tage\theight\njohn\t12\t50"};TsvParser.prototype.parseTrees=function(a){return TreeNotation.fromTsv(a)};
TsvParser.prototype.getProbForCardSpecimen=function(a){return a.firstLineTabCount?5<a.tabCount?.9:.25:0};TsvParser.prototype.getFormatName=function(){return"tsv"};var PsvParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(PsvParser,AbstractTreeCardParser);PsvParser.prototype.getFormatName=function(){return"psv"};PsvParser.prototype.getExample=function(){return"name|age\nmike|33"};PsvParser.prototype.parseTrees=function(a){return TreeNotation.fromDelimited(a,"|")};
PsvParser.prototype.getProbForCardSpecimen=function(a){return a.firstLineVerticalBarCount?a.verticalBarCount>=a.lineCount?.8:.01:0};var SsvParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(SsvParser,AbstractTreeCardParser);SsvParser.prototype.getExample=function(){return"name age height\njohn 12 50"};SsvParser.prototype.getFormatName=function(){return"ssv"};SsvParser.prototype.parseTrees=function(a){return TreeNotation.fromSsv(a)};
SsvParser.prototype.getProbForCardSpecimen=function(a){return a.firstLineSpaceCount?a.blankLineCount?.05:.11:0};var XmlParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(XmlParser,AbstractTreeCardParser);XmlParser.prototype.getProbForCardSpecimen=function(a){return a.trimmedStr.match(/^ *\</)?1:0};XmlParser.prototype.getExample=function(){return"<person>\n <name>bob</name><age>32</age></person>"};XmlParser.prototype.getFormatName=function(){return"xml"};
XmlParser.prototype.parseTrees=function(a){return this.isNode()?new TreeNotation(a):TreeNotation.fromXml(a)};var HtmlParser=function(a){AbstractTreeCardParser.apply(this,arguments)};$jscomp.inherits(HtmlParser,AbstractTreeCardParser);HtmlParser.prototype.getProbForCardSpecimen=function(a){return a.trimmedStr.match(/^(\<\!doctype html\>|\<html|\<div)/i)?1:0};HtmlParser.prototype.getExample=function(){return"<!doctype html>\n<html>\n <head>bam</head></html>"};HtmlParser.prototype.getFormatName=function(){return"html"};
HtmlParser.prototype.parseTrees=function(a){return this.isNode()?new TreeNotation(a):TreeNotation.fromXml(a)};var SpacedParser=function(a){AbstractCardParser.apply(this,arguments)};$jscomp.inherits(SpacedParser,AbstractCardParser);SpacedParser.prototype.getExample=function(){return"name john\nage 12\n\nname mary\nage 20"};SpacedParser.prototype.getFormatName=function(){return"spaced"};SpacedParser.prototype.getProbForCardSpecimen=function(a){return 10<a.blankLineCount?.95:.05};
SpacedParser.prototype.parse=function(a){var b=a.indexOf("\n\n"),c=a.substr(0,b).split(/\n/g),d=a.substr(b+2).replace(/\n\n/g,"\n").trim().split("\n");a=c.length;for(var b=d.length,e=[],c=c.map(function(a){return a.replace(/ /g,"")}),f={lineNumber:0};f.lineNumber<b;f={obj:f.obj,lineNumber:f.lineNumber},f.lineNumber+=a)f.obj={},c.forEach(function(a){return function(b,c){a.obj[b]=d[a.lineNumber+c].trim()}}(f)),e.push(f.obj);return e};var TreeParser=function(a){AbstractTreeCardParser.apply(this,arguments)};
$jscomp.inherits(TreeParser,AbstractTreeCardParser);TreeParser.prototype.getExample=function(){return"person\n name john\n age 12\n height 50"};TreeParser.prototype.parseTrees=function(a){a=a instanceof TreeNotation?a:new TreeNotation(a);var b=a.getChildren().filter(function(a){return a.getBeam()}).length,c=a.getChildren().filter(function(a){return 0===a.length}).length;if(!b&&!c)return a;b=new TreeNotation;b.pushBeamAndChildren(void 0,a);return b};
TreeParser.prototype.getProbForCardSpecimen=function(a){return 1>a.indentedLineCount?0:.1};TreeParser.prototype.getFormatName=function(){return"tree"};var SectionsParser=function(a){AbstractCardParser.apply(this,arguments)};$jscomp.inherits(SectionsParser,AbstractCardParser);SectionsParser.prototype.getExample=function(){return"name\nage\n\njohn\n12\n\nmary\n20"};SectionsParser.prototype.getFormatName=function(){return"sections"};
SectionsParser.prototype.parse=function(a){var b=a.indexOf("\n\n"),c=[a.slice(0,b),a.slice(b+1)];a=c.shift().split(/\n/g);for(var b=a.length,c=c[0].trim().split(/\n/g),d=c.length/b,e=[],f={},g=0;g<d;f={obj:f.obj,values:f.values},g++){var h=g*b;f.values=c.slice(h,h+b);f.obj={};a.forEach(function(a){return function(b,c){return a.obj[b]=a.values[c]}}(f));e.push(f.obj)}return e};var ListParser=function(a){AbstractCardParser.apply(this,arguments)};$jscomp.inherits(ListParser,AbstractCardParser);
ListParser.prototype.getExample=function(){return"john doe\nfrank jones"};ListParser.prototype.getFormatName=function(){return"list"};ListParser.prototype.parse=function(a){return a.split(/\n/g).map(function(a,c){return{index:c,name:a}})};var TextParser=function(a){AbstractCardParser.apply(this,arguments)};$jscomp.inherits(TextParser,AbstractCardParser);TextParser.prototype.getFormatName=function(){return"text"};TextParser.prototype.getExample=function(){return"hello world"};
TextParser.prototype.getProbForCardSpecimen=function(a){return a.blankLineCount?.12:.05};TextParser.prototype.parse=function(a){return[{text:a}]};var AbstractJsonParser=function(a){AbstractCardParser.apply(this,arguments)};$jscomp.inherits(AbstractJsonParser,AbstractCardParser);AbstractJsonParser.prototype.getFormatName=function(){return"json"};AbstractJsonParser.prototype.getExample=function(){return JSON.stringify([{name:"joe",age:2},{name:"mike",age:4}])};
AbstractJsonParser.prototype.parse=function(a){a=JSON.parse(a);return a instanceof Array?a:[a]};var JsonParser=function(a){AbstractJsonParser.apply(this,arguments)};$jscomp.inherits(JsonParser,AbstractJsonParser);var AbstractJsonArrayParser=function(a){AbstractJsonParser.apply(this,arguments)};$jscomp.inherits(AbstractJsonArrayParser,AbstractJsonParser);AbstractJsonArrayParser.prototype.getExample=function(){return JSON.stringify([{name:"jane",age:33},{name:"bill",age:25}])};
AbstractJsonArrayParser.prototype.getProbForCardSpecimen=function(a){a=a.trimmedStr;return a.match(/^\s*\[/)&&a.match(/\]\s*$/)?.99:0};var JsonArrayParser=function(a){AbstractJsonArrayParser.apply(this,arguments)};$jscomp.inherits(JsonArrayParser,AbstractJsonArrayParser);var AbstractJsonObjectParser=function(a){AbstractJsonParser.apply(this,arguments)};$jscomp.inherits(AbstractJsonObjectParser,AbstractJsonParser);
AbstractJsonObjectParser.prototype.getProbForCardSpecimen=function(a){a=a.trimmedStr;return a.match(/^\s*\{/)&&a.match(/\}\s*$/)?.99:0};var JsonObjectParser=function(a){AbstractJsonObjectParser.apply(this,arguments)};$jscomp.inherits(JsonObjectParser,AbstractJsonObjectParser);var JsonMapParser=function(a){AbstractJsonObjectParser.apply(this,arguments)};$jscomp.inherits(JsonMapParser,AbstractJsonObjectParser);
JsonMapParser.prototype.getExample=function(){return JSON.stringify({person1:{name:"joe",age:2},person2:{name:"mike",age:4}})};JsonMapParser.prototype.getFormatName=function(){return"jsonMap"};JsonMapParser.prototype.parse=function(a){return Object.values(JSON.parse(a))};var JsonVectorParser=function(a){AbstractJsonArrayParser.apply(this,arguments)};$jscomp.inherits(JsonVectorParser,AbstractJsonArrayParser);JsonVectorParser.prototype.getExample=function(){return JSON.stringify([23,32,41])};
JsonVectorParser.prototype.getFormatName=function(){return"jsonVector"};JsonVectorParser.prototype.getProbForCardSpecimen=function(a){a=a.trimmedStr;try{var b=JSON.parse(a);return b instanceof Array?0===b.filter(function(a){return a&&"object"===typeof a&&a.hasOwnProperty}).length:0}catch(c){}return 0};JsonVectorParser.prototype.parse=function(a){return JSON.parse(a).map(function(a){return{value:a}})};var JsonCountMapParser=function(a){AbstractJsonObjectParser.apply(this,arguments)};
$jscomp.inherits(JsonCountMapParser,AbstractJsonObjectParser);JsonCountMapParser.prototype.getFormatName=function(){return"jsonCounts"};JsonCountMapParser.prototype.getProbForCardSpecimen=function(a){a=a.trimmedStr;try{var b=JSON.parse(a),c=Object.keys(b);return 2>c.length?0:c.some(function(a){return"number"!==typeof b[a]})?0:1}catch(d){}return 0};JsonCountMapParser.prototype.getExample=function(){return JSON.stringify({h1:10,h2:5,h3:2})};
JsonCountMapParser.prototype.parse=function(a){var b=JSON.parse(a);return Object.keys(b).map(function(a){return{name:a,count:b[a]}})};
var CardParser=function(){var a=this;this._parsers=[new CsvParser,new TsvParser,new SsvParser,new PsvParser,new TextParser,new TreeParser,new XmlParser,new HtmlParser,new SectionsParser,new SpacedParser,new ListParser,new JsonParser,new JsonArrayParser,new JsonVectorParser,new JsonMapParser,new JsonCountMapParser];this._parserMap={};this._parsers.forEach(function(b){var c=b.getFormatName();c&&(a._parserMap[c]=b)})};CardParser.prototype.getAllParsers=function(){return this._getParsersArray()};
CardParser.prototype.getEncodingNames=function(){return Object.keys(this._getParserMap())};CardParser.prototype.getExample=function(a){return this._getParser(a).getExample()};CardParser.prototype._getParser=function(a){var b=this._getParserMap();return b[a]||b.text};CardParser.prototype._getParserMap=function(){return this._parserMap};CardParser.prototype._getParsersArray=function(){return this._parsers};
CardParser.prototype.parseFromObject=function(a,b){return a instanceof Array?"object"===typeof a[0]?a:a.map(function(a){return"object"===typeof a?a:{value:a}}):"jsonMap"===b?Object.values(a):[a]};CardParser.prototype.parse=function(a,b){a=(void 0===a?"":a).trim();if(!a)return[];b=b||this.inferEncoding(a);return this._getParser(b).parse(a)};CardParser.prototype.parseAdvancedDelimited=function(a,b,c,d){return this._getParser("delimited").parse(a,b,c,d)};
CardParser.prototype.getProbabilities=function(a){var b=this._getParsersArray(),c={};a=new CardStringSpecimen(a);for(var d=0;d<b.length;d++){var e=b[d],f=e.getProbForCardSpecimen(a),e=e.getFormatName();if(1===f)return b={},b[e]=1,b;c[e]=f}return c};CardParser.prototype.inferEncoding=function(a){a=this.getProbabilities(a);var b=0,c=null,d;for(d in a)a[d]>b&&(b=a[d],c=d);return c};window.CardParser=CardParser;
var CardStringSpecimen=function(a){a=a.trim();var b=a.split(/\n/g),c=b[0],d=function(a,b){return(a.match(b)||[]).length};this.trimmedStr=a;this.lines=b;this.firstLine=c;this.lineCount=b.length;this.indentedLineCount=d(a,/\n /g);this.blankLineCount=d(a,/\n\n/g);this.commaCount=d(a,/\,/g);this.tabCount=d(a,/\t/g);this.verticalBarCount=d(a,/\|/g);this.firstLineCommaCount=d(c,/\,/g);this.firstLineTabCount=d(c,/\t/g);this.firstLineSpaceCount=d(c,/ /g);this.firstLineVerticalBarCount=d(c,/\|/g)};
window.CardStringSpecimen=CardStringSpecimen;var ObjectBackedCard=function(a){AbstractCard.apply(this,arguments)};$jscomp.inherits(ObjectBackedCard,AbstractCard);ObjectBackedCard._uniqueId=AbstractCard._uniqueId;window.ObjectBackedCard=ObjectBackedCard;var PivotTable=function(a,b,c){this._cards=a;var d={};b.forEach(function(a){return d[a.name]=a});c.forEach(function(a){return d[a.name]=a});this._columns=d};
PivotTable.prototype._getGroups=function(a,b){var c=new Map;a.forEach(function(a){var d=b.map(function(b){return a[b].toString().replace(/ /g,"")}).join(" ");c.has(d)||c.set(d,[]);c.get(d).push(a)});return c};
PivotTable.prototype.getNewCards=function(a){var b=this,c=this._getGroups(this._cards,a),d=[{name:"count",type:"number",min:0}];a.forEach(function(a){return d.push(b._columns[a])});var e=Object.values(this._columns).filter(function(a){return!!a.reduction});e.forEach(function(a){return d.push(a)});for(var f=[],g={},c=$jscomp.makeIterator(c),h=c.next();!h.done;g={newCard:g.newCard,firstCard:g.firstCard,group:g.group},h=c.next())h=$jscomp.makeIterator(h.value),h.next(),g.group=h.next().value,g.firstCard=
g.group[0],g.newCard={},a.forEach(function(a){return function(b){a.newCard[b]=a.firstCard?a.firstCard[b]:0}}(g)),g.newCard.count=g.group.length,e.forEach(function(a){return function(b){var c=b.name,d=a.group.map(function(a){return a[c]}).filter(function(a){return"number"===typeof a&&!isNaN(a)});b=b.reduction;var e=a.firstCard[c];"sum"===b&&(e=d.reduce(function(a,b){return a+b},0));"avg"===b&&(e=d.reduce(function(a,b){return a+b},0)/d.length);a.newCard[c]=e}}(g)),f.push(g.newCard);return{cards:f,columns:d}};
window.PivotTable=PivotTable;
var TableSpecimen=function(a,b){this.colCount=a.length;this.cardCount=b.length;this.primaryKey=this.timeseries=!1;this.nounType="thing";this.nounClasses="someGeneralThing someMoreSpecificThing";this.hasNominalCol=this.hasDateCol=this.hasNumericCol=!1;this.cardNounType="";this.hasSubNounColumn=!1;this.subNounColumns=[];this.correlationMatrx=[];this.mostImportantColumns=[];this.hasSlice=this.hasFrequencyColumn=this.hasRankColumn=this.isOrderImportant=!1;this.cohesivity=1;this.isPair=!1};
window.TableSpecimen=TableSpecimen;var TreeBackedCard=function(a,b){a=void 0===a?new TreeNotation:a;AbstractCard.call(this,a,b)};$jscomp.inherits(TreeBackedCard,AbstractCard);TreeBackedCard._uniqueId=AbstractCard._uniqueId;TreeBackedCard.prototype.getCardId=function(){return this.getCardSource().getBase()};TreeBackedCard.prototype.destroy=function(){this.getCardSource().destroy();return AbstractCard.prototype.destroy.call(this)};TreeBackedCard.prototype.getCardSourceAsObject=function(){return this.getCardSource().toObject()};
TreeBackedCard.prototype.renameCardCol=function(a,b){return this.getCardSource().rename(a,b)};TreeBackedCard.prototype.reloadFromStr=function(a){return this.getCardSource().setChildren(a)};TreeBackedCard.prototype.setCardValue=function(a,b){this.getCardSource().touchNode(a).setBeam(b);return this};TreeBackedCard.prototype.getCardKeys=function(){return this.getCardSource().getBases()};TreeBackedCard.prototype.deleteFromCard=function(a){return this.getCardSource().delete(a)};
TreeBackedCard.prototype.cardToString=function(){return this.getCardSource().childrenToString()};TreeBackedCard.prototype.getCardValue=function(a){return this.getCardSource().findBeam(a)||""};window.TreeBackedCard=TreeBackedCard;var AbstractCaddy=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(AbstractCaddy,TreeNotation);AbstractCaddy.prototype.getCaddyLink=function(){return this.getLine()};AbstractCaddy.prototype._getCaddyStr=function(){return this.childrenToString()};
AbstractCaddy.prototype.toCaddyObject=function(){return{link:this.getCaddyLink(),bytes:this._getCaddyStr()}};window.AbstractCaddy=AbstractCaddy;var AbstractAppChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractAppChisel,AbstractChisel);AbstractAppChisel._mountedChisels=AbstractChisel._mountedChisels;
AbstractAppChisel.prototype.chiselWillMount=function(){var a=this;this._startVisitCounter();var b=this.getFromStore(StorageKeys.openPrograms),b=(b=b?b.replace("!",""):"")?b.split(" "):[],b=lodash.uniq(b),c=this.getProgramToOpen();c&&-1===b.indexOf(c)&&b.push(c);b=b.map(function(a){return a===c?"!"+a:a});b=b.slice(0,30);this.concat("theme\nmenu\npanel\n programs "+b+"\n gutter\n  terminal\n  console");b.forEach(function(b){return b.startsWith("!")?a.openUrlInNewSpaceAndFocus(b.substr(1)):a.openUrlInNewSpace(b)});
this._setBodyShadowHandlers();this._makeProgramLinksOpenImmediately();this._makeDocumentCopyableAndCuttable();this._bindKeyboardShortcuts();var d=this,e=d.getWillowProgram();e.setResizeEndHandler(function(a){d.renderApp()});e.setPasteHandler(function(a){if(e.someInputHasFocus())return!0;a.clipboardData&&a.clipboardData.getData&&d.pasteCommand(a.clipboardData.getData("text/plain"))});e.setLoadedDroppedFileHandler(function(b){a._createProgramFromFile(b.filename,b.data)},"Drop to create a new program.");
this._setErrorHandlers();this.logMessage("Ohayo dear user!")};AbstractAppChisel.prototype._createProgramFromFile=function(a,b){var c=Util.getFileExtension(a);if(this.getETNs()[c])return this.createAndOpen(b,a);b=(c=FlowTemplates[c])?c(a,b):">text No visualization templates for "+a;this.createAndOpen(b,a+".flow")};AbstractAppChisel.prototype.registerETN=function(a,b){this.getETNs()[a]=b;return this};AbstractAppChisel.prototype.getProgramClass=function(a){return this.getETNs()[a]||FlowProgram};
AbstractAppChisel.prototype.getETNs=function(){this._etns||(this._etns={},this.registerETN("flow",FlowProgram),this.registerETN("fire",FireProgram));return this._etns};AbstractAppChisel.prototype.getTargetNode=function(){return this._targetNode};AbstractAppChisel.prototype.setTargetNode=function(a){this._targetNode=a;return this};
AbstractAppChisel.prototype.getWillowProgram=function(){this._willowBrowser||(this._willowBrowser="undefined"===typeof jQuery?new WillowProgram("http://localhost:8000/"):new WillowBrowserProgram(""));return this._willowBrowser};AbstractAppChisel.prototype.emptyFolderCommand=function(){};AbstractAppChisel.prototype.getServerPath=function(){return""};AbstractAppChisel.prototype.getVersion=function(){return Version};
AbstractAppChisel.prototype._startVisitCounter=function(){var a=this._getVisitCount();a++;this.setVisitCount(a)};AbstractAppChisel.prototype.setVisitCount=function(a){this.storeValue(StorageKeys.visitCount,a)};AbstractAppChisel.prototype._getVisitCount=function(){var a=this.getFromStore(StorageKeys.visitCount);return a?parseInt(a):0};
AbstractAppChisel.prototype.getNodeTypes=function(){return{theme:ThemeChisel,menu:MenuChisel,panel:PanelChisel,nodePickerModal:NodePickerModal,sourceEditorModal:SourceEditorModal,programContextMenu:ProgramContextMenuChisel,cogContextMenu:CogContextMenuChisel,cogInspectorModal:CogInspectorModal,cardEditorModal:CardEditorModal,insertCardModal:InsertCardModal,insertCardsModal:InsertCardsModal,promptModal:CustomPromptModal,confirmModal:CustomConfirmModal,nodeEditorModal:NodeEditorModal,helpModal:HelpModal}};
AbstractAppChisel.prototype.parseNodeType=function(a){return this.getNodeTypes()[a.split(" ")[0]]};AbstractAppChisel.prototype.getBray=function(){return"@div\n class AbstractAppChisel "+this.constructor.name};AbstractAppChisel.prototype.getHakon=function(){return".AbstractAppChisel\n height 100%\n width 100%"};AbstractAppChisel.prototype.goRed=function(a){a=this.getMountedProgram();this.logMessage("error on program: "+(a?a.getUrl():"")+".")};
AbstractAppChisel.prototype.reportUncaughtError=function(a){if("undefined"===typeof ga)return Promise.resolve();ga("send","event","UncaughtError",error.name);return Promise.resolve()};AbstractAppChisel.prototype._setErrorHandlers=function(){var a=this;this.getWillowProgram().setErrorHandler(function(b,c,d){a.reportUncaughtError(b);a.goRed();console.error(b)})};AbstractAppChisel.prototype.openNodeEditorModalCommand=function(a){a=this.getMountedProgram().nodeAt(a);this.setTargetNode(a);return this.toggleAndRender("nodeEditorModal")};
AbstractAppChisel.prototype.closeModal=function(){this.getOpenModals().forEach(function(a){return a.unmountAndDestroy()})};AbstractAppChisel.prototype.getOpenModals=function(){return this.getChildren().filter(function(a){return a instanceof AbstractModalChisel})};AbstractAppChisel.prototype.closeAllContextMenus=function(){this.getChildren().filter(function(a){return a instanceof AbstractContextMenuChisel}).forEach(function(a){return a.unmountAndDestroy()})};
AbstractAppChisel.prototype.closeAllDropDownMenusCommand=function(){this.getTopDownArray().forEach(function(a){a.getLine().includes("DropDownMenu")&&a.unmountAndDestroy()});return Promise.resolve()};AbstractAppChisel.prototype.renderApp=function(){this.render(this.getWillowProgram().getBodyStump());return this};AbstractAppChisel.prototype.appendCogCommand=function(a,b){this._appendCogs(a,b).forEach(function(a){return a.executeLoadData()});return this.getMountedProgram().autosaveAndRender()};
AbstractAppChisel.prototype._getAvailablePermalink=function(a){var b=this;a=Format.permalink(a);return Util.getAvailablePermalink(a,function(a){return b.doesFileExistSync(a)})};AbstractAppChisel.prototype._appendCogs=function(a,b){return this.getNodeCursors().map(function(c){return c.append(a,b)})};AbstractAppChisel.prototype.appendCogAndSelectCommand=function(a,b){var c=this._appendCogs(a,b);c.forEach(function(a){return a.executeLoadData()});a=this.getMountedProgram();a.clearSelection();return a.autosaveAndRender().then(function(){c.forEach(function(a){return a.selectCog()})})};
AbstractAppChisel.prototype.insertMorphCogCommand=function(){var a=this.getMountedProgram(),b=this.getMouseEvent();this.getNodeCursors().forEach(function(c){c.append(">morph",CogConstants.pin+" "+a.makePin(b))});return a.autosaveAndRender()};AbstractAppChisel.prototype.getNodeCursors=function(){var a=this.getMountedProgram().getSelectedCogs();return a.length?a:[this.getMountedProgram()]};
AbstractAppChisel.prototype.deleteAllCardsInTargetCogCommand=function(){var a=this,b=this.getTargetNode().getInputBinder();return Promise.all(b.getCards().map(function(a){return a.destroyCardCommand()})).then(function(){a.renderApp()})};AbstractAppChisel.prototype.openOhayoProgramCommand=function(a){var b=this;return Promise.all(a.split(" ").map(function(a){return b._openOhayoProgramCommand(a)}))};
AbstractAppChisel.prototype._openOhayoProgramCommand=function(a){var b=(new TreeNotation(DemoTemplates)).getNode(a).childrenToString(),c=this.getFocusedPanel(),d=c.getOpenTabByUrl(a);return d?c.setMountedProgram(d):this.createAndOpen(b,a)};AbstractAppChisel.prototype.onProgramsChange=function(){};AbstractAppChisel.prototype.getFocusedPanel=function(){return this.getNode("panel")};AbstractAppChisel.prototype.getMountedProgram=function(){return this.getFocusedPanel().getMountedProgram()};
AbstractAppChisel.prototype.getMenuChisel=function(){return this.getNode("menu")};AbstractAppChisel.prototype.createNewBlankProgramCommand=function(a){var b=this;return this.createAndOpen("",void 0===a?"untitled.flow":a).then(function(a){return b.logMessage("Created '"+a.getUrl()+"'")})};
AbstractAppChisel.prototype.openCreateNewProgramFromUrlDialogCommand=function(){var a=this;return this.prompt("Enter the url to download and create your program","").then(function(b){b&&a.getWillowProgram().get(b).then(function(b){return a.createAndOpen(b,"untitled.flow").then(function(b){return a.logMessage("Created '"+b.getUrl()+"'")})}).catch(function(b){a.logMessage("Error: "+b)})})};
AbstractAppChisel.prototype.openUrlPromptCommand=function(){var a=this;this.prompt("Enter a url to open","").then(function(b){b&&a.openUrlInNewSpaceAndFocus(b)})};AbstractAppChisel.prototype.openManyPrompt=function(){var a=this;return this.prompt("Enter a regex to open multiple matching files","").then(function(b){if(b)return a.openManyCommand(b)})};
AbstractAppChisel.prototype.openManyCommand=function(a){var b=this,c=new RegExp(a,"i");a=this.getCaddies().filter(function(a){return a.getCaddyLink().match(c)});return Promise.all(a.map(function(a){return b.openUrlInNewSpace(a.getCaddyLink())}))};AbstractAppChisel.prototype.openUrlInNewSpace=function(a){var b=this.getFocusedPanel().getOpenTabByUrl(a);return b?Promise.resolve(b):this.getFocusedPanel().openUrlInNewSpace(a)};
AbstractAppChisel.prototype.openUrlInNewSpaceAndFocus=function(a){var b=this;return this.openUrlInNewSpace(a).then(function(a){return b.getFocusedPanel().setMountedProgram(a)})};AbstractAppChisel.prototype.mountTabByIndexCommand=function(a){return this.getFocusedPanel().mountTabByIndex(a)};AbstractAppChisel.prototype.closeTabByIndexCommand=function(a){return this.getFocusedPanel().closeTabByIndex(a)};AbstractAppChisel.prototype.tabDidOpen=function(){};
AbstractAppChisel.prototype.isAutoSaveEnabled=function(){return"false"!==this.getFromStore(StorageKeys.autoSave)};AbstractAppChisel.prototype.toggleAutoSaveCommand=function(){var a=!this.isAutoSaveEnabled();a?this.removeValue(StorageKeys.autoSave):this.storeValue(StorageKeys.autoSave,"false");this.logMessage("Autosave is "+a);return Promise.resolve()};
AbstractAppChisel.prototype.saveCompiledCommand=function(){var a=this.getMountedProgram(),b=a.getDictionary().compilesTo(),c=Format.permalink(Format.removeFileExtension(a.getFileName()))+"."+b,a=a.buildProgram();this.getWillowProgram().downloadFile(a,c,"text/"+b);return Promise.resolve()};AbstractAppChisel.prototype.getLanguageBestGuess=function(a){var b=this.getETNs(),b=Object.values(b).map(function(b){return(new b(a)).getGuess()});b.sort(Util.sortByAccessor(function(a){return a.guess}));return b[0].name};
AbstractAppChisel.prototype.generateProgram=function(a,b){return new (this.getProgramClass(b))(a)};AbstractAppChisel.prototype.executeProgramCommand=function(){var a=this;return this.getMountedProgram().getProgramOfInterest().execute().then(function(b){a.logMessage(b)})};AbstractAppChisel.prototype.toggleThemeCommand=function(){return this._toggleTheme()};AbstractAppChisel.prototype._getThemeName=function(){return this.getFromStore(StorageKeys.theme)};
AbstractAppChisel.prototype.getTheme=function(){return Themes[this._getThemeName()]||Themes.glass};AbstractAppChisel.prototype._toggleTheme=function(){var a=Util.toggle(this._getThemeName(),Object.keys(Themes));this.logMessage("Switched to "+a+" theme");this.storeValue(StorageKeys.theme,a);this.getApp().makeAllDirty();this.renderApp();return Promise.resolve()};
AbstractAppChisel.prototype.confirmAndDeleteFile=function(a){var b=this;return this.confirm("Are you sure you want to delete "+a+"?").then(function(c){return c?b.deleteFileCommand(a):Promise.resolve(!1)})};AbstractAppChisel.prototype.promptToRenameFile=function(a,b){var c=this;return this.prompt("Enter new name for file",a).then(function(d){return d&&d!==a?(d=Format.permalink(d))?c.renameFileCommand(a,d,b).then(function(a){c.logMessage("Renamed");return a}):Promise.resolve():Promise.resolve()})};
AbstractAppChisel.prototype.deleteAllProgramsPrompt=function(){var a=this,b=this.getFocusedPanel().getPrograms();return this.confirm("Are you sure you want to delete "+b.length+" programs?").then(function(c){return c?Promise.all(b.map(function(b){return a.deleteFileCommand(b.getFileName())})):Promise.resolve(!1)})};AbstractAppChisel.prototype.getFolderPath=function(){return""};
AbstractAppChisel.prototype.showTabRenamePromptCommand=function(){var a=this,b=this.getMountedProgram();this.promptToRenameFile(b.getFileName()).then(function(c){if(!c)return!1;a.openUrlInNewSpaceAndFocus(""+a.getFolderPath()+c).then(function(c){a.getFocusedPanel().closeProgram(b)})});return Promise.resolve()};AbstractAppChisel.prototype.toggleHelpCommand=function(){return this.toggleAndRender("helpModal")};AbstractAppChisel.prototype.toggleSourceEditorCommand=function(){return this.toggleAndRender("sourceEditorModal")};
AbstractAppChisel.prototype.toggleLayoutCommand=function(){return this.getMountedProgram().toggleLayout()};AbstractAppChisel.prototype.closeMountedProgramCommand=function(){return this.getFocusedPanel().closeProgram(this.getMountedProgram())};AbstractAppChisel.prototype.fetchAndReloadFocusedProgramCommand=function(){return this.getFocusedPanel().fetchAndReloadProgram(this.getMountedProgram())};AbstractAppChisel.prototype.selectAllCommand=function(){this.getMountedProgram().selectAll();return Promise.resolve()};
AbstractAppChisel.prototype.selectCogsByShadowClassCommand=function(a){this.logCommand("app selectCogsByShadowClassCommand");this.getMountedProgram().selectCogsByShadowClass(a);return Promise.resolve()};AbstractAppChisel.prototype.clearSelectionCommand=function(){this.logCommand("app clearSelectionCommand");this.getMountedProgram().clearSelection();return Promise.resolve()};AbstractAppChisel.prototype.deleteSelectionCommand=function(){return this.getMountedProgram().deleteSelection()};
AbstractAppChisel.prototype.duplicateSelectionCommand=function(){return this.getMountedProgram().duplicateSelection()};AbstractAppChisel.prototype.cancelConfirmCommand=function(){return this._confirmModal._resolveCommand("0")};AbstractAppChisel.prototype.acceptConfirmCommand=function(){return this._confirmModal._resolveCommand("1")};AbstractAppChisel.prototype.submitPromptCommand=function(){return this._promptModal._resolveCommand()};
AbstractAppChisel.prototype.showDeleteFileConfirmDialogCommand=function(){var a=this,b=this.getMountedProgram();return this.confirmAndDeleteFile(b.getFileName()).then(function(c){!1!==c&&a.getFocusedPanel().closeProgram(b)})};AbstractAppChisel.prototype.mountPreviousProgramCommand=function(){return this.getFocusedPanel().mountPreviousProgram()};AbstractAppChisel.prototype.mountNextProgramCommand=function(){return this.getFocusedPanel().mountNextProgram()};
AbstractAppChisel.prototype.closeAllProgramsCommand=function(){return this.getFocusedPanel().closeAllPrograms()};AbstractAppChisel.prototype.toggleFullScreenCommand=function(){this.getWillowProgram().toggleFullScreen();return Promise.resolve()};AbstractAppChisel.prototype.toggleFocusedModeCommand=function(){this.toggle("menu");this.getFocusedPanel().toggle("programs");return this.toggleFullScreenCommand()};
AbstractAppChisel.prototype.toggleGutterCommand=function(){this.makeAllDirty();var a=this.getFocusedPanel(),b=a.getNode("gutter");b?b.unmountAndDestroy():(a=a.touchNode("gutter"),a.insert("terminal"),a.insert("console"));this.renderApp();return Promise.resolve()};AbstractAppChisel.prototype.getKeyboardShortcuts=function(){this._shortcuts||(this._shortcuts=new Drums(this._getDrumsProgram()));return this._shortcuts};AbstractAppChisel.prototype.selectNextCommand=function(){return this.getMountedProgram().selectNext()};
AbstractAppChisel.prototype.selectPreviousCommand=function(){return this.getMountedProgram().selectPrevious()};AbstractAppChisel.prototype.createNewFlowVisProgramCommand=function(){var a=this,b=this.getMountedProgram(),c=b.childrenToString();return this.createAndOpen(FlowCodeEditorTemplate(c,"fire"),b.getFileName()+".editor.flow").then(function(b){return a.logMessage("Created '"+b.getUrl()+"'")})};
AbstractAppChisel.prototype.createMiniMapCommand=function(){var a=this;return this.createAndOpen(MiniTemplate,"myPrograms.flow").then(function(b){return a.logMessage("Created '"+b.getUrl()+"'")})};AbstractAppChisel.prototype.clearProgramMessagesCommand=function(){var a=this;return this.getMountedProgram().clearCommand().then(function(){a.renderApp()})};AbstractAppChisel.prototype._getDrumsProgram=function(){return"panel new createNewBlankProgramCommand ctrl+n New Flow Program\nmounted new cloneProgramCommand ctrl+shift+n Clone program\npanel new createMiniMapCommand shift+m Mini Map\nmounted new createNewFlowVisProgramCommand shift+v Flow Code Editor\nmounted file saveProgramAndNotifyCommand command+s Save Program\nmounted file showTabRenamePromptCommand ctrl+shift+r Rename File\nmounted file showDeleteFileConfirmDialogCommand shift+backspace Delete Program\npanel file deleteAllProgramsPrompt command+shift+d Delete all open programs\nmounted navigation closeMountedProgramCommand ctrl+w Close focused program\npanel navigation closeAllProgramsCommand ctrl+shift+w Close all programs\nmounted navigation mountPreviousProgramCommand shift+left Previous program\nmounted navigation mountNextProgramCommand shift+right Next program\npanel navigation openUrlPromptCommand shift+o Open program from url\npanel navigation openManyPrompt command+shift+o Open multiple programs from regex\nmounted selection selectAllCommand command+a Select All\nmounted selection selectNextCommand shift+down Select next\nmounted selection selectPreviousCommand shift+up Select previous\nmounted selection deleteSelectionCommand backspace Delete Selection\nmounted selection duplicateSelectionCommand command+d Duplicate Selection\npanel window toggleThemeCommand shift+t Toggle Theme\npanel window toggleGutterCommand shift+u Toggle Source Editor Gutter\npanel window toggleFullScreenCommand shift+f Toggle Full Screen\npanel window toggleFocusedModeCommand command+shift+f Toggle Focused Mode\npanel window toggleSourceEditorCommand ctrl+u Toggle Source Editor Modal\npanel window closeModalCommand escape Close any open modal\nmounted window clearProgramMessagesCommand shift+c Clear program messages\npanel window toggleAutoSaveCommand shift+s Toggle autosave\nmounted window fetchAndReloadFocusedProgramCommand shift+r Re-download and refresh program\nmounted window toggleNodePickerCommand shift+p Edit node\nmounted code saveCompiledCommand command+b Save compiled code\nmounted code executeProgramCommand shift+e Execute Code\nmounted edit toggleLayoutCommand shift+l Toggle layout\nmounted edit undoFocusedProgramCommand command+z Undo\nmounted edit redoFocusedProgramCommand command+shift+z Redo\npanel ohayo toggleHelpCommand ? Help\npanel test _runSpeedTestCommand ctrl+shift+m"};
AbstractAppChisel.prototype.toggleNodePickerCommand=function(){return this.toggleAndRender("nodePickerModal")};AbstractAppChisel.prototype.undoFocusedProgramCommand=function(){return this.getMountedProgram().undoCommand()};AbstractAppChisel.prototype.redoFocusedProgramCommand=function(){return this.getMountedProgram().redoCommand()};AbstractAppChisel.prototype._getMousetrap=function(){return this.getWillowProgram().getMousetrap()};
AbstractAppChisel.prototype.closeModalCommand=function(){this.closeModal();return Promise.resolve()};
AbstractAppChisel.prototype._bindKeyboardShortcuts=function(){var a=this._getMousetrap(),b=this.getWillowProgram();a._originalStopCallback=a.prototype.stopCallback;a.prototype.stopCallback=function(c,e,f){var d=b.getStumpFromElement(e);return d&&"command+s"===f&&d.stumpHasClass("savable")?(d.getShadow().triggerShadowEvent(WillowShadowEvents.change),c.preventDefault(),!0):a._pause?!0:a._originalStopCallback.call(this,c,e)};var c=this;this.getKeyboardShortcuts().getChildren().forEach(function(b){a.bind(b.getKeyCombo(),
function(a){b.execute(c);a.preventDefault&&a.preventDefault();return!1})})};AbstractAppChisel.prototype.executeCommandLine=function(a){this.logCommand(a.join(" "));return this[a[0]].apply(this,a.slice(1))};AbstractAppChisel.prototype.pauseShortcutListener=function(){this._getMousetrap()._pause=!0};AbstractAppChisel.prototype.resumeShortcutListener=function(){this._getMousetrap()._pause=!1};AbstractAppChisel.prototype.getStore=function(){return this.getWillowProgram().getStore()};
AbstractAppChisel.prototype.getStoreKeys=function(){var a=this.constructor.name,b=a.length,c=[];this.getStore().each(function(d,e){e.startsWith(a)&&c.push(e.substr(b))});return c};AbstractAppChisel.prototype.getFromStore=function(a){return this.getStore().get(this.constructor.name+a)};AbstractAppChisel.prototype.storeValue=function(a,b){return this.getStore().set(this.constructor.name+a,b)};AbstractAppChisel.prototype.removeValue=function(a){return this.getStore().remove(this.constructor.name+a)};
AbstractAppChisel.prototype.clearStoreCommand=function(){if(this.getStore().disabled)return Promise.resolve();this.getStore().clearAll();return Promise.resolve()};AbstractAppChisel.prototype._makeDocumentCopyableAndCuttable=function(){var a=this;a.getWillowProgram().setCopyHandler(function(b){return a.copySelectionCommand(b)}).setCutHandler(function(b){return a.cutSelectionCommand(b)})};
AbstractAppChisel.prototype.copySelectionCommand=function(a){var b=this.getMountedProgram();return b?b.copySelection(a):!0};AbstractAppChisel.prototype.cutSelectionCommand=function(a){return this.getMountedProgram().cutSelection(a)};AbstractAppChisel.prototype._handleLinkClick=function(a,b){var c=a.getStumpAttr("href");if(c&&!a.getStumpAttr("target")&&(b.preventDefault(),this.getWillowProgram().isExternalLink(c)))return this.openExternalLink(c),!1};
AbstractAppChisel.prototype.echoCommand=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];this.logMessage(b.join(" "));return Promise.resolve()};AbstractAppChisel.prototype.saveProgramAndNotifyCommand=function(){var a=this,b=this.getMountedProgram();b.forceSaveToDisk().then(function(){b.logMessage("Saved "+b.getUrl());a.renderApp()}).catch(function(a){console.error(a)})};AbstractAppChisel.prototype.prompt=function(a,b){return Promise.resolve(prompt(a,b))};
AbstractAppChisel.prototype.confirm=function(a){return Promise.resolve(confirm(a))};AbstractAppChisel.prototype.openExternalLink=function(a){this.getWillowProgram().openUrl(a)};AbstractAppChisel.prototype.cloneProgramCommand=function(){var a=this.getMountedProgram();return this.createAndOpen(a.childrenToString(),a.getFileName())};AbstractAppChisel.prototype.getRenderedCogs=function(){return this.getMountedProgram().getProgramCogs().filter(function(a){return a.isMounted()})};
AbstractAppChisel.prototype._createProgramFromPaste=function(a){return this.createAndOpen(a,"untitled.flow")};AbstractAppChisel.prototype.pasteCommand=function(a){var b=this.getMountedProgram();return b?b.appendFromPaste(a):this._createProgramFromPaste(a)};AbstractAppChisel.prototype.setMouseEvent=function(a){this._mouseEvent=a;return this};AbstractAppChisel.prototype.getMouseEvent=function(){return this._mouseEvent};
AbstractAppChisel.prototype._runSpeedTestCommand=function(){var a=this,b=this.getCaddies().map(function(a){return a.getCaddyLink()}),c=Date.now(),d=Util.pLimit(7),e=this.getFocusedPanel(),b=b.map(function(b){return d(function(){return a.openUrlInNewSpace(b).then(function(a){var b=e.getMountedProgram();e.setMountedProgram(a);b&&e.closeProgram(b);return a.getProgramStats()})})});return Promise.all(b).then(function(b){e.getMountedProgram()&&a.closeMountedProgramCommand();b=new TreeNotation(b);var d=
Date.now()-c,d="Program Load Times "+moment().format("MM/DD/YYYY")+" version "+a.getVersion()+". Run time: "+d;return a.createAndOpen(SpeedTestTemplate(d,b.toCsv()),"program-load-times")})};AbstractAppChisel.prototype.executeCommandOnFirstSelectedCog=function(a,b,c){return this.getMountedProgram().getFirstSelectedCog()[a](b,c)};AbstractAppChisel.prototype.toggleShadowById=function(a){this.getWillowProgram().findStumpByChild("id "+a).getShadow().toggleShadow()};
AbstractAppChisel.prototype.getStumpString=function(){return this.getWillowProgram().getHtmlStump().toString()};AbstractAppChisel.prototype._makeProgramLinksOpenImmediately=function(){var a=this,b=this.getWillowProgram();b.getBodyStump().getShadow().onShadowEvent(WillowShadowEvents.click,"a",function(c){a._handleLinkClick(b.getStumpFromElement(this),c)})};
AbstractAppChisel.prototype.executeStumpCommand=function(a,b){var c=a.getStumpChisel(),d=a.getShadow(),d=a.isStumpCheckbox()?d.isShadowChecked()?!0:!1:a.getStumpAttr("contenteditable")?d.getShadowHtml():d.getShadowValue()?d.getShadowValue():a.getStumpAttr("value");a=a.getStumpAttr("name");this.logCommand([b,d,a].filter(function(a){return a}).join(" "));this.closeAllContextMenus();this.closeAllDropDownMenusCommand();var e=b.split(" ");b=e.shift();var e=e.shift(),f;"cog"===b?f=c.getChildCog():"context"===
b?f=this.getTargetNode():"app"===b?f=this:"chisel"===b&&(f=c);return f[e](d,a)};AbstractAppChisel.prototype.executeStumpCommandByStumpId=function(a,b){return this._executeStumpCommandByStumpChild(a,"id "+b)};AbstractAppChisel.prototype.executeStumpCommandByStumpClass=function(a,b){return this._executeStumpCommandByStumpChild(a,"class "+b)};AbstractAppChisel.prototype._executeStumpCommandByStumpChild=function(a,b){b=this.getWillowProgram().findStumpByChild(b);return this.executeStumpCommand(b,b.getStumpAttr(a))};
AbstractAppChisel.prototype._setBodyShadowHandlers=function(){var a=this,b=this.getWillowProgram(),c=b.getBodyStump().getShadow(),d=function(c,d,g){c=b.getStumpFromElement(c);g.preventDefault();g.stopImmediatePropagation();a.executeStumpCommand(c,c.getStumpAttr(d));return!1};c.onShadowEvent(WillowShadowEvents.contextmenu,"[data-onContextMenuCommand]",function(b){if(b.ctrlKey)return!0;a.setMouseEvent(b);return d(this,"data-onContextMenuCommand",b)});c.onShadowEvent(WillowShadowEvents.change,"[data-onChangeCommand]",
function(a){return d(this,"data-onChangeCommand",a)});c.onShadowEvent(WillowShadowEvents.blur,"[data-onBlurCommand]",function(a){return d(this,"data-onBlurCommand",a)});c.onShadowEvent(WillowShadowEvents.click,"[data-onClickCommand]",function(a){return d(this,"data-onClickCommand",a)});c.onShadowEvent(WillowShadowEvents.dblclick,"[data-onDblClickCommand]",function(b){if(b.target!==b.currentTarget)return!0;a.setMouseEvent(b);return d(this,"data-onDblClickCommand",b)})};window.AbstractAppChisel=AbstractAppChisel;
var AbstractDropDownMenuChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractDropDownMenuChisel,AbstractChisel);AbstractDropDownMenuChisel._mountedChisels=AbstractChisel._mountedChisels;
AbstractDropDownMenuChisel.prototype.getHakon=function(){var a=this.getTheme();return"\n.subdued\n color "+a.midGray+"\n\n.dropdownMenu\n min-width 200px\n position absolute\n top 0\n left 0\n z-index 100\n padding 7px 0\n background "+a.contextMenuBackground+"\n border 1px solid "+a.borderColor+"\n box-shadow 0 1px 3px 0 "+a.boxShadow+"\n .message\n  line-height 30px\n  padding 0 10px\n a\n  color "+a.foregroundColor+"\n  display block\n  line-height 30px\n  padding 0 10px\n  &:hover\n   background "+
a.hoverBackground+"\n   color "+a.white};AbstractDropDownMenuChisel.prototype.chiselDidMount=function(){var a=this.getApp(),b=a.getWillowProgram().getBodyStump().getShadow(),c=function(){b.offShadowEvent(WillowShadowEvents.click,c);a.closeAllDropDownMenusCommand()};setTimeout(function(){return b.onShadowEvent(WillowShadowEvents.click,c)},100)};
AbstractDropDownMenuChisel.prototype.getBray=function(){var a=this.getDropDownBray(),b=this.getAnchorId();return"@div\n style top: 30px; left: "+this.getParent().getStump().findStumpByChild("id "+b).getShadow().getShadowPosition().left+"px;\n class dropdownMenu"+TreeNotation.nest(a,1)};window.AbstractDropDownMenuChisel=AbstractDropDownMenuChisel;var CogToolbarChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(CogToolbarChisel,AbstractChisel);
CogToolbarChisel._mountedChisels=AbstractChisel._mountedChisels;CogToolbarChisel.prototype.getHakon=function(){var a=this.getTheme();return".CogToolbarChisel\n background "+a.contextMenuBackground+"\n border 1px solid "+a.lineColor+"\n font-size 12px\n position absolute\n padding 8px\n z-index 991\n min-width 300px\n top 100%\n left 0\n cursor pointer\n svg\n  fill "+a.greyish+"\n  padding 1px 3px 3px 3px\n  &:hover\n   fill "+a.foregroundColor};CogToolbarChisel.prototype.getChildCog=function(){return this.getParent()};
CogToolbarChisel.prototype.getBray=function(){var a=this._getFormBray();return"@div\n class CogToolbarChisel\n @span "+Icons("coding",20)+"\n  data-onClickCommand cog openCogSourceEditorModalCommand\n @span "+Icons("copy",20)+"\n  data-onClickCommand cog cloneCogCommand\n @span "+Icons("trash",20)+"\n  data-onClickCommand cog destroyCogCommand\n @span "+Icons("inspector",20)+"\n  data-onClickCommand cog openCogInspectorCommand"+TreeNotation.nest(a,1)};
CogToolbarChisel.prototype._getCogTypeDropdownBray=function(){var a=this.getChildCog(),b=a.getDictionary().getCogNames();b.sort();var c=a.getBase();return"@select\n data-onChangeCommand cog changeCogTypeCommand\n @option\n"+b.map(function(a){return" @option "+a+"\n  value "+a+"\n  "+(c===a?"selected":"notselected")}).join("\n")};
CogToolbarChisel.prototype._getParentDropdownBray=function(){var a=this.getChildCog(),b=a.getPathVector().join(" ");return"@select\n data-onChangeCommand cog changeParentCommand\n @option\n"+a.getProgram().getProgramCogs().map(function(a){return{name:a.getBasePath(),value:a.getPathVector().join(" ")}}).map(function(a){return" @option "+a.name+"\n  value "+a.value+"\n  "+(b===a.value?"selected":"notselected")}).join("\n")};
CogToolbarChisel.prototype._getFormBray=function(){var a=this.getChildCog(),b=a.getStruct(),c=a.getDefinition().getDefinitionTuples().map(function(c){var d=c.getTupleName();return[d,c.toFormBray(b[d]||"",a)]});c.unshift(["parent",this._getParentDropdownBray()]);c.unshift(["type",this._getCogTypeDropdownBray()]);return"@form\n @table\n"+c.map(function(a){return"  @tr\n   @td "+a[0]+"\n   @td"+TreeNotation.nest(a[1],4)}).join("\n")};window.CogToolbarChisel=CogToolbarChisel;
var ConsoleChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(ConsoleChisel,AbstractChisel);ConsoleChisel._mountedChisels=AbstractChisel._mountedChisels;ConsoleChisel.prototype._getConsoleOutput=function(){var a=this._getMessageBuffer().getChildren().map(function(a){return a.childrenToString()});a.reverse();return a.join("\n")};ConsoleChisel.prototype.getHakon=function(){return".sourcePre\n overflow scroll"};
ConsoleChisel.prototype._getMessageBuffer=function(){var a=this.getParent().getParent().getMountedProgram();return a?a.getMessageBuffer():new TreeNotation};ConsoleChisel.prototype.getDependencyTimestamps=function(){var a=this.getParent().getGutterDependencies(),b=this._getMessageBuffer();b.length?a.push(b.nodeAt(-1).getMTime()):a.push(this._getNow());return a};ConsoleChisel.prototype.getBray=function(){var a=this._getConsoleOutput();return"@pre\n class sourcePre\n bern"+TreeNotation.nest(a,2)};
window.ConsoleChisel=ConsoleChisel;var DummyChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(DummyChisel,AbstractChisel);DummyChisel._mountedChisels=AbstractChisel._mountedChisels;DummyChisel.prototype.getHakon=function(){return".DummyChisel\n display none"};window.DummyChisel=DummyChisel;var GutterChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(GutterChisel,AbstractChisel);GutterChisel._mountedChisels=AbstractChisel._mountedChisels;
GutterChisel.prototype.parseNodeType=function(a){return a.startsWith("console")?ConsoleChisel:TerminalChisel};GutterChisel.prototype.getHakon=function(){var a=this.getTheme(),b=this.getGutterWidth();return AbstractChisel.prototype.getHakon.call(this)+"\n.Gutter\n width "+b+"px\n left 0\n background "+a.backgroundColor+"\n border-color "+a.borderColor+"\n position absolute\n border-right-width 1px\n border-right-style solid\n box-sizing border-box\n top 0\n bottom 0\n padding 20px"};
GutterChisel.prototype.getGutterDependencies=function(){return[this.getParent().getNode("programs").getMTime()]};GutterChisel.prototype.getBray=function(){return"@div\n class Gutter"};GutterChisel.prototype.hasChanges=function(){return this.getNode("terminal").hasChanges()};GutterChisel.prototype.getGutterWidth=function(){return 400};window.GutterChisel=GutterChisel;var MenuChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(MenuChisel,AbstractChisel);
MenuChisel._mountedChisels=AbstractChisel._mountedChisels;MenuChisel.prototype.getNodeTypes=function(){return{newDropDownMenu:NewDropDownMenuChisel}};MenuChisel.prototype.parseNodeType=function(a){return this.getNodeTypes()[a]};
MenuChisel.prototype.getHakon=function(){var a=this.getTheme();return".MenuChisel\n "+a.disableTextSelect(1)+"\n font-size 14px\n padding-left 5px\n box-sizing border-box\n right 0\n left 0\n position relative\n height 30px\n z-index 92\n white-space nowrap\n background "+a.menuBackground+"\n color "+a.darkBlack+"\n display flex\n >a\n  padding-right 5px\n  line-height 30px\n  display inline-block\n  color "+a.menuChiselColor};
MenuChisel.prototype.getBray=function(){return"@div\n class MenuChisel "+this.constructor.name+"\n @a ohayo\n  data-onClickCommand app toggleHelpCommand\n @a New \u25be\n  id newToggle\n  data-onClickCommand chisel toggleAndRender\n  value newDropDownMenu"};window.MenuChisel=MenuChisel;var NewDropDownMenuChisel=function(a){return AbstractDropDownMenuChisel.apply(this,arguments)||this};$jscomp.inherits(NewDropDownMenuChisel,AbstractDropDownMenuChisel);NewDropDownMenuChisel._mountedChisels=AbstractDropDownMenuChisel._mountedChisels;
NewDropDownMenuChisel.prototype.getDropDownBray=function(){return this.getApp().getMountedProgram()?"@a New Flow Program\n data-onClickCommand app createNewBlankProgramCommand\n value untitled.flow\n@a New Fire Program\n data-onClickCommand app createNewBlankProgramCommand\n value untitled.fire\n@a New From Url\n data-onClickCommand app openCreateNewProgramFromUrlDialogCommand\n@div\n class divider\n@a Clone Program\n data-onClickCommand app cloneProgramCommand":"@a New Flow Program\n data-onClickCommand app createNewBlankProgramCommand\n value untitled.flow\n@a New Fire Program\n data-onClickCommand app createNewBlankProgramCommand\n value untitled.fire\n@a New From Url\n data-onClickCommand app openCreateNewProgramFromUrlDialogCommand"};
NewDropDownMenuChisel.prototype.getAnchorId=function(){return"newToggle"};window.NewDropDownMenuChisel=NewDropDownMenuChisel;var PanelChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(PanelChisel,AbstractChisel);PanelChisel._mountedChisels=AbstractChisel._mountedChisels;PanelChisel.prototype.parseNodeType=function(a){var b=this.getApp(),c=a.split(" ")[0];return"program"===c?b.getProgramClass(Util.getFileExtension(a)):{programs:ProgramSwitcherChisel,gutter:GutterChisel}[c]};
PanelChisel.prototype.getHakon=function(){var a=this.getParent().getMenuChisel()?"30":"0";this.getTheme();return".PanelChisel\n left 0\n position relative\n right 0\n bottom 0\n height calc(100% - "+a+"px)"};PanelChisel.prototype.getGutterWidth=function(){var a=this.getChildrenByNodeType(GutterChisel)[0];return a?a.getGutterWidth():0};PanelChisel.prototype.mountTabByIndex=function(a){return this.setMountedProgram(this.getPrograms()[a])};PanelChisel.prototype.getMountedProgram=function(){return this._mountedProgram};
PanelChisel.prototype.fetchAndReloadProgram=function(a){var b=this;a.unmount();return this._executeFetchProgram(a).then(function(){b.getApp().renderApp()})};PanelChisel.prototype._executeFetchProgram=function(a){var b=this.getApp();this._updateProgramSwitcherChisel();return b.fetchProgram(a).then(function(){return a.executeLoadProgramCodeAndData()}).then(function(){b.tabDidOpen(a);b.renderApp();return a})};
PanelChisel.prototype.getOpenTabByUrl=function(a){return this.getPrograms().find(function(b){return b.getUrl()===a})};PanelChisel.prototype.setMountedProgram=function(a){var b=this.getMountedProgram();if(b===a)return Promise.resolve(a);b&&b.unmount();this._mountedProgram=a;this._updateProgramSwitcherChisel();this.getApp().renderApp();return Promise.resolve(a)};PanelChisel.prototype.openUrlInNewSpace=function(a){return this._executeFetchProgram(this.append("program "+a))};
PanelChisel.prototype.closeTabByIndex=function(a){return this.closeProgram(this.getPrograms()[a])};PanelChisel.prototype.closeProgram=function(a){if(a.isMounted()){var b=a.getNextOrPrevious(this.getPrograms());a.unmountAndDestroy();if(b&&b!==a)return this.setMountedProgram(b);delete this._mountedProgram}else a.destroy();this._updateProgramSwitcherChisel();this.getApp().renderApp();return Promise.resolve()};
PanelChisel.prototype.getOpenProgramsString=function(){var a=this.getMountedProgram();return this.getPrograms().map(function(b){return""+(b===a?"!":"")+b.getUrl()}).join(" ")};PanelChisel.prototype._updateProgramSwitcherChisel=function(){var a=this.getOpenProgramsString();this.touchNode("programs").setBeam(a);this._openPrograms!==a&&(this.getApp().storeValue(StorageKeys.openPrograms,a),this._openPrograms=a,this._updateLocationForRestoreOnRefresh())};
PanelChisel.prototype._updateLocationForRestoreOnRefresh=function(){var a=this.getApp(),b=this.getMountedProgram();b?a.storeValue(StorageKeys.mountedProgram,b.getUrl()):a.removeValue(StorageKeys.mountedProgram)};PanelChisel.prototype.closeAllPrograms=function(){var a=this.getMountedProgram();a&&a.unmount();this.getPrograms().forEach(function(a){return a.destroy()});delete this._mountedProgram;this._updateProgramSwitcherChisel();this.getApp().renderApp();return Promise.resolve()};
PanelChisel.prototype.mountPreviousProgram=function(){var a=this.getPrograms(),b=this.getMountedProgram();if(2>a.length||!b)return Promise.resolve();b=a.indexOf(b);return this.mountTabByIndex(0===b?a.length-1:b-1)};PanelChisel.prototype.mountNextProgram=function(){var a=this.getPrograms(),b=this.getMountedProgram();if(2>a.length||!b)return Promise.resolve();b=a.indexOf(b);return this.mountTabByIndex(b===a.length-1?0:b+1)};PanelChisel.prototype.getPrograms=function(){return this.findNodes("program")};
window.PanelChisel=PanelChisel;var ProgramSwitcherChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(ProgramSwitcherChisel,AbstractChisel);ProgramSwitcherChisel._mountedChisels=AbstractChisel._mountedChisels;ProgramSwitcherChisel.prototype.getDependencyTimestamps=function(){return[this.getParent().getMTime()]};
ProgramSwitcherChisel.prototype.getHakon=function(){var a=this.getTheme(),b=this._getPrograms().length;return".ProgramSwitcherChisel\n height 30px\n box-sizing border-box\n left "+this.getParent().getGutterWidth()+"px\n right 0\n position relative\n white-space nowrap\n overflow-y hidden\n overflow-x "+(10<b?"scroll":"auto")+"\n border-bottom "+(b?"1px solid "+a.borderColor:"0")+"\n background "+a.programsBackground+"\n a\n  span\n   position absolute\n   top 10px\n   right 5px\n   display block\n   font-size 12px\n   line-height 10px\n   text-align center\n   opacity .25\n   &:hover\n    opacity 1\n  background "+
a.tabBackground+"\n  height 30px\n  display inline-block\n  box-sizing border-box\n  position relative\n  font-size 14px\n  padding 0 20px\n  color "+a.foregroundColor+"\n  line-height 30px\n  border-right 1px solid "+a.borderColor+"\n  border-bottom 1px solid "+a.borderColor+"\n  &.mountedProgram\n   background "+a.activeTabColor+"\n   border-bottom 0"};ProgramSwitcherChisel.prototype._getPrograms=function(){var a=this.getBeam();return a?a.split(" "):[]};
ProgramSwitcherChisel.prototype.getBray=function(){var a=this._getPrograms().map(function(a,c){return"@a "+a.replace("!","")+"\n data-onClickCommand app mountTabByIndexCommand\n collapseNode true\n value "+c+"\n class "+(a.startsWith("!")?"mountedProgram":"")+"\n @span x\n  collapseNode true\n  data-onClickCommand app closeTabByIndexCommand\n  value "+c+"\n  class closeTabButton"}).join("\n");return"@div\n class ProgramSwitcherChisel"+TreeNotation.nest(a,1)};window.ProgramSwitcherChisel=ProgramSwitcherChisel;
var TerminalChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(TerminalChisel,AbstractChisel);TerminalChisel._mountedChisels=AbstractChisel._mountedChisels;TerminalChisel.prototype.getHakon=function(){return".sourceTextarea\n height "+this._getHeight()+"px"};TerminalChisel.prototype._getProgramSource=function(){var a=this._getProgram();return a?a.childrenToString():""};TerminalChisel.prototype._getProgram=function(){return this.getParent().getParent().getMountedProgram()};
TerminalChisel.prototype.getBray=function(){var a=this._getProgramSource()||"";return"@div\n style font-size: 14px;\n @textarea\n  class sourceTextarea\n  bern"+TreeNotation.nest(a,3)};TerminalChisel.prototype._getHeight=function(){return 600};TerminalChisel.prototype._getTextarea=function(){return this.getStump().getNode("@textarea").getShadow().getShadowElement()};
TerminalChisel.prototype._makeProgram=function(a){var b=new TreeNotation(this._getCode()),c=this._getProgram().constructor;a=b.getTopDownArray()[a];return new c(a.toString())};TerminalChisel.prototype._compileLine=function(a){a=this._makeProgram(a).buildProgram();this._getProgram().logMessage(a);this._updateConsole()};TerminalChisel.prototype._executeLine=function(a){var b=this;return this._makeProgram(a).execute(this.getApp()).then(function(a){b._getProgram().logMessage(a);b._updateConsole()})};
TerminalChisel.prototype._updateConsole=function(){this.getParent().getChildren()[1].render()};TerminalChisel.prototype.getDependencyTimestamps=function(){var a=this.getParent().getGutterDependencies(),b=this._getProgram();b&&this._getProgramSource()!==this._getCode()&&a.push(b.getTreeMTime());return a};TerminalChisel.prototype.chiselDidMount=function(){this._loadCodeMirror();AbstractChisel.prototype.chiselDidMount.call(this)};TerminalChisel.prototype.updateHtml=function(){};
TerminalChisel.prototype.chiselDidUpdate=function(){var a=this._getCodeMirror();a&&a.setValue(this._getProgramSource());AbstractChisel.prototype.chiselDidUpdate.call(this)};TerminalChisel.prototype._getCode=function(){return this.isNode()?"":this._getCodeMirror().getValue()};TerminalChisel.prototype._getCodeMirror=function(){return this._codeMirror};TerminalChisel.prototype.hasChanges=function(){var a=this._getProgram();return a&&this._getCode()!==a.childrenToString()};
TerminalChisel.prototype._makeFullProgram=function(){var a=this._getCode();return new (this._getProgram().constructor)(a,void 0,this.getApp())};
TerminalChisel.prototype._getAutoCompleteFn=function(){var a=this;return function(b,c){return new Promise(function(c){setTimeout(function(){for(var d=b.getCursor(),f=b.getLine(d.line),g=d.ch,h=d.ch;g&&/[^\s]/.test(f.charAt(g-1));)--g;for(;h<f.length&&/[^\s]/.test(f.charAt(h));)++h;f=f.slice(g,h).toLowerCase();f=a._makeFullProgram().getAutocompleteWords(f);d=f.length?{list:f,from:CodeMirror.Pos(d.line,g),to:CodeMirror.Pos(d.line,h)}:null;return c(d)},100)})}};
TerminalChisel.prototype._loadCodeMirror=function(){var a=this;if(!this.isNode()){var b=this._getTextarea(),c={lineNumbers:!0,tabSize:1,indentUnit:1,extraKeys:{"Ctrl-Space":"autocomplete"},hintOptions:{hint:this._getAutoCompleteFn()}},d=CodeMirror.fromTextArea(b,c);d.setSize(void 0,this._getHeight());d.on("gutterClick",function(b,c,d,h){a._executeLine(c)});d.on("blur",function(){a._saveChangesCommand()});d.addKeyMap({"Cmd-Enter":function(){var b=d.listSelections()[0].head.line;a._executeLine(b)},
"Shift-Cmd-Enter":function(){var b=d.listSelections()[0].head.line;a._compileLine(b)},"Cmd-\\":function(){a.getApp().clearProgramMessagesCommand()},"Cmd-S":function(){a._saveChangesCommand();a._updateConsole()}});this._codeMirror=d}};TerminalChisel.prototype._saveChangesCommand=function(){return this._getProgram().autosaveAndReloadWith(this._getCode())};window.TerminalChisel=TerminalChisel;var ThemeChisel=function(a){return AbstractChisel.apply(this,arguments)||this};
$jscomp.inherits(ThemeChisel,AbstractChisel);ThemeChisel._mountedChisels=AbstractChisel._mountedChisels;ThemeChisel.prototype.getBray=function(){var a=this.getTheme();return"@style "+CodeMirrorCss+" .CodeMirror{background: transparent; color: "+a.bodyColor+";} .CodeMirror-gutters { background: transparent;}"};
ThemeChisel.prototype.getHakon=function(){var a=this.getTheme();return"html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,audio,video\n margin 0\n padding 0\n border 0\n font-size 100%\n font inherit\n vertical-align baseline\narticle,aside,figcaption,figure,footer,header,hgroup,menu,nav,section\n display block\nbody\n line-height 1.3\nol,ul\n list-style none\ntable\n border-collapse collapse\n border-spacing 0\n\nhtml,body\n width 100%\n height 100%\n margin 0\n padding 0\n font-family "+a.fonts+
"\n color "+a.bodyColor+"\n\nhtml\n background "+a.bodyBackground+"\n\ntable\n padding 0\n margin 0\n border-collapse collapse\n border-spacing 0\n table-layout fixed\n tr,td\n  padding 0\n  margin 0\n\n.ThemeChisel\n display none\n\nh1\n font-size 200%\n\nh2\n font-size 166%\n\nh3\n font-size 133%\n\nh4\n font-size 120%\n\np\n margin 1em 0\n\na\n cursor pointer\n text-decoration none\n color "+a.linkColor+"\n\n::-webkit-scrollbar\n display none\n\n.ui-resizable-handle\n position absolute\n font-size 0.1px\n display block\n -ms-touch-action none\n touch-action none\n\n.ui-resizable-disabled\n .ui-resizable-handle\n  display none\n\n.ui-resizable-autohide\n .ui-resizable-handle\n  display none\n\n.leftButton,.rightButton\n background transparent\n border 0\n\n.CogTextArea\n padding 5px\n width 100%\n height 100%\n box-sizing border-box\n outline 0\n border 0\n font-size 14px\n font-family "+
a.fonts+"\n resize none\n\n.rightButton\n float right\n\n.bigInput\n display block\n width 100%\n height 34px\n padding 6px 12px\n font-size 14px\n line-height 1.428571429\n vertical-align middle\n border-radius 4px\n box-sizing border-box\n color "+a.mediumBlack+"\n background "+a.backgroundColor+"\n border 1px solid "+a.greyish+"\n box-shadow inset 0 1px 1px "+a.boxShadow+"\n\ntextarea.bigInput\n height auto\n\n.dragOver\n opacity 0.5\n\n#dragOverHelp\n position absolute\n font-size 36px\n width 100%\n height 100%\n z-index 300\n display flex\n align-items center\n justify-content center\n top 0\n left 0\n\n.noTransition\n transition none\n\n.SVGIcon\n fill "+
a.foregroundColor+"\n cursor pointer\n\n.buttonPrimary\n border-radius 2px\n cursor pointer\n border none\n padding 15px 32px\n text-align center\n text-decoration none\n font-size 16px\n color white\n background "+a.successColor+"\n\n.divider\n background "+a.lineColor+"\n height 1px\n margin 10px 0\n width 100%\n\ninput,textarea\n background transparent\n color "+a.foregroundColor+"\n\n.CogChisel\n position absolute\n box-shadow "+a.cogShadow+"\n opacity "+a.cogOpacity+"\n background "+a.cogBackgroundColor+
"\n border 1px solid "+a.borderColor+"\n z-index 1\n "+a.disableTextSelect(1)+"\n .CogPencilButton\n  svg\n   opacity 0\n .ui-resizable-se\n  cursor se-resize\n  width 36px\n  height 36px\n  box-sizing border-box\n  right 1px\n  bottom 1px\n  opacity 0\n  border-right 4px solid "+a.darkerBackground+"\n  border-bottom 4px solid "+a.darkerBackground+"\n  &:hover\n   opacity 1\n &:hover\n  background "+a.backgroundColor+"\n  z-index 2\n  .ui-resizable-se\n   opacity .5\n  .CogPencilButton\n   svg\n    opacity 1\n    cursor pointer\n    fill "+
a.greyish+"\n    &:hover\n     fill "+a.foregroundColor+"\n .CogPage\n  overflow hidden\n  width 100%\n  height 100%\n  position relative\n .CogHeader,.CogFooter\n  font-size 12px\n  height 30px\n  line-height 30px\n  padding-left 5px\n .CogBody\n  padding 5px\n  width 100%\n  height calc(100% - 80px)\n  box-sizing border-box\n  &.HeaderLess\n   height calc(100% - 50px)\n .CogGrabber\n  width 100%\n  height 10px\n  cursor move\n .CogHeader\n  text-transform uppercase\n  text-align center\n  border-bottom 1px solid "+
a.borderColor+"\n .CogFooter\n  border-top 1px solid "+a.borderColor+"\n iframe\n  width 100%\n  height 100%\n  border 0"};window.ThemeChisel=ThemeChisel;var CodeMirrorCss=".CodeMirror{font-family:monospace;height:300px;color:#000}.CodeMirror-lines{padding:4px 0}.CodeMirror pre{padding:0 4px}.CodeMirror-scrollbar-filler,.CodeMirror-gutter-filler{background-color:#fff}.CodeMirror-gutters{border-right:0;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid #000;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0!important;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-animate-fat-cursor{width:auto;border:0;-webkit-animation:blink 1.06s steps(1) infinite;-moz-animation:blink 1.06s steps(1) infinite;animation:blink 1.06s steps(1) infinite;background-color:#7e7}@-moz-keyframes blink{50%{background-color:transparent}}@-webkit-keyframes blink{50%{background-color:transparent}}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-rulers{position:absolute;left:0;right:0;top:-50px;bottom:-20px;overflow:hidden}.CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default .cm-header{color:blue}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-variable-3,.cm-s-default .cm-type{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta{color:#555}.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-s-default .cm-error{color:red}.cm-invalidchar{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0f0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#f22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:#fff}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-30px;margin-right:-30px;padding-bottom:30px;height:100%;outline:none;position:relative}.CodeMirror-sizer{position:relative;border-right:30px solid transparent}.CodeMirror-vscrollbar,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-gutter-filler{position:absolute;z-index:6;display:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-30px}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:none!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper ::selection{background-color:transparent}.CodeMirror-gutter-wrapper ::-moz-selection{background-color:transparent}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre{-moz-border-radius:0;-webkit-border-radius:0;border-radius:0;border-width:0;background:transparent;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;-webkit-font-variant-ligatures:contextual;font-variant-ligatures:contextual}.CodeMirror-wrap pre{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;overflow:auto}.CodeMirror-rtl pre{direction:rtl}.CodeMirror-code{outline:none}.CodeMirror-scroll,.CodeMirror-sizer,.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber{-moz-box-sizing:content-box;box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute;pointer-events:none}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}div.CodeMirror-dragcursors{visibility:visible}.CodeMirror-focused div.CodeMirror-cursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line > span::selection,.CodeMirror-line > span > span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line > span::-moz-selection,.CodeMirror-line > span > span::-moz-selection{background:#d7d4f0}.cm-searching{background:#ffa;background:rgba(255,255,0,.4)}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:''}span.CodeMirror-selectedtext{background:none}.CodeMirror-hints{position:absolute;z-index:10;overflow:hidden;list-style:none;margin:0;padding:2px;-webkit-box-shadow:2px 3px 5px rgba(0,0,0,.2);-moz-box-shadow:2px 3px 5px rgba(0,0,0,.2);box-shadow:2px 3px 5px rgba(0,0,0,.2);border-radius:3px;border:1px solid silver;background:#fff;font-size:90%;font-family:monospace;max-height:20em;overflow-y:auto}.CodeMirror-hint{margin:0;padding:0 4px;border-radius:2px;white-space:pre;color:#000;cursor:pointer}li.CodeMirror-hint-active{background:#08f;color:#fff}";
window.CodeMirrorCss=CodeMirrorCss;var AbstractCogChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractCogChisel,AbstractChisel);AbstractCogChisel._mountedChisels=AbstractChisel._mountedChisels;AbstractCogChisel.prototype.getStruct=function(){this._struct||(this._struct=this.getDefinition().computeStruct(this));return this._struct};AbstractCogChisel.prototype._clearCogStruct=function(){delete this._struct};AbstractCogChisel.prototype.getBuiltCog=function(){return""};
AbstractCogChisel.prototype.getInputBinder=function(){return this.getParent().getOutputBinder()};AbstractCogChisel.prototype.getOutputBinder=function(){if(!this.isProvider())return this.getInputBinder();this._outputBinder||(this._outputBinder=new Binder(this));return this._outputBinder};AbstractCogChisel.prototype.isProvider=function(){return!1};AbstractCogChisel.prototype.parseNodeType=function(a){return this.getDictionary().parseNodeTypeFromDictionary(this,a)||OtherTuple};
AbstractCogChisel.prototype.getProgram=function(){return this.getParent().getProgram()};AbstractCogChisel.prototype.getChildCogs=function(){return this.getChildrenByNodeType(AbstractCogChisel)};AbstractCogChisel.prototype.getHierarchy=function(){return{node:this,children:this.getChildCogs().map(function(a){return a.getHierarchy()})}};AbstractCogChisel.prototype.getDictionary=function(){return this.getProgram().getDictionary()};AbstractCogChisel.prototype.isVisible=function(){return"false"!==this.findBeam("visible")};
AbstractCogChisel.prototype.selectCog=function(){this._selected=!0;this.isMounted()&&this.getStump().addClassToStump("ui-selected")};AbstractCogChisel.prototype.unselect=function(){delete this._selected;this.isMounted()&&this.getStump().removeClassFromStump("ui-selected")};AbstractCogChisel.prototype.isSelected=function(){return this._selected};
AbstractCogChisel.prototype.getBray=function(){return"@div\n class CogPage CogChisel "+this.constructor.name+"\n id "+this.getId()+"\n data-onContextMenuCommand chisel _openCogContextMenuCommand\n @div\n  class CogGrabber\n @div "+this.getCogHeaderBern()+"\n  class CogHeader\n @div\n  class CogBody"+TreeNotation.nest(this.getCogBodyBray(),2)+"\n @div\n  class CogFooter"+TreeNotation.nest(this.getCogFooterBray(),2)+"\n @div\n  class CogGrabber"};
AbstractCogChisel.prototype.getCogHeaderBern=function(){return""+this.getBase()};AbstractCogChisel.prototype.getSlotPatternWords=function(){var a=this.getDefinition().getSlotPattern();return a?a.split(" "):[]};AbstractCogChisel.prototype.makeCogDimension=function(a){a=void 0===a?this.getPin():a;a=a.split(" ").map(function(a){return 20*parseInt(a)});var b={left:a[0],top:a[1]};2<a.length&&(b.width=a[2]);3<a.length&&(b.height=a[3]);return new CogDimension(this,b)};
AbstractCogChisel.prototype.getCogBodyBray=function(){return""};AbstractCogChisel.prototype._getCss=function(){var a="#"+this.getId(),b=this.getTheme(),c=this.isVisible()?"":"display: none",d=this.getCogDimension(),d=d?d.toCss():"";return a+" { "+c+" "+d+" }\n      "+b.hakonToCss(this.getHakon())};AbstractCogChisel.prototype.getDefinition=function(){var a=this.getBase();return this.getDictionary().getDefinitionByName(a)};
AbstractCogChisel.prototype.mapTupleNamesToColumnNames=function(a){var b=this.getStruct();return a.map(function(a){return b[a]})};AbstractCogChisel.prototype.getContextMenuBray=function(){return""};AbstractCogChisel.loadCode=function(){return Promise.resolve()};AbstractCogChisel.prototype.getStructColumns=function(){var a=this.getNode("columns"),b=a?a.toObject():{};return Object.keys(b).map(function(a){var c=b[a]||{};"object"!==typeof c&&(c={});c.name||(c.name=a);return c})};
AbstractCogChisel.prototype.getCogClassColumns=function(){return[]};AbstractCogChisel.prototype.handleCogError=function(a){this._errorCount||(this._errorCount=0);this._errorCount++;this.getApp().goRed(a)};AbstractCogChisel.prototype.getCogErrorCount=function(){return this._errorCount||0};AbstractCogChisel.prototype.isProgram=function(){return!1};AbstractCogChisel.prototype.getLimit=function(){return this.getStruct().limit};AbstractCogChisel.prototype.getChildNodeSuggestions=function(){return[]};
AbstractCogChisel.prototype.getId=function(){return"cog"+this._getUid()};AbstractCogChisel.prototype.getCogDimension=function(){var a=this.getProgram(),b=a.getProgramDimension();return a.getCogDimensionMap(b.width,b.height).get(this)};AbstractCogChisel.prototype.getHeaderHeight=function(){return 30};AbstractCogChisel.prototype.getFooterHeight=function(){return 30};
AbstractCogChisel.prototype.getCogBodyDimension=function(){var a=this.getCogDimension();a.height=a.height-this.getHeaderHeight()-this.getFooterHeight();return a};AbstractCogChisel.prototype.openCogSourceEditorModalCommand=function(){return this.getApp().setTargetNode(this).toggleAndRender("nodeEditorModal")};AbstractCogChisel.prototype.cloneCogCommand=function(){var a=this.getProgram();a.cloneCog(this);return a.autosaveAndRender()};
AbstractCogChisel.prototype._changeCogOrderByCommand=function(a){this.toggle("orderBy",[a,"-"+a,""]);this.autosaveCog();this.makeDirty();return this.render()};AbstractCogChisel.prototype.getDependencyTimestamps=function(){return[]};AbstractCogChisel.prototype.executeLoadData=function(){return Promise.resolve()};AbstractCogChisel.prototype.executeLoadDataAndRender=function(){var a=this;return this.executeLoadData().then(function(){return a.render()})};
AbstractCogChisel.prototype.getFirstAncestor=function(){var a=this.getParent();return a instanceof AbstractCogChisel?a.getFirstAncestor():this};AbstractCogChisel.prototype.changeCogTypeCommand=function(a){var b=this;this.setBase(a);var c=this.duplicate();this.unmountAndDestroy();return c.getDefinition().executeLoadDefinitionCodeOrGetLoadingPromise(this.getApp()).then(function(){return b.getProgram().autosaveAndRender().then(function(){return c.executeLoadDataAndRender()})})};
AbstractCogChisel.prototype.changeParentCommand=function(a){var b=this.getProgram(),b=(a=a?a.split(" ").map(function(a){return parseInt(a)}):"")?this.getApp().nodeAt(a):b;this.copyTo(b);this.unmountAndDestroy();return this.getProgram().autosaveAndRender()};AbstractCogChisel.prototype._openCogContextMenuCommand=function(){return this.getApp().setTargetNode(this).toggleAndRender("cogContextMenu")};AbstractCogChisel.prototype.destroyCogCommand=function(){this.unmountAndDestroy();return this.getProgram().autosaveAndRender()};
AbstractCogChisel.prototype.getNewDataCommand=function(){};AbstractCogChisel.prototype.setMonadOrChild=function(a,b){var c=this.getNode(a),d=b.includes("\n")||c&&c.length;if(c)return d?c.setChildren(b):c.setBeam(b);if(this.getDefinition().getMonadName()===a&&!b.includes("\n"))return this.setBeam(b);a=this.touchNode(a);return d?a.setChildren(b):a.setBeam(b)};
AbstractCogChisel.prototype.changeTupleCommand=function(a,b){this.setMonadOrChild(b,a.toString());this._clearCogStruct();this.getApp().renderApp();return this.autosaveCog()};AbstractCogChisel.prototype.changeWordCommand=function(a,b){this.setWord(b,a);this.render();return this.autosaveCog()};AbstractCogChisel.prototype.insertSuggestionCommand=function(a){var b=this;this.append(a);this.autosaveCog();return this.getProgram().executeLoadProgramCode().then(function(){return b.render()})};
AbstractCogChisel.prototype.copyCogCommand=function(){this.getApp().getWillowProgram().copyTextToClipboard(this.getFirstAncestor().toString());return Promise.resolve()};AbstractCogChisel.prototype.getHakon=function(){return""};AbstractCogChisel.prototype.getTheme=function(){return this.getApp().getTheme()};AbstractCogChisel.prototype.getCogFooterBray=function(){return this.getCogToolbarButtonBray()};AbstractCogChisel.prototype.getCogToolbarButtonBray=function(){return"@span "+Icons("pencil",16)+"\n class CogPencilButton\n data-onClickCommand chisel toggleToolbarCommand"};
AbstractCogChisel.prototype.openCogInspectorCommand=function(){return this.getApp().setTargetNode(this).toggleAndRender("cogInspectorModal")};AbstractCogChisel.prototype.getSuggestedSize=function(){return this.getDefinition().getSuggestedSize()};AbstractCogChisel.prototype.getPin=function(){return this.findBeam(CogConstants.pin)};AbstractCogChisel.prototype.getStumpForChildren=function(){return this.getStump().getParent()};
AbstractCogChisel.prototype.chiselDidMount=function(){AbstractChisel.prototype.chiselDidMount.call(this);this._cogToolbar&&this._cogToolbar.render()};AbstractCogChisel.prototype.autosaveCog=function(){this._clearCogStruct();return this.getProgram().autosaveProgram()};AbstractCogChisel.prototype.toggleToolbarCommand=function(){this._cogToolbar=this._cogToolbar?this._cogToolbar.unmount():(new CogToolbarChisel("",void 0,this)).render(this.getStump());return Promise.resolve()};
AbstractCogChisel.prototype.getSlotLine=function(){var a=this.getSlotPatternWords(),b=this.getWords(1),c=a.length-1;a.forEach(function(a,d){d===c&&b.slice(d).join(" ")});var a=["cog"].concat(a),d=a[a.length-1];if(d.endsWith("+")){d=d.replace("+","");a[a.length-1]=d;for(var e=this.getWords();e.length>a.length;)a.push(d)}return a.join(" ")};
AbstractCogChisel.prototype.getInspection=function(){var a=this.getMessageBuffer().getChildren().map(function(a){return"@li "+moment(a.getMTime()).fromNow()+" - "+a.childrenToString()}),b=this.getDefinition().getDefinitionTuples().map(function(a){return a.getTupleName()+" "+a.getTupleTypeName()+" "+a.getDescription()}).join("\n"),c=this.getStruct(),d=this.getParent().getBase();return"@div CogClass: "+this.constructor.name+" Parent: "+d+"\n@div Messages:\n@ol\n "+a+"\n@div Tree:\n@pre\n bern"+TreeNotation.nest(this.toString(),
2)+"\n@div CogStruct:\n@pre\n bern"+TreeNotation.nest(JSON.stringify(c,null,2),2)+"\n@div All Cog Tuples:\n@pre\n bern"+TreeNotation.nest(b,2)};window.AbstractCogChisel=AbstractCogChisel;var BinPacker=function(){};BinPacker.prototype.fit=function(a){var b=a.length;this.root={xcc:0,ycc:0,width:0<b?a[0].width:0,height:0<b?a[0].height:0};for(var c=0;c<b;c++){var d=a[c],e=this.findNode(this.root,d.width,d.height);d.fit=e?this.splitNode(e,d.width,d.height):this.growNode(d.width,d.height)}};
BinPacker.prototype.findNode=function(a,b,c){return a.used?this.findNode(a.right,b,c)||this.findNode(a.down,b,c):b<=a.width&&c<=a.height?a:null};BinPacker.prototype.splitNode=function(a,b,c){a.used=!0;a.down={xcc:a.xcc,ycc:a.ycc+c,width:a.width,height:a.height-c};a.right={xcc:a.xcc+b,ycc:a.ycc,width:a.width-b,height:c};return a};
BinPacker.prototype.growNode=function(a,b){var c=this.root,d=a<=c.width,e=b<=c.height,f=d&&c.width>=c.height+b;return e&&c.height>=c.width+a?this.growRight(a,b):f?this.growDown(a,b):e?this.growRight(a,b):d?this.growDown(a,b):null};BinPacker.prototype.growRight=function(a,b){var c=this.root;this.root={used:!0,xcc:0,ycc:0,width:c.width+a,height:c.height,down:c,right:{xcc:c.width,ycc:0,width:a,height:c.height}};return(c=this.findNode(this.root,a,b))?this.splitNode(c,a,b):null};
BinPacker.prototype.growDown=function(a,b){var c=this.root;this.root={used:!0,xcc:0,ycc:0,width:c.width,height:c.height+b,down:{xcc:0,ycc:c.height,width:c.width,height:b},right:c};return(c=this.findNode(this.root,a,b))?this.splitNode(c,a,b):null};window.BinPacker=BinPacker;var BlankLine=function(a){return AbstractCogChisel.apply(this,arguments)||this};$jscomp.inherits(BlankLine,AbstractCogChisel);BlankLine._mountedChisels=AbstractCogChisel._mountedChisels;BlankLine.loadCode=AbstractCogChisel.loadCode;
BlankLine.prototype.isVisible=function(){return!1};window.BlankLine=BlankLine;var CogConstants={pin:"pin",percentage:"percentage"};window.CogConstants=CogConstants;var CogDimension=function(a,b){a=a.getSuggestedSize();this.width=a.width;this.height=a.height;Object.assign(this,b)};CogDimension.prototype.getScaledCss=function(a){a=void 0===a?1:a;return this._toCss({width:this.width*a,height:this.height*a,left:this.left*a,top:this.top*a})};CogDimension.prototype.toCss=function(){return this._toCss(this)};
CogDimension.prototype._toCss=function(a){return"width: "+a.width+"px; height: "+a.height+"px; left: "+a.left+"px; top: "+a.top+"px"};window.CogDimension=CogDimension;var DidYouMeanCog=function(a){return AbstractCogChisel.apply(this,arguments)||this};$jscomp.inherits(DidYouMeanCog,AbstractCogChisel);DidYouMeanCog._mountedChisels=AbstractCogChisel._mountedChisels;DidYouMeanCog.loadCode=AbstractCogChisel.loadCode;
DidYouMeanCog.prototype.getCogBodyBray=function(){var a=this.getBase(),b=this.getDictionary().getCogNames();return(b=didYouMean(a,b))?"@div\n @span No cog '"+a+"' found. Did you mean\n @a "+b+"\n  collapseNode true\n  tabindex -1\n  value "+b+"\n  data-onClickCommand chisel changeCogTypeCommand\n @span ?":"@div No cog '"+a+"' found."};DidYouMeanCog.prototype.getParseErrorCount=function(){return this.getTopDownArray().length};DidYouMeanCog.prototype.getCogHeaderBern=function(){return""};
window.DidYouMeanCog=DidYouMeanCog;var AbstractLayoutStrategy=function(a,b,c){this._program=a;this._width=void 0===b?1400:b;this._height=void 0===c?1400:c};AbstractLayoutStrategy.prototype._getVisibleCogs=function(){return this._getProgram().getProgramCogs().filter(function(a){return a.isVisible()})};AbstractLayoutStrategy.prototype._getProgram=function(){return this._program};AbstractLayoutStrategy.prototype._getLayoutBoxWidth=function(){return this._width};
AbstractLayoutStrategy.prototype._getLayoutBoxHeight=function(){return this._height};var CustomLayout=function(a){AbstractLayoutStrategy.apply(this,arguments)};$jscomp.inherits(CustomLayout,AbstractLayoutStrategy);CustomLayout.prototype.makeCogDimensionMap=function(){var a=this._getVisibleCogs(),b=[],c=new Map;a.forEach(function(a,d){if(!a.getPin())return b.push(a);c.set(a,a.makeCogDimension())});var d=0;b.forEach(function(a,b){b=a.makeCogDimension("0 "+d);c.set(a,b);d+=b.height/20});return c};
var TreeLayout=function(a){AbstractLayoutStrategy.apply(this,arguments)};$jscomp.inherits(TreeLayout,AbstractLayoutStrategy);TreeLayout.prototype.makeCogDimensionMap=function(){var a=this._getProgram().getHierarchy(),a=d3.hierarchy(a),b=d3.tree().size([.8*this._getLayoutBoxWidth(),.8*this._getLayoutBoxHeight()]),c=new Map;b(a).descendants().forEach(function(a){var b=a.data.node;b.isProgram()||(a=new CogDimension(b,{width:80,height:80,left:a.x,top:a.y}),c.set(b,a))});return c};
var ColumnLayout=function(a){AbstractLayoutStrategy.apply(this,arguments)};$jscomp.inherits(ColumnLayout,AbstractLayoutStrategy);ColumnLayout.prototype.makeCogDimensionMap=function(){var a=0,b=Math.floor((this._getLayoutBoxWidth()-800)/2),c=new Map;this._getVisibleCogs().forEach(function(d){var e=d.getSuggestedSize(),f=new CogDimension(d,{width:800,height:e.height,left:b,top:a});c.set(d,f);a+=e.height});return c};var BinLayout=function(a){AbstractLayoutStrategy.apply(this,arguments)};
$jscomp.inherits(BinLayout,AbstractLayoutStrategy);BinLayout.prototype.makeCogDimensionMap=function(){var a=new Map,b=this._getVisibleCogs().map(function(a){var b=a.getSuggestedSize();return{width:b.width,height:b.height,cog:a}}),b=lodash.sortBy(b,function(a){return Math.max(a.width,a.height)}).reverse();(new BinPacker).fit(b);b.forEach(function(b){var c=new CogDimension(b.cog,{width:b.width,height:b.height,left:b.fit.xcc,top:b.fit.ycc});a.set(b.cog,c)});return a};
var LayoutStrategies={custom:CustomLayout,column:ColumnLayout,tree:TreeLayout,bin:BinLayout};window.LayoutStrategies=LayoutStrategies;var MorphCog=function(a){return AbstractCogChisel.apply(this,arguments)||this};$jscomp.inherits(MorphCog,AbstractCogChisel);MorphCog._mountedChisels=AbstractCogChisel._mountedChisels;MorphCog.loadCode=AbstractCogChisel.loadCode;MorphCog.prototype.getHakon=function(){this.getTheme();return".MorphCog\n .CogBody\n  display flex\n  flex-flow row wrap\n  overflow scroll\n  a\n   margin 10px\n   height 50px\n   overflow hidden\n   text-align center\n   text-overflow ellipsis\n   font-size 12px\n   width 50px"};
MorphCog.prototype.getCogBodyBray=function(){var a=this.getDictionary(),b=a.getTopNodeTypes();this.getApp();return b.map(function(b){return a.getDefinitionByName(b)}).map(function(a){return"@a "+Icons(a.getSvg(),24)+"<br>"+a.getBase()+"\n title "+a.getDescription()+"\n tabindex -1\n value "+a.getBase()+"\n data-onClickCommand chisel changeCogTypeCommand"}).join("\n")};MorphCog.prototype.getCogHeaderBern=function(){return""};window.MorphCog=MorphCog;
var SettingsCog=function(a){return AbstractCogChisel.apply(this,arguments)||this};$jscomp.inherits(SettingsCog,AbstractCogChisel);SettingsCog._mountedChisels=AbstractCogChisel._mountedChisels;SettingsCog.loadCode=AbstractCogChisel.loadCode;SettingsCog.prototype.isVisible=function(){return"true"===this.findBeam("visible")};window.SettingsCog=SettingsCog;var Column=function(a,b){this._obj=a=void 0===a?{}:a;this._rawVector=b;this._sampleSet=lodash.sampleSize(b,30)};Column.prototype.getColumnName=function(){return this._obj.name};
Column.prototype.isInvalidValue=function(a){return this.getColumnTypeObj().isInvalidValue(a)};Column.prototype._getSample=function(){if(void 0===this._sample){var a=this._getSampleSet();this._sample=a.length?a[0]:""}return this._sample};Column.prototype._getObject=function(){return this._obj};Column.prototype.getColumnTypeObj=function(){this._type||(this._type=this._inferType());return this._type};Column.prototype.isNumericMS=function(){return this.getColumnTypeObj().isNumericMS()};
Column.prototype.isInt=function(){return this.getColumnTypeObj().isInt()};Column.prototype.isTemporal=function(){return this.getColumnTypeObj().isTemporal()};Column.prototype.toDisplayString=function(a){return this.getColumnTypeObj().toDisplayString(a,this.getFormat())};Column.prototype.isString=function(){return this.getColumnTypeObj().isString()};Column.prototype.isHash=function(){return this.isString()&&!1};
Column.prototype.getEntropy=function(){if(void 0!==this._entropy)return this._entropy;var a={},b=1;this.getColumnName();this._getSampleSet().forEach(function(c){a[c]||(b++,a[c]=!0)});return this._entropy=b};Column.prototype.isLink=function(){if(void 0!==this._isLink)return this._isLink;var a=this._getSample();this.isString()&&a&&a.match?this._isLink=a.match(/^(http\:|\/)/)?1:0:this._isLink=!1;return this._isLink};Column.prototype._getBinder=function(){return this._binder};
Column.prototype._getSampleSet=function(){return this._sampleSet};Column.prototype.isUnique=function(){return this.getEntropy()-1===this._getSampleSet().length};Column.prototype.setRank=function(a){this._rank=a};Column.prototype.getRank=function(){return this._rank};
Column.prototype.getTitlePotential=function(){if(this._obj.title)return 1;if(void 0!==this._titlePotential)return this._titlePotential;var a={title:.99,name:.98,label:.97,category:.96},b=this.getColumnName();a[b]?this._titlePotential=a[b]:150<this.getEstimatedTextLength()?this._titlePotential=.01:this.isString()&&!this.isLink()&&this.isUnique()&&!this.isHash()?this._titlePotential=.75:this._titlePotential=0;return this._titlePotential};
Column.prototype.getEstimatedTextLength=function(){if(!this.isString())return 0;if(void 0!==this._estimatedTextLength)return this._estimatedTextLength;this.getColumnName();var a=this._getSampleSet(),b=a.map(function(a){return a&&a.length}).reduce(function(a,b){return a+b},0);return this._estimatedTextLength=Math.floor(b/a.length)};Column.prototype.getAlias=function(){return this._obj.alias?this._obj.alias:this.getColumnName()};
Column.prototype.getFormat=function(){return this._obj.format?this._obj.format:this.getColumnTypeObj().getDefaultFormat(this.getColumnName(),this._getSample())};Column.prototype.getMissingDataPercentage=function(){var a=0;this.getColumnName();var b=this._getSampleSet();b.forEach(function(b){void 0!==b&&""!==b||a++});return a/(b.length||1)};Column.prototype.getMap=function(){var a=this._map;return a?a:this._map=this._getVector().set};
Column.prototype._getVector=function(){this._vector||(this._vector=this._createVector());return this._vector};Column.prototype._createVector=function(){var a=this,b=[];this.getColumnName();var c={},d=0,e=0;this._rawVector.forEach(function(f){if(a.isInvalidValue(f))return d++,!0;c[f]?c[f].count++:(c[f]={count:0,index:0},e++);b.push(f)});return{set:c,values:b,incompleteCount:d,uniqueValues:e}};
Column.prototype.getQuintiles=function(){var a=this.getReductions().deciles;return[20,40,60,80,100].map(function(b){return{value:a[b],percent:b/100}})};Column.prototype.getColumnTypeName=function(){return this.getColumnTypeObj().getColTypeName()};
Column.prototype.toObject=function(){return{name:this.getColumnName(),type:this.getColumnTypeName(),rank:this.getRank(),reduction:this._getObject().reduction,titlePotential:this.getTitlePotential(),isString:this.isString(),isTemporal:this.isTemporal(),isLink:this.isLink(),estimatedTextLength:this.getEstimatedTextLength()}};Column.prototype._getNumericallySortedValuesInIncreasingOrder=function(){var a=this._getVector().values.slice();a.sort(function(a,c){return a>c?1:a<c?-1:0});return a};
Column.prototype.getReductions=function(){this._reductions||(this._reductions=this._getReductionResult(this._getVector(),this));return this._reductions};Column.prototype.getMin=function(){return this.getReductions().min};Column.prototype.getMax=function(){return this.getReductions().max};Column.roundTo=function(a,b){return parseFloat(a.toFixed(b))};
Column.prototype._getReductionResult=function(a,b){var c=a.values,d=c.length,e={};e.incompleteCount=a.incompleteCount;e.uniqueValues=a.uniqueValues;if(!d)return e;a=function(a,b){return a>b?1:a<b?-1:0};var f=c.slice();b.isString()?f.sort():f.sort(a);c=f[0];a=f[0];for(var g=0,h=void 0,l=0,k=void 0,n=0,p=0;p<d;p++){var m=f[p],g=g+m;m>a&&(a=m);m<c&&(c=m);m===k?n++:(k=m,n=1);n>l&&(l=n,h=k)}k=Math.floor(d/2);e.count=d;e.sum=g;e.median=f[k];e.average=g/d;e.min=c;e.max=a;e.range=a-c;e.mode=h;e.modeSize=
l;b.isString()?(e.sum=void 0,e.average=void 0):b.isTemporal()&&(e.sum=void 0);e.deciles={};[10,20,30,40,50,60,70,80,90,99,100].forEach(function(a){var b=Math.floor(a/100*d),b=b===d?b-1:b;e.deciles[a]=f[b]});return e};
Column.prototype._inferType=function(){var a=this._getObject(),b=this.getColumnName(),c=this._getSample();if(a&&a.type&&ColumnTypes[a.type])return ColumnTypes[a.type];var a={number:.5,date:.25,string:.75,feet:.01,object:.1,boolean:.02},d=!isNaN(parseFloat(c))||ColumnTypes.usd.getProbForColumnSpecimen(c),e=ColumnTypes.date.getProbForColumnSpecimen(c);"object"===typeof c&&(a.object=.9);if(!0===c||!1===c)a.boolean=.96;b.match(/(team|name|link|image|description|permalink|title|label|status|thumb|ip|useragent)/i)&&
(a.string=.95);b.match(/(gender|region|category|group|section|sector|field)/i)&&(a.string=.95);b.match(/(height|length)/i)&&c.toString().match(/[0-9]+(\'|\-)[0-9\.]+/)&&ColumnTypes.feet.getProbForColumnSpecimen(c)&&(a.feet=.97);a.number=d?.8:.1;if(ColumnTypes.usd.getProbForColumnSpecimen(c)||!isNaN(c)&&b.match(/^(price|income|cost|revenue|budget|profit|amount|balance)$/i))a.usd=.99;d&&b.match(/(year|born)/i)&&4===c.length&&(a.year=.99);d&&b.match(/(time|second|created|edited)/i)&&10===c.length&&(a.second=
.99);d&&b.match(/(time|second)/i)&&13===c.length&&(a.microsecond=.99);b.match(/(year|date|dob|birthday|day|month|time|birthdate)/i)&&e&&(a.date=.98);"string"===typeof c&&100<c.length&&(a.string=.98);var b=0,d=null,f;for(f in a)a[f]>b&&(b=a[f],d=f);"number"===d&&"string"===typeof c&&c.match(",")&&(d="numberString");"date"===d&&"string"===typeof c&&ColumnTypes.day.getProbForColumnSpecimen(c)&&(d="day");return ColumnTypes[d]};window.Column=Column;var ColumnSpecimen=function(){};
window.ColumnSpecimen=ColumnSpecimen;moment.createFromInputFallback=function(a){a._d=new Date(a._i)};var AbstractColType=function(a){this._name=a};AbstractColType.prototype.toDisplayString=function(a){return a};AbstractColType.prototype.fromStringToNumeric=function(a){return a};AbstractColType.prototype.getDefaultFormat=function(){};AbstractColType.prototype.isTemporal=function(){return!1};AbstractColType.prototype.isString=function(){return!1};AbstractColType.prototype.isInt=function(){return!1};
AbstractColType.prototype.getColTypeName=function(){return this._name};AbstractColType.prototype.isNumericMS=function(){return!1};AbstractColType.prototype.isInvalidValue=function(a){return void 0===a||""===a?!0:!1};var AbstractNumeric=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractNumeric,AbstractColType);AbstractNumeric.prototype.fromStringToNumeric=function(a){return parseFloat(a)};
AbstractNumeric.prototype.isInvalidValue=function(a){return AbstractColType.prototype.isInvalidValue.call(this,a)||isNaN(a)};var AbstractTemporal=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractTemporal,AbstractColType);AbstractTemporal.prototype.fromStringToMoment=function(a){return moment(parseInt(a))};AbstractTemporal.prototype.isTemporal=function(){return!0};var AbstractCurrency=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractCurrency,AbstractColType);
var DateCol=function(a){AbstractTemporal.apply(this,arguments)};$jscomp.inherits(DateCol,AbstractTemporal);DateCol.prototype.toDisplayString=function(a,b){b||(b="MM/DD/YY");return"fromNow"===b?moment(parseFloat(a)).fromNow():moment(a).format(b)};DateCol.prototype.fromStringToNumeric=function(a){return 1E3*GetDate.getDate(a).unix()};DateCol.prototype.isNumericMS=function(){return!0};DateCol.prototype.fromStringToMoment=function(a){return GetDate.getDate(a)};
DateCol.prototype.getProbForColumnSpecimen=function(a){return GetDate.getDate(a).isValid()};var AbstractInt=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractInt,AbstractColType);AbstractInt.prototype.isInt=function(){return!0};AbstractInt.prototype.fromStringToNumeric=function(a){return parseInt(a)};var Int=function(a){AbstractInt.apply(this,arguments)};$jscomp.inherits(Int,AbstractInt);var AbstractTemporalInt=function(a){AbstractInt.apply(this,arguments)};
$jscomp.inherits(AbstractTemporalInt,AbstractInt);var AbstractMicrosecond=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(AbstractMicrosecond,AbstractTemporalInt);AbstractMicrosecond.prototype.toDisplayString=function(a,b){return"fromNow"===b?moment(parseFloat(a)).fromNow():a};AbstractMicrosecond.prototype.isNumericMS=function(){return!0};AbstractMicrosecond.prototype.getDefaultFormat=function(){return"fromNow"};var Microsecond=function(a){AbstractMicrosecond.apply(this,arguments)};
$jscomp.inherits(Microsecond,AbstractMicrosecond);var Second=function(a){AbstractMicrosecond.apply(this,arguments)};$jscomp.inherits(Second,AbstractMicrosecond);Second.prototype.fromStringToNumeric=function(a){return 1E3*parseInt(a)};var Day=function(a){AbstractTemporal.apply(this,arguments)};$jscomp.inherits(Day,AbstractTemporal);Day.prototype.toDisplayString=function(a,b){return moment(a).format(b||"MM/DD/YYYY")};Day.prototype.fromStringToNumeric=function(a){return 1E3*GetDate.getDate(a).startOf("day").unix()};
Day.prototype.fromStringToMoment=function(a){return GetDate.getDate(a).startOf("day")};Day.prototype.fromMomentToNumeric=function(a){return 1E3*a.startOf("day").unix()};Day.prototype.getProbForColumnSpecimen=function(a){a=moment.parseFormat?moment.parseFormat(a):parseFormat;return"MM/DD/YY"===a||"MM/DD/YYYY"===a||"M/D/YYYY"===a};var Week=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(Week,AbstractTemporalInt);Week.prototype.toDisplayString=function(a,b){return moment(a).format("MM/DD/YYYY - WW")};
Week.prototype.fromMomentToNumeric=function(a){return 1E3*a.startOf("week").unix()};Week.prototype.isNumericMS=function(){return!0};var Month=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(Month,AbstractTemporalInt);Month.prototype.toDisplayString=function(a,b){return moment(a).format(b||"MMMM")};Month.prototype.fromMomentToNumeric=function(a){return 1E3*a.startOf("month").unix()};Month.prototype.isNumericMS=function(){return!0};
var Hour=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(Hour,AbstractTemporalInt);Hour.prototype.toDisplayString=function(a,b){return a};Hour.prototype.fromMomentToNumeric=function(a){return parseInt(a.startOf("hour").format("H"))};var HourMinute=function(a){AbstractTemporal.apply(this,arguments)};$jscomp.inherits(HourMinute,AbstractTemporal);HourMinute.prototype.toDisplayString=function(a){return a};HourMinute.prototype.fromStringToNumeric=function(a){return parseFloat(GetDate.getDate(a).format("H.m"))};
var Minute=function(a){AbstractTemporal.apply(this,arguments)};$jscomp.inherits(Minute,AbstractTemporal);Minute.prototype.toDisplayString=function(a,b){return moment(a).format("m")};Minute.prototype.fromStringToNumeric=function(a){return 1E3*GetDate.getDate(a).startOf("minute").unix()};var Year=function(a){AbstractTemporalInt.apply(this,arguments)};$jscomp.inherits(Year,AbstractTemporalInt);Year.prototype.fromMomentToNumeric=function(a){return parseInt(a.format("YYYY"))};
var Feet=function(a){AbstractNumeric.apply(this,arguments)};$jscomp.inherits(Feet,AbstractNumeric);Feet.prototype.getProbForColumnSpecimen=function(a){return!isNaN(FeetToInches(a))};Feet.prototype.fromStringToNumeric=function(a){return FeetToInches(a)};Feet.prototype.toDisplayString=function(a,b){a=parseFloat(a);return Math.floor(a/12)+"'"+Math.round(a%12)+'"'};var USD=function(a){AbstractCurrency.apply(this,arguments)};$jscomp.inherits(USD,AbstractCurrency);
USD.prototype.toDisplayString=function(a,b){return b?numeral(a).format(b):a};USD.prototype.fromStringToNumeric=function(a){return parseFloat(a.toString().replace(/[\$\, \%]/g,""))};USD.prototype.getProbForColumnSpecimen=function(a){return a&&a.match&&!!a.match(/^\$[0-9\.\,]+$/)};USD.prototype.getDefaultFormat=function(){return"$(0a)"};var NumberCol=function(a){AbstractNumeric.apply(this,arguments)};$jscomp.inherits(NumberCol,AbstractNumeric);
NumberCol.prototype.toDisplayString=function(a,b){return"percent"===b?numeral(parseFloat(a)).format("0.00")+"%":b&&!isNaN(a)&&Infinity!==a?numeral(a).format(b):a};NumberCol.prototype.getDefaultFormat=function(a,b){if(a.match(/^(mile|pound|inch|feet)s?$/i))return"0.0";if(a.match(/^(calorie|steps)s?$/i)||b&&!b.toString().includes("."))return"0,0"};var NumberString=function(a){AbstractNumeric.apply(this,arguments)};$jscomp.inherits(NumberString,AbstractNumeric);
NumberString.prototype.toDisplayString=function(a,b){return b?numeral(a).format(b):a};NumberString.prototype.getDefaultFormat=function(){return"0,0"};NumberString.prototype.fromStringToNumeric=function(a){return parseFloat(a.toString().replace(/[\$\, \%]/g,""))};var AbstractStringCol=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(AbstractStringCol,AbstractColType);AbstractStringCol.prototype.isString=function(){return!0};
var StringCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(StringCol,AbstractStringCol);var UrlCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(UrlCol,AbstractStringCol);var TextCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(TextCol,AbstractStringCol);var AbstractCodeCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(AbstractCodeCol,AbstractStringCol);
var CodeCol=function(a){AbstractCodeCol.apply(this,arguments)};$jscomp.inherits(CodeCol,AbstractCodeCol);var HTMLCol=function(a){AbstractCodeCol.apply(this,arguments)};$jscomp.inherits(HTMLCol,AbstractCodeCol);var AbstractPathCol=function(a){AbstractStringCol.apply(this,arguments)};$jscomp.inherits(AbstractPathCol,AbstractStringCol);var PathCol=function(a){AbstractPathCol.apply(this,arguments)};$jscomp.inherits(PathCol,AbstractPathCol);var DirCol=function(a){AbstractPathCol.apply(this,arguments)};
$jscomp.inherits(DirCol,AbstractPathCol);var ObjectCol=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(ObjectCol,AbstractColType);var BooleanCol=function(a){AbstractColType.apply(this,arguments)};$jscomp.inherits(BooleanCol,AbstractColType);BooleanCol.prototype.fromStringToNumeric=function(a){return"true"===a.toString()?1:0};
var ColumnTypes={microsecond:Microsecond,second:Second,date:DateCol,day:Day,week:Week,month:Month,hour:Hour,hourMinute:HourMinute,minute:Minute,year:Year,feet:Feet,usd:USD,number:NumberCol,numberString:NumberString,string:StringCol,text:TextCol,path:PathCol,dir:DirCol,code:CodeCol,html:HTMLCol,url:UrlCol,object:ObjectCol,boolean:BooleanCol,int:Int};Object.keys(ColumnTypes).forEach(function(a){return ColumnTypes[a]=new ColumnTypes[a](a)});window.ColumnTypes=ColumnTypes;
var FeetToInches=function(a){if("number"===typeof a)return a;if(!a)return null;var b=0,c=a.search(/[^0-9\.]/);if(1>c)return b=parseFloat(a.replace(/[^0-9\.]/g,"")),isNaN(b)?null:12*b;var d=parseFloat(a.substr(0,c).replace(/[^0-9\.]/g,""));a=parseFloat(a.substr(c).replace(/[^0-9\.]/g,""));isNaN(d)||(b+=12*d);isNaN(a)||(b+=a);return b};window.FeetToInches=FeetToInches;moment.createFromInputFallback=function(a){a._d=new Date(a._i)};
var GetDate={getDateAsUnix:function(a){return GetDate.getDate(a).unix()},getDateAsUnixUtx:function(a){return GetDate.getDate(a,moment.utc).unix()},getDate:function(a,b){b=void 0===b?moment:b;var c=b(a);if(c.isValid())return c;if("string"===typeof a&&a.match(/^[0-9]{8}$/)){var c=parseInt(a.substr(0,2)),d=parseInt(a.substr(2,2)),e=parseInt(a.substr(4,2)),f=parseInt(a.substr(6,2)),g=parseInt(a.substr(0,4)),h=parseInt(a.substr(4,4)),e=13>e,l=32>f,f=13>f,g=1E3<g&&2100>g;return c=13>c&&32>d&&1E3<h&&2100>
h?b(a,"MMDDYYYY"):g&&e&&l?b(a,"YYYYMMDD"):g&&f?b(a,"YYYYDDMM"):b(a,"DDMMYYYY")}return"string"===typeof a&&a.match(/^[0-9]{2}\/[0-9]{4}$/)?b(a,"MM/YYYY"):!a.match||a.match(/[^0-9]/)||(d=parseFloat(a),isNaN(d))?c:10===a.length?b(1E3*d):b(d)}};window.GetDate=GetDate;var AbstractContextMenuChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractContextMenuChisel,AbstractChisel);AbstractContextMenuChisel._mountedChisels=AbstractChisel._mountedChisels;
AbstractContextMenuChisel.prototype.getHakon=function(){var a=this.getTheme();return".AbstractContextMenuChisel\n position fixed\n overflow scroll\n max-height 100%\n z-index 221\n background "+a.contextMenuBackground+"\n border 1px solid "+a.borderColor+"\n box-shadow 0 1px 3px 0 "+a.boxShadow+"\n font-size 14px\n a\n  display block\n  padding 3px\n  font-size 14px\n  text-decoration none\n  color "+a.darkBlack+"\n  &:hover\n   color "+a.white+"\n   background "+a.hoverBackground};
AbstractContextMenuChisel.prototype.getBray=function(){return"@div\n class AbstractContextMenuChisel "+this.constructor.name+TreeNotation.nest(this.getContextMenuBodyBray(),1)};
AbstractContextMenuChisel.prototype.chiselDidMount=function(){var a=this.getStump(),b=this.getApp(),c=b.getWillowProgram(),d=c.getBodyStump().getShadow(),e=function(){d.offShadowEvent(WillowShadowEvents.click,e);b.closeAllContextMenus()};setTimeout(function(){return d.onShadowEvent(WillowShadowEvents.click,e)},100);var f=b.getMouseEvent(),c=c.getWindowSize();a.setStumpCss(this._getContextMenuPosition(c.width,c.height,f.clientX,f.clientY,a.getShadow()))};
AbstractContextMenuChisel.prototype._getContextMenuPosition=function(a,b,c,d,e){var f=c,g=e.getShadowOuterWidth();b=e.getShadowOuterHeight()+d-b;0<b&&(d-=b);0<g+f-a&&(f=c-g-5);0>d&&(d=0);return{left:f,top:d}};window.AbstractContextMenuChisel=AbstractContextMenuChisel;var CogContextMenuChisel=function(a){return AbstractContextMenuChisel.apply(this,arguments)||this};$jscomp.inherits(CogContextMenuChisel,AbstractContextMenuChisel);CogContextMenuChisel._mountedChisels=AbstractContextMenuChisel._mountedChisels;
CogContextMenuChisel.prototype.getContextMenuBodyBray=function(){return"@a Reload\n data-onClickCommand app fetchAndReloadFocusedProgramCommand\n@a Copy cog with inputs\n tabindex -1\n data-onClickCommand context copyCogCommand\n@a Copy data as tsv\n data-onClickCommand context copyDataCommand\n value \t\n@a Export data to csv file\n data-onClickCommand context _exportDataCommand\n"+this.getApp().getTargetNode().getContextMenuBray()};window.CogContextMenuChisel=CogContextMenuChisel;
var ProgramContextMenuChisel=function(a){return AbstractContextMenuChisel.apply(this,arguments)||this};$jscomp.inherits(ProgramContextMenuChisel,AbstractContextMenuChisel);ProgramContextMenuChisel._mountedChisels=AbstractContextMenuChisel._mountedChisels;ProgramContextMenuChisel.prototype.getContextMenuBodyBray=function(){return this.getApp().getMountedProgram().getContextMenuCommandsBray()};window.ProgramContextMenuChisel=ProgramContextMenuChisel;
var SubTuple=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(SubTuple,TreeNotation);SubTuple.prototype.getParseErrorCount=function(){return 0};SubTuple.prototype.parseNodeType=function(a){return SubTuple};SubTuple.prototype.getSlotLine=function(){return"subtuple ".repeat(this.length).trim()};var AbstractTuple=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(AbstractTuple,TreeNotation);AbstractTuple.prototype.getTupleName=function(){return this.getWord(1)};
AbstractTuple.prototype.getProbability=function(){var a=this.findBeam(CogConstants.percentage);return a?parseFloat(a):.01};AbstractTuple.prototype.getSlotLine=function(){return("tuple "+"word ".repeat(this.length?this.length-1:0)).trim()};
AbstractTuple.prototype._getCogCommandDropdownBray=function(a,b){a=a.map(function(a){return" @option "+a+"\n  value "+a+"\n  "+(b===a?"selected":"notselected")}).join("\n");return"@select\n data-onChangeCommand cog changeTupleCommand\n name "+this.getTupleName()+"\n @option\n"+a};AbstractTuple.prototype.getTupleTypeName=function(){return this.getWord(0).substr(1)};AbstractTuple.prototype.getDescription=function(){return this.findBeam("description")||""};AbstractTuple.prototype.parseNodeType=function(a){return SubTuple};
AbstractTuple.prototype._getDefaultValue=function(){var a=this.getWords(2),a=a.length?a.join(" "):"",b=this.getNode("defaultLong");return b?b.childrenToString():this.has("default")?this.getNode("default").getBeam():a};AbstractTuple.prototype._parseValue=function(a){return a};AbstractTuple.prototype.isMonad=function(){return this.has("monad")};AbstractTuple.prototype.getValueFromNode=function(a){return a.getBeam()};
AbstractTuple.prototype._getUserValue=function(a){var b=this._getDefaultValue();if(this.has("const"))return b;var c=a.getNode(this.getTupleName()),d=this.isMonad()&&a.getBeam(),c=c&&this.getValueFromNode(c)||d||void 0;return void 0===c&&void 0!==b?b:c?this.has("templateString")&&c.includes("{")?a.getProgram().format(c):c:c};AbstractTuple.prototype.toFormBray=function(a){return"@input\n data-onChangeCommand cog changeTupleCommand\n name "+this.getTupleName()+"\n value "+a};window.AbstractTuple=AbstractTuple;
var AlphaNumericTuple=function(a){return AbstractTuple.apply(this,arguments)||this};$jscomp.inherits(AlphaNumericTuple,AbstractTuple);AlphaNumericTuple.prototype._parseValue=function(a){return(void 0===a?"":a).replace(/[^a-z0-9A-Z]/g,"")};window.AlphaNumericTuple=AlphaNumericTuple;var BooleanTuple=function(a){return AbstractTuple.apply(this,arguments)||this};$jscomp.inherits(BooleanTuple,AbstractTuple);BooleanTuple.prototype._parseValue=function(a){return"true"===a?!0:!1};
BooleanTuple.prototype.toFormBray=function(a){return"@input\n data-onChangeCommand cog changeTupleCommand\n name "+this.getTupleName()+"\n type checkbox\n "+(!0===a?"checked":"unchecked")};window.BooleanTuple=BooleanTuple;var ColumnRunTimeTuple=function(a){return AbstractTuple.apply(this,arguments)||this};$jscomp.inherits(ColumnRunTimeTuple,AbstractTuple);
ColumnRunTimeTuple.prototype._parseValue=function(a,b){var c=b.getInputBinder(),d=c.getColumnsMap(),e=this.getNode("auto");if(d[a])return a;if(e){if(e.getBeam())return this._getAutoColumn(b,e.getBeam());a=c.getColumnsByImportance();if(a=a.length&&a[0].getColumnName())return a}};ColumnRunTimeTuple.prototype.toFormBray=function(a,b){b=b.getInputBinder().getColumnNames();return this._getCogCommandDropdownBray(b,a)};
ColumnRunTimeTuple.prototype._getAutoColumn=function(a,b){a=a.getInputBinder();b=b.split(",");var c=b.filter(function(a){return a.includes("=")}).map(function(a){return a.split("=")}),d=function(a){return c.every(function(b){return void 0!==a[b[0]]&&a[b[0]]().toString()===b[1]})};a=a.getColumnsArray().filter(function(a){return d(a)});var e=b.find(function(a){return!a.includes("=")});b=a;e&&(b=lodash.sortBy(b,function(a){return a[e]()}).reverse());if(b.length)return b[0].getColumnName()};
window.ColumnRunTimeTuple=ColumnRunTimeTuple;var Definition=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(Definition,TreeNotation);Definition.prototype.parseNodeType=function(a){return a.startsWith("&")?this.getTupleClass(a.split(" ")[0].substr(1)):TreeNotation};
Definition.prototype.getTupleClass=function(a){return{boolean:BooleanTuple,int:IntTuple,prob:ProbTuple,format:FormatTuple,alphanumeric:AlphaNumericTuple,title:TitleTuple,quick:QuickTuple,slang:SlangTuple,markdown:SlangTuple,column:ColumnRunTimeTuple,enum:EnumTuple,javascript:SlangTuple}[a]||OtherTuple};Definition.prototype.getDoc=function(){return this.getBase()};Definition.prototype.getMonadName=function(){return this.getDefinitionTuples().filter(function(a){return a.isMonad()}).map(function(a){return a.getTupleName()}).join("")};
Definition.prototype.getSlotPattern=function(){return this._getExtended().findBeam("slotPattern")};Definition.prototype.getDescription=function(){return this.findBeam("description")||""};Definition.prototype.getSvg=function(){return this._getExtended().findBeam("svg")||"table"};Definition.prototype._getExtended=function(){this._extended||(this._extended=this._makeExtended());return this._extended};
Definition.prototype._makeExtended=function(){var a=this.getGraph(),b=new Definition;a.forEach(function(a){b.extend(a)});return b};Definition.prototype._loadCss=function(a){var b=this._getExtended().findBeam("css");if(b){var c=a.getServerPath();a.getWillowProgram().getBodyStump().insertChildNode(b.split(" ").map(function(a){return"@link\n rel stylesheet\n media screen\n href "+(c+a)}).join("\n"))}};
Definition.prototype.executeLoadDefinitionCodeOrGetLoadingPromise=function(a){this._loadCss(a);var b=this.getDefinitionJSClass(),c=this._getExtended().findBeam("script"),d=a.getServerPath(),c=c?c.match(/^https\:/)?c:d+c:void 0;return a.getWillowProgram().appendScript(c).then(function(){return b.loadCode()})};Definition.prototype.getSuggestedSize=function(){var a=(this._getExtended().findBeam("size")||"280 220").split(" ").map(function(a){return parseInt(a)});return{width:a[0],height:a[1]}};
Definition.prototype.getDefinitionTuples=function(){var a=[];this.getGraph().forEach(function(b){b.getChildrenByNodeType(AbstractTuple).forEach(function(b){a.push(b)})});return a};Definition.prototype.computeStruct=function(a){var b={};this.getDefinitionTuples().forEach(function(c){var d=c._getUserValue(a);b[c.getTupleName()]=c._parseValue(d,a)});return b};
Definition.prototype.getDefinitionJSClass=function(){if(this._class)return this._class;var a=this._getExtended().findBeam("require").split(" "),b=a[0],c=a[1],d="undefined"!==typeof require,a=d?process:window;d&&!a[b]&&(c=require(c),a[c.name]=c);return this._class=a[b]};Definition.prototype.getPercentage=function(){var a=this.findBeam(CogConstants.percentage);return a?parseFloat(a):0};window.Definition=Definition;var PrefaceNode=function(a){return TreeNotation.apply(this,arguments)||this};
$jscomp.inherits(PrefaceNode,TreeNotation);var DictionaryProgram=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(DictionaryProgram,TreeNotation);DictionaryProgram.prototype.parseNodeType=function(a){return a.startsWith("preface")?PrefaceNode:Definition};DictionaryProgram.prototype.compilesTo=function(){return this.getNode("preface").findBeam("compilesTo")};DictionaryProgram.prototype.getExtensionName=function(){return this.getNode("preface").findBeam("fileExtension")};
DictionaryProgram.prototype.getTopNodeTypes=function(){var a=this._getDefinitions();a.sort(Util.sortByAccessor(function(a){return a.getPercentage()}));a.reverse();return a.map(function(a){return a.getBase()})};DictionaryProgram.prototype.parseNodeTypeFromDictionary=function(a,b){a=b.split(" ")[0];return(a=(a=this._getDefinitionMap()[a])&&a.getDefinitionJSClass())||b.trim().length?a:BlankLine};DictionaryProgram.prototype.getDocs=function(){return this.toString()};
DictionaryProgram.prototype._getDefinitionMap=function(){if(this._definitionMap)return this._definitionMap;var a={};this.getChildrenByNodeType(Definition).forEach(function(b){a[b.getBase()]=b});return this._definitionMap=a};DictionaryProgram.prototype._getDefinitions=function(){return Object.values(this._getDefinitionMap())};DictionaryProgram.prototype.getDefinitionByName=function(a){return this._getDefinitionMap()[a.toLowerCase()]||this.getDidYouMeanDefinition()};
DictionaryProgram.prototype.getCogNames=function(){return Object.keys(this._getDefinitionMap())};DictionaryProgram.prototype.getDidYouMeanDefinition=function(){return this.getDefinitionByName(">didyoumean")};
DictionaryProgram.prototype.execute=function(a){var b=Util.getFileName(a).replace(".dictionary","Dictionary");a=a.replace(".dictionary","Dictionary.compiled.js");var c=new TreeNotation(this.toString());c.delete("#!");b="const "+b+" = `"+c.toString()+"`\n\nwindow."+b+" = "+b+"\n";require("fs").writeFileSync(a,b,"utf8")};
DictionaryProgram.prototype.loadDefinitionCode=function(a,b){this._loadedDefinitions||(this._loadedDefinitions={});this._loadedDefinitions[a]||(this._loadedDefinitions[a]=this.getDefinitionByName(a).executeLoadDefinitionCodeOrGetLoadingPromise(b));return this._loadedDefinitions[a]};window.DictionaryProgram=DictionaryProgram;var EnumTuple=function(a){return AbstractTuple.apply(this,arguments)||this};$jscomp.inherits(EnumTuple,AbstractTuple);
EnumTuple.prototype.getChoices=function(){var a=this.getNode("options"),b={};a.length?a.getChildren().forEach(function(a){b[a.getBase()]=a.getBeam()}):a.getBeam().split(" ").forEach(function(a){b[a]=a});return b};EnumTuple.prototype._parseValue=function(a){return this.getChoices()[a]?a:void 0};EnumTuple.prototype.toFormBray=function(a){var b=Object.keys(this.getChoices());return this._getCogCommandDropdownBray(b,a)};window.EnumTuple=EnumTuple;
var FormatTuple=function(a){return AbstractTuple.apply(this,arguments)||this};$jscomp.inherits(FormatTuple,AbstractTuple);FormatTuple.prototype.toFormBray=function(a){var b=(new CardParser).getEncodingNames();return this._getCogCommandDropdownBray(b,a)};window.FormatTuple=FormatTuple;var IntTuple=function(a){return AbstractTuple.apply(this,arguments)||this};$jscomp.inherits(IntTuple,AbstractTuple);IntTuple.prototype._parseValue=function(a){return parseInt(a)};
IntTuple.prototype.toFormBray=function(a){return"@input\n data-onChangeCommand cog changeTupleCommand\n name "+this.getTupleName()+"\n type number\n value "+a};window.IntTuple=IntTuple;var OtherTuple=function(a){return AbstractTuple.apply(this,arguments)||this};$jscomp.inherits(OtherTuple,AbstractTuple);OtherTuple.prototype.getParseErrorCount=function(){return this.getTopDownArray().length};window.OtherTuple=OtherTuple;var ProbTuple=function(a){return AbstractTuple.apply(this,arguments)||this};
$jscomp.inherits(ProbTuple,AbstractTuple);ProbTuple.prototype._parseValue=function(a){return parseFloat(a)};window.ProbTuple=ProbTuple;var QuickTuple=function(a){return AbstractTuple.apply(this,arguments)||this};$jscomp.inherits(QuickTuple,AbstractTuple);QuickTuple.prototype._parseValue=function(a){return Format.linkify(Format.stripHtml(void 0===a?"":a))};window.QuickTuple=QuickTuple;var SlangTuple=function(a){return AbstractTuple.apply(this,arguments)||this};$jscomp.inherits(SlangTuple,AbstractTuple);
SlangTuple.prototype.toFormBray=function(a){return"@textarea\n data-onChangeCommand cog changeTupleCommand\n name "+this.getTupleName()+"\n bern"+TreeNotation.nest(a,2)};SlangTuple.prototype.getValueFromNode=function(a){return a.childrenToString()};window.SlangTuple=SlangTuple;var TitleTuple=function(a){return AbstractTuple.apply(this,arguments)||this};$jscomp.inherits(TitleTuple,AbstractTuple);TitleTuple.prototype._parseValue=function(a){return Format.stripHtml(void 0===a?"":a)};
window.TitleTuple=TitleTuple;var GlobalShortcutNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(GlobalShortcutNode,TreeNotation);GlobalShortcutNode.prototype.getKeyCombo=function(){return this.getWord(3)};GlobalShortcutNode.prototype.getFn=function(){return this.getWord(2)};GlobalShortcutNode.prototype.getCategory=function(){return this.getWord(1)};GlobalShortcutNode.prototype.getDescription=function(){return this.getWords(4).join(" ")};
GlobalShortcutNode.prototype.isEnabled=function(){return!0};GlobalShortcutNode.prototype.execute=function(a){if(!this.isEnabled(a))return!1;var b=this.getFn();a.logCommand("app "+b);a[b]()};var MountedShortcutNode=function(a){return GlobalShortcutNode.apply(this,arguments)||this};$jscomp.inherits(MountedShortcutNode,GlobalShortcutNode);MountedShortcutNode.prototype.isEnabled=function(a){return!!a.getMountedProgram()};var DrumsErrorNode=function(a){return TreeNotation.apply(this,arguments)||this};
$jscomp.inherits(DrumsErrorNode,TreeNotation);var Drums=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(Drums,TreeNotation);Drums.prototype.parseNodeType=function(a){return a.startsWith("panel")?GlobalShortcutNode:a.startsWith("mounted")?MountedShortcutNode:DrumsErrorNode};window.Drums=Drums;var AbstractFireCog=function(a){return AbstractCogChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractFireCog,AbstractCogChisel);AbstractFireCog._mountedChisels=AbstractCogChisel._mountedChisels;
AbstractFireCog.loadCode=AbstractCogChisel.loadCode;AbstractFireCog.prototype.getHakon=function(){return".AbstractFireCog\n input\n  border 0\n  font-size 16px"};
AbstractFireCog.prototype.getCogBodyBray=function(){var a=this,b=this.getDefinition(),c=Icons(b.getSvg(),14),d=this.getSlotPatternWords(),e=d.length-1,d=d.map(function(b,c){var d=c+1;c=(e===c?a.getWords(d).join(" "):a.getWord(d))||"";return" @input\n  placeholder "+b+"\n  value "+c+"\n  name "+d+"\n  data-onChangeCommand chisel changeWordCommand"}).join("\n");return"@div "+c+" "+b.getDescription()+"\n@div\n"+d};
AbstractFireCog.prototype.getBuiltCog=function(){var a=this.getDefinition()._getExtended(),b=this.getSlotPatternWords(),c=this.getWords(1),d={},e=b.length-1,f=a.findBeam("joinLastBy")||" ";b.forEach(function(a,b){d[a]=b===e?c.slice(b).join(f):c[b]});var b=new TreeNotation(d),g=a.findBeam("toJS")||"",b=b.format(g),h=this.getIndentation();if(!a.has("hasCogs"))return h+b;a=this.getChildrenByNodeType(AbstractCogChisel).map(function(a){return h+a.getBuiltCog()}).join("\n");return""+h+b+" {\n"+a+"\n"+h+
"}\n"};window.AbstractFireCog=AbstractFireCog;var FireDictionary='preface\n fileExtension fire\n compilesTo js\n>cog\n &outputPoint pin\n  percentage .2\n require AbstractCogChisel /aientist/client/cogs/AbstractCogChisel.js\n &boolean visible true\n>settings >cog\n &boolean visible false\n &enum layout custom\n  percentage .1\n  options custom tree bin\n require SettingsCog /aientist/client/cogs/SettingsCog.js\njs >cog\n require AbstractFireCog /aientist/client/fire/AbstractFireCog.js\n size 280 160\nassignment js\n>command >cog\n>didyoumean >command\n require DidYouMeanCog /aientist/client/cogs/DidYouMeanCog.js\n>morph >command\n size 420 400\n require MorphCog /aientist/client/cogs/MorphCog.js\nlog@ js\n description Log variable(s) to console\n slotPattern identifier+\n toJS console.log({identifier+})\n percentage .5\n svg printer\n joinLastBy , \nlog$ js\n description Log string to console\n slotPattern word+\n toJS console.log("{word+}")\n percentage .51\n svg printer\nrequire js\n description Require Something\n svg import\n slotPattern identifier path\n toJS const {identifier} = require("{path}")\n percentage .1\nexport js\n description Export This\n svg export\n slotPattern identifier\n toJS module.exports = {identifier}\n percentage .1\nset# assignment\n description Number Assignment\n slotPattern identifier number\n toJS const {identifier} = {number}\n percentage .3\n svg hashtag\nset? assignment\n description Boolean Assignment\n slotPattern identifier boolean\n toJS const {identifier} = {boolean}\n percentage .04\n svg hashtag\nset$ assignment\n description String Assignment\n slotPattern identifier word+\n toJS const {identifier} = "{word+}"\n percentage .2\n svg font-1\nset#+ assignment\n description Add Numbers\n slotPattern identifier number+\n joinLastBy  + \n svg add\n toJS const {identifier} = {number+}\n percentage .1\nset?< set?\n description Less than test\n slotPattern identifier number number\n toJS const {identifier} = {number} < {number}\n percentage .1\n svg lt\nset?<= set?\n description Less than or equal to test\n slotPattern identifier number number\n toJS const {identifier} = {number} <= {number}\n percentage .1\n svg lt-eq\nset?> set?\n description Greater than test\n slotPattern identifier number number\n toJS const {identifier} = {number} > {number}\n percentage .1\nset?>= set?\n description Greater than or equal to test\n slotPattern identifier number number\n toJS const {identifier} = {number} >= {number}\n percentage .1\n svg gt-eq\nset#- set#\n description Subtract Numbers\n joinLastBy  - \n svg minus\nset#/ set#\n description Divide Numbers\n joinLastBy  / \nset#% set#\n description Modulo Numbers\n joinLastBy %\nset#* set#\n description Multiply Numbers\n joinLastBy  * \n svg multiply\nset#~ assignment\n description Mutable Number Assignment\n slotPattern identifier number\n toJS let {identifier} = {number}\n-- js\n description Decrement\n slotPattern identifier\n toJS {identifier}--\n percentage .1\n++ js\n description Increment\n percentage .3\n slotPattern identifier\n toJS {identifier}++\nset#[] assignment\n description Number Array Assignment\n slotPattern identifier number+\n percentage .4\n toJS const {identifier} = [{number+}]\n joinLastBy , \nset*>> assignment\n description Function Call\n percentage .5\n svg call\n slotPattern identifier functionIdentifier parameter+\n toJS const {identifier} = {functionIdentifier}({parameter+})\n joinLastBy , \n>> js\n description Function call ignore result.\n percentage .1\n svg call\n slotPattern functionIdentifier parameter+\n toJS {functionIdentifier}({parameter+})\n joinLastBy , \nset.>> assignment\n description Method Call\n percentage .5\n slotPattern identifier instanceIdentifier methodName parameter+\n toJS const {identifier} = {instanceIdentifier}.{methodName}({parameter+})\n joinLastBy , \nreturn js\n slotPattern identifier\n toJS return {identifier}\n percentage .1\n svg nw\nsetfn assignment\n description Function Assignment\n slotPattern functionIdentifier parameter+\n toJS const {functionIdentifier} = ({parameter+}) =>\n percentage .1\n svg function\n hasCogs\n joinLastBy , \nblock js\n hasCogs\n description block of code\n svg fork\n slotPattern identifier\n percentage .2\n toJS /* {identifier} */\nif js\n hasCogs\n description If cog\n svg fork\n slotPattern identifier\n percentage .2\n toJS if ({identifier})\nwhile js\n hasCogs\n description While cog\n slotPattern identifier\n percentage .1\n toJS while ({identifier})';
window.FireDictionary=FireDictionary;var FireProgram=function(a){return AbstractProgramChisel.apply(this,arguments)||this};$jscomp.inherits(FireProgram,AbstractProgramChisel);FireProgram._mountedChisels=AbstractProgramChisel._mountedChisels;FireProgram.prototype.getDictionaryString=function(){return FireDictionary};
FireProgram.prototype.execute=function(){var a=[],b=console.log;console.log=function(b){for(var c=[],e=0;e<arguments.length;++e)c[e-0]=arguments[e];return a.push(c)};eval(this.buildProgram());console.log=b;b=a.join("\n");console.log(b);return Promise.resolve(b)};window.FireProgram=FireProgram;var AbstractFlowCog=function(a){return AbstractCogChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractFlowCog,AbstractCogChisel);AbstractFlowCog._mountedChisels=AbstractCogChisel._mountedChisels;
AbstractFlowCog.loadCode=AbstractCogChisel.loadCode;AbstractFlowCog.prototype.getCardClass=function(){return ObjectBackedCard};AbstractFlowCog.prototype.getBuiltCog=function(){return""};AbstractFlowCog.prototype.getPipishInput=function(){return this.getStruct().slang||this.getInputBinder().getFirstColumnAsString()||""};AbstractFlowCog.prototype.openCardEditorByIndexCommand=function(a){return this._openCardEditor(this.getInputBinder().getCards()[a])};
AbstractFlowCog.prototype.openCardEditorByPuidCommand=function(a){return this._openCardEditor(this._getCardByPuid(a))};AbstractFlowCog.prototype._openCardEditor=function(a){var b=this.getApp();b.setTargetNode(a);return b.toggleAndRender("cardEditorModal")};AbstractFlowCog.prototype._getCardByPuid=function(a){a=parseInt(a);return this.getInputBinder().getCards().find(function(b){return b.getPuid()===a})};
AbstractFlowCog.prototype.getRequiredTable=function(a){a=this.mapTupleNamesToColumnNames(a);var b=this.getOutputBinder();return a.map(function(a){return b.getBinderColumnByName(a)}).some(function(a){return!a})?[]:this.getCardsAsCsvArray(a)};AbstractFlowCog.prototype.getCardsWithStructQuery=function(){var a=this.getLimit(),b=this.getStruct().orderBy;return this.getOutputBinder().getSortedCardsWithLimit(b,a)};
AbstractFlowCog.prototype.getCardsAsCsvArray=function(a){var b=this.getCardsWithStructQuery().map(function(b){return b.getAsArray(a)});b.unshift(a);return b};AbstractFlowCog.prototype.copyDataCommand=function(a){this.getApp().getWillowProgram().copyTextToClipboard(this.getOutputBinder().toDelimited(a));return Promise.resolve()};AbstractFlowCog.prototype._exportDataCommand=function(){this.getApp().getWillowProgram().downloadFile(this.getOutputBinder().toDelimited(","),this.getBase()+".csv","text/csv")};
AbstractFlowCog.prototype.getRequiredTableWithDates=function(a){var b=this.getOutputBinder(),c=this.mapTupleNamesToColumnNames(a).map(function(a){return b.getBinderColumnByName(a)}),d=this.getRequiredTable(a);if(!d.length)return d;a=c.map(function(a,b){return a.isNumericMS()?b:-1}).filter(function(a){return-1<a});if(!a.length)return d;for(var c=d.length,e={dataIndex:1};e.dataIndex<c;e={dataIndex:e.dataIndex},e.dataIndex++)a.forEach(function(a){return function(b){d[a.dataIndex][b]=new Date(d[a.dataIndex][b])}}(e));
return d};AbstractFlowCog.prototype.getTTL=function(){return this._ttl||0};AbstractFlowCog.prototype.openInsertCardModalCommand=function(){var a=this.getApp();a.setTargetNode(this);return a.toggleAndRender("insertCardModal")};AbstractFlowCog.prototype.openInsertCardsModalCommand=function(){return this.getApp().setTargetNode(this).toggleAndRender("insertCardsModal")};AbstractFlowCog.prototype.createCardsFromTNCommand=function(a){return this.createCards((new CardParser).parse(a,"tree"))};
AbstractFlowCog.prototype.createCards=function(a){return Promise.resolve()};AbstractFlowCog.prototype.fetchCards=function(){return Promise.resolve([])};AbstractFlowCog.prototype.getDependencyTimestamps=function(){return[this.getInputBinder().getCTime()]};
AbstractFlowCog.prototype.executeLoadData=function(){var a=this,b=this._getNow();this._timeLastLoadStarted=b;var c=this.fetchCards();c instanceof Promise||console.error("promise error");return c.then(function(c){if(a._timeLastLoadStarted!==b)return Promise.resolve();var d=lodash.flatten(a.getStructColumns(),a.getCogClassColumns()),f=a.getCardClass();a._outputBinder=new Binder(a,c,d,f);a._ttl=a._getNow()-b;return Promise.all(a.getChildCogs().map(function(a){return a.executeLoadData()})).then(function(b){return a})}).catch(function(b){a.handleCogError(b)})};
AbstractFlowCog.prototype.getInspection=function(){var a=this.getInputBinder(),b=this.getOutputBinder(),c=b.getColumnsArrayOfObjects(),d=a.getColumnsArrayOfObjects(),e=a.getCardCount(),f=b.getCardCount();return AbstractCogChisel.prototype.getInspection.call(this)+"\n@div Input cards: "+e+" Output cards: "+f+"\n@div Load time: "+this.getTTL()+" Render time: "+this.getNewestTimeToRender()+"\n@div Input Columns:\n@pre\n bern"+TreeNotation.nest((new TreeNotation(d)).toFixedWidthTable(),2)+"\n@div Output Columns\n@pre\n bern"+
TreeNotation.nest((new TreeNotation(c)).toFixedWidthTable(),2)+"\n@div Output Numeric Values:\n@pre\n bern"+TreeNotation.nest((new TreeNotation(b.getNumericValues())).toFixedWidthTable(),2)+"\n@div TypeScript Interface:\n@pre\n bern"+TreeNotation.nest(b.toTypeScriptInterface(),2)+"\n@div Input Numeric Values:\n@pre\n bern"+TreeNotation.nest((new TreeNotation(a.getNumericValues())).toFixedWidthTable(),2)};window.AbstractFlowCog=AbstractFlowCog;
var AbstractProviderCog=function(a){return AbstractFlowCog.apply(this,arguments)||this};$jscomp.inherits(AbstractProviderCog,AbstractFlowCog);AbstractProviderCog._mountedChisels=AbstractFlowCog._mountedChisels;AbstractProviderCog.loadCode=AbstractFlowCog.loadCode;AbstractProviderCog.prototype.getCogFooterBray=function(){var a=this.getOutputBinder().getCardCount(),b=lodash.round(this.getTTL()/1E3,1);return this.getCogToolbarButtonBray()+"\n@span Out: "+a+" Time: "+b+"s "};
AbstractProviderCog.prototype.isProvider=function(){return!0};AbstractProviderCog.prototype.isVisible=function(){return"true"===this.findBeam("visible")};window.AbstractProviderCog=AbstractProviderCog;var AbstractTransformerCog=function(a){return AbstractProviderCog.apply(this,arguments)||this};$jscomp.inherits(AbstractTransformerCog,AbstractProviderCog);AbstractTransformerCog._mountedChisels=AbstractProviderCog._mountedChisels;AbstractTransformerCog.loadCode=AbstractProviderCog.loadCode;
AbstractTransformerCog.prototype.getCogFooterBray=function(){var a=this.getInputBinder().getCardCount(),b=this.getOutputBinder().getCardCount();return this.getCogToolbarButtonBray()+"\n@span In: "+a+" Out: "+b};AbstractTransformerCog.prototype.isVisible=function(){return"true"===this.findBeam("visible")};AbstractTransformerCog.prototype.getOutputColumnsTree=function(){return this.getNode("columns")||new TreeNotation};AbstractTransformerCog.prototype.fetchCards=function(){return Promise.resolve(this.transformCards())};
window.AbstractTransformerCog=AbstractTransformerCog;var FlowDictionary="preface\n fileExtension flow\n compilesTo html\n>cog\n percentage 0\n &int limit 10000\n  percentage .5\n  description Maximum number of cards to show.\n &orderByExpression orderBy\n  percentage .5\n &outputPoint pin\n  percentage .2\n &boolean visible true\n  insert 1\n require AbstractFlowCog /aientist/client/flow/AbstractFlowCog.js\n>settings >cog\n &enum layout custom\n  percentage .2\n  options custom tree bin\n &boolean visible false\n size 140 120\n require SettingsCog /aientist/client/cogs/SettingsCog.js\n>chart >cog\n>mini >chart\n &title title\n size 1080 600\n require MiniCog /aientist/client/flow/charts/MiniCog.js\n>list >chart\n &title title\n &column label\n  auto getTitlePotential\n require ListChart /aientist/client/flow/charts/List.js\n>kpi >chart\n percentage .02\n svg score\n &column column\n  percentage .90\n  auto\n &title title\n &enum reduction count\n  percentage .70\n  options count sum average min max median\n require KpiChart /aientist/client/flow/charts/KpiChart.js\n size 140 120\n>html >chart\n &html slang\n script /lib/sanitize-html.min.js\n require HTMLCog /aientist/client/flow/charts/HTMLCog.js\n &string allowedTags img\n  const\n &string allowedAttributes\n  const\n  defaultLong\n   a href name target\n   img src\n>heatcal >chart\n &column count\n  description Column which contains the day's measurement value.\n  auto getColumnTypeName=number\n &column day\n  description Column which contains the day the measurement was taken.\n  auto getColumnTypeName=day\n &title title\n size 750 200\n require HeatCalendarChart /aientist/client/flow/charts/HeatCalendar.js\n>table >chart\n percentage .2\n size 750 300\n svg table\n &boolean pretty\n  percentage .30\n  description Set to true to show formatted values in cell.\n &columnNames showColumns\n  percentage .20\n  description Column names to show\n &columnNames hideColumns\n  percentage .20\n  description Column names to hide\n &title title\n &int limit 100\n  percentage .10\n &enum columnOrder importance\n  percentage .20\n  options default importance alphabetical\n require TableCog /aientist/client/flow/charts/TableCog.js\n>element >chart\n &slang style\n &boolean editable true\n &slang slang\n  percentage .9\n  description Text to show and/or emit.\n  monad\n require BrayCog /aientist/client/flow/charts/BrayCog.js\n>title >element\n percentage .1\n &htmlTag element h1\n  const\n size 250 90\n>dump >chart\n require DumpChart /aientist/client/flow/charts/DumpChart.js\n>header >element\n size 600 60\n>pre >element\n>h1 >header\n>h2 >header\n>labzero >element\n &htmlTag element div\n  const\n &title title LabZero is a product development firm in San Francisco. LZ hosted the first ever ohayo and ETN demo on 6/16/2017.\n  const\n>h3 >header\n>h4 >header\n>h5 >header\n>h6 >header\n>wordcloud >chart\n &column name\n  auto isString=true\n &column count\n  auto isString=false\n script /lib/wordcloud2.js\n require WordCloudChart /aientist/client/flow/charts/WordCloud.js\n>google >chart\n &int limit 10\n  percentage .10\n &title title\n script https://www.gstatic.com/charts/loader.js\n require AbstractGoogleBase /aientist/client/flow/charts/google/AbstractGoogleBase.js\n>googleLabel >google\n &column label\n  description Column to use for the label\n  auto isString=true\n &column value\n  description Column to use for the value\n  auto isString=false\n>google.core >googleLabel\n &enum legendPosition right\n  percentage .5\n  options bottom labeled left none right top\n require AbstractGoogleCore /aientist/client/flow/charts/google/AbstractGoogleCore.js\n>square >google.core\n require GoogleSquare /aientist/client/flow/charts/google/GoogleSquare.js\n>google.geo >google.core\n &region region\n &enum resolution countries\n  percentage .30\n  options countries provinces metros\n require GoogleGeo /aientist/client/flow/charts/google/GoogleGeo.js\n>google.pie >google.core\n &boolean is3D false\n  percentage .10\n &prob pieHole\n &number pieStartAngle\n &prob sliceVisibilityThreshold\n &string googleClassName PieChart\n  const\n>pie >google.pie\n>google.histogram >google.core\n &string googleClassName Histogram\n  const\n>histogram >google.histogram\n>google.column >google.core\n &column x\n &column y\n  auto isString=false\n &column series\n  auto isString=true\n &column row\n  auto isString=false\n &column cell\n  auto isString=false\n &boolean isStacked true\n  percentage .10\n require GoogleColumn /aientist/client/flow/charts/google/GoogleColumn.js\n>line >google.core\n &column x\n &column y\n  auto isString=false\n require GoogleLine /aientist/client/flow/charts/google/GoogleLine.js\n>google.area >line\n require GoogleArea /aientist/client/flow/charts/google/GoogleArea.js\n>scatter >google.core\n percentage .05\n &column x\n  auto isString=false\n &column y\n  auto isString=false\n &object trendlines\n &number hMax\n &number hMin\n &number vMax\n &number vMin\n require GoogleScatter /aientist/client/flow/charts/google/GoogleScatter.js\n>google.gauge >googleLabel\n &int min 0\n  percentage .10\n &int max 100\n  percentage .10\n &int redFrom 90\n  percentage .10\n &int redFrom 100\n  percentage .10\n &int yellowFrom 75\n  percentage .10\n &int yellowTo 90\n  percentage .10\n &int minorTicks 5\n  percentage .10\n require GoogleGauge /aientist/client/flow/charts/google/GoogleGauge.js\n>google.timeline >google\n &column label\n  auto getTitlePotential\n require GoogleTimeline /aientist/client/flow/charts/google/GoogleTimeline.js\n>tree >google\n &boolean allowCollapse false\n  percentage .10\n &enum size medium\n  percentage .10\n  options small medium large\n require GoogleOrg /aientist/client/flow/charts/google/GoogleOrg.js\n>bar >google\n &int limit 10\n  percentage .1\n &column x\n  auto\n &column y\n  auto isString=false\n require GoogleBar /aientist/client/flow/charts/google/GoogleBar.js\n>provider >cog\n size 140 120\n &columnsObject columns\n  percentage .5\n outputSuggestions >filter >group\n>data >provider\n percentage .2\n svg folder\n &slang slang\n  percentage .9\n  description The actual data.\n &format format\n  percentage .40\n  description CSV, TSV, JSON, etc.\n size 280 220\n require DataCog /aientist/client/flow/providers/DataCog.js\n>text >provider\n percentage .01\n require TextCog /aientist/client/flow/providers/TextCog.js\n size 750 200\n svg text\n &slang slang\n  percentage .99\n  description Text to show and/or emit.\n  monad\n>coder >data\n size 280 440\n percentage .01\n &text etn\n  percentage .9\n  description Name of the ETN the code is written in.\n>store >data\n percentage .01\n require StoreCog /aientist/client/flow/providers/StoreCog.js\n &string key\n  percentage .3\n  monad\n  description Name of local storage key.\n>programs >provider\n size 140 120\n require ProgramsCog /aientist/client/flow/providers/ProgramsCog.js\n>url >provider\n percentage .1\n svg www\n size 140 120\n &url url\n  percentage .90\n  templateString\n  monad\n &text extract\n  percentage .5\n  description If the url points to JSON, you can specify a field to extract\n &format format\n  percentage .10\n require AbstractUrlProvider /aientist/client/flow/providers/AbstractUrlProvider.js\n>hn >url\n percentage .01\n &url url https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty\n  percentage .10\n>reddit >url\n percentage .05\n svg reddit\n &text subreddit\n  description Subreddit to download top stories for\n  monad\n &enum get .json\n  percentage .10\n  options\n   .json Homepage\n   reddits.json Top Subreddits\n require RedditCog /aientist/client/flow/providers/RedditCog.js\n>query >provider\n &sql query\n  percentage .99\n  monad\n require QueryCog /aientist/client/flow/providers/QueryCog.js\n>presidents >url\n percentage .01\n svg whitehouse\n &url url /samples/presidents.csv\n  const\n>top >provider\n &string query\n  monad\n requre TopCog /aientist/client/flow/providers/TopCog.js\n size 250 90\n>transformer >cog\n outputSuggestions >table\n size 160 100\n>date >transformer\n &column column\n  auto isTemporal=true\n requre DateCog /aientist/client/flow/transformers/ExtendDate.js\n>datefilter >transformer\n &column column\n  percentage .90\n  auto isTemporal=true\n &enum days\n  options\n   0.0416 Last hour\n   1 Last 24 hours\n   3 Last 3 days\n   7 Last 7 days\n   30 Last 30 days\n   180 Last 6 months\n   365 Last 12 months\n require DateFilter /aientist/client/flow/transformers/DateFilter.js\n>extend >transformer\n require AbstractExtendCog /aientist/client/flow/transformers/AbstractExtendCog.js\n>filter >transformer\n percentage .01\n svg filter\n size 250 90\n &text filter\n  percentage .90\n  description The filter string to search for\n  monad\n require FilterCog /aientist/client/flow/transformers/FilterCog.js\n>morph >command\n size 420 200\n require MorphCog /aientist/client/cogs/MorphCog.js\n>didyoumean >command\n require DidYouMeanCog /aientist/client/cogs/DidYouMeanCog.js\n>group >transformer\n percentage .01\n svg tree\n &column by\n  percentage .90\n  monad\n &columnNames advanced\n  percentage .10\n  description If you want to group by multiple columns\n require GroupCog /aientist/client/flow/transformers/GroupCog.js\n>interpolate >transformer\n &column column\n require InterpolateCog /aientist/client/flow/transformers/InterpolateCog.js\n>join >transformer\n &column on\n  monad\n require JoinCog /aientist/client/flow/transformers/JoinCog.js\n>convert >transformer\n &format to\n  percentage .99\n require ConvertCog /aientist/client/flow/transformers/ConvertCog.js\n>parse >transformer\n &column column\n  description Name of the column to parse data from.\n  auto getColumnTypeName=text\n &format format\n  percentage .40\n  description CSV, TSV, JSON, etc.\n require ParseCog /aientist/client/flow/transformers/ParseCog.js\n>slots >transformer\n &etn etn\n  percentage .40\n require SlotsCog /aientist/client/flow/transformers/SlotsCog.js\n>wordcount >transformer\n require WordCount /aientist/client/flow/transformers/WordCount.js\n>wc >wordcount\n>command >cog\n>replacer >transformer\n &map map\n  percentage .99\n  description Words to replace with their replacements.\n require ReplacerCog /aientist/client/flow/transformers/ReplacerCog.js\n>commands >provider\n &string method getCommandsBuffer\n  const\n require AbstractRunTimeProvider /aientist/client/flow/providers/AbstractRunTimeProvider.js\n>grid >chart\n require GridCog /aientist/client/flow/charts/GridCog.js\n script /node_modules/handsontable/dist/handsontable.full.js\n css /node_modules/handsontable/dist/handsontable.min.css\n>markdown >chart\n &markdown slang\n require MarkdownChart /aientist/client/flow/charts/MarkdownChart.js\n size 700 600\n>iframe >element\n &element element iframe\n  const\n &boolean editable false\n  const\n &url src\n>delays >iframe\n &url src http://embed.flightaware.com/commercial/integrated/web/delay_map.rvt\n  const\n>flights >iframe\n &url src https://www.radarbox24.com/?widget=1&z=2&lat=-2.2616682704093005&lng=-1.004456906404374\n  const\n>youtube >chart\n &alphanumeric video\n  monad\n require YouTubeCog /aientist/client/flow/charts/YouTubeCog.js\n size 800 500\n>outline >chart\n &boolean dots\n  description Whether to just show dots\n require TreeOutline /aientist/client/flow/charts/TreeOutline.js\n>3d >chart\n &slang slang\n &number dotSize 0.02\n script /node_modules/vis/dist/vis.min.js\n require ThreeDChart /aientist/client/flow/charts/ThreeDChart.js\n size 800 500\n>fhtml >html\n &string allowedTags img script\n  const\n &string allowedAttributes 0\n  const\n  defaultLong\n   a href name target\n   img src\n   script src\n>picker >command\n &string path\n  description The program path to update when user picks something.\n &column column\n  description The column to use for the values\n require PickerCog /aientist/client/flow/clay/PickerCog.js\n>eval >transformer\n &javascript javascript\n require EvalCog /aientist/client/flow/transformers/Eval.js\n>stats >transformer\n require StatsCog /aientist/client/flow/transformers/StatsCog.js";
window.FlowDictionary=FlowDictionary;var FlowProgram=function(a){return AbstractProgramChisel.apply(this,arguments)||this};$jscomp.inherits(FlowProgram,AbstractProgramChisel);FlowProgram._mountedChisels=AbstractProgramChisel._mountedChisels;FlowProgram.prototype.getDictionaryString=function(){return FlowDictionary};FlowProgram.prototype.isProvider=function(){return!0};
FlowProgram.prototype.getProgramStats=function(){var a=AbstractProgramChisel.prototype.getProgramStats.call(this);a.cards=this._getProgramCardCount();a.timeToLoad=this._getLongestLoadTime();a.timeToRender=this._getLongestRenderTime();return a};FlowProgram.prototype._getLongestLoadTime=function(){return this.getProgramCogs().map(function(a){return a.getTTL()}).sort().reverse()[0]};FlowProgram.prototype._getLongestRenderTime=function(){return this.getProgramCogs().map(function(a){return a.getNewestTimeToRender()}).sort().reverse()[0]};
FlowProgram.prototype._getProgramCardCount=function(){return this.getAllCards().reduce(function(a,b){return a+b.length},0)};FlowProgram.prototype.getAllCards=function(){return lodash.flatten(this.getProgramCogs().map(function(a){return a.isProvider()?a.getOutputBinder().getCards():[]}))};
FlowProgram.prototype.getProgramOfInterest=function(){var a=this.getProgramCogs().find(function(a){return">coder"===a.getBase()});if(a){var b=a.getStruct().etn;return this.getApp().generateProgram(a.getDataSlang(),b)}return this};window.FlowProgram=FlowProgram;var AbstractChartCog=function(a){return AbstractFlowCog.apply(this,arguments)||this};$jscomp.inherits(AbstractChartCog,AbstractFlowCog);AbstractChartCog._mountedChisels=AbstractFlowCog._mountedChisels;AbstractChartCog.loadCode=AbstractFlowCog.loadCode;
AbstractChartCog.prototype.getCogHeaderBern=function(){return this.getStruct().title||""};AbstractChartCog.prototype.getCogFooterBray=function(){var a=this.getInputBinder().getCardCount();return this.getCogToolbarButtonBray()+"\n@span In: "+a};AbstractChartCog.prototype.toDisplayString=function(a,b){return void 0===a?"":this.getInputBinder().getBinderColumnByName(b).toDisplayString(a)};window.AbstractChartCog=AbstractChartCog;
var AbstractHeaderlessChartCog=function(a){return AbstractChartCog.apply(this,arguments)||this};$jscomp.inherits(AbstractHeaderlessChartCog,AbstractChartCog);AbstractHeaderlessChartCog._mountedChisels=AbstractChartCog._mountedChisels;AbstractHeaderlessChartCog.loadCode=AbstractChartCog.loadCode;
AbstractHeaderlessChartCog.prototype.getBray=function(){return"@div\n class CogPage CogChisel "+this.constructor.name+"\n id "+this.getId()+"\n data-onContextMenuCommand chisel _openCogContextMenuCommand\n @div\n  class CogGrabber\n @div\n  class CogBody HeaderLess"+TreeNotation.nest(this.getCogBodyBray(),2)+"\n @div\n  class CogFooter"+TreeNotation.nest(this.getCogFooterBray(),2)+"\n @div\n  class CogGrabber"};AbstractHeaderlessChartCog.prototype.getHeaderHeight=function(){return 0};
window.AbstractHeaderlessChartCog=AbstractHeaderlessChartCog;var BrayCog=function(a){return AbstractHeaderlessChartCog.apply(this,arguments)||this};$jscomp.inherits(BrayCog,AbstractHeaderlessChartCog);BrayCog._mountedChisels=AbstractHeaderlessChartCog._mountedChisels;BrayCog.loadCode=AbstractHeaderlessChartCog.loadCode;BrayCog.prototype._updateTextCommand=function(a){a=Format.stripHtml(a.replace(/\<br\>/g,"\n").replace(/\<div\>/g,"\n"));this.setMonadOrChild("slang",a);this.autosaveCog();return this.getApp().render()};
BrayCog.prototype.getHakon=function(){return".BrayCog\n div\n  overflow scroll\n p\n  padding 5px\n  width 100%\n  height 100%\n  box-sizing border-box\n  white-space pre\n  outline 0"};BrayCog.prototype.getCogFooterBray=function(){return this.getCogToolbarButtonBray()};BrayCog.prototype.fetchCards=function(){return Promise.resolve([{text:this.getStruct().slang}])};
BrayCog.prototype.getCogBodyBray=function(){var a=this.getStruct(),b=this.getPipishInput();return"@"+(a.element||this.getBase().substr(1))+"\n style "+a.style+TreeNotation.nest(a.src?"src "+a.src:"",1)+"\n data-onBlurCommand chisel _updateTextCommand\n contenteditable "+(a.editable?"true":"false")+"\n bern"+TreeNotation.nest(b,2)};window.BrayCog=BrayCog;var DumpChart=function(a){return AbstractHeaderlessChartCog.apply(this,arguments)||this};$jscomp.inherits(DumpChart,AbstractHeaderlessChartCog);
DumpChart._mountedChisels=AbstractHeaderlessChartCog._mountedChisels;DumpChart.loadCode=AbstractHeaderlessChartCog.loadCode;DumpChart.prototype.getCogBodyBray=function(){return"@div\n style overflow: scroll; width: 100%; height: 100%;\n bern"+TreeNotation.nest(this.getPipishInput(),2)};window.DumpChart=DumpChart;var GridCog=function(a){return AbstractHeaderlessChartCog.apply(this,arguments)||this};$jscomp.inherits(GridCog,AbstractHeaderlessChartCog);GridCog._mountedChisels=AbstractHeaderlessChartCog._mountedChisels;
GridCog.loadCode=AbstractHeaderlessChartCog.loadCode;GridCog.prototype.getCogBodyBray=function(){return"@div\n class hot"};GridCog.prototype.getHakon=function(){return".hot\n color black"};GridCog.prototype.transformCards=function(){};GridCog.prototype.chiselWillUnmount=function(){this._hot&&this._hot.destroy();delete this._hot};
GridCog.prototype.chiselDidUpdate=function(){AbstractHeaderlessChartCog.prototype.chiselDidUpdate.call(this);var a=this.getInputBinder().getColumnsByImportance().map(function(a){return a.getColumnName()}),a=this.getCardsAsCsvArray(a),b=this.getCogDimension(),c=b.width,b=b.height-30,d=this.getStump().findStumpByChild("class hot"),e=this.getApp();if(!this.isNode())return this._hot=new Handsontable(d[0],{data:a,rowHeaders:!0,colHeaders:!0,stretchH:"all",width:c,minSpareCols:10,minSpareRows:30,afterSelection:function(){return e.pauseShortcutListener()},
afterDeselect:function(){return e.startShortcutListener()},height:b})};GridCog.prototype.chiselDidMount=function(){this.chiselDidUpdate()};window.GridCog=GridCog;var BaseBeamArray=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(BaseBeamArray,TreeNotation);BaseBeamArray.prototype.toArrayMap=function(){var a={};this.getChildren().forEach(function(b){a[b.getBase()]=b.getBeam().split(" ")});return a};
var HTMLCog=function(a){return AbstractHeaderlessChartCog.apply(this,arguments)||this};$jscomp.inherits(HTMLCog,AbstractHeaderlessChartCog);HTMLCog._mountedChisels=AbstractHeaderlessChartCog._mountedChisels;HTMLCog.loadCode=AbstractHeaderlessChartCog.loadCode;
HTMLCog.prototype.getCogBodyBray=function(){var a=this.getStruct(),b=a.slang||"",c=a.allowedTags.split(" "),a=(new BaseBeamArray(a.allowedAttributes)).toArrayMap(),b=sanitizeHtml(b,{allowedTags:sanitizeHtml.defaults.allowedTags.concat(c),allowedSchemes:["http","https","file","mailto"],allowedAttributes:a});return"@div\n bern"+TreeNotation.nest(b)};window.HTMLCog=HTMLCog;var HeatCalendarChart=function(a){return AbstractHeaderlessChartCog.apply(this,arguments)||this};
$jscomp.inherits(HeatCalendarChart,AbstractHeaderlessChartCog);HeatCalendarChart._mountedChisels=AbstractHeaderlessChartCog._mountedChisels;HeatCalendarChart.loadCode=AbstractHeaderlessChartCog.loadCode;
HeatCalendarChart.prototype._getLegend=function(a,b,c){var d=this.getTheme();return'<g><text x="'+(c.left-25)+'" y="'+(c.top+10)+'">Less</text>'+a.map(function(a,f){f=c.left+b*f;return'<rect style="fill: '+d.getHeatColor(1-a.percent)+'" width="10" height="10" x="'+f+'" y="'+c.top+'"></rect>'}).join("")+('<text x="'+(c.left+70)+'" y="'+(c.top+10)+'">More</text></g>')};HeatCalendarChart.prototype.getHakon=function(){return".heatCal\n rect\n  fill "+this.getTheme().darkerBackground+"\n  shape-rendering crispedges\n text\n  font-size 10px\n  fill #ddd"};
HeatCalendarChart.prototype.getCogBodyBray=function(){return"@div\n class heatCal\n style padding: 30px 10px 10px;\n bern"+TreeNotation.nest(this.getSvg(),2)};
HeatCalendarChart.prototype.getSvg=function(){var a=this.getInputBinder(),b=a.getCards();if(!b.length)return"";var c=this.getStruct(),d=c.day,e=c.count;if(!d||!e)return"";a.getBinderColumnByName(d);var f=a.getBinderColumnByName(e),c=moment(Date.now()).clone().subtract(365,"days"),a=365/6*12,g=this.getTheme(),h=f.getQuintiles(),l={};b.forEach(function(a){var b=a.getCardNumeric(),c=moment(b[d]).format("MM/DD/YYYY");a:{for(var f=0;f<h.length;f++)if(b[e]<=h[f].value){b=h[f].percent;break a}b=void 0}l[c]=
{quintile:b,card:a}});for(var b=[],f=parseInt(c.format("e")),k=0;365>=k;k++){var n=c.clone().add(k,"days");b.push({day:n,row:parseInt(n.format("e")),col:Math.floor((f+k)/7)})}var c="<g>"+[{day:"Mon",row:2},{day:"Wed",row:4},{day:"Fri",row:6}].map(function(a){return'<text x="0" y="'+(20+12*a.row-3)+'">'+a.day+"</text>"}).join("")+"</g>",p={},f="<g>"+b.map(function(a){var b=a.day.format("MMM"),c=a.day.format("MM/YYYY");if(p[c])return"";p[c]=!0;return'<text x="'+(40+12*a.col)+'" y="10">'+b+"</text>"}).join("")+
"</g>",m=moment(Date.now()).format("MM/DD/YYYY"),b="<g>"+b.map(function(a){var b=a.day.format("MM/DD/YYYY"),c=20+12*a.row;a=40+12*a.col;var d=l[b],e=d?'id="t'+d.card.getPuid()+'"':"",f=b===m?"stroke-width:2;stroke:rgb(0,0,0);":"";return'<rect style="'+((d?"fill: "+g.getHeatColor(1-d.quintile):"")+";"+f)+'" '+e+' data-day="'+b+'" width="10" height="10" x="'+a+'" y="'+c+'"></rect>'}).join("")+"</g>",k=this._getLegend(h,12,{top:110,left:60});return'<svg width="'+a+'" height="184">'+(c+b+f+k)+"</svg>"};
window.HeatCalendarChart=HeatCalendarChart;var KpiChart=function(a){return AbstractHeaderlessChartCog.apply(this,arguments)||this};$jscomp.inherits(KpiChart,AbstractHeaderlessChartCog);KpiChart._mountedChisels=AbstractHeaderlessChartCog._mountedChisels;KpiChart.loadCode=AbstractHeaderlessChartCog.loadCode;
KpiChart.prototype.getCogBodyBray=function(){var a=this.getStruct(),b=a.column,c=a.reduction;if(!b)return"";c=this.getInputBinder().getBinderColumnByName(b).getReductions()[c];b=this.toDisplayString(c,b);return"@div\n style text-align: center;\n@h3 "+(a.title||"")+"\n@h3 "+b};window.KpiChart=KpiChart;var ListChart=function(a){return AbstractChartCog.apply(this,arguments)||this};$jscomp.inherits(ListChart,AbstractChartCog);ListChart._mountedChisels=AbstractChartCog._mountedChisels;
ListChart.loadCode=AbstractChartCog.loadCode;ListChart.prototype.getHakon=function(){return".ListChart\n ol\n  height 100%\n  width 100%\n  overflow scroll\n  box-sizing border-box\n  margin 0"};ListChart.prototype.getCogBodyBray=function(){var a=this.getStruct(),b=a.link,c=a.label;return"@ol\n"+this.getCardsWithStructQuery().map(function(a){var d=Format.stripHtml(a.getCardValue(c));a=b?"href "+Format.stripHtml(a.getCardValue(b)):"";return" @li\n  @a "+d+"\n   "+a}).join("\n")};window.ListChart=ListChart;
var MarkdownChart=function(a){return AbstractHeaderlessChartCog.apply(this,arguments)||this};$jscomp.inherits(MarkdownChart,AbstractHeaderlessChartCog);MarkdownChart._mountedChisels=AbstractHeaderlessChartCog._mountedChisels;MarkdownChart.loadCode=AbstractHeaderlessChartCog.loadCode;MarkdownChart.prototype.getHakon=function(){return".MarkdownChart\n div\n  overflow scroll"};
MarkdownChart.prototype.getCogBodyBray=function(){var a=this.getPipishInput(),a=marked(a);return"@div\n bern"+TreeNotation.nest(a,2)};window.MarkdownChart=MarkdownChart;var MiniCog=function(a){return AbstractChartCog.apply(this,arguments)||this};$jscomp.inherits(MiniCog,AbstractChartCog);MiniCog._mountedChisels=AbstractChartCog._mountedChisels;MiniCog.loadCode=AbstractChartCog.loadCode;
MiniCog.prototype.getHakon=function(){var a=this.getTheme();return".MiniCog\n .CogBody\n  overflow scroll\n .miniMap\n  background "+a.backgroundColor+"\n  width 120px\n  height 90px\n  margin 6px\n  position relative\n  overflow hidden\n  display inline-block\n  .miniFooter\n   font-size 12px\n   position absolute\n   bottom 0\n   width 100%\n   height 15px\n   line-height 15px\n   text-align center\n  .miniPreview\n   position absolute\n   width 100%\n   height calc(100% - 15px)\n   top 0\n   overflow hidden\n   div\n    position absolute\n    background "+
a.linkColor};MiniCog.prototype._getMiniBray=function(a,b,c,d){var e=a.getCogDimensionMap(void 0===c?120:c,void 0===d?75:d);a=a.getProgramCogs().filter(function(a){return a.isVisible()}).map(function(a){return"@div\n style "+e.get(a).getScaledCss(.1)}).join("\n");return"@a\n class miniMap\n data-onClickCommand app openUrlInNewSpaceAndFocus\n value "+b+"\n href "+b+"\n @div\n  class miniPreview"+TreeNotation.nest(a,2)+"\n @div "+b+"\n  class miniFooter"};
MiniCog.prototype.getCogBodyBray=function(){var a=this;this.getStruct();var b=this.getApp(),c=this.getCardsWithStructQuery().map(function(c){var d=c.getCardValue("bytes");c=c.getCardValue("link");var f=new FlowProgram(void 0,void 0,b);f.setChildrenAndDiskAndUndoStack(d);return a._getMiniBray(f,c)}).join("\n");return"@div\n class MiniCog"+TreeNotation.nest(c,1)};window.MiniCog=MiniCog;var TableCog=function(a){return AbstractChartCog.apply(this,arguments)||this};$jscomp.inherits(TableCog,AbstractChartCog);
TableCog._mountedChisels=AbstractChartCog._mountedChisels;TableCog.loadCode=AbstractChartCog.loadCode;
TableCog.prototype.getHakon=function(){var a=this.getTheme();return".TableChisel\n overflow scroll\n font-size 12px\n box-sizing border-box\n width 100%\n height 100%\n "+a.enableTextSelect(1)+"\n top 34px\n tr\n  white-space nowrap\n  padding 0\n td:first-child,th:first-child\n  padding-left 5px\n td,th\n  padding-right 30px\n  overflow hidden\n  text-overflow ellipsis\n  max-width 250px\n td:hover,th:hover\n  overflow visible\n th\n  cursor pointer\n input,textarea\n  border 0\n  font-size 14px\n  box-sizing border-box\n  padding 0\n  font-family "+a.fonts};
TableCog.prototype._getTrBray=function(a,b){return this.getCardsWithStructQuery().map(function(b,d){var c=b.getPuid();b.getCardNumeric();var f=a.map(function(a){var c=a.getColumnName(),c=b.getCardValue(c),d="";void 0!==c&&(d=Format.stripHtml(c).toString());return a.isLink()?"@td\n @a\n  href "+d+"\n  bern"+TreeNotation.nest(d,3):"@td\n bern"+TreeNotation.nest(d,2)}).join("\n");return"@tr\n class tableRow\n data-onContextMenuCommand chisel openCardEditorByPuidCommand\n value "+c+"\n @td "+(d+1)+TreeNotation.nest(f,
1)}).join("\n")};TableCog.prototype.getContextMenuBray=function(){return"@a Delete all cards\n data-onClickCommand app deleteAllCardsInTargetCogCommand"};TableCog.prototype._getHeaderBray=function(a,b){return"@th\n"+a.map(function(a){return"@th\n style "+(b===a||b==="-"+a?"font-style: italic;":"")+"\n value "+a+"\n @span "+a+"\n  tabindex -1\n  data-onClickCommand chisel _changeCogOrderByCommand\n  value "+a}).join("\n")};
TableCog.prototype.getCogBodyBray=function(){var a=this.getStruct(),b=this.getInputBinder(),b="importance"===a.columnOrder?b.getColumnsByImportance():b.getColumnsArray();if(a.showColumns)var c=a.showColumns.split(" "),b=b.filter(function(a){return c.includes(a.getColumnName())});else if(a.hideColumns)var d=a.hideColumns.split(" "),b=b.filter(function(a){return!d.includes(a.getColumnName())});var b=b.slice(0,50),e=b.map(function(a){return a.getColumnName()}),e=this._getHeaderBray(e,a.orderBy),a=this._getTrBray(b,
a.pretty);return"@div\n class TableChisel\n @table\n  @thead\n   @tr\n    title Click to sort."+TreeNotation.nest(e,4)+"\n  @tbody "+TreeNotation.nest(a,2)};window.TableCog=TableCog;var ThreeDChart=function(a){return AbstractHeaderlessChartCog.apply(this,arguments)||this};$jscomp.inherits(ThreeDChart,AbstractHeaderlessChartCog);ThreeDChart._mountedChisels=AbstractHeaderlessChartCog._mountedChisels;ThreeDChart.loadCode=AbstractHeaderlessChartCog.loadCode;ThreeDChart.prototype.getCogBodyBray=function(){return"@div\n class visjs"};
ThreeDChart.prototype.chiselDidMount=function(){AbstractHeaderlessChartCog.prototype.chiselDidMount.call(this);this.chiselDidUpdate()};ThreeDChart.prototype.chiselDidUpdate=function(){AbstractHeaderlessChartCog.prototype.chiselDidUpdate.call(this);if(!this.isNode())try{this._tryVis()}catch(a){console.error(a)}};
ThreeDChart.prototype._tryVis=function(){var a=this.getStruct(),b=this.getPipishInput(),c=this.getApp(),d=c.getLanguageBestGuess(b),b=c.generateProgram(b,d),b=this._treeTo3D(b),e=new vis.DataSet;b.forEach(function(a){return e.add(a)});a=a.dotSize;b=this.getCogDimension();a={width:b.width+"px",height:b.height-80+"px",style:"dot-color",showPerspective:!1,showLegend:!1,showShadow:!1,keepAspectRatio:!0,xStep:1,yStep:1,zStep:1,zMax:5,showGrid:!0,showZAxis:!1,showXAxis:!1,showYAxis:!1,dotSizeRatio:a,dotSizeMinFraction:1,
cameraPosition:{horizontal:.1,vertical:1.5,distance:4},verticalRatio:1,tooltip:function(a){return a.data.line}};b=this.getStump().findStumpByChild("class visjs").getShadow().getShadowElement();new vis.Graph3d(b,e,a)};
ThreeDChart.prototype._treeTo3D=function(a){var b={},c=new TreeNotation(a.getProgramSlotString()),d=Util.makeSemiRandomFn(),e=[];a.getTopDownArray().forEach(function(f,g){var h=f.getPoint(a);g=f.getPathVector(a);var l=c.nodeAt(g);f.getWords().forEach(function(a,c){var f=l.getWord(c);b[f]||(b[f]=d());c=h.x+c;e.push({x:c,y:-h.y,z:0,line:f+" | "+a+" | x "+c+" y "+h.y+" z 0",style:b[f]})})});return e};window.ThreeDChart=ThreeDChart;
var TreeOutline=function(a){return AbstractHeaderlessChartCog.apply(this,arguments)||this};$jscomp.inherits(TreeOutline,AbstractHeaderlessChartCog);TreeOutline._mountedChisels=AbstractHeaderlessChartCog._mountedChisels;TreeOutline.loadCode=AbstractHeaderlessChartCog.loadCode;
TreeOutline.prototype.getCogBodyBray=function(){var a=new TreeNotation(this.getPipishInput()),a=this.getStruct().dots?a.toOutline(function(a){return"o"+a.getLine().split(" ").map(function(a){return"\u00ba"}).join("")}):a.toOutline();return"@pre\n style overflow: scroll; width: 100%; height: 100%; margin: 0; box-sizing: border-box;\n bern"+TreeNotation.nest(a,2)};window.TreeOutline=TreeOutline;var WordCloudChart=function(a){return AbstractHeaderlessChartCog.apply(this,arguments)||this};
$jscomp.inherits(WordCloudChart,AbstractHeaderlessChartCog);WordCloudChart._mountedChisels=AbstractHeaderlessChartCog._mountedChisels;WordCloudChart.loadCode=AbstractHeaderlessChartCog.loadCode;WordCloudChart.prototype.getCogBodyBray=function(){return"@div\n class wordCloud\n style width: 100%; height: 100%;"};WordCloudChart.prototype._getWords=function(){return this.getRequiredTable(["name","count"])};WordCloudChart.prototype.chiselDidUpdate=function(){this._draw()};
WordCloudChart.prototype.chiselDidMount=function(){this._draw()};WordCloudChart.prototype._draw=function(){var a=this.getStruct(),b=this._getWords();b.length&&(b.shift(),b={list:b.map(function(a){return[a[0],a[1]]}),shuffle:!1,backgroundColor:"transparent",random:Util.makeSemiRandomFn(),wait:0},Object.assign(b,a),a=this.getStump().findStumpByChild("class wordCloud").getShadow().getShadowElement(),WordCloud(a,b))};window.WordCloudChart=WordCloudChart;
var YouTubeCog=function(a){return AbstractHeaderlessChartCog.apply(this,arguments)||this};$jscomp.inherits(YouTubeCog,AbstractHeaderlessChartCog);YouTubeCog._mountedChisels=AbstractHeaderlessChartCog._mountedChisels;YouTubeCog.loadCode=AbstractHeaderlessChartCog.loadCode;YouTubeCog.prototype.getCogBodyBray=function(){var a=this.getCogDimension().width,b=this.getStruct().video;return"@iframe\n width "+a+"\n height "+a+"\n src https://www.youtube.com/embed/"+b+"\n frameborder 0\n allowfullscreen"};
window.YouTubeCog=YouTubeCog;var MockGoogle=function(){this.visualization={}},AbstractGoogleBase=function(a){return AbstractHeaderlessChartCog.apply(this,arguments)||this};$jscomp.inherits(AbstractGoogleBase,AbstractHeaderlessChartCog);AbstractGoogleBase._mountedChisels=AbstractHeaderlessChartCog._mountedChisels;AbstractGoogleBase.loadCode=AbstractHeaderlessChartCog.loadCode;
AbstractGoogleBase.loadPackages=function(a){return"undefined"===typeof google?Promise.resolve():new Promise(function(b,c){return google.charts.load("current",{packages:a,callback:function(){return b()}})})};AbstractGoogleBase.prototype.getGoogle=function(){this._google||(this._google=this.isNode()?new MockGoogle:google);return this._google};AbstractGoogleBase.prototype.getCogBodyBray=function(){return"@div\n class goog"};AbstractGoogleBase.prototype.getHakon=function(){return".goog\n .CogPage\n  overflow scroll"};
AbstractGoogleBase.prototype._getGoogElement=function(){return this.getStump().findStumpByChild("class goog").getShadow().getShadowElement()};AbstractGoogleBase.prototype._getGoogleOptions=function(){var a={},b=this.getStruct();Object.assign(a,b);b=this.getCogBodyDimension();a.width=b.width;a.height=b.height;a.backgroundColor=this.getTheme().cogBackgroundColor;return a};
AbstractGoogleBase.prototype._draw=function(){if(!this.getInputBinder().getCardCount())return"";if(!this.isNode()){var a=this._getChartClass(),b=this._getGoogElement(),a=new a(b),b=this._getGoogleOptions(),c=this._getGoogleData();a.draw(c,b)}};AbstractGoogleBase.prototype.chiselDidUpdate=function(){this._draw()};AbstractGoogleBase.prototype.chiselDidMount=function(){this._draw()};AbstractGoogleBase.prototype.getLabelValue=function(){return this.getSomeData(["label","value"])};
AbstractGoogleBase.prototype.getSomeData=function(a){a=this.getRequiredTableWithDates(a);return this.getGoogle().visualization.arrayToDataTable(a)};AbstractGoogleBase.prototype.getGooglePivotTable=function(a,b,c,d){var e=this.getStruct(),f=Object.keys(b.getMap()),g=[];Object.keys(c.getMap()).forEach(function(b){var c=[b];f.forEach(function(b){var d=lodash.find(a,function(a){return a[e.series]==b&&a[e.card]==a});c.push(d?d[e.cell]:0)});g.push(c)});f.unshift(e.series);g.unshift(f);return g};
window.AbstractGoogleBase=AbstractGoogleBase;var AbstractGoogleCore=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(AbstractGoogleCore,AbstractGoogleBase);AbstractGoogleCore._mountedChisels=AbstractGoogleBase._mountedChisels;AbstractGoogleCore.loadPackages=AbstractGoogleBase.loadPackages;AbstractGoogleCore.loadCode=function(){return AbstractGoogleBase.loadPackages(["corechart"])};AbstractGoogleCore.prototype._getGoogleData=function(){return this.getLabelValue()};
AbstractGoogleCore.prototype._getGoogleOptions=function(){var a=AbstractGoogleBase.prototype._getGoogleOptions.call(this),b=this.getStruct();a.legend={};a.legend.position=b.legendPosition;return a};AbstractGoogleCore.prototype._getChartClass=function(){return this.getGoogle().visualization[this.getStruct().googleClassName]};window.AbstractGoogleCore=AbstractGoogleCore;var GoogleArea=function(a){return AbstractGoogleCore.apply(this,arguments)||this};$jscomp.inherits(GoogleArea,AbstractGoogleCore);
GoogleArea._mountedChisels=AbstractGoogleCore._mountedChisels;GoogleArea.loadPackages=AbstractGoogleCore.loadPackages;GoogleArea.loadCode=AbstractGoogleCore.loadCode;GoogleArea.prototype._getChartClass=function(){return this.getGoogle().visualization.AreaChart};GoogleArea.prototype._getGoogleData=function(){return this.getSomeData(["x","y"])};window.GoogleArea=GoogleArea;var GoogleBar=function(a){return AbstractGoogleCore.apply(this,arguments)||this};$jscomp.inherits(GoogleBar,AbstractGoogleCore);
GoogleBar._mountedChisels=AbstractGoogleCore._mountedChisels;GoogleBar.loadPackages=AbstractGoogleCore.loadPackages;GoogleBar.loadCode=AbstractGoogleCore.loadCode;GoogleBar.prototype._getChartClass=function(){return this.getGoogle().visualization.BarChart};GoogleBar.prototype._getGoogleData=function(){return this.getSomeData(["x","y"])};window.GoogleBar=GoogleBar;var GoogleColumn=function(a){return AbstractGoogleCore.apply(this,arguments)||this};$jscomp.inherits(GoogleColumn,AbstractGoogleCore);
GoogleColumn._mountedChisels=AbstractGoogleCore._mountedChisels;GoogleColumn.loadPackages=AbstractGoogleCore.loadPackages;GoogleColumn.loadCode=AbstractGoogleCore.loadCode;GoogleColumn.prototype._getChartClass=function(){return this.getGoogle().visualization.ColumnChart};
GoogleColumn.prototype._getGoogleData=function(){var a=this.getStruct(),b=this.getInputBinder(),c=b.getBinderColumnByName(a.series),d=b.getBinderColumnByName(a.card),a=b.getBinderColumnByName(a.cell),b=b.getCards().map(function(a){return a.getCardNumeric()});return this.getGoogle().visualization.arrayToDataTable(this.getGooglePivotTable(b,c,d,a))};window.GoogleColumn=GoogleColumn;var GoogleGauge=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(GoogleGauge,AbstractGoogleBase);
GoogleGauge._mountedChisels=AbstractGoogleBase._mountedChisels;GoogleGauge.loadPackages=AbstractGoogleBase.loadPackages;GoogleGauge.loadCode=function(){return AbstractGoogleBase.loadPackages(["gauge"])};GoogleGauge.prototype._getChartClass=function(){return this.getGoogle().visualization.Gauge};GoogleGauge.prototype._getGoogleData=function(){return this.getLabelValue()};window.GoogleGauge=GoogleGauge;var GoogleGeo=function(a){return AbstractGoogleCore.apply(this,arguments)||this};
$jscomp.inherits(GoogleGeo,AbstractGoogleCore);GoogleGeo._mountedChisels=AbstractGoogleCore._mountedChisels;GoogleGeo.loadPackages=AbstractGoogleCore.loadPackages;GoogleGeo.loadCode=function(){return AbstractGoogleCore.loadPackages(["geochart"])};GoogleGeo.prototype._getChartClass=function(){return this.getGoogle().visualization.GeoChart};window.GoogleGeo=GoogleGeo;var GoogleLine=function(a){return AbstractGoogleCore.apply(this,arguments)||this};$jscomp.inherits(GoogleLine,AbstractGoogleCore);
GoogleLine._mountedChisels=AbstractGoogleCore._mountedChisels;GoogleLine.loadPackages=AbstractGoogleCore.loadPackages;GoogleLine.loadCode=AbstractGoogleCore.loadCode;GoogleLine.prototype._getChartClass=function(){return this.getGoogle().visualization.LineChart};GoogleLine.prototype._getGoogleData=function(){return this.getSomeData(["x","y"])};window.GoogleLine=GoogleLine;var GoogleOrg=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(GoogleOrg,AbstractGoogleBase);
GoogleOrg._mountedChisels=AbstractGoogleBase._mountedChisels;GoogleOrg.loadPackages=AbstractGoogleBase.loadPackages;GoogleOrg.loadCode=function(){return AbstractGoogleBase.loadPackages(["orgchart"])};GoogleOrg.prototype._getChartClass=function(){return this.getGoogle().visualization.OrgChart};
GoogleOrg.prototype._getGoogleData=function(){var a=this.getInputBinder().getCards()[0];if(!a)return this.getGoogle().visualization.arrayToDataTable([]);a=(new TreeNotation(a.getCardSource())).getTopDownArray().map(function(a){return[{v:a.getPathVector().join(" "),f:a.getLine()},a.getParent().getPathVector().join(" ")]});return this.getGoogle().visualization.arrayToDataTable(a)};window.GoogleOrg=GoogleOrg;var GoogleScatter=function(a){return AbstractGoogleCore.apply(this,arguments)||this};
$jscomp.inherits(GoogleScatter,AbstractGoogleCore);GoogleScatter._mountedChisels=AbstractGoogleCore._mountedChisels;GoogleScatter.loadPackages=AbstractGoogleCore.loadPackages;GoogleScatter.loadCode=AbstractGoogleCore.loadCode;GoogleScatter.prototype._getChartClass=function(){return this.getGoogle().visualization.ScatterChart};
GoogleScatter.prototype._getGoogleOptions=function(){var a=AbstractGoogleCore.prototype._getGoogleOptions.call(this),b=this.getStruct();a.hAxis={};a.hAxis.maxValue=b.hMax;a.hAxis.minValue=b.hMin;a.vAxis={};a.vAxis.maxValue=b.vMax;a.vAxis.minValue=b.vMin;return a};GoogleScatter.prototype._getGoogleData=function(){return this.getSomeData(["x","y"])};window.GoogleScatter=GoogleScatter;var GoogleSquare=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(GoogleSquare,AbstractGoogleBase);
GoogleSquare._mountedChisels=AbstractGoogleBase._mountedChisels;GoogleSquare.loadPackages=AbstractGoogleBase.loadPackages;GoogleSquare.loadCode=function(){return AbstractGoogleBase.loadPackages(["treemap"])};
GoogleSquare.prototype._getGoogleOptions=function(){var a=this.getTheme(),b=AbstractGoogleBase.prototype._getGoogleOptions.call(this);b.highlightOnMouseOver=!1;b.headerHeight=0;b.minColor=tinycolor(a.selectionColor).lighten(40).toHexString();b.midColor=tinycolor(a.selectionColor).toHexString();b.maxColor=tinycolor(a.selectionColor).darken(20).toHexString();return b};
GoogleSquare.prototype._getGoogleData=function(){var a=this.getRequiredTable(["label","value"]).map(function(a){return[a[0],"All",a[1]]}),b=a.shift();a.unshift(["All",null,0]);a.unshift(b);return this.getGoogle().visualization.arrayToDataTable(a)};GoogleSquare.prototype._getChartClass=function(){return this.getGoogle().visualization.TreeMap};window.GoogleSquare=GoogleSquare;var GoogleTimeline=function(a){return AbstractGoogleBase.apply(this,arguments)||this};$jscomp.inherits(GoogleTimeline,AbstractGoogleBase);
GoogleTimeline._mountedChisels=AbstractGoogleBase._mountedChisels;GoogleTimeline.loadPackages=AbstractGoogleBase.loadPackages;GoogleTimeline.loadCode=function(){return AbstractGoogleBase.loadPackages(["timeline"])};GoogleTimeline.prototype._getChartClass=function(){return this.getGoogle().visualization.Timeline};
GoogleTimeline.prototype._getGoogleData=function(){var a=(new this.getGoogle).visualization.DataTable();a.addColumn({type:"string",id:"Title"});a.addColumn({type:"date",id:"Start"});a.addColumn({type:"date",id:"End"});var b=this._getTimelineCards();a.addCards(b);return a};
GoogleTimeline.prototype._getTimelineCards=function(){var a=this.getInputBinder().getCards(),b=this.getStruct().label;return a.map(function(a){var c=a.getCardNumeric();a=a.getCardValue(b);var e=moment(c.start).toDate(),c=moment(c.end).toDate();return[a,e,c]})};window.GoogleTimeline=GoogleTimeline;var AbstractClayCog=function(a){return AbstractFlowCog.apply(this,arguments)||this};$jscomp.inherits(AbstractClayCog,AbstractFlowCog);AbstractClayCog._mountedChisels=AbstractFlowCog._mountedChisels;
AbstractClayCog.loadCode=AbstractFlowCog.loadCode;window.AbstractClayCog=AbstractClayCog;var PickerCog=function(a){return AbstractClayCog.apply(this,arguments)||this};$jscomp.inherits(PickerCog,AbstractClayCog);PickerCog._mountedChisels=AbstractClayCog._mountedChisels;PickerCog.loadCode=AbstractClayCog.loadCode;PickerCog.prototype._getPath=function(){return this.getStruct().path};PickerCog.prototype._getValue=function(){return this.getProgram().findBeam(this._getPath())||""};
PickerCog.prototype._saveValueCommand=function(a){this.getProgram().touchNode(this._getPath()).setBeam(a);this.getProgram().autosaveAndRender()};PickerCog.prototype.getHakon=function(){return".PickerCog\n font-size 12px\n height 100%\n width 100%\n overflow scroll\n padding 3px\n box-sizing border-box\n a\n  display block"};
PickerCog.prototype.getCogBodyBray=function(){var a=this.getStruct();this._getValue();var b=a.column,a=this.getInputBinder().getCards(),c=this.getLimit();return a.map(function(a,e){if(e>=c)return"";a=a.getCardNumeric()[b];return"@a "+a+"\n data-onClickCommand chisel _saveValueCommand\n value "+a}).join("\n")};window.PickerCog=PickerCog;var AbstractConnectorCog=function(a){return AbstractProviderCog.apply(this,arguments)||this};$jscomp.inherits(AbstractConnectorCog,AbstractProviderCog);
AbstractConnectorCog._mountedChisels=AbstractProviderCog._mountedChisels;AbstractConnectorCog.loadCode=AbstractProviderCog.loadCode;window.AbstractConnectorCog=AbstractConnectorCog;var AbstractRunTimeProvider=function(a){return AbstractProviderCog.apply(this,arguments)||this};$jscomp.inherits(AbstractRunTimeProvider,AbstractProviderCog);AbstractRunTimeProvider._mountedChisels=AbstractProviderCog._mountedChisels;AbstractRunTimeProvider.loadCode=AbstractProviderCog.loadCode;
AbstractRunTimeProvider.prototype.fetchCards=function(){return Promise.resolve(this.getApp()[this.getStruct().method]())};window.AbstractRunTimeProvider=AbstractRunTimeProvider;var AbstractSourceCog=function(a){return AbstractProviderCog.apply(this,arguments)||this};$jscomp.inherits(AbstractSourceCog,AbstractProviderCog);AbstractSourceCog._mountedChisels=AbstractProviderCog._mountedChisels;AbstractSourceCog.loadCode=AbstractProviderCog.loadCode;window.AbstractSourceCog=AbstractSourceCog;
var AbstractUrlProvider=function(a){return AbstractConnectorCog.apply(this,arguments)||this};$jscomp.inherits(AbstractUrlProvider,AbstractConnectorCog);AbstractUrlProvider._mountedChisels=AbstractConnectorCog._mountedChisels;AbstractUrlProvider.loadCode=AbstractConnectorCog.loadCode;AbstractUrlProvider.prototype.getUrl=function(){return this.getStruct().url||""};AbstractUrlProvider.prototype._getFormat=function(a){a=Util.getFileExtension(a);if((new CardParser).getEncodingNames()[a])return a};
AbstractUrlProvider.prototype.fetchCards=function(){var a=this,b=this.getStruct(),c=this.getUrl();if(!c)return Promise.resolve([]);c=encodeURI(c);c.match(/\.json/);var d=b.format||this._getFormat(c);return this.getApp().getWillowProgram().get(c).then(function(a){b.extract&&(a=a[b.extract]);var c=new CardParser;return"string"===typeof a?c.parse(a,d):c.parseFromObject(a,d)}).catch(function(b){a.logMessage("Fetch error");return[]})};window.AbstractUrlProvider=AbstractUrlProvider;
var DataCogCard=function(a){ObjectBackedCard.apply(this,arguments)};$jscomp.inherits(DataCogCard,ObjectBackedCard);DataCogCard._uniqueId=ObjectBackedCard._uniqueId;var DataCog=function(a){return AbstractProviderCog.apply(this,arguments)||this};$jscomp.inherits(DataCog,AbstractProviderCog);DataCog._mountedChisels=AbstractProviderCog._mountedChisels;DataCog.loadCode=AbstractProviderCog.loadCode;DataCog.prototype.getDataSlang=function(){var a=this.getNode("slang");return a?a.childrenToString():""};
DataCog.prototype.getCogBodyBray=function(){var a=Format.stripHtml(this.getDataSlang());return"@textarea\n data-onChangeCommand chisel _saveDataCommand\n class CogTextArea savable\n bern"+TreeNotation.nest(a,2)};DataCog.prototype.isVisible=function(){return"false"!==this.findBeam("visible")};DataCog.prototype._saveDataCommand=function(a){this.touchNode("slang").setChildren(a);this.autosaveCog();return this.executeLoadDataAndRender()};DataCog.prototype.getCardClass=function(){return DataCogCard};
DataCog.prototype.fetchCards=function(){return Promise.resolve((new CardParser).parse(this.getDataSlang(),this.getStruct().format))};DataCog.prototype._getFormatted=function(a,b){switch(b){case "tree":return(new TreeNotation(a)).toString();case "json":return(new TreeNotation(a)).toJson();default:return(new TreeNotation(a)).toCsv()}};
DataCog.prototype.createCards=function(a){var b=this.getStruct().format,c=this.getDataSlang(),c=(new CardParser).parse(c,b);a=lodash.concat(c,a);b=this._getFormatted(a,b);return this._saveDataCommand(b)};DataCog.prototype.updateCards=function(a){return this.autosaveCog()};DataCog.prototype.deleteCards=function(a){var b=this.getOutputBinder().getCards();lodash.remove(b,function(b){return a.indexOf(b)});b=this._getFormatted(b.map(function(a){return a.getCardSource()}),this.getStruct().format);return this._saveDataCommand(b)};
window.DataCog=DataCog;var OhayoProgramCard=function(a){ObjectBackedCard.apply(this,arguments)};$jscomp.inherits(OhayoProgramCard,ObjectBackedCard);OhayoProgramCard._uniqueId=ObjectBackedCard._uniqueId;OhayoProgramCard.prototype.destroyCardCommand=function(){return this.getCardApp().deleteFileCommand(this.getCardValue("link"))};OhayoProgramCard.prototype.updateCardCommand=function(){};var ProgramsCog=function(a){return AbstractProviderCog.apply(this,arguments)||this};
$jscomp.inherits(ProgramsCog,AbstractProviderCog);ProgramsCog._mountedChisels=AbstractProviderCog._mountedChisels;ProgramsCog.loadCode=AbstractProviderCog.loadCode;ProgramsCog.prototype.getCardClass=function(){return OhayoProgramCard};ProgramsCog.prototype.fetchCards=function(){return Promise.resolve(this.getApp().getCaddies().map(function(a){return a.toCaddyObject()}))};window.ProgramsCog=ProgramsCog;var QueryCog=function(a){return AbstractUrlProvider.apply(this,arguments)||this};
$jscomp.inherits(QueryCog,AbstractUrlProvider);QueryCog._mountedChisels=AbstractUrlProvider._mountedChisels;QueryCog.loadCode=AbstractUrlProvider.loadCode;QueryCog.prototype.getUrl=function(){return"/sql?q="+this.getStruct().query};QueryCog.prototype.getCogBodyBray=function(){return"@textarea\n data-onChangeCommand chisel changeTupleCommand\n name query\n class CogTextArea\n bern"+TreeNotation.nest(Format.stripHtml(this.getStruct().query))};window.QueryCog=QueryCog;
var RedditCog=function(a){return AbstractUrlProvider.apply(this,arguments)||this};$jscomp.inherits(RedditCog,AbstractUrlProvider);RedditCog._mountedChisels=AbstractUrlProvider._mountedChisels;RedditCog.loadCode=AbstractUrlProvider.loadCode;RedditCog.prototype.getUrl=function(){var a=this.getStruct();return"https://www.reddit.com/"+((a.subreddit?"/r/"+a.subreddit+"/top/.json?sort=top&t=all":"")||a.get)};
RedditCog.prototype.fetchCards=function(){return AbstractUrlProvider.prototype.fetchCards.call(this).then(function(a){return a.length?a[0].data.children.map(function(a){return a.data}):[]})};window.RedditCog=RedditCog;var StoreCog=function(a){return DataCog.apply(this,arguments)||this};$jscomp.inherits(StoreCog,DataCog);StoreCog._mountedChisels=DataCog._mountedChisels;StoreCog.loadCode=DataCog.loadCode;
StoreCog.prototype.getDataSlang=function(){return this.getApp().getStore().get(this._getKey())||""};StoreCog.prototype._getKey=function(){return this.getStruct().key||this.getProgram().getUrl()};StoreCog.prototype._saveDataCommand=function(a){this.getApp().getStore().set(this._getKey(),a)};window.StoreCog=StoreCog;var TextCog=function(a){return AbstractProviderCog.apply(this,arguments)||this};$jscomp.inherits(TextCog,AbstractProviderCog);TextCog._mountedChisels=AbstractProviderCog._mountedChisels;
TextCog.loadCode=AbstractProviderCog.loadCode;TextCog.prototype.fetchCards=function(){return Promise.resolve([{text:this.getStruct().slang}])};TextCog.prototype.isVisible=function(){return!0};window.TextCog=TextCog;var TopCog=function(a){return AbstractUrlProvider.apply(this,arguments)||this};$jscomp.inherits(TopCog,AbstractUrlProvider);TopCog._mountedChisels=AbstractUrlProvider._mountedChisels;TopCog.loadCode=AbstractUrlProvider.loadCode;TopCog.prototype.getUrl=function(){this.getStruct();return"/samples/presidents.csv"};
window.TopCog=TopCog;var AbstractExtendCog=function(a){return AbstractTransformerCog.apply(this,arguments)||this};$jscomp.inherits(AbstractExtendCog,AbstractTransformerCog);AbstractExtendCog._mountedChisels=AbstractTransformerCog._mountedChisels;AbstractExtendCog.loadCode=AbstractTransformerCog.loadCode;AbstractExtendCog.prototype.getCogClassColumns=function(){return this.getStructColumns().filter(function(a){return!!a.source})};
AbstractExtendCog.prototype._convertValueToNumeric=function(a,b,c){if(void 0===a||!ColumnTypes[b]||""===a)return"";c=this._getConversionFn(c,b,a);return null!==c?c:ColumnTypes[b].fromStringToNumeric(a)};AbstractExtendCog.prototype._getConversionFn=function(a,b,c){var d=ColumnTypes[a];b=ColumnTypes[b];return d&&b?b.from&&b.from[a]?b.from[a](c):b.fromMomentToNumeric&&d.fromStringToMoment?b.fromMomentToNumeric(d.fromStringToMoment(c)):null:null};
AbstractExtendCog.prototype.transformCards=function(){var a=this,b=this.getCogClassColumns(),c=this.getInputBinder().getColumnsMap();return this.getInputBinder().getCards().map(function(d){var e=d.getCardSourceAsObject(),f={};Object.assign(f,e);b.forEach(function(b){var d=e[b.source],g=c[b.source].getColumnTypeName();f[b.name]=a._convertValueToNumeric(d,b.type,g)});return f})};window.AbstractExtendCog=AbstractExtendCog;
var ConvertCog=function(a){return AbstractTransformerCog.apply(this,arguments)||this};$jscomp.inherits(ConvertCog,AbstractTransformerCog);ConvertCog._mountedChisels=AbstractTransformerCog._mountedChisels;ConvertCog.loadCode=AbstractTransformerCog.loadCode;ConvertCog.prototype.transformCards=function(){var a=this.getPipishInput();return[{text:(new TreeNotation(a)).toJson()}]};window.ConvertCog=ConvertCog;var DateFilter=function(a){return AbstractTransformerCog.apply(this,arguments)||this};
$jscomp.inherits(DateFilter,AbstractTransformerCog);DateFilter._mountedChisels=AbstractTransformerCog._mountedChisels;DateFilter.loadCode=AbstractTransformerCog.loadCode;DateFilter.prototype.transformCards=function(){var a=this.getInputBinder().getNumericValues(),b=this.getStruct();if(!b.column||!b.days)return a;var c=getTime(b.days);return a.filter(function(a){return a[b.column]>=c})};DateFilter.prototype.getTime=function(a){return Date.now()-864E5*parseFloat(a)};window.DateFilter=DateFilter;
var EvalCog=function(a){return AbstractTransformerCog.apply(this,arguments)||this};$jscomp.inherits(EvalCog,AbstractTransformerCog);EvalCog._mountedChisels=AbstractTransformerCog._mountedChisels;EvalCog.loadCode=AbstractTransformerCog.loadCode;EvalCog.prototype.transformCards=function(){var a=this.getNode("javascript"),a=a&&a.childrenToString();try{var b=a&&eval(a)}catch(c){console.error(c)}a=this.getInputBinder().getCardSources();return b?b(a):a};window.EvalCog=EvalCog;
var DateCog=function(a){return AbstractExtendCog.apply(this,arguments)||this};$jscomp.inherits(DateCog,AbstractExtendCog);DateCog._mountedChisels=AbstractExtendCog._mountedChisels;DateCog.loadCode=AbstractExtendCog.loadCode;DateCog.prototype.getCogClassColumns=function(){var a=this.getStruct().column;return a?["day","month","year"].map(function(b){return{source:a,name:b,type:b}}):[]};window.DateCog=DateCog;var ExtractCog=function(a){return AbstractTransformerCog.apply(this,arguments)||this};
$jscomp.inherits(ExtractCog,AbstractTransformerCog);ExtractCog._mountedChisels=AbstractTransformerCog._mountedChisels;ExtractCog.loadCode=AbstractTransformerCog.loadCode;ExtractCog.prototype.transformCards=function(){var a=this.getInputBinder().getFirstCard().getFirstCell(),b={};ExtractCog._extractTablesFromObject(b,a);a=Object.keys(b);return b[a[0]]};ExtractCog._getColumnNamesFromObj=function(a){a=Object.keys(a);a.sort();return a};
ExtractCog._extractTablesFromObject=function(a,b){var c=this;if(!(b instanceof Array)){var d=this._getColumnNamesFromObj(b).join(" ");a[d]||(a[d]=0);a[d]++}Object.keys(b).forEach(function(d){d=b[d];"object"===typeof d&&c._extractTablesFromObject(a,d)})};window.ExtractCog=ExtractCog;var FilterCog=function(a){return AbstractTransformerCog.apply(this,arguments)||this};$jscomp.inherits(FilterCog,AbstractTransformerCog);FilterCog._mountedChisels=AbstractTransformerCog._mountedChisels;
FilterCog.loadCode=AbstractTransformerCog.loadCode;FilterCog.prototype.transformCards=function(){var a=this.getStruct().filter,b=this.getInputBinder().getCards();if(!a)return b;var c=this._generateSearchFn(a);return b.filter(function(a){return c(a.cardToString())})};FilterCog.prototype.getCogClassColumns=function(){return this.getInputBinder().getColumnsArrayOfObjects()};FilterCog.prototype.getCogBodyBray=function(){return"@textarea "+(this.getStruct().filter||"")+"\n placeholder Enter a string to filter by.\n name filter\n data-onChangeCommand chisel changeTupleCommand\n class CogTextArea"};
FilterCog.prototype._generateSearchFn=function(a){var b=[];a.split(";").forEach(function(a){var c="!"===a[0];c&&(a=a.substr(1));try{var e=new RegExp(a,"i");c?b.push(function(a){return!a.match(e)}):b.push(function(a){return!!a.match(e)})}catch(f){c?b.push(function(b){return!b.includes(a)}):b.push(function(b){return b.includes(a)})}});return function(a){var c=!0;b.forEach(function(b){b(a)||(c=!1)});return c}};window.FilterCog=FilterCog;
var GroupCog=function(a){return AbstractTransformerCog.apply(this,arguments)||this};$jscomp.inherits(GroupCog,AbstractTransformerCog);GroupCog._mountedChisels=AbstractTransformerCog._mountedChisels;GroupCog.loadCode=AbstractTransformerCog.loadCode;
GroupCog.prototype._makePivotResult=function(){var a=this.getDefinition().computeStruct(this),b=a.advanced||a.by;if(!b)return{cards:[],columns:[]};var c=this.getInputBinder(),a=c.getColumnsArrayOfObjects(),d={};a.forEach(function(a){return d[a.name]=!0});b=b.split(/ /g).filter(function(a){return d[a]});c=c.getNumericValues();return(new PivotTable(c,a,this.getStructColumns())).getNewCards(b)};GroupCog.prototype.transformCards=function(){return this._getPivotResult().cards};
GroupCog.prototype._getPivotResult=function(){var a=this.getInputBinder().getCTime();this._pivotCTime!==a&&delete this._result;this._result||(this._result=this._makePivotResult(),this._pivotCTime=a);return this._result};GroupCog.prototype.getCogClassColumns=function(){return this._getPivotResult().columns};window.GroupCog=GroupCog;var InterpolateCog=function(a){return AbstractTransformerCog.apply(this,arguments)||this};$jscomp.inherits(InterpolateCog,AbstractTransformerCog);
InterpolateCog._mountedChisels=AbstractTransformerCog._mountedChisels;InterpolateCog.loadCode=AbstractTransformerCog.loadCode;InterpolateCog.prototype._interpolator=function(a,b){a=parseInt(a);b=parseInt(b);for(var c=[];a<=b&&!(c.push(a),a+=26784E5,1E3<c.length););return c};
InterpolateCog.prototype.transformCards=function(){var a=this.getInputBinder(),b=a.getCardSources();this.getOutputBinder();var c=this.getStruct().column;if(!c)return b;var d=a.getBinderColumnByName(c),a=d.getMin(),d=d.getMax(),a=this._interpolator(a,d).map(function(a){var b={};b[c]=a;b.count=0;return b});return Util.joinArraysOn(c,[b,a])};window.InterpolateCog=InterpolateCog;var JoinCog=function(a){return AbstractTransformerCog.apply(this,arguments)||this};$jscomp.inherits(JoinCog,AbstractTransformerCog);
JoinCog._mountedChisels=AbstractTransformerCog._mountedChisels;JoinCog.loadCode=AbstractTransformerCog.loadCode;
JoinCog.prototype.transformCards=function(){var a=this.getParent();if(a.isProgram())return[];var b=a.getParent();if(b.isProgram())return a.getOutputBinder().getCardSources();var c=[a,b],a=c.map(function(a){return a.getOutputBinder().getCardSources()}),b=this.getStruct().on;if(!b)return lodash.flatten(a);c=c.map(function(a){return a.getOutputBinder().getColumnNames()});return Util.joinArraysOn(b,a,c)};window.JoinCog=JoinCog;
var ParseCog=function(a){return AbstractTransformerCog.apply(this,arguments)||this};$jscomp.inherits(ParseCog,AbstractTransformerCog);ParseCog._mountedChisels=AbstractTransformerCog._mountedChisels;ParseCog.loadCode=AbstractTransformerCog.loadCode;ParseCog.prototype.transformCards=function(){var a=this.getStruct(),b=this.getInputBinder().getCardSources(),c=a.format,d=a.column,e=new CardParser;return lodash.flatten(b.map(function(a){return e.parse(a[d],c)}))};window.ParseCog=ParseCog;
var ReplacerCog=function(a){return AbstractTransformerCog.apply(this,arguments)||this};$jscomp.inherits(ReplacerCog,AbstractTransformerCog);ReplacerCog._mountedChisels=AbstractTransformerCog._mountedChisels;ReplacerCog.loadCode=AbstractTransformerCog.loadCode;ReplacerCog.prototype.transformCards=function(){var a=this.getPipishInput(),b=this.getStruct(),c=(new TreeNotation(b.map.trim())).toObject(),d=a;Object.keys(c).forEach(function(a){d=d.replace(new RegExp(a,"g"),c[a])});return[{text:d}]};
window.ReplacerCog=ReplacerCog;var SlotsCog=function(a){return AbstractTransformerCog.apply(this,arguments)||this};$jscomp.inherits(SlotsCog,AbstractTransformerCog);SlotsCog._mountedChisels=AbstractTransformerCog._mountedChisels;SlotsCog.loadCode=AbstractTransformerCog.loadCode;SlotsCog.prototype.transformCards=function(){var a=this.getPipishInput(),b=this.getApp(),c=b.getLanguageBestGuess(a);return[{text:b.generateProgram(a,c).getProgramSlotString()}]};window.SlotsCog=SlotsCog;
var StatsCog=function(a){return AbstractTransformerCog.apply(this,arguments)||this};$jscomp.inherits(StatsCog,AbstractTransformerCog);StatsCog._mountedChisels=AbstractTransformerCog._mountedChisels;StatsCog.loadCode=AbstractTransformerCog.loadCode;StatsCog.prototype.transformCards=function(){var a=this.getInputBinder(),b=a.getColumnsMap();return a.getColumnNames().map(function(a){var c=b[a];a={Column:a,Type:c.getColumnTypeName()};Object.assign(a,c.getReductions());return a})};window.StatsCog=StatsCog;
var WordCount=function(a){return AbstractTransformerCog.apply(this,arguments)||this};$jscomp.inherits(WordCount,AbstractTransformerCog);WordCount._mountedChisels=AbstractTransformerCog._mountedChisels;WordCount.loadCode=AbstractTransformerCog.loadCode;WordCount.prototype.transformCards=function(){return this._getWords(this.getPipishInput())};
WordCount.prototype._getWords=function(a){var b=[];if(!a)return b;var c={};a.split(/\s/g).map(function(a){return a.replace(/[^a-z0-9\-]/gi,"")}).filter(function(a){return a}).forEach(function(a){c[a]?c[a]++:c[a]=1});Object.keys(c).forEach(function(a){(a=a.trim())&&b.push({name:a,count:c[a]})});return b};window.WordCount=WordCount;
var Format={toTitleCase:function(a){return a.length?a.replace(/(\s\w)/g,function(a){return a.toUpperCase().trim()}).replace(/_/g," ").replace(/\-/g," "):""},getRandomString:function(a){a=a||32;for(var b="",c,d=0;d<a;d++)c=Math.floor(61*Math.random()),b+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".substring(c,c+1);return b},removeFileExtension:function(a){return a?a.replace(/\.[^\.]+$/,""):""},stripHtml:function(a){return a&&a.replace?a.replace(/<(?:.|\n)*?>/gm,""):a},_permalink:function(a,
b){return a.length?a.toLowerCase().replace(b,"").replace(/ /g,"-"):""},permalink:function(a){return Format._permalink(a,/[^a-z0-9-_\.]/gi)},roundTo:function(a,b){return parseFloat(a.toFixed(b))},linkify:function(a){a=a.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,'<a href="$1" target="_blank">$1</a>');a=a.replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,'$1<a href="http://$2" target="_blank">$2</a>');return a=a.replace(/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,
'<a href="mailto:$1">$1</a>')}};window.Format=Format;var HakonPropertyNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(HakonPropertyNode,TreeNotation);HakonPropertyNode.prototype.toCss=function(a){return""+a+this.getBase()+": "+this.getBeam()+";"};var HakonErrorNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(HakonErrorNode,TreeNotation);HakonErrorNode.prototype.toCss=function(){return""};
HakonErrorNode.prototype.getErrorMessage=function(){return"Hakon should not have semicolons."};var HakonSelectorNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(HakonSelectorNode,TreeNotation);HakonSelectorNode.prototype.parseNodeType=function(a){return a.includes(";")?HakonErrorNode:a.includes(" ")?HakonPropertyNode:HakonSelectorNode};
HakonSelectorNode.prototype.getSelector=function(){var a=this.getParent().getSelector();return this.getBase().split(",").map(function(b){return b.startsWith("&")?a+b.substr(1):a?a+" "+b:b}).join(",")};HakonSelectorNode.prototype.toCss=function(){var a=this.getChildrenByNodeType(HakonPropertyNode);return a.length?this.getSelector()+" {\n"+a.map(function(a){return a.toCss("  ")}).join("\n")+"\n}\n":""};var HakonProgram=function(a){return TreeNotation.apply(this,arguments)||this};
$jscomp.inherits(HakonProgram,TreeNotation);HakonProgram.prototype.parseNodeType=function(a){return a?HakonSelectorNode:TreeNotation};HakonProgram.prototype.getSelector=function(){return""};HakonProgram.prototype.toCss=function(){return this.getTopDownArray().filter(function(a){return a instanceof HakonSelectorNode}).map(function(a){return a.toCss()}).join("")};window.HakonProgram=HakonProgram;
function Icons(a,b){var c=SVGS[a];if(!c)return console.error("svg not found for "+a),"";a=c.substr(4);return'<svg width="'+b+'" height="'+b+'" class="SVGIcon" '+a}window.Icons=Icons;var LocalStorageCaddy=function(a){return AbstractCaddy.apply(this,arguments)||this};$jscomp.inherits(LocalStorageCaddy,AbstractCaddy);window.LocalStorageCaddy=LocalStorageCaddy;
var StorageKeys={openPrograms:"__openPrograms",autoSave:"__autoSave",theme:"__theme",visitCount:"__visitCount",newUser:"__newUser",mountedProgram:"__mountedProgram"},_storageKeysmap={};Object.values(StorageKeys).forEach(function(a){_storageKeysmap[a]=!0});StorageKeys.isKey=function(a){return _storageKeysmap[a]};window.StorageKeys=StorageKeys;var MashProgram=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(MashProgram,TreeNotation);MashProgram.prototype.parseNodeType=function(a){return MashCommandNode};
var MashArgNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(MashArgNode,TreeNotation);var MashCommandNode=function(a){return MashProgram.apply(this,arguments)||this};$jscomp.inherits(MashCommandNode,MashProgram);MashCommandNode.prototype.getNodeTypeByBase=function(a){return{"%%":MashArgNode}[a]||MashCommandNode};MashCommandNode.prototype.parseNodeType=function(a){};
MashCommandNode.prototype._getArgs=function(){var a=this.getChildrenByNodeType(ArgNode).map(function(a){return a.childrenToString()});a.length&&a.unshift(this.getWord(0));return a.length?a:this.getWords(0)};MashCommandNode.prototype.execute=function(a){var b=this;this.getPoint();return a.app.executeCommandLine(this._getArgs()).then(function(){return MashProgram.prototype.execute.call(b,a)})};window.MashProgram=MashProgram;
var AbstractModalChisel=function(a){return AbstractChisel.apply(this,arguments)||this};$jscomp.inherits(AbstractModalChisel,AbstractChisel);AbstractModalChisel._mountedChisels=AbstractChisel._mountedChisels;
AbstractModalChisel.prototype.getHakon=function(){var a=this.getTheme();return AbstractChisel.prototype.getHakon.call(this)+"\n.monospaceModal\n font-family Courier, monospace\n white-space pre\n "+a.enableTextSelect(2)+"\n >div\n  max-height 600px\n  overflow scroll\n input\n  display block\n  width 100%\n textarea\n  width 100%\n  display block\n  min-height 200px\n  font-size 14px\n  font-family Courier, monospace\n\n.modalBackground\n position fixed\n top 0\n left 0\n width 100%\n height 100%\n z-index 1000\n display flex\n padding-top 50px\n align-items baseline\n justify-content center\n box-sizing border-box\n background "+a.modalDimmerBackground+
"\n\n.modalContent\n background "+a.contextMenuBackground+"\n color "+a.foregroundColor+"\n box-shadow 0px 0px 2px "+a.boxShadow+"\n padding 20px\n position relative\n min-width 600px\n max-width 800px\n max-height 90%\n white-space nowrap\n text-overflow ellipsis\n overflow-x hidden\n overflow-y scroll\n textarea\n  margin-bottom 10px\n  white-space pre\n pre\n  "+a.enableTextSelect(1)+"\n\n.modalClose\n position absolute\n top 10px\n right 10px\n cursor pointer"};
AbstractModalChisel.prototype.getModalBray=function(){return""};AbstractModalChisel.prototype.getBray=function(){return"@section\n data-onClickCommand chisel _confirmAndUnmountCommand\n class modalBackground\n @section\n  data-onClickCommand chisel _stopPropagationCommand\n  class modalContent\n  @a X\n   data-onClickCommand chisel _confirmAndUnmountCommand\n   class modalClose"+TreeNotation.nest(this.getModalBray(),2)};AbstractModalChisel.prototype.hasChanges=function(){return!1};
window.AbstractModalChisel=AbstractModalChisel;var CardEditorModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(CardEditorModal,AbstractModalChisel);CardEditorModal._mountedChisels=AbstractModalChisel._mountedChisels;CardEditorModal.prototype.chiselDidMount=function(){AbstractModalChisel.prototype.chiselDidMount.call(this);this._getTextArea().getShadow().setShadowValue(this.getCard().cardToString())};CardEditorModal.prototype._getTextArea=function(){return this.getStump().findStumpByChild("id editCardTextarea")};
CardEditorModal.prototype._deleteCardCommand=function(){this.getApp().closeModal();var a=this.getCard().getCardCog();return this.getCard().destroyCardCommand().then(function(){a.executeLoadDataAndRender()})};CardEditorModal.prototype._saveCardCommand=function(){var a=this.getCard();a.reloadFromStr(this._getTextArea().getShadow().getShadowValue());a.getCardCog().updateCards([a]);this.getApp().closeModal()};
CardEditorModal.prototype.getModalBray=function(){return"@h4 Editing node\n@textarea\n class bigInput\n rows 20\n id editCardTextarea\n@button "+Icons("trash",30)+"\n title Delete card\n class leftButton\n data-onClickCommand chisel _deleteCardCommand\n@button "+Icons("check",30)+"\n title Save\n class rightButton\n data-onClickCommand chisel _saveCardCommand"};CardEditorModal.prototype.getCard=function(){return this.getApp().getTargetNode()};window.CardEditorModal=CardEditorModal;
var CogInspectorModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(CogInspectorModal,AbstractModalChisel);CogInspectorModal._mountedChisels=AbstractModalChisel._mountedChisels;CogInspectorModal.prototype._getChildCog=function(){return this.getApp().getTargetNode()};CogInspectorModal.prototype.chiselDidMount=function(){AbstractModalChisel.prototype.chiselDidMount.call(this);this._getChildCog();this.getApp()};
CogInspectorModal.prototype.getHakon=function(){return AbstractModalChisel.prototype.getHakon.call(this)+"\n.CogInspectorModal\n ol\n  list-style decimal\n  padding 20px\n pre\n  width 600px\n  overflow-x scroll\n textarea\n  width 600px\n  height 200px"};CogInspectorModal.prototype.getModalBray=function(){return this._getChildCog().getInspection()};window.CogInspectorModal=CogInspectorModal;var CustomConfirmModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};
$jscomp.inherits(CustomConfirmModal,AbstractModalChisel);CustomConfirmModal._mountedChisels=AbstractModalChisel._mountedChisels;CustomConfirmModal.prototype.getModalBray=function(){return"@h4 "+this.getBeam()+"\n@button Cancel\n value 0\n data-onClickCommand chisel _resolveCommand\n@button Ok\n value 1\n data-onClickCommand chisel _resolveCommand"};CustomConfirmModal.prototype._resolveCommand=function(a){this.resolve("1"===a);this.getApp().closeModal();return Promise.resolve()};
CustomConfirmModal.prototype.getHakon=function(){return AbstractModalChisel.prototype.getHakon.call(this)+"\n.CustomConfirmModal\n h4\n  text-align left\n button\n  padding 7px 20px"};CustomConfirmModal.prototype.getConfirmPromise=function(){var a=this;return new Promise(function(b,c){a.resolve=b;a.reject=c})};window.CustomConfirmModal=CustomConfirmModal;var CustomPromptModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(CustomPromptModal,AbstractModalChisel);
CustomPromptModal._mountedChisels=AbstractModalChisel._mountedChisels;CustomPromptModal.prototype.getModalBray=function(){return"@h4 "+this.findBeam("message")+"\n@input\n value "+this.findBeam("value")+"\n@button Ok\n data-onClickCommand chisel _resolveCommand"};CustomPromptModal.prototype.parseNodeType=function(a){return TreeNotation};
CustomPromptModal.prototype._resolveCommand=function(){var a=this.getStump().findStumpByBase("@input");this.resolve(a.getShadow().getShadowValue());this.getApp().closeModal();return Promise.resolve()};CustomPromptModal.prototype.chiselDidMount=function(){AbstractModalChisel.prototype.chiselDidMount.call(this);this.getStump().findStumpByBase("@input").getShadow().focusShadow()};CustomPromptModal.prototype.getHakon=function(){return AbstractModalChisel.prototype.getHakon.call(this)+"\n.CustomPromptModal\n h4\n  text-align left\n input\n  width 100%\n  display block\n  margin-bottom 20px\n button\n  padding 7px 20px"};
CustomPromptModal.prototype.getPromptPromise=function(){var a=this;return new Promise(function(b,c){a.resolve=b;a.reject=c})};window.CustomPromptModal=CustomPromptModal;var HelpModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(HelpModal,AbstractModalChisel);HelpModal._mountedChisels=AbstractModalChisel._mountedChisels;
HelpModal.prototype.getMomentHelp=function(){return"Char;Example;Description{YYYY;2014;4 or 2 digit year{YY;14;2 digit year{Y;-25;Year with any number of digits and sign{Q;1..4;Quarter of year. Sets month to first month in quarter.{M MM;1..12;Month number{MMM MMMM;Jan..December;Month name in locale set by moment.locale(){D DD;1..31;Day of month{Do;1st..31st;Day of month with ordinal{DDD DDDD;1..365;Day of year{X;1410715640.579;Unix timestamp{x;1410715640579;Unix ms timestamp{H HH;0..23;24 hour time{h hh;1..12;12 hour time used with a A.{a/p A/P;am pm;Post or ante meridiem{m mm;0..59;Minutes{s ss;0..59;Seconds{S SS SSS;0..999;Fractional seconds{Z ZZ;+12:00;Offset from UTC as +-HH:mm, +-HHmm, or Z{w ww;1..53;Locale week of year{e;0..6;Locale day of week{ddd dddd;Mon...Sunday;Day name in locale set by moment.locale(){E;1..7;ISO day of week".split("{").map(function(a){a=a.split(";");
return"<tr><td>"+a[0]+"</td><td>"+a[1]+"</td><td>"+a[2]+"</td></tr>"}).join("")};HelpModal.prototype.getHakon=function(){return AbstractModalChisel.prototype.getHakon.call(this)+"\np\n width 100%\n white-space normal\n.helpToggle\n display block\n.helpSection\n display none\n#shortcutsHelp td\n padding-right 10px"};
HelpModal.prototype._getShortcutsHelpBray=function(){var a="",b=this.getApp();return"@table\n id shortcutsHelp\n class helpSection\n"+b.getKeyboardShortcuts().getChildren().map(function(c){var d=c.getCategory(),e="";d!==a&&(e=" @tr\n  @td <br>"+d+"\n  @td\n",a=d);d=c.getDescription();return e+" @tr\n  style "+(d?"":"display: none;")+"\n  @td "+c.getKeyCombo()+"\n  @td "+d+"\n   @"+(c.isEnabled(b)?"a":"span")+"\n    data-onClickCommand app "+c.getFn()}).join("\n")};
HelpModal.prototype.getModalBray=function(){var a=this.getApp(),b=Object.values(a.getETNs()).map(function(a){return new a}),c=b.map(function(a){return a.getDictionary()}),d=c.map(function(a){return a.getDocs()}).join("<br><br>"),c=c.map(function(a){return a.getLine()}).join(", ");a.getMountedProgram();return"@h4 About ohayo\n@p ohayo will be the fastest programming tool in the solar system.\n@p\n @a Welcome Page\n  data-onClickCommand app openOhayoProgramCommand\n  value ohayo.flow\n @span |\n @a Read Me\n  data-onClickCommand app openOhayoProgramCommand\n  value readme.flow\n @span |\n @a FAQ\n  data-onClickCommand app openOhayoProgramCommand\n  value faq.flow\n @span |\n @a Release Notes\n  data-onClickCommand app openOhayoProgramCommand\n  value releasenotes.flow\n @span |\n @a Fire Hello World\n  data-onClickCommand app openOhayoProgramCommand\n  value helloWorld.fire\n @span |\n @a Fire Fibonacci\n  data-onClickCommand app openOhayoProgramCommand\n  value fib.fire\n@a Keyboard Shortcuts\n class helpToggle\n data-onClickCommand app toggleShadowById\n value shortcutsHelp\n"+
this._getShortcutsHelpBray()+"\n@a ETN help\n class helpToggle\n data-onClickCommand app toggleShadowById\n value etnHelpSection\n@div\n class helpSection\n id etnHelpSection\n @p ohayo currently supports "+b.length+" ETNs ("+c+"). Here are the available cogs.\n @pre\n  bern"+TreeNotation.nest(d,3)+"\n@p Version "+a.getVersion()+" "+a.constructor.name};window.HelpModal=HelpModal;var InsertCardModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};
$jscomp.inherits(InsertCardModal,AbstractModalChisel);InsertCardModal._mountedChisels=AbstractModalChisel._mountedChisels;InsertCardModal.prototype.chiselDidMount=function(){AbstractModalChisel.prototype.chiselDidMount.call(this);var a=this._getChildCog(),b=this._getTextArea();b.getShadow().setShadowValue(a.getOutputBinder().toBlankFormTemplate());b.getShadow().focusShadow()};InsertCardModal.prototype._getChildCog=function(){return this.getApp().getTargetNode()};
InsertCardModal.prototype._getTextArea=function(){return this.getStump().findStumpByChild("id newCardTextarea")};InsertCardModal.prototype._submitCardCommand=function(){var a=new TreeNotation(this._getTextArea().getShadow().getShadowValue());this._getChildCog().createCards([a]);this.getApp().closeModal()};InsertCardModal.prototype.getModalBray=function(){return"\n@h4 Insert\n@textarea\n rows 20\n wrap off\n class bigInput\n id newCardTextarea\n@button "+Icons("check",30)+"\n title Save\n data-onClickCommand chisel _submitCardCommand\n class SVGIcon rightButton"};
window.InsertCardModal=InsertCardModal;var InsertCardsModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(InsertCardsModal,AbstractModalChisel);InsertCardsModal._mountedChisels=AbstractModalChisel._mountedChisels;InsertCardsModal.prototype.chiselDidMount=function(){AbstractModalChisel.prototype.chiselDidMount.call(this);this._getBulkTextarea().getShadow().focusShadow()};InsertCardsModal.prototype._getChildCog=function(){return this.getApp().getTargetNode()};
InsertCardsModal.prototype._getBulkTextarea=function(){return this.getStump().findStumpByChild("id bulkTextarea")};InsertCardsModal.prototype._getBulkAdvanced=function(){return this.getStump().findStumpByChild("id bulkAdvanced")};InsertCardsModal.prototype._getBulkFormat=function(){return this.getStump().findStumpByChild("id bulkFormat")};
InsertCardsModal.prototype._updateBulkTextAreaPlaceholderCommand=function(){var a=this._getBulkFormat().getShadow().getShadowValue(),a=(new CardParser).getExample(a)||"";this._getBulkTextarea().setStumpAttr("placeholder","Example:\n"+a);this._updateBulkTextAreaAdvancedCommand()};
InsertCardsModal.prototype._updateBulkTextAreaAdvancedCommand=function(){var a=this._getBulkTextarea(),b=this._getBulkAdvanced(),c=this._getBulkFormat().getShadow().getShadowValue(),d="";""===c?d="Detected: "+(new CardParser).inferEncoding(a.getShadow().getShadowValue()):"advanced"===c&&(d='Delimiter: <input placeholder="," id="bulkDelimiter">\n        <br>Enclosing Char: <input placeholder=\'"\' id="bulkEnclosingChar">\n        <br>Has Headers: <input type="checkbox" id="bulkHasHeader" checked>');
b.getShadow().setShadowHtml(d)};
InsertCardsModal.prototype._submitBulkInsertCommand=function(){var a=this.getApp(),b=this._getChildCog(),c=this._getBulkTextarea().getShadow().getShadowValue(),d=this._getBulkFormat().getShadow().getShadowValue(),e=this.getStump().findStumpByChild;if("advanced"===d){d=e("id bulkDelimiter").getShadow().getShadowValue()||",";var f=e("id bulkEnclosingChar").getShadow().getShadowValue()||'"';e=e("id bulkHasHeader").getShadow().isShadowChecked();c=(new CardParser).parseAdvancedDelimited(c,e,d,f)}else c=
(new CardParser).parse(c,d);a.logMessage("Adding...");b.createCards(c);a.closeModal()};InsertCardsModal.prototype.getModalBray=function(){return"\n@div\n id bulkCardsPopup\n @h4 Insert Nodes\n  @p Enter nodes in any format: csv, newlines, tsv, json, or tree.\n  @div\n   class form-group\n   @textarea\n    data-onChangeCommand chisel _updateBulkTextAreaAdvancedCommand\n    class bigInput\n    rows 15\n    id bulkTextarea\n    wrap off\n  @div\n   class form-group\n   @label Format\n    for bulkFormat\n   @select\n    data-onChangeCommand chisel _updateBulkTextAreaPlaceholderCommand\n    class bigInput\n    id bulkFormat\n    @option Detect\n     value \n    @option CSV\n     value csv\n    @option TSV\n     value tsv\n    @option JSON\n     value json\n    @option SSV\n     value ssv\n    @option RSS\n     value rss\n    @option Tree\n     value tree\n    @option List\n     value list\n    @option Spaced Trees\n     value spaced\n    @option Sections\n     value sections\n    @option Advanced Delimited\n     value advanced\n   @div &nbsp;\n    id bulkAdvanced\n   @button Insert\n    type button\n    class buttonPrimary\n    data-onClickCommand chisel _submitBulkInsertCommand"};
window.InsertCardsModal=InsertCardsModal;var NodeEditorModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(NodeEditorModal,AbstractModalChisel);NodeEditorModal._mountedChisels=AbstractModalChisel._mountedChisels;NodeEditorModal.prototype.hasChanges=function(){var a=this.getNode(),b=this._getLatest();return b.children!==a.childrenToString()||b.line!==a.getLine()};
NodeEditorModal.prototype._getLatest=function(){this.getStump();return{children:this._getTextarea().getShadow().getShadowValue(),line:this._getInput().getShadow().getShadowValue()}};NodeEditorModal.prototype._saveChangesCommand=function(){var a=this.getNode(),b=this._getLatest();a.setChildren(b.children||void 0);a.setLine(b.line);a=this.getApp();a.closeModal();a.getMountedProgram().autosaveAndRender()};NodeEditorModal.prototype._getTextarea=function(){return this.getStump().findStumpByBase("@textarea")};
NodeEditorModal.prototype._getInput=function(){return this.getStump().findStumpByBase("@input")};NodeEditorModal.prototype._deleteNodeCommand=function(){var a=this,b=this.getApp();return b.confirm("Delete. Are you sure?").then(function(c){if(!c)return!1;c=a.getNode();c.unmountAndDestroy?c.unmountAndDestroy():c.destroy();b.closeModal();b.getMountedProgram().autosaveAndRender();return!0})};
NodeEditorModal.prototype.chiselDidMount=function(){var a=this.getNode();this._getTextarea().getShadow().setShadowValue(a.childrenToString()||"");this._getInput().getShadow().setShadowValue(a.getLine()||"")};NodeEditorModal.prototype.getNode=function(){return this.getApp().getTargetNode()};
NodeEditorModal.prototype.getModalBray=function(){return"@h4 Editing '"+this.getNode().getBasePath()+"'\n @div\n  class monospaceModal\n  @input\n  @textarea\n@button "+Icons("trash",30)+"\n title Delete\n data-onClickCommand chisel _deleteNodeCommand\n class leftButton\n@button "+Icons("check",30)+"\n title Save\n data-onClickCommand chisel _saveChangesCommand\n class SVGIcon rightButton"};window.NodeEditorModal=NodeEditorModal;
var NodePickerModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};$jscomp.inherits(NodePickerModal,AbstractModalChisel);NodePickerModal._mountedChisels=AbstractModalChisel._mountedChisels;NodePickerModal.prototype.getHakon=function(){var a=this.getTheme();return AbstractModalChisel.prototype.getHakon.call(this)+"\n.base\n color "+a.linkColor+"\n cursor pointer"};
NodePickerModal.prototype._openNodeEditorCommand=function(a){a=a.split(" ").map(function(a){return parseInt(a)});a=a.splice(2);app.closeModal();app.openNodeEditorModalCommand(a)};
NodePickerModal.prototype.getModalBray=function(){var a=this.getApp().getMountedProgram().getTopDownArray().map(function(a){return"@span "+a.getLine()+"\n data-onClickCommand chisel _openNodeEditorCommand\n value "+a.getPathVector().join(" ")}).join("\n");return"@h4 Click a property to edit\n@div\n class monospaceModal\n @div"+TreeNotation.nest(a,2)};window.NodePickerModal=NodePickerModal;var SourceEditorModal=function(a){return AbstractModalChisel.apply(this,arguments)||this};
$jscomp.inherits(SourceEditorModal,AbstractModalChisel);SourceEditorModal._mountedChisels=AbstractModalChisel._mountedChisels;SourceEditorModal.prototype.hasChanges=function(){return this._getTextarea().getShadow().getShadowValue()!==this.getApp().getMountedProgram().childrenToString()};SourceEditorModal.prototype._getTextarea=function(){return this.getStump().findStumpByBase("@textarea")};
SourceEditorModal.prototype._saveChangesCommand=function(){var a=this.getApp(),b=this._getTextarea(),c=a.getMountedProgram(),b=b.getShadow().getShadowValue();c.setChildren(b);a.closeModal();c.autosaveAndRender()};SourceEditorModal.prototype.chiselDidMount=function(){this._getTextarea().getShadow().setShadowValue(this.getApp().getMountedProgram().childrenToString())};
SourceEditorModal.prototype.getModalBray=function(){return"@h4 Edit Source\n@textarea\n rows 20\n class bigInput\n wrap off\n@button "+Icons("check",30)+"\n title Save\n data-onClickCommand chisel _saveChangesCommand\n class SVGIcon rightButton"};window.SourceEditorModal=SourceEditorModal;var OhayoApp=function(a){return AbstractAppChisel.apply(this,arguments)||this};$jscomp.inherits(OhayoApp,AbstractAppChisel);OhayoApp._mountedChisels=AbstractAppChisel._mountedChisels;
OhayoApp.prototype.fetchProgram=function(a){a.setChildrenAndDiskAndUndoStack(this.getFromStore(a.getUrl()));return Promise.resolve()};OhayoApp.prototype.chiselWillMount=function(){AbstractAppChisel.prototype.chiselWillMount.call(this);1===this._getVisitCount()&&this.playFirstVisitCommand()};OhayoApp.prototype.playFirstVisitCommand=function(){var a=this;return this.openOhayoProgramCommand("readme.flow faq.flow releasenotes.flow helloWorld.fire").then(function(){return a.openOhayoProgramCommand("ohayo.flow")})};
OhayoApp.prototype.saveProgramToDisk=function(a,b){this.storeValue(a.getFileName(),b.newVersion);return Promise.resolve()};OhayoApp.prototype.getCaddies=function(){var a=this;return this.getStoreKeys().filter(function(a){return!StorageKeys.isKey(a)}).map(function(b){return new LocalStorageCaddy(a.getFromStore(b),b)})};OhayoApp.prototype.getProgramToOpen=function(){return this.getFromStore(StorageKeys.mountedProgram)};OhayoApp.prototype.doesFileExistSync=function(a){return void 0!==this.getFromStore(a)};
OhayoApp.prototype.deleteFileCommand=function(a){this.removeValue(a);return Promise.resolve()};OhayoApp.prototype.renameFileCommand=function(a,b,c){this.storeValue(b,this.getFromStore(a)||"");this.removeValue(a);return Promise.resolve(b)};OhayoApp.prototype.createFile=function(a,b){a=this._getAvailablePermalink(a);this.storeValue(a,b);return Promise.resolve(a)};OhayoApp.prototype.createAndOpen=function(a,b){var c=this;return this.createFile(b,a).then(function(a){return c.openUrlInNewSpaceAndFocus(a)})};
window.OhayoApp=OhayoApp;var Version="3.2.1";"undefined"!==typeof exports&&(module.exports=Version);var StumpBernNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(StumpBernNode,TreeNotation);StumpBernNode.prototype._toHtml=function(){return this.childrenToString()};var StumpAttributeNode=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(StumpAttributeNode,TreeNotation);StumpAttributeNode.prototype._toHtml=function(){return""};
StumpAttributeNode.prototype.getAttribute=function(){return" "+this.getBase()+'="'+this.getBeam()+'"'};var StumpProgram=function(a){return TreeNotation.apply(this,arguments)||this};$jscomp.inherits(StumpProgram,TreeNotation);StumpProgram.prototype.getTag=function(){return this.getWord(0).substr(1)};StumpProgram.prototype.parseNodeType=function(a){if(a.startsWith("@"))return StumpProgram;if(a.startsWith("@ "))throw Error(a);return a.startsWith("bern ")||"bern"===a?StumpBernNode:StumpAttributeNode};
StumpProgram.prototype._childrenToHtml=function(a){return this.getChildren().map(function(b){return b._toHtml(a)}).join("")};StumpProgram.prototype.toHtml=function(){return this.isRoot()?TreeNotation.prototype.toHtml.call(this):this._toHtml()};StumpProgram.prototype.toHtmlWithSuids=function(){return this.isRoot()?TreeNotation.prototype.toHtml.call(this):this._toHtml(void 0,!0)};StumpProgram.prototype._getOneLiner=function(){var a=this.getWords(1);return a.length?a.join(" "):""};
StumpProgram.prototype.shouldCollapse=function(){return"true"===this.findBeam("collapseNode")};
StumpProgram.prototype._toHtml=function(a,b){var c=this.getTag(),d=this.getChildren().map(function(c){return c._toHtml(a+1,b)}).join(""),e=this.getChildrenByNodeType(StumpAttributeNode).map(function(a){return a.getAttribute()}).join(""),f=" ".repeat(a),g=this.shouldCollapse(),h=!g&&0<this.getChildrenByNodeType(StumpProgram).length,l=b?' data-suid="'+this._getUid()+'"':"",k=this._getOneLiner();return(g?"":f)+"<"+c+e+l+">"+k+(h?"\n":"")+d+"</"+c+">"+(g?"":"\n")};
StumpProgram.prototype.removeStump=function(){this.getShadow().removeShadow();return this.destroy()};StumpProgram.prototype.getNodeByGuid=function(a){return this.getTopDownArray().find(function(b){return b._getUid()===a})};StumpProgram.prototype.addClassToStump=function(a){var b=this.touchNode("class"),c=b.getWords();if(c.includes(a))return this;b.setWord(c.length,a);this.getShadow().addClassToShadow(a);return this};
StumpProgram.prototype.removeClassFromStump=function(a){var b=this.getNode("class");if(!b)return this;var c=b.getLine().replace(" "+a,"");"class"===c?b.destroy():b.setLine(c);this.getShadow().removeClassFromShadow(a);return this};StumpProgram.prototype.stumpHasClass=function(a){var b=this.getNode("class");return b&&b.getWords().includes(a)?!0:!1};StumpProgram.prototype.isStumpCheckbox=function(){return"checkbox"===this.findBeam("type")};StumpProgram.prototype.getShadow=function(){return new (this.getShadowClass())(this)};
StumpProgram.prototype.insertChildNode=function(a,b){a=(new TreeNotation(a)).getChildren()[0];b=this.insert(a.getLine(),a.childrenToString(),b);a=this.getChildrenByNodeType(StumpProgram).indexOf(b);this.getShadow().insertHtmlNode(b,a);return b};StumpProgram.prototype.isInputType=function(){return["input","div","textarea"].includes(this.getTag())||"true"===this.findBeam("contenteditable")};StumpProgram.prototype.findStumpByChild=function(a){return this.findStumpsByChild(a)[0]};
StumpProgram.prototype.findStumpByBase=function(a){return this._findStumpsByBase(a)[0]};StumpProgram.prototype._findStumpsByBase=function(a){return this.getTopDownArray().filter(function(b){return b instanceof StumpProgram&&b.getBase()===a})};StumpProgram.prototype.hasLine=function(a){return this.getChildren().some(function(b){return b.getLine()===a})};StumpProgram.prototype.findStumpsByChild=function(a){return this.getTopDownArray().filter(function(b){return b instanceof StumpProgram&&b.hasLine(a)})};
StumpProgram.prototype.findStumpsWithClass=function(a){return this.getTopDownArray().filter(function(b){return b instanceof StumpProgram&&b.has("class")&&b.getNode("class").getWords().includes(a)})};StumpProgram.prototype.getShadowClass=function(){return this.getParent().getShadowClass()};StumpProgram.prototype.getLines=function(a,b){a=void 0===a?0:a;return this.toString().split("\n").slice(a,b).join("\n")};StumpProgram.prototype.getStumpChisel=function(){return this._chisel||this.getParent().getStumpChisel()};
StumpProgram.prototype.setStumpChisel=function(a){this._chisel=a;return this};StumpProgram.prototype.setStumpCss=function(a){this.getShadow().setShadowCss(a);return this};StumpProgram.prototype.getStumpCss=function(a){return this.getShadow().getShadowCss(a)};StumpProgram.prototype.getStumpAttr=function(a){return this.findBeam(a)};StumpProgram.prototype.setStumpAttr=function(a,b){return this};window.StumpProgram=StumpProgram;var DemoTemplates="faq.flow\n >url faq.md\n  format text\n  visible false\n  >markdown\nreadme.flow\n >url readme.md\n  format text\n  visible false\n  >markdown\nreleasenotes.flow\n >url releasenotes.md?06232017\n  format text\n  visible false\n  >markdown\nohayo.flow\n >youtube 8rwsuXHA7RA\nhelloWorld.fire\n block\n  setfn main\n   log$ Hello world\n  >> main\ntreeConsole.flow\n >settings\n  layout bin\n >data\n  slang\n   hello world\n  format tree\n  >outline\n   dots true\n  >outline\nfib.fire\n block\n  setfn fib num\n   set?< lessThan1 num 1\n   if lessThan1\n    return 0\n   set?<= lessOr2 num 2\n   if lessOr2\n    return 1\n   set#- oneLess num 1\n   set#- twoLess num 2\n   set*>> oneLessFib fib oneLess\n   set*>> twoLessFib fib twoLess\n   set#+ sum oneLessFib twoLessFib\n   return sum\n  set*>> result fib 10\n  set#[] tests 0 1 2 3 4 5 6 7 8 9 10\n  set.>> results tests map fib\n  log@ results\n >settings\n  layout tree";
window.DemoTemplates=DemoTemplates;var FlowCodeEditorTemplate=function(a,b){return">coder\n format text\n etn "+b+"\n slang"+TreeNotation.nest(a,2)+"\n >3d\n >outline\n >slots\n  >pre\n   >wc\n    >table\n    >wordcloud\n>settings\n layout bin"};window.FlowCodeEditorTemplate=FlowCodeEditorTemplate;var FlowTemplates={csv:function(a,b){return">data\n >table\n  limit 300\n slang"+TreeNotation.nest(b,2)}};window.FlowTemplates=FlowTemplates;var MiniTemplate=">programs\n visible false\n >mini\n  title My Programs\n  orderBy link";
window.MiniTemplate=MiniTemplate;var SpeedTestTemplate=function(a,b){return">data\n pin 45 32 17 5\n slang\n  "+b.replace(/\n/g,"\n  ")+"\n columns\n  timeToLoad\n   type number\n  timeToRender\n   type number\n >text "+a+"\n  pin 45 0 23 3\n >table\n  link url\n  title Slow Load Times\n  x timeToLoad\n  y timeToRender\n  orderBy -timeToLoad\n  pin 0 0 43 18\n >table\n  link url\n  title Slow Render Times\n  x timeToLoad\n  y timeToRender\n  orderBy -timeToRender\n  pin 0 20 41 17\n >kpi\n  pin 45 4 11 7\n  column timeToLoad\n  reduction average\n >kpi\n  pin 45 15 11 7\n  column timeToRender\n  reduction average\n >kpi\n  pin 45 24 11 7\n  column timeToRender\n  reduction median\n >kpi\n  pin 57 4 11 7\n  column timeToLoad\n  reduction sum\n >kpi\n  pin 57 15 11 7\n  column timeToRender\n  reduction sum\n >kpi\n  pin 57 24 11 7\n  column timeToRender\n  reduction count"};
window.SpeedTestTemplate=SpeedTestTemplate;
var Theme=function(a){var b=a=void 0===a?{}:a,c=void 0===b.backgroundColor?"rgb(255,255,255)":b.backgroundColor,d=void 0===b.foregroundColor?"black":b.foregroundColor,e=void 0===b.fn?"lighten":b.fn,b=void 0===b.selectionColor?"rgb(42, 89, 178)":b.selectionColor;this.cogBackgroundColor=this.contextMenuBackground=this.corkBoardBackground=this.bodyBackground=this.programsBackground=this.tabBackground=this.menuBackground=this.backgroundColor=c;this.cogShadow="none";this.cogOpacity=1;this.foregroundColor=
this.menuChiselColor=d;this.lineColor=tinycolor(d).setAlpha(.075).toString();this.boxShadow=tinycolor(d).setAlpha(.1).toString();this.activeTabColor=this.darkerBackground=tinycolor(c).darken(10).toString();c=function(a){return tinycolor(d)[e](a).toString()};this.darkBlack=c(20);this.bodyColor=this.mediumBlack=c(40);this.midGray=c(60);this.greyish=c(82);this.lightGrey=c(93);this.veryLightGrey=c(97);this.borderColor=this.greyish;this.linkColor=this.hoverBackground=b;this.selectedOutline=tinycolor(b).setAlpha(.8).toString();
this.selectionBackground=tinycolor(b).setAlpha(.1).toString();this.errorColor="rgb(226, 120, 121)";this.successColor="#4CAF50";this.white="#fff";this.fonts="'San Francisco', 'Myriad Set Pro', 'Lucida Grande', 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif";this.modalDimmerBackground=tinycolor("#000").setAlpha(.4).toString();Object.assign(this,a)};Theme.prototype.enableTextSelect=function(a){return Theme._getIndented(a,"-moz-user-select text\n  -webkit-user-select text\n  -ms-user-select text\n  user-select text")};
Theme.prototype.getHeatColor=function(a){return"hsl(200, "+(25+75*a)+"%, "+(20+25*a)+"%)"};Theme._getIndented=function(a,b){return b.split(/\n/g).join("\n"+" ".repeat(a))};Theme.prototype.disableTextSelect=function(a){return Theme._getIndented(a,"-webkit-touch-callout none\n-webkit-user-select none\n-khtml-user-select none\n-moz-user-select none\n-ms-user-select none\nuser-select none")};Theme.prototype.hakonToCss=function(a){return(new HakonProgram(a)).toCss()};var Themes={};
Themes.dark=new Theme({backgroundColor:"rgb(16, 16, 16)",foregroundColor:"#fff",fn:"darken"});Themes.cork=new Theme({corkBoardBackground:"url('/cork.jpg')",menuBackground:"#3B539A",cogOpacity:.95,cogShadow:"0 3px 5px rgba(33,33,33,.3)",menuChiselColor:"white"});
var glassColors={selectionColor:"rgba(46, 195, 212, .9)",bodyBackground:"linear-gradient(130deg, rgb(56, 114, 127), rgb(28, 98, 151) 45%, rgb(62, 73, 135))",backgroundColor:"rgba(0,0,0,.12)",contextMenuBackground:"rgba(0,0,0,.90)",cogBackgroundColor:"rgba(0,0,0,.12)",programsBackground:"transparent",boxShadow:"transparent",corkBoardBackground:"transparent",activeTabColor:"transparent",borderColor:"transparent",foregroundColor:"#eee"};Themes.glass=new Theme(glassColors);
glassColors.cogBackgroundColor="transparent";Themes.clearGlass=new Theme(glassColors);window.Themes=Themes;
var Util={getFileExtension:function(a){return(a=(void 0===a?"":a).match(/\.([^\.]+)$/))&&a[1]||""},getUniqueWordsArray:function(a){var b={};a.replace(/\n/g," ").split(" ").forEach(function(a){b[a]||(b[a]=0);b[a]++});return Object.keys(b).map(function(a){return{word:a,count:b[a]}})},getFileName:function(a){return a.split("/").pop()},makeSemiRandomFn:function(a){a=void 0===a?1:a;return function(){var b=1E4*Math.sin(a++);return b-Math.floor(b)}},getAvailablePermalink:function(a,b){var c=Util.getFileExtension(a);
a=Format.removeFileExtension(a);for(var d=2,e="",f=""+a+e+"."+c;b(f);)f=""+a+e+"."+c,e="-"+d,d++;return f},pLimit:function(a){var b=[],c=0;return function(d){return new Promise(function(e,f){var g=function(){c++;d().then(function(a){e(a);c--;b.length&&b.shift()()},function(a){f(a);c--;b.length&&b.shift()()})};c<a?g():b.push(g)})}},sortByAccessor:function(a){return function(b,c){b=a(b);c=a(c);var d=b<c?-1:b>c?1:0;void 0===b&&void 0!==c?d=-1:void 0===c&&void 0!==b&&(d=1);return d}},toggle:function(a,
b){a=b.indexOf(a);return-1===a||a+1===b.length?b[0]:b[a+1]},sortByFast:function(a,b){var c=[],d=b.split(/ /g).map(function(a,b){return"-"===a.substr(0,1)?(c[b]=!0,a.substr(1)):a}),e=function(a,b,h){var f=d[h];if(!f)return 0;var g=a.getCardNumeric()[f],f=b.getCardNumeric()[f];return g===f?e(a,b,h+1):g>f?c[h]?-1:1:c[h]?1:-1};a.sort(function(a,b){return e(a,b,0)})},joinArraysOn:function(a,b,c){var d={};c||(c=b.map(function(a){return Object.keys(a[0])}));b.forEach(function(b,f){var e=c[f];b.forEach(function(b){var c=
a?b[a]:f++;d[c]||(d[c]={});var g=d[c];e.forEach(function(a){return g[a]=b[a]})})});return Object.values(d)}};window.Util=Util;var WillowStore=function(){this._values={}};WillowStore.prototype.get=function(a){return this._values[a]};WillowStore.prototype.set=function(a,b){this._values[a]=b;return this};WillowStore.prototype.remove=function(a){delete this._values[a]};WillowStore.prototype.each=function(a){var b=this;Object.keys(this._values).forEach(function(c){a(b._values[c],c)})};
WillowStore.prototype.clearAll=function(){this._values={}};var WillowMousetrap=function(){this.prototype={}};WillowMousetrap.prototype.bind=function(){};var AbstractWillowProgram=function(a){var b=StumpProgram.call(this,"@html\n @head\n @body")||this;b._htmlStump=b.nodeAt(0);b._headStump=b.nodeAt(0).nodeAt(0);b._bodyStump=b.nodeAt(0).nodeAt(1);b.addSuidsToHtmlHeadAndBodyShadows();b._baseUrl=a;a=new miuri(a);b.location={};b.location.hostname=a.hostname();return b};
$jscomp.inherits(AbstractWillowProgram,StumpProgram);AbstractWillowProgram.prototype.addSuidsToHtmlHeadAndBodyShadows=function(){};AbstractWillowProgram.prototype.getShadowClass=function(){return WillowShadow};AbstractWillowProgram.prototype.toggleFullScreen=function(){};AbstractWillowProgram.prototype.getMousetrap=function(){this._mousetrap||(this._mousetrap=new WillowMousetrap);return this._mousetrap};AbstractWillowProgram.prototype._getFocusedShadow=function(){return this._focusedShadow||this.getBodyStump().getShadow()};
AbstractWillowProgram.prototype.getHeadStump=function(){return this._headStump};AbstractWillowProgram.prototype.getBodyStump=function(){return this._bodyStump};AbstractWillowProgram.prototype.getHtmlStump=function(){return this._htmlStump};AbstractWillowProgram.prototype.getStore=function(){this._store||(this._store=new WillowStore);return this._store};AbstractWillowProgram.prototype.someInputHasFocus=function(){var a=this._getFocusedShadow();return a?(a=a.getShadowStump())&&a.isInputType():!1};
AbstractWillowProgram.prototype.isNode=function(){return"undefined"!==typeof exports};AbstractWillowProgram.prototype.copyTextToClipboard=function(){};AbstractWillowProgram.prototype.setCopyData=function(a,b){};AbstractWillowProgram.prototype._makeRelativeUrlAbsolute=function(a){return a.startsWith("http://")||a.startsWith("https://")?a:this._baseUrl.replace(/\/$/,"")+a};
AbstractWillowProgram.prototype.get=function(a,b){a=this._makeRelativeUrlAbsolute(a);return superagent.get(a).query(b).set(this._headers||{}).then(function(a){return a.body||a.text})};AbstractWillowProgram.prototype.post=function(a,b){a=this._makeRelativeUrlAbsolute(a);return superagent.post(a).set(this._headers||{}).send(b).then(function(a){return a.body||a.text})};AbstractWillowProgram.prototype.encodeURIComponent=function(a){return encodeURIComponent(a)};
AbstractWillowProgram.prototype.downloadFile=function(a,b,c){};AbstractWillowProgram.prototype.appendScript=function(a){return Promise.resolve()};AbstractWillowProgram.prototype.getWindowTitle=function(){var a=this.getTopDownArray().find(function(a){return"title"===a.getTag()});return a?a.getBeam():""};AbstractWillowProgram.prototype.setWindowTitle=function(a){this.getTopDownArray().find(function(a){return"head"===a.getTag()}).touchNode("@title").setBeam(a);return this};
AbstractWillowProgram.prototype._getHostname=function(){return this.location.hostname||""};AbstractWillowProgram.prototype.openUrl=function(a){};AbstractWillowProgram.prototype.getPageHtml=function(){return this.toHtmlWithSuids()};AbstractWillowProgram.prototype.getStumpFromElement=function(a){};AbstractWillowProgram.prototype.setPasteHandler=function(a){return this};AbstractWillowProgram.prototype.setErrorHandler=function(a){return this};AbstractWillowProgram.prototype.setWindowBlurHandler=function(a){return this};
AbstractWillowProgram.prototype.setWindowFocusHandler=function(a){return this};AbstractWillowProgram.prototype.setCopyHandler=function(a){return this};AbstractWillowProgram.prototype.setCutHandler=function(a){return this};AbstractWillowProgram.prototype.setResizeEndHandler=function(a){return this};AbstractWillowProgram.prototype.setLoadedDroppedFileHandler=function(a,b){};AbstractWillowProgram.prototype.getWindowSize=function(){return{width:1111,height:1111}};
AbstractWillowProgram.prototype.getDocumentSize=function(){return this.getWindowSize()};AbstractWillowProgram.prototype.isExternalLink=function(a){if(a&&"/"===a.substr(0,1)||!a.includes(":"))return!1;var b=this._getHostname();a=new miuri(a);return a.hostname()&&b!==a.hostname()};AbstractWillowProgram.prototype.forceRepaint=function(){};AbstractWillowProgram.prototype.blurFocusedInput=function(){};window.AbstractWillowProgram=AbstractWillowProgram;var AbstractWillowShadow=function(a){this._stump=a};
AbstractWillowShadow.prototype.getShadowStump=function(){return this._stump};AbstractWillowShadow.prototype.getShadowValue=function(){return""};AbstractWillowShadow.prototype.setShadowValue=function(a){return this};AbstractWillowShadow.prototype.removeShadow=function(){return this};AbstractWillowShadow.prototype.makeResizable=function(){return this};AbstractWillowShadow.prototype.makeDraggable=function(){return this};AbstractWillowShadow.prototype.makeSelectable=function(){return this};
AbstractWillowShadow.prototype.focusShadow=function(){return this};AbstractWillowShadow.prototype.isShadowChecked=function(){return!1};AbstractWillowShadow.prototype.getShadowHtml=function(){return""};AbstractWillowShadow.prototype.getShadowOffset=function(){return{left:111,top:111}};AbstractWillowShadow.prototype.getShadowWidth=function(){return 111};AbstractWillowShadow.prototype.getShadowHeight=function(){return 111};AbstractWillowShadow.prototype.isShadowResizable=function(){return!1};
AbstractWillowShadow.prototype.bindShadow=function(){return this};AbstractWillowShadow.prototype.toggleShadow=function(){};AbstractWillowShadow.prototype.addClassToShadow=function(){};AbstractWillowShadow.prototype.removeClassFromShadow=function(){};AbstractWillowShadow.prototype.setShadowHtml=function(a){return this};AbstractWillowShadow.prototype.onShadowEvent=function(){return this};AbstractWillowShadow.prototype.offShadowEvent=function(){return this};
AbstractWillowShadow.prototype.triggerShadowEvent=function(a){return this};AbstractWillowShadow.prototype.getShadowPosition=function(){return{left:111,top:111}};AbstractWillowShadow.prototype.getShadowOuterHeight=function(){return 11};AbstractWillowShadow.prototype.getShadowOuterWidth=function(){return 11};AbstractWillowShadow.prototype.getShadowCss=function(){return""};AbstractWillowShadow.prototype.setShadowCss=function(){return this};AbstractWillowShadow.prototype.insertHtmlNode=function(){};
AbstractWillowShadow.prototype.getShadowElement=function(){};window.AbstractWillowShadow=AbstractWillowShadow;window.lodash||(window.lodash=_);window.console||(window.console={log:function(){},time:function(){},error:function(){},debug:function(){}});Object.values||(Object.values=function(a){return Object.keys(a).map(function(b){return a[b]})});var WillowBrowserProgram=function(a){return AbstractWillowProgram.apply(this,arguments)||this};$jscomp.inherits(WillowBrowserProgram,AbstractWillowProgram);
WillowBrowserProgram.prototype.findStumpsByShadowClass=function(a){var b=[],c=this;jQuery("."+a).each(function(){b.push(c.getStumpFromElement(this))});return b};WillowBrowserProgram.prototype.addSuidsToHtmlHeadAndBodyShadows=function(){jQuery("html").attr("data-suid",this.getHtmlStump()._getUid());jQuery("head").attr("data-suid",this.getHeadStump()._getUid());jQuery("body").attr("data-suid",this.getBodyStump()._getUid())};WillowBrowserProgram.prototype.getShadowClass=function(){return WillowBrowserShadow};
WillowBrowserProgram.prototype.setCopyHandler=function(a){jQuery(document).on(WillowShadowEvents.copy,a);return this};WillowBrowserProgram.prototype.setCutHandler=function(a){jQuery(document).on(WillowShadowEvents.cut,a);return this};WillowBrowserProgram.prototype.setPasteHandler=function(a){window.addEventListener(WillowShadowEvents.paste,a,!1);return this};WillowBrowserProgram.prototype.setErrorHandler=function(a){window.addEventListener("error",a);return this};
WillowBrowserProgram.prototype.toggleFullScreen=function(){var a=document;a.fullScreenElement&&null!==a.fullScreenElement||!a.mozFullScreen&&!a.webkitIsFullScreen?a.documentElement.requestFullScreen?a.documentElement.requestFullScreen():a.documentElement.mozRequestFullScreen?a.documentElement.mozRequestFullScreen():a.documentElement.webkitRequestFullScreen&&a.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):a.cancelFullScreen?a.cancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():
a.webkitCancelFullScreen&&a.webkitCancelFullScreen()};WillowBrowserProgram.prototype.setCopyData=function(a,b){a=a.originalEvent;a.preventDefault();a.clipboardData.setData("text/plain",b);a.clipboardData.setData("text/html",b)};WillowBrowserProgram.prototype.getMousetrap=function(){return Mousetrap};
WillowBrowserProgram.prototype.copyTextToClipboard=function(a){var b=document.createElement("textarea");b.style.position="fixed";b.style.top=0;b.style.left=0;b.style.width="2em";b.style.height="2em";b.style.padding=0;b.style.border="none";b.style.outline="none";b.style.boxShadow="none";b.style.background="transparent";b.value=a;document.body.appendChild(b);b.select();try{document.execCommand("copy")}catch(c){}document.body.removeChild(b)};WillowBrowserProgram.prototype.getStore=function(){return store};
WillowBrowserProgram.prototype._getHostname=function(){return location.hostname};
WillowBrowserProgram.prototype.appendScript=function(a){if(!a)return Promise.resolve();this._loadingPromises||(this._loadingPromises={});if(this._loadingPromises[a])return this._loadingPromises[a];if(this.isNode())return Promise.resolve();var b=new Promise(function(b,d){var c=!1,f=document.createElement("script");f.type="text/javascript";f.src=a;f.async=!0;f.onload=f.onreadystatechange=function(){c||this.readyState&&"complete"!=this.readyState||(c=!0,b(this))};f.onerror=f.onabort=d;document.head.appendChild(f)});
return this._loadingPromises[a]=b};WillowBrowserProgram.prototype.downloadFile=function(a,b,c){var d=document.createElement("a");d.setAttribute("href","data:"+c+","+encodeURIComponent(a));d.setAttribute("download",b);d.click()};WillowBrowserProgram.prototype.openUrl=function(a){window.open(a)};WillowBrowserProgram.prototype.setWindowBlurHandler=function(a){jQuery(window).on(WillowShadowEvents.blur,a);return this};
WillowBrowserProgram.prototype.setResizeEndHandler=function(a){var b;$(window).on(WillowShadowEvents.resize,function(c){$(c.target).is("div")||(clearTimeout(b),b=setTimeout(a,100))});return this};WillowBrowserProgram.prototype.setWindowFocusHandler=function(a){jQuery(window).on(WillowShadowEvents.focus,a);return this};WillowBrowserProgram.prototype.getStumpFromElement=function(a){return this.getHtmlStump().getNodeByGuid(parseInt(jQuery(a).attr("data-suid")))};
WillowBrowserProgram.prototype.forceRepaint=function(){jQuery(window).width()};WillowBrowserProgram.prototype.getBrowserHtml=function(){return document.documentElement.outerHTML};WillowBrowserProgram.prototype.getWindowSize=function(){var a=jQuery(window);return{width:a.width(),height:a.height()}};WillowBrowserProgram.prototype.getDocumentSize=function(){var a=jQuery(document);return{width:a.width(),height:a.height()}};WillowBrowserProgram.prototype.blurFocusedInput=function(){document.activeElement.blur()};
WillowBrowserProgram.prototype.setLoadedDroppedFileHandler=function(a,b){b=void 0===b?"":b;var c=this,d=this.getBodyStump(),e=d.getShadow(),f=function(a){a=a.originalEvent;var b=a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect="move"===b||"linkMove"===b?"move":"copy"},g=function(a){a.preventDefault();a.stopPropagation();d.removeClassFromStump("dragOver");d.findStumpByChild("id dragOverHelp").removeStump();e.offShadowEvent(WillowShadowEvents.dragleave,g)};e.onShadowEvent(WillowShadowEvents.dragover,
function(a){f(a);a.preventDefault();a.stopPropagation();d.stumpHasClass("dragOver")||(d.insertChildNode("@div "+b+"\n id dragOverHelp"),d.addClassToStump("dragOver"),setTimeout(function(){e.onShadowEvent(WillowShadowEvents.dragleave,g)},50))});e.onShadowEvent(WillowShadowEvents.drop,function(b){b.preventDefault();b.stopPropagation();d.removeClassFromStump("dragOver");d.findStumpByChild("id dragOverHelp").removeStump();b=b.originalEvent.dataTransfer.items;for(var e=0;e<b.length;e++){var f=b[e].webkitGetAsEntry();
c._processDroppedEntry(f).then(function(b){a(b)})}});e.onShadowEvent(WillowShadowEvents.dragenter,function(a){a.preventDefault();a.stopPropagation()})};WillowBrowserProgram.prototype._processDroppedEntry=function(a,b){b=void 0===b?"":b;return a.isFile?this._processDroppedFile(b,a):_processDroppedDirectory(b,a)};
WillowBrowserProgram.prototype._processDroppedDirectory=function(a,b){var c=this;return new Promise(function(d,e){b.createReader().readEntries(function(e){for(var f=[],h=0;h<e.length;h++)f.push(c._processDroppedEntry(e[h],a+b.name+"/"));Promise.all(f).then(function(a){d(a)})})})};
WillowBrowserProgram.prototype._processDroppedFile=function(a,b){return new Promise(function(a,d){b.file(function(b){var c=new FileReader;c.onload=function(c){a({data:c.target.result,filename:b.name})};c.onerror=function(a){return d(a)};c.readAsText(b)})})};WillowBrowserProgram.prototype._getFocusedShadow=function(){var a=this.getStumpFromElement(document.activeElement);return a&&a.getShadow()};
WillowBrowserProgram.startApp=function(a){document.addEventListener("DOMContentLoaded",function(){window.app||(window.app=new a,window.app.renderApp())},!1)};window.WillowBrowserProgram=WillowBrowserProgram;var WillowBrowserShadow=function(a){AbstractWillowShadow.apply(this,arguments)};$jscomp.inherits(WillowBrowserShadow,AbstractWillowShadow);WillowBrowserShadow.prototype._getJQ=function(){return jQuery('[data-suid="'+this.getShadowStump()._getUid()+'"]')};
WillowBrowserShadow.prototype.getShadowElement=function(){return this._getJQ()[0]};WillowBrowserShadow.prototype.insertHtmlNode=function(a,b){var c=a.toHtmlWithSuids(),c=jQuery(c),d=this._getJQ();void 0===b?d.append(c):0===b?d.prepend(c):jQuery(d.children().get(b-1)).after(c);c.data("stump",a)};WillowBrowserShadow.prototype.getShadowPosition=function(){return this._getJQ().position()};WillowBrowserShadow.prototype.setShadowHtml=function(a){this._getJQ().html(a);return this};
WillowBrowserShadow.prototype.addClassToShadow=function(a){this._getJQ().addClass(a);return this};WillowBrowserShadow.prototype.removeClassFromShadow=function(a){this._getJQ().removeClass(a);return this};WillowBrowserShadow.prototype.onShadowEvent=function(a,b,c){this._getJQ().on(a,b,c);return this};WillowBrowserShadow.prototype.offShadowEvent=function(a,b){this._getJQ().off(a,b);return this};WillowBrowserShadow.prototype.triggerShadowEvent=function(a){this._getJQ().trigger(a);return this};
WillowBrowserShadow.prototype.getShadowHtml=function(){return this._getJQ().html()};WillowBrowserShadow.prototype.getShadowValue=function(){return this._getJQ().val()};WillowBrowserShadow.prototype.getShadowOuterHeight=function(){return this._getJQ().outerHeight()};WillowBrowserShadow.prototype.getShadowOuterWidth=function(){return this._getJQ().outerWidth()};WillowBrowserShadow.prototype.setShadowValue=function(a){this._getJQ().val(a);return this};WillowBrowserShadow.prototype.isShadowChecked=function(){return this._getJQ().is(":checked")};
WillowBrowserShadow.prototype.toggleShadow=function(){this._getJQ().toggle();return this};WillowBrowserShadow.prototype.getShadowWidth=function(){return this._getJQ().width()};WillowBrowserShadow.prototype.getShadowHeight=function(){return this._getJQ().height()};WillowBrowserShadow.prototype.makeResizable=function(a){this._getJQ().resizable(a);return this};WillowBrowserShadow.prototype.getShadowOffset=function(){return this._getJQ().offset()};
WillowBrowserShadow.prototype.removeShadow=function(){this._getJQ().remove();return this};WillowBrowserShadow.prototype.makeDraggable=function(a){this._getJQ().draggable(a);return this};WillowBrowserShadow.prototype.getShadowCss=function(a){return this._getJQ().css(a)};WillowBrowserShadow.prototype.setShadowCss=function(a){this._getJQ().css(a);return this};WillowBrowserShadow.prototype.focusShadow=function(){this._getJQ().focus();return this};
WillowBrowserShadow.prototype.makeSelectable=function(a){this._getJQ().selectable(a);return this};WillowBrowserShadow.prototype.bindShadow=function(a,b){this._getJQ().bind(a,b);return this};WillowBrowserShadow.prototype.isShadowResizable=function(){return 0<this._getJQ().find(".ui-resizable-handle").length};window.WillowBrowserShadow=WillowBrowserShadow;WillowBrowserProgram.startApp(OhayoApp);var WillowProgram=function(a){return AbstractWillowProgram.apply(this,arguments)||this};
$jscomp.inherits(WillowProgram,AbstractWillowProgram);window.WillowProgram=WillowProgram;var WillowShadow=function(a){AbstractWillowShadow.apply(this,arguments)};$jscomp.inherits(WillowShadow,AbstractWillowShadow);window.WillowShadow=WillowShadow;
var WillowShadowEvents={click:"click",change:"change",mouseover:"mouseover",mouseout:"mouseout",mousedown:"mousedown",contextmenu:"contextmenu",keypress:"keypress",keyup:"keyup",focus:"focus",mousemove:"mousemove",dblclick:"dblclick",submit:"submit",blur:"blur",paste:"paste",copy:"copy",resize:"resize",cut:"cut",drop:"drop",dragover:"dragover",dragenter:"dragenter",dragleave:"dragleave",ready:"ready"};window.WillowShadowEvents=WillowShadowEvents;
